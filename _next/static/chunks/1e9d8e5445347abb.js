(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16015,(e,t,s)=>{},98547,(e,t,s)=>{var n=e.i(47167);e.r(16015);var r=e.r(71645),a=r&&"object"==typeof r&&"default"in r?r:{default:r},i=void 0!==n.default&&n.default.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,s=t.name,n=void 0===s?"stylesheet":s,r=t.optimizeForSpeed,a=void 0===r?i:r;d(l(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",d("boolean"==typeof a,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=a,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(i||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(d(l(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return i||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var n=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,n))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var s="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(n){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var n=this._tags[e];d(n,"old rule at index `"+e+"` not found"),n.textContent=t}return e},s.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},s.makeStyleTag=function(e,t,s){t&&d(l(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var r=document.head||document.getElementsByTagName("head")[0];return s?r.insertBefore(n,s):r.appendChild(n),n},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},m={};function x(e,t){if(!t)return"jsx-"+e;var s=String(t),n=e+s;return m[n]||(m[n]="jsx-"+c(e+"-"+s)),m[n]}function u(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var s=e+t;return m[s]||(m[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),m[s]}var h=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,n=void 0===s?null:s,r=t.optimizeForSpeed,a=void 0!==r&&r;this._sheet=n||new o({name:"styled-jsx",optimizeForSpeed:a}),this._sheet.inject(),n&&"boolean"==typeof a&&(this._sheet.setOptimizeForSpeed(a),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),n=s.styleId,r=s.rules;if(n in this._instancesCounts){this._instancesCounts[n]+=1;return}var a=r.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[n]=a,this._instancesCounts[n]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var n=this._fromServer&&this._fromServer[s];n?(n.parentNode.removeChild(n),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],n=e[1];return a.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:n}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,n=e.id;if(s){var r=x(n,s);return{styleId:r,rules:Array.isArray(t)?t.map(function(e){return u(r,e)}):[u(r,t)]}}return{styleId:x(n),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),p=r.createContext(null);function g(){return new h}function b(){return r.useContext(p)}p.displayName="StyleSheetContext";var f=a.default.useInsertionEffect||a.default.useLayoutEffect,k="undefined"!=typeof window?g():void 0;function j(e){var t=k||b();return t&&("undefined"==typeof window?t.add(e):f(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}j.dynamic=function(e){return e.map(function(e){return x(e[0],e[1])}).join(" ")},s.StyleRegistry=function(e){var t=e.registry,s=e.children,n=r.useContext(p),i=r.useState(function(){return n||t||g()})[0];return a.default.createElement(p.Provider,{value:i},s)},s.createStyleRegistry=g,s.style=j,s.useStyleRegistry=b},37902,(e,t,s)=>{t.exports=e.r(98547).style},33278,e=>{"use strict";var t,s,n,r,a,i,l=e.i(43476),o=e.i(71645),d=e.i(22016),c=e.i(19424),m=e.i(13204),x=e.i(7066),u=e.i(86535),h=e.i(55584),p=e.i(98901),g=e.i(73986),b=e.i(60825),f=e.i(60095);let k={planning:"#60a5fa",active:"#4ade80",completed:"#9ca3af",cancelled:"#f87171"},j={planning:"Planning",active:"Active",completed:"Completed",cancelled:"Cancelled"};function y(e){let t,s="active"===e.state,n="archived"===e.state,r="planning"===e.status,a="completed"===e.status,i="cancelled"===e.status,l="active"===e.status,o=e.actualStartDate||e.plannedStartDate;if(o&&e.durationDays){let s=new Date(o);s.setDate(s.getDate()+e.durationDays),t=s.toISOString().split("T")[0]}let d=null,c=null,m=0;if(l&&e.actualStartDate){let t=new Date;t.setHours(0,0,0,0);let s=new Date(e.actualStartDate);s.setHours(0,0,0,0),c=Math.floor((t.getTime()-s.getTime())/864e5),d=e.durationDays-c,m=Math.min(100,Math.max(0,c/e.durationDays*100))}return{...e,isActive:s,isArchived:n,isPlanning:r,isCompleted:a,isCancelled:i,hasComments:e.comments?.length>0,commentCount:e.comments?.length||0,hasActivity:e.activity?.length>0,activityCount:e.activity?.length||0,displayName:e.name,statusLabel:j[e.status],statusColor:k[e.status],plannedEndDate:t,daysRemaining:d,daysElapsed:c,progress:m,raw:e,canStart:t=>{let s=t.some(t=>"active"===t.status&&t.id!==e.id);return r&&!n&&!s},canComplete:()=>l&&!n,canCancel:()=>(r||l)&&!n,canArchive:()=>(a||i)&&!n,canUnarchive:()=>n,canDelete:()=>r&&!n}}var v=e.i(91161),z=e.i(54759);function w(e,t){e.assign("day",t.getDate()),e.assign("month",t.getMonth()+1),e.assign("year",t.getFullYear())}function N(e,t){e.assign("hour",t.getHours()),e.assign("minute",t.getMinutes()),e.assign("second",t.getSeconds()),e.assign("millisecond",t.getMilliseconds()),e.assign("meridiem",12>t.getHours()?r.AM:r.PM)}function C(e,t){e.imply("day",t.getDate()),e.imply("month",t.getMonth()+1),e.imply("year",t.getFullYear())}function D(e,t){e.imply("hour",t.getHours()),e.imply("minute",t.getMinutes()),e.imply("second",t.getSeconds()),e.imply("millisecond",t.getMilliseconds()),e.imply("meridiem",12>t.getHours()?r.AM:r.PM)}(t=r||(r={}))[t.AM=0]="AM",t[t.PM=1]="PM",(s=a||(a={}))[s.SUNDAY=0]="SUNDAY",s[s.MONDAY=1]="MONDAY",s[s.TUESDAY=2]="TUESDAY",s[s.WEDNESDAY=3]="WEDNESDAY",s[s.THURSDAY=4]="THURSDAY",s[s.FRIDAY=5]="FRIDAY",s[s.SATURDAY=6]="SATURDAY",(n=i||(i={}))[n.JANUARY=1]="JANUARY",n[n.FEBRUARY=2]="FEBRUARY",n[n.MARCH=3]="MARCH",n[n.APRIL=4]="APRIL",n[n.MAY=5]="MAY",n[n.JUNE=6]="JUNE",n[n.JULY=7]="JULY",n[n.AUGUST=8]="AUGUST",n[n.SEPTEMBER=9]="SEPTEMBER",n[n.OCTOBER=10]="OCTOBER",n[n.NOVEMBER=11]="NOVEMBER",n[n.DECEMBER=12]="DECEMBER";let S={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:120,timezoneOffsetNonDst:60,dstStart:e=>P(e,i.MARCH,a.SUNDAY,2),dstEnd:e=>P(e,i.OCTOBER,a.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-300,timezoneOffsetNonDst:-360,dstStart:e=>T(e,i.MARCH,a.SUNDAY,2,2),dstEnd:e=>T(e,i.NOVEMBER,a.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-240,timezoneOffsetNonDst:-300,dstStart:e=>T(e,i.MARCH,a.SUNDAY,2,2),dstEnd:e=>T(e,i.NOVEMBER,a.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-360,timezoneOffsetNonDst:-420,dstStart:e=>T(e,i.MARCH,a.SUNDAY,2,2),dstEnd:e=>T(e,i.NOVEMBER,a.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-420,timezoneOffsetNonDst:-480,dstStart:e=>T(e,i.MARCH,a.SUNDAY,2,2),dstEnd:e=>T(e,i.NOVEMBER,a.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function T(e,t,s,n,r=0){let a=0,i=0;for(;i<n;)new Date(e,t-1,++a).getDay()===s&&i++;return new Date(e,t-1,a,r)}function P(e,t,s,n=0){let r,a=0===s?7:s,i=new Date(e,t-1+1,1,12),l=0===i.getDay()?7:i.getDay();return r=l===a?7:l<a?7+l-a:l-a,i.setDate(i.getDate()-r),new Date(e,t-1,i.getDate(),n)}function A(e,t,s={}){if(null==e)return null;if("number"==typeof e)return e;let n=s[e]??S[e];return null==n?null:"number"==typeof n?n:null==t?null:t>n.dstStart(t.getFullYear())&&!(t>n.dstEnd(t.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}let E={day:0,second:0,millisecond:0};function M(e,t){let s=new Date(e);if(t.y&&(t.year=t.y,delete t.y),t.mo&&(t.month=t.mo,delete t.mo),t.M&&(t.month=t.M,delete t.M),t.w&&(t.week=t.w,delete t.w),t.d&&(t.day=t.d,delete t.d),t.h&&(t.hour=t.h,delete t.h),t.m&&(t.minute=t.m,delete t.m),t.s&&(t.second=t.s,delete t.s),t.ms&&(t.millisecond=t.ms,delete t.ms),"year"in t){let e=Math.floor(t.year);s.setFullYear(s.getFullYear()+e);let n=t.year-e;n>0&&(t.month=t?.month??0,t.month+=12*n)}if("quarter"in t){let e=Math.floor(t.quarter);s.setMonth(s.getMonth()+3*e)}if("month"in t){let e=Math.floor(t.month);s.setMonth(s.getMonth()+e);let n=t.month-e;n>0&&(t.week=t?.week??0,t.week+=4*n)}if("week"in t){let e=Math.floor(t.week);s.setDate(s.getDate()+7*e);let n=t.week-e;n>0&&(t.day=t?.day??0,t.day+=Math.round(7*n))}if("day"in t){let e=Math.floor(t.day);s.setDate(s.getDate()+e);let n=t.day-e;n>0&&(t.hour=t?.hour??0,t.hour+=Math.round(24*n))}if("hour"in t){let e=Math.floor(t.hour);s.setHours(s.getHours()+e);let n=t.hour-e;n>0&&(t.minute=t?.minute??0,t.minute+=Math.round(60*n))}if("minute"in t){let e=Math.floor(t.minute);s.setMinutes(s.getMinutes()+e);let n=t.minute-e;n>0&&(t.second=t?.second??0,t.second+=Math.round(60*n))}if("second"in t){let e=Math.floor(t.second);s.setSeconds(s.getSeconds()+e);let n=t.second-e;n>0&&(t.millisecond=t?.millisecond??0,t.millisecond+=Math.round(1e3*n))}if("millisecond"in t){let e=Math.floor(t.millisecond);s.setMilliseconds(s.getMilliseconds()+e)}return s}function $(e){let t={};for(let s in e)t[s]=-e[s];return t}class R{instant;timezoneOffset;constructor(e,t){this.instant=e??new Date,this.timezoneOffset=t??null}static fromDate(e){return new R(e)}static fromInput(e,t){if(e instanceof Date)return R.fromDate(e);let s=e?.instant??new Date,n=A(e?.timezone,s,t);return new R(s,n)}getDateWithAdjustedTimezone(){let e=new Date(this.instant);return null!==this.timezoneOffset&&e.setMinutes(e.getMinutes()-this.getSystemTimezoneAdjustmentMinute(this.instant)),e}getSystemTimezoneAdjustmentMinute(e,t){(!e||0>e.getTime())&&(e=new Date);let s=-e.getTimezoneOffset(),n=t??this.timezoneOffset??s;return s-n}getTimezoneOffset(){return this.timezoneOffset??-this.instant.getTimezoneOffset()}}class I{knownValues;impliedValues;reference;_tags=new Set;constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(const e in t)this.knownValues[e]=t[e];const s=e.getDateWithAdjustedTimezone();this.imply("day",s.getDate()),this.imply("month",s.getMonth()+1),this.imply("year",s.getFullYear()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}static createRelativeFromReference(e,t=E){let s=M(e.getDateWithAdjustedTimezone(),t),n=new I(e);return n.addTag("result/relativeDate"),"hour"in t||"minute"in t||"second"in t||"millisecond"in t?(n.addTag("result/relativeDateAndTime"),N(n,s),w(n,s),n.assign("timezoneOffset",e.getTimezoneOffset())):(D(n,s),n.imply("timezoneOffset",e.getTimezoneOffset()),"day"in t?(n.assign("day",s.getDate()),n.assign("month",s.getMonth()+1),n.assign("year",s.getFullYear()),n.assign("weekday",s.getDay())):"week"in t?(n.assign("day",s.getDate()),n.assign("month",s.getMonth()+1),n.assign("year",s.getFullYear()),n.imply("weekday",s.getDay())):(n.imply("day",s.getDate()),"month"in t?(n.assign("month",s.getMonth()+1),n.assign("year",s.getFullYear())):(n.imply("month",s.getMonth()+1),"year"in t?n.assign("year",s.getFullYear()):n.imply("year",s.getFullYear())))),n}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues||(this.impliedValues[e]=t),this}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}addDurationAsImplied(e){let t=M(this.dateWithoutTimezoneAdjustment(),e);return("day"in e||"week"in e||"month"in e||"year"in e)&&(this.delete(["day","weekday","month","year"]),this.imply("day",t.getDate()),this.imply("weekday",t.getDay()),this.imply("month",t.getMonth()+1),this.imply("year",t.getFullYear())),("second"in e||"minute"in e||"hour"in e)&&(this.delete(["second","minute","hour"]),this.imply("second",t.getSeconds()),this.imply("minute",t.getMinutes()),this.imply("hour",t.getHours())),this}delete(e){for(let t of("string"==typeof e&&(e=[e]),e))delete this.knownValues[t],delete this.impliedValues[t]}clone(){let e=new I(this.reference);for(let t in e.knownValues={},e.impliedValues={},this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")&&!this.isCertain("year")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return e.getFullYear()===this.get("year")&&e.getMonth()===this.get("month")-1&&e.getDate()===this.get("day")&&(null==this.get("hour")||e.getHours()==this.get("hour"))&&(null==this.get("minute")||e.getMinutes()==this.get("minute"))}toString(){return`[ParsingComponents {
            tags: ${JSON.stringify(Array.from(this._tags).sort())}, 
            knownValues: ${JSON.stringify(this.knownValues)}, 
            impliedValues: ${JSON.stringify(this.impliedValues)}}, 
            reference: ${JSON.stringify(this.reference)}]`}date(){let e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+6e4*t)}addTag(e){return this._tags.add(e),this}addTags(e){for(let t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}}class F{refDate;index;text;reference;start;end;constructor(e,t,s,n,r){this.reference=e,this.refDate=e.instant,this.index=t,this.text=s,this.start=n||new I(e),this.end=r}clone(){let e=new F(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}addTag(e){return this.start.addTag(e),this.end&&this.end.addTag(e),this}addTags(e){return this.start.addTags(e),this.end&&this.end.addTags(e),this}tags(){let e=new Set(this.start.tags());if(this.end)for(let t of this.end.tags())e.add(t);return e}toString(){let e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}}function L(e,t,s="\\s{0,5},?\\s{0,5}"){let n=t.replace(/\((?!\?)/g,"(?:");return`${e}${n}(?:${s}${n}){0,10}`}function W(e){let t=(e instanceof Array?[...e]:e instanceof Map?Array.from(e.keys()):Object.keys(e)).sort((e,t)=>t.length-e.length).join("|").replace(/\./g,"\\.");return`(?:${t})`}function O(e){return e<100&&(e>50?e+=1900:e+=2e3),e}function B(e,t,s){let n=new Date(e);n.setMonth(s-1),n.setDate(t);let r=M(n,{year:1}),a=M(n,{year:-1});return Math.abs(r.getTime()-e.getTime())<Math.abs(n.getTime()-e.getTime())?n=r:Math.abs(a.getTime()-e.getTime())<Math.abs(n.getTime()-e.getTime())&&(n=a),n.getFullYear()}let Y={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},_={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},H={..._,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},U={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},V={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},q={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"day",days:"day",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},K={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"day",day:"day",days:"day",w:"week",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...q},G=`(?:${W(U)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`,J=`(?:${W(V)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Z(e){let t=e.toLowerCase();return void 0!==V[t]?V[t]:parseInt(t=t.replace(/(?:st|nd|rd|th)$/i,""))}let Q="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function X(e){return/BE/i.test(e)?parseInt(e=e.replace(/BE/i,""))-543:/BCE?/i.test(e)?-parseInt(e=e.replace(/BCE?/i,"")):/(AD|CE)/i.test(e)?parseInt(e=e.replace(/(AD|CE)/i,"")):O(parseInt(e))}let ee=`(${G})\\s{0,3}(${W(K)})`,et=RegExp(ee,"i"),es=`(${G})\\s{0,3}(${W(q)})`,en="\\s{0,5},?(?:\\s*and)?\\s{0,5}",er=L("(?:(?:about|around)\\s{0,3})?",ee,en),ea=L("(?:(?:about|around)\\s{0,3})?",es,en);function ei(e){let t={},s=e,n=et.exec(s);for(;n;)(function(e,t){if(t[0].match(/^[a-zA-Z]+$/))return;let s=function(e){let t=e.toLowerCase();if(void 0!==U[t])return U[t];if("a"===t||"an"===t||"the"==t)return 1;if(t.match(/few/))return 3;if(t.match(/half/))return .5;if(t.match(/couple/))return 2;else if(t.match(/several/))return 7;return parseFloat(t)}(t[1]);e[K[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length).trim(),n=et.exec(s);return 0==Object.keys(t).length?null:t}class el{innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}cachedInnerPattern=null;cachedPattern=null;pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)||(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags)),this.cachedPattern}extract(e,t){let s=t[1]??"";t.index=t.index+s.length,t[0]=t[0].substring(s.length);for(let e=2;e<t.length;e++)t[e-1]=t[e];return this.innerExtract(e,t)}}let eo=RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${er})(?=\\W|$)`,"i"),ed=RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${er})(?=\\W|$)`,"i"),ec=RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${ea})(?=\\W|$)`,"i");class em extends el{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?ec:e.option.forwardDate?eo:ed}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;let s=ei(t[1]);return s?I.createRelativeFromReference(e.reference,s):null}}let ex=RegExp(`(?:on\\s{0,3})?(${J})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${J}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${W(H)})(?:(?:-|/|,?\\s{0,3})(${Q}(?!\\w)))?(?=\\W|$)`,"i");class eu extends el{innerPattern(){return ex}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=H[t[3].toLowerCase()],r=Z(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){let e=X(t[4]);s.start.assign("year",e)}else{let t=B(e.refDate,r,n);s.start.imply("year",t)}if(t[2]){let e=Z(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}let eh=RegExp(`(${W(H)})(?:-|/|\\s*,?\\s*)(${J})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${J})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${Q}))?(?=\\W|$)(?!\\:\\d)`,"i");class ep extends el{shouldSkipYearLikeDate;constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return eh}innerExtract(e,t){let s=H[t[1].toLowerCase()],n=Z(t[2]);if(n>31||this.shouldSkipYearLikeDate&&!t[3]&&!t[4]&&t[2].match(/^2[0-5]$/))return null;let r=e.createParsingComponents({day:n,month:s}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[4]){let e=X(t[4]);r.assign("year",e)}else{let t=B(e.refDate,n,s);r.imply("year",t)}if(!t[3])return r;let a=Z(t[3]),i=e.createParsingResult(t.index,t[0]);return i.start=r,i.end=r.clone(),i.end.assign("day",a),i}}let eg=RegExp(`((?:in)\\s*)?(${W(H)})\\s*(?:(?:,|-|of)?\\s*(${Q})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class eb extends el{innerPattern(){return eg}innerExtract(e,t){let s=t[2].toLowerCase();if(t[0].length<=3&&!_[s])return null;let n=e.createParsingResult(t.index+(t[1]||"").length,t.index+t[0].length);n.start.imply("day",1),n.start.addTag("parser/ENMonthNameParser");let r=H[s];if(n.start.assign("month",r),t[3]){let e=X(t[3]);n.start.assign("year",e)}else{let t=B(e.refDate,1,r);n.start.imply("year",t)}return n}}let ef=RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${W(H)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class ek extends el{strictMonthDateOrder;constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return ef}innerExtract(e,t){let s=parseInt(t[1]),n=parseInt(t[4]),r=t[3]?parseInt(t[3]):H[t[2].toLowerCase()];if(r<1||r>12){if(this.strictMonthDateOrder)return null;n>=1&&n<=12&&([r,n]=[n,r])}return n<1||n>31?null:{day:n,month:r,year:s}}}let ej=RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class ey extends el{innerPattern(){return ej}innerExtract(e,t){let s=parseInt(t[2]),n=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",n).assign("year",s)}}class ev{strictMode;constructor(e=!1){this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let s=this.extractPrimaryTimeComponents(e,t);if(!s)return t[0].match(/^\d{4}/)?t.index+=4:t.index+=t[0].length,null;let n=t.index+t[1].length,r=t[0].substring(t[1].length),a=e.createParsingResult(n,r,s);t.index+=t[0].length;let i=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(i);return r.match(/^\d{3,4}/)&&l&&(l[0].match(/^\s*([+-])\s*\d{2,4}$/)||l[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,s=!1){let n=e.createParsingComponents(),a=0,i=null,l=parseInt(t[2]);if(l>100){if(4==t[2].length&&null==t[3]&&!t[6]||this.strictMode||null!=t[3])return null;a=l%100,l=Math.floor(l/100)}if(l>24)return null;if(null!=t[3]){if(1==t[3].length&&!t[6])return null;a=parseInt(t[3])}if(a>=60)return null;if(l>12&&(i=r.PM),null!=t[6]){if(l>12)return null;let e=t[6][0].toLowerCase();"a"==e&&(i=r.AM,12==l&&(l=0)),"p"==e&&(i=r.PM,12!=l&&(l+=12))}if(n.assign("hour",l),n.assign("minute",a),null!==i?n.assign("meridiem",i):l<12?n.imply("meridiem",r.AM):n.imply("meridiem",r.PM),null!=t[5]){let e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;n.assign("millisecond",e)}if(null!=t[4]){let e=parseInt(t[4]);if(e>=60)return null;n.assign("second",e)}return n}extractFollowingTimeComponents(e,t,s){let n=e.createParsingComponents();if(null!=t[5]){let e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;n.assign("millisecond",e)}if(null!=t[4]){let e=parseInt(t[4]);if(e>=60)return null;n.assign("second",e)}let a=parseInt(t[2]),i=0,l=-1;if(null!=t[3]?i=parseInt(t[3]):a>100&&(i=a%100,a=Math.floor(a/100)),i>=60||a>24)return null;if(a>=12&&(l=r.PM),null!=t[6]){if(a>12)return null;let e=t[6][0].toLowerCase();"a"==e&&(l=r.AM,12==a&&(a=0,n.isCertain("day")||n.imply("day",n.get("day")+1))),"p"==e&&(l=r.PM,12!=a&&(a+=12)),s.start.isCertain("meridiem")||(l==r.AM?(s.start.imply("meridiem",r.AM),12==s.start.get("hour")&&s.start.assign("hour",0)):(s.start.imply("meridiem",r.PM),12!=s.start.get("hour")&&s.start.assign("hour",s.start.get("hour")+12)))}return n.assign("hour",a),n.assign("minute",i),l>=0?n.assign("meridiem",l):s.start.isCertain("meridiem")&&s.start.get("hour")>12?s.start.get("hour")-12>a?n.imply("meridiem",r.AM):a<=12&&(n.assign("hour",a+12),n.assign("meridiem",r.PM)):a>12?n.imply("meridiem",r.PM):a<=12&&n.imply("meridiem",r.AM),n.date().getTime()<s.start.date().getTime()&&n.imply("day",n.get("day")+1),n}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let e=t[1];if(this.strictMode||e.includes(".")&&!e.match(/\d(\.\d{2})+$/)||parseInt(e)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let e=t[1],s=t[2];if(s.includes(".")&&!s.match(/\d(\.\d{2})+$/))return null;let n=parseInt(s),r=parseInt(e);if(n>24||r>24)return null}return e}cachedPrimaryPrefix=null;cachedPrimarySuffix=null;cachedPrimaryTimePattern=null;getPrimaryTimePatternThroughCache(){var e;let t=this.primaryPrefix(),s=this.primarySuffix();return this.cachedPrimaryPrefix===t&&this.cachedPrimarySuffix===s?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=(e=this.primaryPatternLeftBoundary(),RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${s}`,this.patternFlags())),this.cachedPrimaryPrefix=t,this.cachedPrimarySuffix=s,this.cachedPrimaryTimePattern)}cachedFollowingPhase=null;cachedFollowingSuffix=null;cachedFollowingTimePatten=null;getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i"),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}}class ez extends ev{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let s=super.extractPrimaryTimeComponents(e,t);if(!s)return s;if(t[0].endsWith("night")){let e=s.get("hour");e>=6&&e<12?(s.assign("hour",s.get("hour")+12),s.assign("meridiem",r.PM)):e<6&&s.assign("meridiem",r.AM)}if(t[0].endsWith("afternoon")){s.assign("meridiem",r.PM);let e=s.get("hour");e>=0&&e<=6&&s.assign("hour",s.get("hour")+12)}return t[0].endsWith("morning")&&(s.assign("meridiem",r.AM),12>s.get("hour")&&s.assign("hour",s.get("hour"))),s.addTag("parser/ENTimeExpressionParser")}extractFollowingTimeComponents(e,t,s){let n=super.extractFollowingTimeComponents(e,t,s);return n&&n.addTag("parser/ENTimeExpressionParser"),n}}let ew=RegExp(`(${er})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),eN=RegExp(`(${ea})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class eC extends el{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?eN:ew}innerExtract(e,t){let s=ei(t[1]);return s?I.createRelativeFromReference(e.reference,$(s)):null}}let eD=RegExp(`(${er})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),eS=RegExp(`(${ea})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i");class eT extends el{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?eS:eD}innerExtract(e,t){let s=ei(t[1]);return s?I.createRelativeFromReference(e.reference,s):null}}class eP{refine(e,t){return t.filter(t=>this.isValid(e,t))}}class eA{refine(e,t){if(t.length<2)return t;let s=[],n=t[0],r=null;for(let a=1;a<t.length;a++){r=t[a];let i=e.text.substring(n.index+n.text.length,r.index);if(this.shouldMergeResults(i,n,r,e)){let t=n,s=r,a=this.mergeResults(i,t,s,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${t} and ${s} into ${a}`)}),n=a}else s.push(n),n=r}return null!=n&&s.push(n),s}}class eE extends eA{shouldMergeResults(e,t,s){return!t.end&&!s.end&&null!=e.match(this.patternBetween())}mergeResults(e,t,s){if(t.start.isOnlyWeekdayComponent()||s.start.isOnlyWeekdayComponent()||(s.start.getCertainComponents().forEach(e=>{t.start.isCertain(e)||t.start.imply(e,s.start.get(e))}),t.start.getCertainComponents().forEach(e=>{s.start.isCertain(e)||s.start.imply(e,t.start.get(e))})),t.start.date()>s.start.date()){let e=t.start.date(),n=s.start.date();s.start.isOnlyWeekdayComponent()&&M(n,{day:7})>e?(n=M(n,{day:7}),s.start.imply("day",n.getDate()),s.start.imply("month",n.getMonth()+1),s.start.imply("year",n.getFullYear())):t.start.isOnlyWeekdayComponent()&&M(e,{day:-7})<n?(e=M(e,{day:-7}),t.start.imply("day",e.getDate()),t.start.imply("month",e.getMonth()+1),t.start.imply("year",e.getFullYear())):s.start.isDateWithUnknownYear()&&M(n,{year:1})>e?(n=M(n,{year:1}),s.start.imply("year",n.getFullYear())):t.start.isDateWithUnknownYear()&&M(e,{year:-1})<n?(e=M(e,{year:-1}),t.start.imply("year",e.getFullYear())):[s,t]=[t,s]}let n=t.clone();return n.start=t.start,n.end=s.start,n.index=Math.min(t.index,s.index),t.index<s.index?n.text=t.text+e+s.text:n.text=s.text+e+t.text,n}}class eM extends eE{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function e$(e,t){let s=e.clone();if(s.start=eR(e.start,t.start),null!=e.end||null!=t.end){let n=eR(null==e.end?e.start:e.end,null==t.end?t.start:t.end);if(null==e.end&&n.date().getTime()<s.start.date().getTime()){let e=new Date(n.date().getTime());e.setDate(e.getDate()+1),n.isCertain("day")?w(n,e):C(n,e)}s.end=n}return s}function eR(e,t){let s=e.clone();return t.isCertain("hour")?(s.assign("hour",t.get("hour")),s.assign("minute",t.get("minute")),t.isCertain("second")?(s.assign("second",t.get("second")),t.isCertain("millisecond")?s.assign("millisecond",t.get("millisecond")):s.imply("millisecond",t.get("millisecond"))):(s.imply("second",t.get("second")),s.imply("millisecond",t.get("millisecond")))):(s.imply("hour",t.get("hour")),s.imply("minute",t.get("minute")),s.imply("second",t.get("second")),s.imply("millisecond",t.get("millisecond"))),t.isCertain("timezoneOffset")&&s.assign("timezoneOffset",t.get("timezoneOffset")),t.isCertain("meridiem")?s.assign("meridiem",t.get("meridiem")):null!=t.get("meridiem")&&null==s.get("meridiem")&&s.imply("meridiem",t.get("meridiem")),s.get("meridiem")==r.PM&&12>s.get("hour")&&(t.isCertain("hour")?s.assign("hour",s.get("hour")+12):s.imply("hour",s.get("hour")+12)),s.addTags(e.tags()),s.addTags(t.tags()),s}class eI extends eA{shouldMergeResults(e,t,s){return(t.start.isOnlyDate()&&s.start.isOnlyTime()||s.start.isOnlyDate()&&t.start.isOnlyTime())&&null!=e.match(this.patternBetween())}mergeResults(e,t,s){let n=t.start.isOnlyDate()?e$(t,s):e$(s,t);return n.index=t.index,n.text=t.text+e+s.text,n}}class eF extends eI{patternBetween(){return RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|∙|:)?\\s*$")}}let eL=RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class eW{timezoneOverrides;constructor(e){this.timezoneOverrides=e}refine(e,t){let s=e.option.timezones??{};return t.forEach(t=>{let n=e.text.substring(t.index+t.text.length),r=eL.exec(n);if(!r)return;let a=r[1].toUpperCase(),i=A(a,t.start.date()??t.refDate??new Date,{...this.timezoneOverrides,...s});if(null==i)return;e.debug(()=>{console.log(`Extracting timezone: '${a}' into: ${i} for: ${t.start}`)});let l=t.start.get("timezoneOffset");!(null!==l&&i!=l&&(t.start.isCertain("timezoneOffset")||a!=r[1]))&&(!t.start.isOnlyDate()||a==r[1])&&(t.text+=r[0],t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",i),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",i))}),t}}let eO=RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i");class eB{refine(e,t){return t.forEach(function(t){if(t.start.isCertain("timezoneOffset"))return;let s=e.text.substring(t.index+t.text.length),n=eO.exec(s);if(!n)return;e.debug(()=>{console.log(`Extracting timezone: '${n[0]}' into : ${t}`)});let r=60*parseInt(n[2])+parseInt(n[3]||"0");r>840||("-"===n[1]&&(r=-r),null!=t.end&&t.end.assign("timezoneOffset",r),t.start.assign("timezoneOffset",r),t.text+=n[0])}),t}}class eY{refine(e,t){if(t.length<2)return t;let s=[],n=t[0];for(let r=1;r<t.length;r++){let a=t[r];if(a.index>=n.index+n.text.length){s.push(n),n=a;continue}let i=null,l=null;a.text.length>n.text.length?(i=a,l=n):(i=n,l=a),e.debug(()=>{console.log(`${this.constructor.name} remove ${l} by ${i}`)}),n=i}return null!=n&&s.push(n),s}}class e_{refine(e,t){return e.option.forwardDate&&t.forEach(t=>{let s=e.reference.getDateWithAdjustedTimezone();if(t.start.isOnlyTime()&&e.reference.instant>t.start.date()){let s=e.reference.getDateWithAdjustedTimezone(),n=new Date(s);n.setDate(n.getDate()+1),C(t.start,n),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} time from the ref date (${s}) to the following day (${n})`)}),t.end&&t.end.isOnlyTime()&&(C(t.end,n),t.start.date()>t.end.date()&&(n.setDate(n.getDate()+1),C(t.end,n)))}if(t.start.isOnlyWeekdayComponent()&&s>t.start.date()){let n=t.start.get("weekday")-s.getDay();if(n<=0&&(n+=7),s=M(s,{day:n}),C(t.start,s),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.start})`)}),t.end&&t.end.isOnlyWeekdayComponent()){let n=t.end.get("weekday")-s.getDay();n<=0&&(n+=7),s=M(s,{day:n}),C(t.end,s),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.end})`)})}}if(t.start.isDateWithUnknownYear()&&s>t.start.date())for(let n=0;n<3&&s>t.start.date();n++)t.start.imply("year",t.start.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} year (${t.start})`)}),t.end&&!t.end.isCertain("year")&&(t.end.imply("year",t.end.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} month (${t.start})`)}))}),t}}class eH extends eP{strictMode;constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):!this.strictMode||this.isStrictModeValid(e,t):(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return!t.start.isOnlyWeekdayComponent()||(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1)}}let eU=RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i");class eV extends el{innerPattern(){return eU}innerExtract(e,t){let s=e.createParsingComponents({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])});if(null!=t[4]&&(s.assign("hour",parseInt(t[4])),s.assign("minute",parseInt(t[5])),null!=t[6]&&s.assign("second",parseInt(t[6])),null!=t[7]&&s.assign("millisecond",parseInt(t[7])),null!=t[8])){let e=0;if(t[9]){let s=parseInt(t[9]),n=0;null!=t[10]&&(n=parseInt(t[10])),(e=60*s)<0?e-=n:e+=n}s.assign("timezoneOffset",e)}return s.addTag("parser/ISOFormatParser")}}class eq extends eA{mergeResults(e,t,s){let n=s.clone();return n.index=t.index,n.text=t.text+e+n.text,n.start.assign("weekday",t.start.get("weekday")),n.end&&n.end.assign("weekday",t.start.get("weekday")),n}shouldMergeResults(e,t,s){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&s.start.isCertain("day")&&null!=e.match(/^,?\s*$/)}}function eK(e,t=!1){return e.parsers.unshift(new eV),e.refiners.unshift(new eq),e.refiners.unshift(new eB),e.refiners.unshift(new eY),e.refiners.push(new eW),e.refiners.push(new eY),e.refiners.push(new e_),e.refiners.push(new eH(t)),e}function eG(e){let t=e.getDateWithAdjustedTimezone(),s=new I(e,{});return w(s,t),N(s,t),s.assign("timezoneOffset",e.getTimezoneOffset()),s.addTag("casualReference/now"),s}function eJ(e){let t=e.getDateWithAdjustedTimezone(),s=new I(e,{});return w(s,t),D(s,t),s.delete("meridiem"),s.addTag("casualReference/today"),s}function eZ(e){return eX(e,-1).addTag("casualReference/yesterday")}function eQ(e){return eX(e,1).addTag("casualReference/tomorrow")}function eX(e,t){let s=e.getDateWithAdjustedTimezone(),n=new I(e,{}),r=new Date(s.getTime());return r.setDate(r.getDate()+t),w(n,r),D(n,r),n.delete("meridiem"),n}function e0(e,t=22){let s=e.getDateWithAdjustedTimezone(),n=new I(e,{});return w(n,s),n.imply("hour",t),n.imply("meridiem",r.PM),n.addTag("casualReference/tonight"),n}function e1(e,t=0){let s=e.getDateWithAdjustedTimezone(),n=new I(e,{});return 6>s.getHours()&&(s=new Date(s.getTime()-864e5)),w(n,s),n.imply("hour",t),n}function e2(e,t=20){let s=new I(e,{});return s.imply("meridiem",r.PM),s.imply("hour",t),s.addTag("casualReference/evening"),s}function e4(e,t=20){let s=e.getDateWithAdjustedTimezone(),n=new I(e,{});return w(n,s=new Date(s.getTime()-864e5)),n.imply("hour",t),n.imply("meridiem",r.PM),n.addTag("casualReference/yesterday"),n.addTag("casualReference/evening"),n}function e5(e){let t=new I(e,{});return e.getDateWithAdjustedTimezone().getHours()>2&&t.addDurationAsImplied({day:1}),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/midnight"),t}function e6(e,t=6){let s=new I(e,{});return s.imply("meridiem",r.AM),s.imply("hour",t),s.imply("minute",0),s.imply("second",0),s.imply("millisecond",0),s.addTag("casualReference/morning"),s}function e3(e){let t=new I(e,{});return t.imply("meridiem",r.AM),t.assign("hour",12),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/noon"),t}let e9=/(now|today|tonight|tomorrow|overmorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class e7 extends el{innerPattern(e){return e9}innerExtract(e,t){let s=e.refDate,n=t[0].toLowerCase(),r=e.createParsingComponents();switch(n){case"now":r=eG(e.reference);break;case"today":r=eJ(e.reference);break;case"yesterday":r=eZ(e.reference);break;case"tomorrow":case"tmr":case"tmrw":r=eQ(e.reference);break;case"tonight":r=e0(e.reference);break;case"overmorrow":r=eX(e.reference,2);break;default:if(n.match(/last\s*night/)){if(s.getHours()>6){let e=new Date(s.getTime());e.setDate(e.getDate()-1),s=e}w(r,s),r.imply("hour",0)}}return r.addTag("parser/ENCasualDateParser"),r}}let e8=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class te extends el{innerPattern(){return e8}innerExtract(e,t){let s=null;switch(t[1].toLowerCase()){case"afternoon":s=function(e,t=15){let s=new I(e,{});return s.imply("meridiem",r.PM),s.imply("hour",t),s.imply("minute",0),s.imply("second",0),s.imply("millisecond",0),s.addTag("casualReference/afternoon"),s}(e.reference);break;case"evening":case"night":s=e2(e.reference);break;case"midnight":s=e5(e.reference);break;case"morning":s=e6(e.reference);break;case"noon":case"midday":s=e3(e.reference)}return s&&s.addTag("parser/ENCasualTimeParser"),s}}function tt(e,t,s){let n=function(e,t,s){var n,r;let i,l,o=e.getDay();switch(s){case"this":return ts(e,t);case"last":return tn(e,t);case"next":if(o==a.SUNDAY)return t==a.SUNDAY?7:t;if(o==a.SATURDAY){if(t==a.SATURDAY)return 7;if(t==a.SUNDAY)return 8;return 1+t}if(t<o&&t!=a.SUNDAY)return ts(e,t);return ts(e,t)+7}return i=tn(n=e,r=t),(l=ts(n,r))<-i?l:i}(e.getDateWithAdjustedTimezone(),t,s),r=new I(e);return(r=r.addDurationAsImplied({day:n})).assign("weekday",t),r}function ts(e,t){let s=t-e.getDay();return s<0&&(s+=7),s}function tn(e,t){let s=t-e.getDay();return s>=0&&(s-=7),s}let tr=RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${W(Y)}|weekend|weekday)(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i");class ta extends el{innerPattern(){return tr}innerExtract(e,t){let s,n=t[1],r=t[3],i=n||r;i=(i=i||"").toLowerCase();let l=null;"last"==i||"past"==i?l="last":"next"==i?l="next":"this"==i&&(l="this");let o=t[2].toLowerCase();if(void 0!==Y[o])s=Y[o];else if("weekend"==o)s="last"==l?a.SUNDAY:a.SATURDAY;else{if("weekday"!=o)return null;let t=e.reference.getDateWithAdjustedTimezone().getDay();t==a.SUNDAY||t==a.SATURDAY?s="last"==l?a.FRIDAY:a.MONDAY:(s=t-1,s=(s="last"==l?s-1:s+1)%5+1)}return tt(e.reference,s,l)}}let ti=RegExp(`(this|last|past|next|after\\s*this)\\s*(${W(K)})(?=\\s*)(?=\\W|$)`,"i");class tl extends el{innerPattern(){return ti}innerExtract(e,t){let s=t[1].toLowerCase(),n=t[2].toLowerCase(),r=K[n];if("next"==s||s.startsWith("after")){let t={};return t[r]=1,I.createRelativeFromReference(e.reference,t)}if("last"==s||"past"==s){let t={};return t[r]=-1,I.createRelativeFromReference(e.reference,t)}let a=e.createParsingComponents(),i=new Date(e.reference.instant.getTime());return n.match(/week/i)?(i.setDate(i.getDate()-i.getDay()),a.imply("day",i.getDate()),a.imply("month",i.getMonth()+1),a.imply("year",i.getFullYear())):n.match(/month/i)?(i.setDate(1),a.imply("day",i.getDate()),a.assign("year",i.getFullYear()),a.assign("month",i.getMonth()+1)):n.match(/year/i)&&(i.setDate(1),i.setMonth(0),a.imply("day",i.getDate()),a.imply("month",i.getMonth()+1),a.assign("year",i.getFullYear())),a}}let to=RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i");class td{groupNumberMonth;groupNumberDay;constructor(e){this.groupNumberMonth=e?3:2,this.groupNumberDay=e?2:3}pattern(){return to}extract(e,t){let s=t.index+t[1].length,n=t.index+t[0].length-t[5].length;if(s>0&&e.text.substring(0,s).match("\\d/?$")||n<e.text.length&&e.text.substring(n).match("^/?\\d"))return;let r=e.text.substring(s,n);if(r.match(/^\d\.\d$/)||r.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[4]&&0>r.indexOf("/"))return;let a=e.createParsingResult(s,r),i=parseInt(t[this.groupNumberMonth]),l=parseInt(t[this.groupNumberDay]);if((i<1||i>12)&&i>12)if(!(l>=1)||!(l<=12)||!(i<=31))return null;else[l,i]=[i,l];if(l<1||l>31)return null;if(a.start.assign("day",l),a.start.assign("month",i),t[4]){let e=O(parseInt(t[4]));a.start.assign("year",e)}else{let t=B(e.refDate,l,i);a.start.imply("year",t)}return a.addTag("parser/SlashDateFormatParser")}}let tc=RegExp(`(this|last|past|next|after|\\+|-)\\s*(${er})(?=\\W|$)`,"i"),tm=RegExp(`(this|last|past|next|after|\\+|-)\\s*(${ea})(?=\\W|$)`,"i");class tx extends el{allowAbbreviations;constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?tc:tm}innerExtract(e,t){let s=t[1].toLowerCase(),n=ei(t[2]);if(!n)return null;switch(s){case"last":case"past":case"-":n=$(n)}return I.createRelativeFromReference(e.reference,n)}}function tu(e){return null!=e.text.match(/^-/i)}class th extends eA{shouldMergeResults(e,t,s){return!!e.match(/^\s*$/i)&&(null!=s.text.match(/^[+-]/i)||tu(s))}mergeResults(e,t,s,n){let r=ei(s.text);tu(s)&&(r=$(r));let a=I.createRelativeFromReference(R.fromDate(t.start.date()),r);return new F(t.reference,t.index,`${t.text}${e}${s.text}`,a)}}function tp(e){return null!=e.text.match(/\s+(before|from)$/i)}class tg extends eA{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,s){return!!e.match(this.patternBetween())&&(!!tp(t)||null!=t.text.match(/\s+(after|since)$/i))&&!!s.start.get("day")&&!!s.start.get("month")&&!!s.start.get("year")}mergeResults(e,t,s){let n=ei(t.text);tp(t)&&(n=$(n));let r=I.createRelativeFromReference(R.fromDate(s.start.date()),n);return new F(s.reference,t.index,`${t.text}${e}${s.text}`,r)}}let tb=RegExp(`^\\s*(${Q})`,"i");class tf{refine(e,t){return t.forEach(function(t){if(!t.start.isDateWithUnknownYear())return;let s=e.text.substring(t.index+t.text.length),n=tb.exec(s);if(!n||n[0].trim().length<=3)return;e.debug(()=>{console.log(`Extracting year: '${n[0]}' into : ${t}`)});let r=X(n[1]);null!=t.end&&t.end.assign("year",r),t.start.assign("year",r),t.text+=n[0]}),t}}class tk extends eP{constructor(){super()}isValid(e,t){let s=t.text.trim();return s===e.text.trim()||("may"!==s.toLowerCase()||e.text.substring(0,t.index).trim().match(/\b(in)$/i)?!s.toLowerCase().endsWith("the second")||(e.text.substring(t.index+t.text.length).trim().length>0&&e.debug(()=>{console.log(`Removing unlikely result: ${t}`)}),!1):(e.debug(()=>{console.log(`Removing unlikely result: ${t}`)}),!1))}}class tj{createCasualConfiguration(e=!1){let t=this.createConfiguration(!1,e);return t.parsers.push(new e7),t.parsers.push(new te),t.parsers.push(new eb),t.parsers.push(new tl),t.parsers.push(new tx),t.refiners.push(new tk),t}createConfiguration(e=!0,t=!1){let s=eK({parsers:[new td(t),new em(e),new eu,new ep(t),new ta,new ey,new ez(e),new eC(e),new eT(e)],refiners:[new eF]},e);return s.parsers.unshift(new ek(e)),s.refiners.unshift(new tg),s.refiners.unshift(new th),s.refiners.unshift(new eY),s.refiners.push(new eF),s.refiners.push(new tf),s.refiners.push(new eM),s}}class ty{parsers;refiners;defaultConfig=new tj;constructor(e){e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new ty({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,s){let n=this.parse(e,t,s);return n.length>0?n[0].start.date():null}parse(e,t,s){let n=new tv(e,t,s),r=[];return this.parsers.forEach(e=>{let t=ty.executeParser(n,e);r=r.concat(t)}),r.sort((e,t)=>e.index-t.index),this.refiners.forEach(function(e){r=e.refine(n,r)}),r}static executeParser(e,t){let s=[],n=t.pattern(e),r=e.text,a=e.text,i=n.exec(a);for(;i;){let l=i.index+r.length-a.length;i.index=l;let o=t.extract(e,i);if(!o){a=r.substring(i.index+1),i=n.exec(a);continue}let d=null;o instanceof F?d=o:o instanceof I?(d=e.createParsingResult(i.index,i[0])).start=o:d=e.createParsingResult(i.index,i[0],o);let c=d.index,m=d.text;e.debug(()=>console.log(`${t.constructor.name} extracted (at index=${c}) '${m}'`)),s.push(d),a=r.substring(c+m.length),i=n.exec(a)}return s}}class tv{text;option;reference;refDate;constructor(e,t,s){this.text=e,this.option=s??{},this.reference=R.fromInput(t,this.option.timezones),this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof I?e:new I(this.reference,e)}createParsingResult(e,t,s,n){let r="string"==typeof t?t:this.text.substring(e,t),a=s?this.createParsingComponents(s):null,i=n?this.createParsingComponents(n):null;return new F(this.reference,e,r,a,i)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}}let tz=new tj,tw=new ty(tz.createCasualConfiguration(!1)),tN=new ty(tz.createConfiguration(!0,!1)),tC=new ty(tz.createCasualConfiguration(!0));function tD(e,t,s){return tw.parse(e,t,s)}function tS(e,t,s){return tw.parseDate(e,t,s)}e.s(["GB",0,tC,"casual",0,tw,"configuration",0,tz,"parse",()=>tD,"parseDate",()=>tS,"strict",0,tN],25667),e.i(25667),e.s(["Chrono",()=>ty,"GB",0,tC,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,tw,"configuration",0,tz,"parse",()=>tD,"parseDate",()=>tS,"strict",0,tN],794),e.i(794);class tT extends ev{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}}let tP={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6},tA={januar:1,jänner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,märz:3,maerz:3,mär:3,"mär.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12},tE={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,fünf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zwölf:12,zwoelf:12},tM={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"day",tage:"day",tagen:"day",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"},t$=`(?:${W(tE)}|[0-9]+|[0-9]+\\.[0-9]+|halb?|halbe?|einigen?|wenigen?|mehreren?)`;function tR(e){let t=e.toLowerCase();if(void 0!==tE[t])return tE[t];if("ein"===t||"einer"===t||"einem"===t||"einen"===t||"eine"===t)return 1;if(t.match(/wenigen/))return 2;if(t.match(/halb/)||t.match(/halben/))return .5;if(t.match(/einigen/))return 3;else if(t.match(/mehreren/))return 7;return parseFloat(t)}let tI=`(${t$})\\s{0,5}(${W(tM)})\\s{0,5}`,tF=RegExp(tI,"i"),tL=L("",tI),tW=RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xe4|ae)chste[mn])\\s*)?(${W(tP)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(diese|letzte|n(?:\xe4|ae)chste)\\s*woche)?(?=\\W|$)`,"i");class tO extends el{innerPattern(){return tW}innerExtract(e,t){let s=tP[t[2].toLowerCase()],n=t[1],r=t[3],a=n||r;a=(a=a||"").toLowerCase();let i=null;return a.match(/letzte/)?i="last":a.match(/chste/)?i="next":a.match(/diese/)&&(i="this"),tt(e.reference,s,i)}}let tB=RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),tY=RegExp("^\\s*(\\-|\\–|\\~|\\〜|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i");class t_{pattern(e){return tB}extract(e,t){let s=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(s.text.match(/^\d{4}$/)||(s.start=t_.extractTimeComponent(s.start.clone(),t),!s.start))return t.index+=t[0].length,null;let n=e.text.substring(t.index+t[0].length),r=tY.exec(n);return r&&(s.end=t_.extractTimeComponent(s.start.clone(),r),s.end&&(s.text+=r[0])),s}static extractTimeComponent(e,t){let s=0,n=0,a=null;if(s=parseInt(t[2]),null!=t[3]&&(n=parseInt(t[3])),n>=60||s>24)return null;if(s>=12&&(a=r.PM),null!=t[5]){if(s>12)return null;let e=t[5].toLowerCase();e.match(/morgen|vormittag/)&&(a=r.AM,12==s&&(s=0)),e.match(/nachmittag|abend/)&&(a=r.PM,12!=s&&(s+=12)),e.match(/nacht/)&&(12==s?(a=r.AM,s=0):s<6?a=r.AM:(a=r.PM,s+=12))}if(e.assign("hour",s),e.assign("minute",n),null!==a?e.assign("meridiem",a):s<12?e.imply("meridiem",r.AM):e.imply("meridiem",r.PM),null!=t[4]){let s=parseInt(t[4]);if(s>=60)return null;e.assign("second",s)}return e}}class tH extends eE{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}}class tU extends eI{patternBetween(){return RegExp("^\\s*(T|um|am|,|-)?\\s*$")}}class tV extends el{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let s=e.refDate,n=t[2].toLowerCase(),r=e.createParsingComponents();return D(r,s),tV.extractTimeComponents(r,n)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",r.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",r.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",r.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",r.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",r.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",r.PM);break;case"mitternacht":e.get("hour")>1&&e.addDurationAsImplied({day:1}),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",r.AM)}return e}}let tq=RegExp(`(jetzt|heute|morgen|\xfcbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)`,"i");class tK extends el{innerPattern(e){return tq}innerExtract(e,t){let s=e.reference.getDateWithAdjustedTimezone(),n=(t[1]||"").toLowerCase(),r=(t[2]||"").toLowerCase(),a=e.createParsingComponents();switch(n){case"jetzt":a=eG(e.reference);break;case"heute":a=eJ(e.reference);break;case"morgen":w(a,s=M(s,{day:1})),D(a,s);break;case"übermorgen":case"uebermorgen":w(a,s=M(s,{day:2})),D(a,s);break;case"gestern":w(a,s=M(s,{day:-1})),D(a,s);break;case"vorgestern":w(a,s=M(s,{day:-2})),D(a,s);break;default:n.match(/letzte\s*nacht/)&&(s.getHours()>6&&(s=M(s,{day:-1})),w(a,s),a.imply("hour",0))}return r&&(a=tV.extractTimeComponents(a,r)),a}}let tG=RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\–|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${W(tA)})(?:(?:-|/|,?\\s*)((?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)(?![^\\s]\\d)))?(?=\\W|$)`,"i");class tJ extends el{innerPattern(){return tG}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=tA[t[3].toLowerCase()],r=parseInt(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){var a;let e=(a=t[4],/v/i.test(a)?-parseInt(a.replace(/[^0-9]+/gi,"")):/n/i.test(a)||/z/i.test(a)?parseInt(a.replace(/[^0-9]+/gi,"")):O(parseInt(a)));s.start.assign("year",e)}else{let t=B(e.refDate,r,n);s.start.imply("year",t)}if(t[2]){let e=parseInt(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}class tZ extends el{constructor(){super()}innerPattern(){return RegExp(`(?:\\s*((?:n\xe4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${t$})?(?:\\s*(n\xe4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${W(tM)})`,"i")}innerExtract(e,t){let s=t[2]?tR(t[2]):1,n=tM[t[4].toLowerCase()],r={};r[n]=s;let a=t[1]||t[3]||"";if(a=a.toLowerCase())return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(r=$(r)),I.createRelativeFromReference(e.reference,r)}}class tQ extends el{innerPattern(){return RegExp(`(?:in|f\xfcr|w\xe4hrend)\\s*(${tL})(?=\\W|$)`,"i")}innerExtract(e,t){let s=function(e){let t={},s=e,n=tF.exec(s);for(;n;)(function(e,t){let s=tR(t[1]);e[tM[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length),n=tF.exec(s);return t}(t[1]);return I.createRelativeFromReference(e.reference,s)}}let tX=new ty(t4()),t0=new ty(t5(!0));function t1(e,t,s){return tX.parse(e,t,s)}function t2(e,t,s){return tX.parseDate(e,t,s)}function t4(e=!0){let t=t5(!1,e);return t.parsers.unshift(new tV),t.parsers.unshift(new tK),t.parsers.unshift(new tZ),t}function t5(e=!0,t=!0){return eK({parsers:[new eV,new td(t),new tT,new t_,new tJ,new tO,new tQ],refiners:[new tH,new tU]},e)}e.s(["casual",0,tX,"createCasualConfiguration",()=>t4,"createConfiguration",()=>t5,"parse",()=>t1,"parseDate",()=>t2,"strict",0,t0],14284),e.i(14284),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,tX,"createCasualConfiguration",()=>t4,"createConfiguration",()=>t5,"parse",()=>t1,"parseDate",()=>t2,"strict",0,t0],1135),e.i(1135);class t6 extends el{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let s=e.refDate,n=t[0].toLowerCase(),a=e.createParsingComponents();switch(n){case"maintenant":return eG(e.reference);case"aujourd'hui":return eJ(e.reference);case"hier":return eZ(e.reference);case"demain":return eQ(e.reference);default:if(n.match(/cette\s*nuit/))w(a,s),a.imply("hour",22),a.imply("meridiem",r.PM);else if(n.match(/la\s*veille/)){let e=new Date(s.getTime());e.setDate(e.getDate()-1),w(a,e),a.imply("hour",0)}}return a}}class t3 extends el{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let s=t[2].toLowerCase(),n=e.createParsingComponents();switch(s){case"après-midi":case"aprem":n.imply("hour",14),n.imply("minute",0),n.imply("meridiem",r.PM);break;case"soir":n.imply("hour",18),n.imply("minute",0),n.imply("meridiem",r.PM);break;case"matin":n.imply("hour",8),n.imply("minute",0),n.imply("meridiem",r.AM);break;case"a midi":n.imply("hour",12),n.imply("minute",0),n.imply("meridiem",r.AM);break;case"à minuit":n.imply("hour",0),n.imply("meridiem",r.AM)}return n}}class t9 extends ev{primaryPrefix(){return"(?:(?:[àa])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|[àa]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}}class t7 extends eI{patternBetween(){return RegExp("^\\s*(T|à|a|au|vers|de|,|-)?\\s*$")}}class t8 extends eE{patternBetween(){return/^\s*(à|a|au|-)\s*$/i}}let se={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6},st={janvier:1,jan:1,"jan.":1,février:2,fév:2,"fév.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,août:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,décembre:12,decembre:12,dec:12,"dec.":12},ss={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13},sn={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"day",jours:"day",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",année:"year",années:"year"},sr=`(?:${W(ss)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function sa(e){let t=e.toLowerCase();return void 0!==ss[t]?ss[t]:"une"===t||"un"===t?1:t.match(/quelques?/)?3:t.match(/demi-?/)?.5:parseFloat(t)}let si="(?:[0-9]{1,2}(?:er)?)";function sl(e){let t=e.toLowerCase();return parseInt(t=t.replace(/(?:er)$/i,""))}let so=`(${sr})\\s{0,5}(${W(sn)})\\s{0,5}`,sd=RegExp(so,"i"),sc=L("",so);function sm(e){let t={},s=e,n=sd.exec(s);for(;n;)(function(e,t){let s=sa(t[1]);e[sn[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length),n=sd.exec(s);return t}let sx=RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:(?:ce)\\s*)?(${W(se)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i");class su extends el{innerPattern(){return sx}innerExtract(e,t){let s=se[t[1].toLowerCase()];if(void 0===s)return null;let n=t[2];n=(n=n||"").toLowerCase();let r=null;return"dernier"==n?r="last":"prochain"==n&&(r="next"),tt(e.reference,s,r)}}let sh=RegExp("(^|\\s|T)(?:(?:[àa])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),sp=RegExp("^\\s*(\\-|\\–|\\~|\\〜|[àa]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i");class sg{pattern(e){return sh}extract(e,t){let s=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(s.text.match(/^\d{4}$/)||(s.start=sg.extractTimeComponent(s.start.clone(),t),!s.start))return t.index+=t[0].length,null;let n=e.text.substring(t.index+t[0].length),r=sp.exec(n);return r&&(s.end=sg.extractTimeComponent(s.start.clone(),r),s.end&&(s.text+=r[0])),s}static extractTimeComponent(e,t){let s=0,n=0,a=null;if(s=parseInt(t[2]),null!=t[3]&&(n=parseInt(t[3])),n>=60||s>24)return null;if(s>=12&&(a=r.PM),null!=t[5]){if(s>12)return null;let e=t[5][0].toLowerCase();"a"==e&&(a=r.AM,12==s&&(s=0)),"p"==e&&(a=r.PM,12!=s&&(s+=12))}if(e.assign("hour",s),e.assign("minute",n),null!==a?e.assign("meridiem",a):s<12?e.imply("meridiem",r.AM):e.imply("meridiem",r.PM),null!=t[4]){let s=parseInt(t[4]);if(s>=60)return null;e.assign("second",s)}return e}}let sb=RegExp(`(?:on\\s*?)?(${si})(?:\\s*(?:au|\\-|\\–|jusqu'au?|\\s)\\s*(${si}))?(?:-|/|\\s*(?:de)?\\s*)(${W(st)})(?:(?:-|/|,?\\s*)((?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])(?![^\\s]\\d)))?(?=\\W|$)`,"i");class sf extends el{innerPattern(){return sb}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=st[t[3].toLowerCase()],r=sl(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){let e=function(e){if(/AC/i.test(e))return-parseInt(e=e.replace(/BC/i,""));if(/AD/i.test(e)||/C/i.test(e))return parseInt(e=e.replace(/[^\d]+/i,""));let t=parseInt(e);return t<100&&(t>50?t+=1900:t+=2e3),t}(t[4]);s.start.assign("year",e)}else{let t=B(e.refDate,r,n);s.start.imply("year",t)}if(t[2]){let e=sl(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}class sk extends el{constructor(){super()}innerPattern(){return RegExp(`il y a\\s*(${sc})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let s=$(sm(t[1]));return I.createRelativeFromReference(e.reference,s)}}class sj extends el{innerPattern(){return RegExp(`(?:dans|en|pour|pendant|de)\\s*(${sc})(?=\\W|$)`,"i")}innerExtract(e,t){let s=sm(t[1]);return I.createRelativeFromReference(e.reference,s)}}class sy extends el{constructor(){super()}innerPattern(){return RegExp(`(?:les?|la|l'|du|des?)\\s*(${sr})?(?:\\s*(prochaine?s?|derni[e\xe8]re?s?|pass[\xe9e]e?s?|pr[\xe9e]c[\xe9e]dents?|suivante?s?))?\\s*(${W(sn)})(?:\\s*(prochaine?s?|derni[e\xe8]re?s?|pass[\xe9e]e?s?|pr[\xe9e]c[\xe9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let s=t[1]?sa(t[1]):1,n=sn[t[3].toLowerCase()],r={};r[n]=s;let a=t[2]||t[4]||"";if(a=a.toLowerCase())return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(r=$(r)),I.createRelativeFromReference(e.reference,r)}}let sv=new ty(sC()),sz=new ty(sD(!0));function sw(e,t,s){return sv.parse(e,t,s)}function sN(e,t,s){return sv.parseDate(e,t,s)}function sC(e=!0){let t=sD(!1,e);return t.parsers.unshift(new t6),t.parsers.unshift(new t3),t.parsers.unshift(new sy),t}function sD(e=!0,t=!0){return eK({parsers:[new td(t),new sf,new t9,new sg,new sk,new sj,new su],refiners:[new t7,new t8]},e)}e.s(["casual",0,sv,"createCasualConfiguration",()=>sC,"createConfiguration",()=>sD,"parse",()=>sw,"parseDate",()=>sN,"strict",0,sz],29803),e.i(29803),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,sv,"createCasualConfiguration",()=>sC,"createConfiguration",()=>sD,"parse",()=>sw,"parseDate",()=>sN,"strict",0,sz],2769),e.i(2769);let sS={零:0,〇:0,一:1,二:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10},sT={日:0,月:1,火:2,水:3,木:4,金:5,土:6};function sP(e){return String(e).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"¥").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,sA)}function sA(e){return String.fromCharCode(e.charCodeAt(0)-65248)}function sE(e){let t=0;for(let s=0;s<e.length;s++){let n=e[s];"十"===n?t=0===t?sS[n]:t*sS[n]:t+=sS[n]}return t}let sM=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i;class s${pattern(){return sM}extract(e,t){let s=parseInt(sP(t[5])),n=parseInt(sP(t[6])),r=e.createParsingComponents({day:n,month:s});if(t[1]&&t[1].match("同|今|本")&&r.assign("year",e.reference.getDateWithAdjustedTimezone().getFullYear()),t[2]){let e=t[4],s="元"==e?1:parseInt(sP(e));"令和"==t[3]?s+=2018:"平成"==t[3]?s+=1988:"昭和"==t[3]&&(s+=1925),r.assign("year",s)}else{let t=B(e.refDate,n,s);r.imply("year",t)}return r}}class sR extends eE{patternBetween(){return/^\s*(から|－|ー|-|～|~)\s*$/i}}let sI=/今日|きょう|本日|ほんじつ|昨日|きのう|明日|あした|今夜|こんや|今夕|こんゆう|今晩|こんばん|今朝|けさ/i;class sF{pattern(){return sI}extract(e,t){let s=function(e){switch(e){case"きょう":return"今日";case"ほんじつ":return"本日";case"きのう":return"昨日";case"あした":return"明日";case"こんや":return"今夜";case"こんゆう":return"今夕";case"こんばん":return"今晩";case"けさ":return"今朝";default:return e}}(t[0]),n=e.createParsingComponents();switch(s){case"昨日":return eZ(e.reference);case"明日":return eQ(e.reference);case"本日":case"今日":return eJ(e.reference)}"今夜"==s||"今夕"==s||"今晩"==s?(n.imply("hour",22),n.assign("meridiem",r.PM)):s.match("今朝")&&(n.imply("hour",6),n.assign("meridiem",r.AM));let a=e.refDate;return n.assign("day",a.getDate()),n.assign("month",a.getMonth()+1),n.assign("year",a.getFullYear()),n}}let sL=RegExp("((?<prefix>前の|次の|今週))?(?<weekday>"+Object.keys(sT).join("|")+")(?:曜日|曜)","i");class sW{pattern(){return sL}extract(e,t){let s=sT[t.groups.weekday];if(void 0===s)return null;let n=t.groups.prefix||"",r=null;return n.match(/前の/)?r="last":n.match(/次の/)?r="next":n.match(/今週/)&&(r="this"),tt(e.reference,s,r)}}let sO=RegExp("([0-9０-９]{4}[\\/|\\／])?([0-1０-１]{0,1}[0-9０-９]{1})(?:[\\/|\\／]([0-3０-３]{0,1}[0-9０-９]{1}))","i");class sB{pattern(){return sO}extract(e,t){let s=e.createParsingComponents(),n=parseInt(sP(t[2])),r=parseInt(sP(t[3]));if(n<1||n>12||r<1||r>31)return null;if(s.assign("day",r),s.assign("month",n),t[1]){let e=O(parseInt(sP(t[1])));s.assign("year",e)}else{let t=B(e.reference.instant,r,n);s.imply("year",t)}return s}}let sY=RegExp("(?:(午前|午後|A.M.|P.M.|AM|PM))?(?:[\\s,，、]*)(?:([0-9０-９]+|["+Object.keys(sS).join("")+"]+)(?:\\s*)(?:時(?!間)|:|：)(?:\\s*)([0-9０-９]+|半|["+Object.keys(sS).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)([0-9０-９]+|["+Object.keys(sS).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),s_=RegExp("(?:^\\s*(?:から|\\-|\\–|\\－|\\~|\\〜)\\s*)(?:(午前|午後|A.M.|P.M.|AM|PM))?(?:[\\s,，、]*)(?:([0-9０-９]+|["+Object.keys(sS).join("")+"]+)(?:\\s*)(?:時|:|：)(?:\\s*)([0-9０-９]+|半|["+Object.keys(sS).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)([0-9０-９]+|["+Object.keys(sS).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i");class sH extends el{innerPattern(){return sY}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let s=e.createParsingResult(t.index,t[0]);return(s.start=sU(e,t[2],t[3],t[4],t[1]??t[5]),s.start)?(t=s_.exec(e.text.substring(s.index+s.text.length)))?(s.text=s.text+t[0],s.end=sU(e,t[2],t[3],t[4],t[1]??t[5]),s.end)?(!s.end.isCertain("meridiem")&&s.start.isCertain("meridiem")&&(s.end.imply("meridiem",s.start.get("meridiem")),s.start.get("meridiem")===r.PM&&(s.start.get("hour")-12>s.end.get("hour")?s.end.imply("meridiem",r.AM):12>s.end.get("hour")&&s.end.assign("hour",s.end.get("hour")+12))),s.end.date().getTime()<s.start.date().getTime()&&s.end.imply("day",s.end.get("day")+1),s):null:s:(t.index+=t[0].length,null)}}function sU(e,t,s,n,a){let i=0,l=-1,o=e.createParsingComponents();if(isNaN(i=parseInt(sP(t)))&&(i=sE(t)),i>24)return null;if(s){let e;if("半"===s?e=30:isNaN(e=parseInt(sP(s)))&&(e=sE(s)),e>=60)return null;o.assign("minute",e)}if(n){let e=parseInt(sP(n));if(isNaN(e)&&(e=sE(n)),e>=60)return null;o.assign("second",e)}if(a){if(i>12)return null;"午前"===a||"a"===a[0].toLowerCase()?(l=r.AM,12===i&&(i=0)):("午後"===a||"p"===a[0].toLowerCase())&&(l=r.PM,12!=i&&(i+=12))}return o.assign("hour",i),l>=0?o.assign("meridiem",l):i<12?o.imply("meridiem",r.AM):o.imply("meridiem",r.PM),o}class sV extends eI{patternBetween(){return/^\s*(の)?\s*$/i}}class sq extends eA{mergeResults(e,t,s){let n=t.clone();return n.text=t.text+e+s.text,n.start.assign("weekday",s.start.get("weekday")),n.end&&n.end.assign("weekday",s.start.get("weekday")),n}shouldMergeResults(e,t,s){return t.start.isCertain("day")&&s.start.isOnlyWeekdayComponent()&&!s.start.isCertain("hour")&&null!==e.match(/^[,、の]?\s*$/)}}let sK=RegExp("(?:\\(|\\（)(?<weekday>"+Object.keys(sT).join("|")+")(?:\\)|\\）)","i");class sG{pattern(){return sK}extract(e,t){let s=sT[t.groups.weekday];return void 0===s?null:tt(e.reference,s)}}let sJ=new ty(s0()),sZ=new ty(s1(!0));function sQ(e,t,s){return sJ.parse(e,t,s)}function sX(e,t,s){return sJ.parseDate(e,t,s)}function s0(){let e=s1(!1);return e.parsers.unshift(new sF),e}function s1(e=!0){let t=eK({parsers:[new s$,new sW,new sG,new sB,new sH],refiners:[new sq,new sV,new sR]},e);return t.refiners=t.refiners.filter(e=>!(e instanceof eq)),t}e.s(["casual",0,sJ,"createCasualConfiguration",()=>s0,"createConfiguration",()=>s1,"parse",()=>sQ,"parseDate",()=>sX,"strict",0,sZ],15072),e.i(15072),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,sJ,"createCasualConfiguration",()=>s0,"createConfiguration",()=>s1,"parse",()=>sQ,"parseDate",()=>sX,"strict",0,sZ],29085),e.i(29085);let s2={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,terça:2,"terça-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,sábado:6,sabado:6,sab:6},s4={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,março:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12},s5=RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:(este|esta|passado|pr[o\xf3]ximo)\\s*)?(${W(s2)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(este|esta|passado|pr[\xf3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i");class s6 extends el{innerPattern(){return s5}innerExtract(e,t){let s=s2[t[2].toLowerCase()];if(void 0===s)return null;let n=t[1],r=t[3],a=n||r||"";a=a.toLowerCase();let i=null;return"passado"==a?i="this":"próximo"==a||"proximo"==a?i="next":"este"==a&&(i="this"),tt(e.reference,s,i)}}class s3 extends ev{primaryPrefix(){return"(?:(?:ao?|às?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|a(?:o)?|\\?)\\s*"}}class s9 extends eI{patternBetween(){return RegExp("^\\s*(?:,|à)?\\s*$")}}class s7 extends eE{patternBetween(){return/^\s*(?:-)\s*$/i}}let s8=RegExp(`([0-9]{1,2})(?:\xba|\xaa|\xb0)?(?:\\s*(?:desde|de|\\-|\\–|ao?|\\s)\\s*([0-9]{1,2})(?:\xba|\xaa|\xb0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${W(s4)})(?:\\s*(?:de|,)?\\s*([0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?))?(?=\\W|$)`,"i");class ne extends el{innerPattern(){return s8}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=s4[t[3].toLowerCase()],r=parseInt(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){let e=function(e){if(e.match(/^[0-9]{1,4}$/)){let t=parseInt(e);return t<100&&(t>50?t+=1900:t+=2e3),t}return e.match(/a\.?\s*c\.?/i)?-parseInt(e=e.replace(/a\.?\s*c\.?/i,"")):parseInt(e)}(t[4]);s.start.assign("year",e)}else{let t=B(e.refDate,r,n);s.start.imply("year",t)}if(t[2]){let e=parseInt(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}class nt extends el{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let s=t[0].toLowerCase(),n=e.createParsingComponents();switch(s){case"agora":return eG(e.reference);case"hoje":return eJ(e.reference);case"amanha":case"amanhã":return eQ(e.reference);case"ontem":return eZ(e.reference)}return n}}class ns extends el{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let s=e.refDate,n=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":n.imply("meridiem",r.PM),n.imply("hour",15);break;case"noite":n.imply("meridiem",r.PM),n.imply("hour",22);break;case"manha":case"manhã":n.imply("meridiem",r.AM),n.imply("hour",6);break;case"meia-noite":let a=new Date(s.getTime());a.setDate(a.getDate()+1),w(n,a),D(n,a),n.imply("hour",0),n.imply("minute",0),n.imply("second",0);break;case"meio-dia":n.imply("meridiem",r.AM),n.imply("hour",12)}return n}}let nn=new ty(nl()),nr=new ty(no(!0));function na(e,t,s){return nn.parse(e,t,s)}function ni(e,t,s){return nn.parseDate(e,t,s)}function nl(e=!0){let t=no(!1,e);return t.parsers.push(new nt),t.parsers.push(new ns),t}function no(e=!0,t=!0){return eK({parsers:[new td(t),new s6,new s3,new ne],refiners:[new s9,new s7]},e)}e.s(["casual",0,nn,"createCasualConfiguration",()=>nl,"createConfiguration",()=>no,"parse",()=>na,"parseDate",()=>ni,"strict",0,nr],65582),e.i(65582),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,nn,"createCasualConfiguration",()=>nl,"createConfiguration",()=>no,"parse",()=>na,"parseDate",()=>ni,"strict",0,nr],73637),e.i(73637);class nd extends eE{patternBetween(){return/^\s*(tot|-)\s*$/i}}class nc extends eI{patternBetween(){return RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}}class nm extends el{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let s=t[0].toLowerCase(),n=e.createParsingComponents();switch(s){case"nu":return eG(e.reference);case"vandaag":return eJ(e.reference);case"morgen":case"morgend":return eQ(e.reference);case"gisteren":return eZ(e.reference)}return n}}class nx extends el{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let s=e.refDate,n=e.createParsingComponents();switch("deze"===t[1]&&(n.assign("day",e.refDate.getDate()),n.assign("month",e.refDate.getMonth()+1),n.assign("year",e.refDate.getFullYear())),t[2].toLowerCase()){case"namiddag":case"'s namiddags":n.imply("meridiem",r.PM),n.imply("hour",15);break;case"avond":case"'s avonds'":n.imply("meridiem",r.PM),n.imply("hour",20);break;case"middernacht":let a=new Date(s.getTime());a.setDate(a.getDate()+1),w(n,a),D(n,a),n.imply("hour",0),n.imply("minute",0),n.imply("second",0);break;case"ochtend":case"'s ochtends":n.imply("meridiem",r.AM),n.imply("hour",6);break;case"middag":case"'s middags":n.imply("meridiem",r.AM),n.imply("hour",12)}return n}}let nu={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6},nh={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,mrt:3,"mrt.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12},np={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12},ng={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,tweeëntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31},nb={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"day",dagen:"day",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"},nf=`(?:${W(np)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`,nk=`(?:${W(ng)}|[0-9]{1,2}(?:ste|de)?)`;function nj(e){let t=e.toLowerCase();return void 0!==ng[t]?ng[t]:parseInt(t=t.replace(/(?:ste|de)$/i,""))}let ny="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function nv(e){return/voor Christus/i.test(e)?-parseInt(e=e.replace(/voor Christus/i,"")):/na Christus/i.test(e)?parseInt(e=e.replace(/na Christus/i,"")):O(parseInt(e))}let nz=`(${nf})\\s{0,5}(${W(nb)})\\s{0,5}`,nw=RegExp(nz,"i"),nN=L("(?:(?:binnen|in)\\s*)?",nz);function nC(e){let t={},s=e,n=nw.exec(s);for(;n;)(function(e,t){let s=function(e){let t=e.toLowerCase();return void 0!==np[t]?np[t]:"paar"===t?2:"half"===t||t.match(/halve?/)?.5:parseFloat(t.replace(",","."))}(t[1]);e[nb[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length),n=nw.exec(s);return t}class nD extends el{innerPattern(){return RegExp("(?:binnen|in|binnen de|voor)\\s*("+nN+")(?=\\W|$)","i")}innerExtract(e,t){let s=nC(t[1]);return I.createRelativeFromReference(e.reference,s)}}let nS=RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${W(nu)})(?=\\W|$)`,"i");class nT extends el{innerPattern(){return nS}innerExtract(e,t){let s=nu[t[2].toLowerCase()],n=t[1],r=t[3],a=n||r;a=(a=a||"").toLowerCase();let i=null;return"vorige"==a?i="last":"volgende"==a?i="next":"deze"==a&&(i="this"),tt(e.reference,s,i)}}let nP=RegExp(`(?:on\\s*?)?(${nk})(?:\\s*(?:tot|\\-|\\–|until|through|till|\\s)\\s*(${nk}))?(?:-|/|\\s*(?:of)?\\s*)(`+W(nh)+")(?:(?:-|/|,?\\s*)"+`(${ny}(?![^\\s]\\d))`+")?(?=\\W|$)","i");class nA extends el{innerPattern(){return nP}innerExtract(e,t){let s=nh[t[3].toLowerCase()],n=nj(t[1]);if(n>31)return t.index=t.index+t[1].length,null;let r=e.createParsingComponents({day:n,month:s});if(t[4]){let e=nv(t[4]);r.assign("year",e)}else{let t=B(e.refDate,n,s);r.imply("year",t)}if(!t[2])return r;let a=nj(t[2]),i=e.createParsingResult(t.index,t[0]);return i.start=r,i.end=r.clone(),i.end.assign("day",a),i}}let nE=RegExp(`(${W(nh)})\\s*(?:[,-]?\\s*(${ny})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class nM extends el{innerPattern(){return nE}innerExtract(e,t){let s=e.createParsingComponents();s.imply("day",1);let n=nh[t[1].toLowerCase()];if(s.assign("month",n),t[2]){let e=nv(t[2]);s.assign("year",e)}else{let t=B(e.refDate,1,n);s.imply("year",t)}return s}}let n$=RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class nR extends el{innerPattern(){return n$}innerExtract(e,t){let s=parseInt(t[2]),n=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",n).assign("year",s)}}class nI extends ev{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}}let nF=RegExp(`([0-9]{4})[\\.\\/\\s](?:(${W(nh)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class nL extends el{innerPattern(){return nF}innerExtract(e,t){let s=t[3]?parseInt(t[3]):nh[t[2].toLowerCase()];if(s<1||s>12)return null;let n=parseInt(t[1]);return{day:parseInt(t[4]),month:s,year:n}}}class nW extends el{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let s=t[1].toLowerCase(),n=t[2].toLowerCase(),a=e.createParsingComponents(),i=e.refDate;switch(s){case"gisteren":let l=new Date(i.getTime());l.setDate(l.getDate()-1),w(a,l);break;case"van":w(a,i);break;case"morgen":let o=new Date(i.getTime());o.setDate(o.getDate()+1),w(a,o),D(a,o)}switch(n){case"ochtend":a.imply("meridiem",r.AM),a.imply("hour",6);break;case"middag":a.imply("meridiem",r.AM),a.imply("hour",12);break;case"namiddag":a.imply("meridiem",r.PM),a.imply("hour",15);break;case"avond":a.imply("meridiem",r.PM),a.imply("hour",20)}return a}}let nO=RegExp(`(dit|deze|vorig|afgelopen|(?:aan)?komend|over|\\+|-)e?\\s*(${nN})(?=\\W|$)`,"i");class nB extends el{innerPattern(){return nO}innerExtract(e,t){let s=t[1].toLowerCase(),n=nC(t[2]);switch(s){case"vorig":case"afgelopen":case"-":n=$(n)}return I.createRelativeFromReference(e.reference,n)}}let nY=RegExp(`(dit|deze|(?:aan)?komend|volgend|afgelopen|vorig)e?\\s*(${W(nb)})(?=\\s*)(?=\\W|$)`,"i");class n_ extends el{innerPattern(){return nY}innerExtract(e,t){let s=t[1].toLowerCase(),n=t[2].toLowerCase(),r=nb[n];if("volgend"==s||"komend"==s||"aankomend"==s){let t={};return t[r]=1,I.createRelativeFromReference(e.reference,t)}if("afgelopen"==s||"vorig"==s){let t={};return t[r]=-1,I.createRelativeFromReference(e.reference,t)}let a=e.createParsingComponents(),i=new Date(e.reference.instant.getTime());return n.match(/week/i)?(i.setDate(i.getDate()-i.getDay()),a.imply("day",i.getDate()),a.imply("month",i.getMonth()+1),a.imply("year",i.getFullYear())):n.match(/maand/i)?(i.setDate(1),a.imply("day",i.getDate()),a.assign("year",i.getFullYear()),a.assign("month",i.getMonth()+1)):n.match(/jaar/i)&&(i.setDate(1),i.setMonth(0),a.imply("day",i.getDate()),a.imply("month",i.getMonth()+1),a.assign("year",i.getFullYear())),a}}let nH=RegExp("("+nN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),nU=RegExp("("+nN+")geleden(?=(?:\\W|$))","i");class nV extends el{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?nU:nH}innerExtract(e,t){let s=$(nC(t[1]));return I.createRelativeFromReference(e.reference,s)}}let nq=RegExp("("+nN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),nK=RegExp("("+nN+")(later|vanaf nu)(?=(?:\\W|$))","i");class nG extends el{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?nK:nq}innerExtract(e,t){let s=nC(t[1]);return I.createRelativeFromReference(e.reference,s)}}let nJ=new ty(n0()),nZ=new ty(n1(!0));function nQ(e,t,s){return nJ.parse(e,t,s)}function nX(e,t,s){return nJ.parseDate(e,t,s)}function n0(e=!0){let t=n1(!1,e);return t.parsers.unshift(new nm),t.parsers.unshift(new nx),t.parsers.unshift(new nW),t.parsers.unshift(new nM),t.parsers.unshift(new n_),t.parsers.unshift(new nB),t}function n1(e=!0,t=!0){return eK({parsers:[new td(t),new nD,new nA,new nM,new nT,new nL,new nR,new nI(e),new nV(e),new nG(e)],refiners:[new nc,new nd]},e)}e.s(["casual",0,nJ,"createCasualConfiguration",()=>n0,"createConfiguration",()=>n1,"parse",()=>nQ,"parseDate",()=>nX,"strict",0,nZ],18553),e.i(18553),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,nJ,"createCasualConfiguration",()=>n0,"createConfiguration",()=>n1,"parse",()=>nQ,"parseDate",()=>nX,"strict",0,nZ],72823),e.i(72823);let n2={零:0,〇:0,一:1,二:2,两:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10},n4={天:0,日:0,一:1,二:2,三:3,四:4,五:5,六:6};function n5(e){let t=0;for(let s=0;s<e.length;s++){let n=e[s];"十"===n?t=0===t?n2[n]:t*n2[n]:t+=n2[n]}return t}class n6 extends el{innerPattern(){return RegExp("(\\d{2,4}|["+Object.keys(n2).join("")+"]{4}|["+Object.keys(n2).join("")+"]{2})?(?:\\s*)(?:年)?(?:[\\s|,|，]*)(\\d{1,2}|["+Object.keys(n2).join("")+"]{1,3})(?:\\s*)(?:月)(?:\\s*)(\\d{1,2}|["+Object.keys(n2).join("")+"]{1,3})?(?:\\s*)(?:日|号)?")}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=parseInt(t[2]);if(isNaN(n)&&(n=n5(t[2])),s.start.assign("month",n),t[3]){let e=parseInt(t[3]);isNaN(e)&&(e=n5(t[3])),s.start.assign("day",e)}else s.start.imply("day",e.refDate.getDate());if(t[1]){let e=parseInt(t[1]);isNaN(e)&&(e=function(e){let t="";for(let s=0;s<e.length;s++)t+=n2[e[s]];return parseInt(t)}(t[1])),s.start.assign("year",e)}else s.start.imply("year",e.refDate.getFullYear());return s}}let n3=RegExp("(\\d+|["+Object.keys(n2).join("")+"]+|半|几)(?:\\s*)(?:个)?(秒(?:钟)?|分钟|小时|钟|日|天|星期|礼拜|月|年)(?:(?:之|过)?后|(?:之)?内)","i");class n9 extends el{innerPattern(){return n3}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=parseInt(t[1]);if(isNaN(n)&&(n=n5(t[1])),isNaN(n)){let e=t[1];if("几"===e)n=3;else{if("半"!==e)return null;n=.5}}let r={},a=t[2][0];if(a.match(/[日天星礼月年]/)){"日"==a||"天"==a?r.day=n:"星"==a||"礼"==a?r.week=n:"月"==a?r.month=n:"年"==a&&(r.year=n);let t=M(e.refDate,r);return s.start.assign("year",t.getFullYear()),s.start.assign("month",t.getMonth()+1),s.start.assign("day",t.getDate()),s}"秒"==a?r.second=n:"分"==a?r.minute=n:("小"==a||"钟"==a)&&(r.hour=n);let i=M(e.refDate,r);return s.start.imply("year",i.getFullYear()),s.start.imply("month",i.getMonth()+1),s.start.imply("day",i.getDate()),s.start.assign("hour",i.getHours()),s.start.assign("minute",i.getMinutes()),s.start.assign("second",i.getSeconds()),s}}let n7=RegExp("(?<prefix>上|下|这)(?:个)?(?:星期|礼拜|周)(?<weekday>"+Object.keys(n4).join("|")+")");class n8 extends el{innerPattern(){return n7}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=n4[t.groups.weekday];if(void 0===n)return null;let r=null,a=t.groups.prefix;"上"==a?r="last":"下"==a?r="next":"这"==a&&(r="this");let i=new Date(e.refDate.getTime()),l=!1,o=i.getDay();if("last"==r||"past"==r)i.setDate(i.getDate()+(n-7-o)),l=!0;else if("next"==r)i.setDate(i.getDate()+(n+7-o)),l=!0;else if("this"==r)i.setDate(i.getDate()+(n-o));else{let e=n-o;Math.abs(e-7)<Math.abs(e)&&(e-=7),Math.abs(e+7)<Math.abs(e)&&(e+=7),i.setDate(i.getDate()+e)}return s.start.assign("weekday",n),l?(s.start.assign("day",i.getDate()),s.start.assign("month",i.getMonth()+1),s.start.assign("year",i.getFullYear())):(s.start.imply("day",i.getDate()),s.start.imply("month",i.getMonth()+1),s.start.imply("year",i.getFullYear())),s}}let re=RegExp("(?:从|自)?(?:(今|明|前|大前|后|大后|昨)(早|朝|晚)|(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|后|大后|昨)(?:日|天)(?:[\\s,，]*)(?:(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(n2).join("")+"]+)(?:\\s*)(?:点|时|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(n2).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(n2).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),rt=RegExp("(?:^\\s*(?:到|至|\\-|\\–|\\~|\\〜)\\s*)(?:(今|明|前|大前|后|大后|昨)(早|朝|晚)|(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|后|大后|昨)(?:日|天)(?:[\\s,，]*)(?:(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(n2).join("")+"]+)(?:\\s*)(?:点|时|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(n2).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(n2).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i");class rs extends el{innerPattern(){return re}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let s=e.createParsingResult(t.index,t[0]),n=new Date(e.refDate.getTime());if(t[1]){let r=t[1];"明"==r?e.refDate.getHours()>1&&n.setDate(n.getDate()+1):"昨"==r?n.setDate(n.getDate()-1):"前"==r?n.setDate(n.getDate()-2):"大前"==r?n.setDate(n.getDate()-3):"后"==r?n.setDate(n.getDate()+2):"大后"==r&&n.setDate(n.getDate()+3),s.start.assign("day",n.getDate()),s.start.assign("month",n.getMonth()+1),s.start.assign("year",n.getFullYear())}else if(t[4]){let e=t[4];"明"==e?n.setDate(n.getDate()+1):"昨"==e?n.setDate(n.getDate()-1):"前"==e?n.setDate(n.getDate()-2):"大前"==e?n.setDate(n.getDate()-3):"后"==e?n.setDate(n.getDate()+2):"大后"==e&&n.setDate(n.getDate()+3),s.start.assign("day",n.getDate()),s.start.assign("month",n.getMonth()+1),s.start.assign("year",n.getFullYear())}else s.start.imply("day",n.getDate()),s.start.imply("month",n.getMonth()+1),s.start.imply("year",n.getFullYear());let r=0,a=0,i=-1;if(t[8]){let e=parseInt(t[8]);if(isNaN(e)&&(e=n5(t[8])),e>=60)return null;s.start.assign("second",e)}if(isNaN(r=parseInt(t[6]))&&(r=n5(t[6])),t[7]?"半"==t[7]?a=30:"正"==t[7]||"整"==t[7]?a=0:isNaN(a=parseInt(t[7]))&&(a=n5(t[7])):r>100&&(a=r%100,r=Math.floor(r/100)),a>=60||r>24)return null;if(r>=12&&(i=1),t[9]){if(r>12)return null;let e=t[9][0].toLowerCase();"a"==e&&(i=0,12==r&&(r=0)),"p"==e&&(i=1,12!=r&&(r+=12))}else if(t[2]){let e=t[2][0];"早"==e?(i=0,12==r&&(r=0)):"晚"==e&&(i=1,12!=r&&(r+=12))}else if(t[3]){let e=t[3][0];"上"==e||"早"==e||"凌"==e?(i=0,12==r&&(r=0)):("下"==e||"晚"==e)&&(i=1,12!=r&&(r+=12))}else if(t[5]){let e=t[5][0];"上"==e||"早"==e||"凌"==e?(i=0,12==r&&(r=0)):("下"==e||"晚"==e)&&(i=1,12!=r&&(r+=12))}s.start.assign("hour",r),s.start.assign("minute",a),i>=0?s.start.assign("meridiem",i):r<12?s.start.imply("meridiem",0):s.start.imply("meridiem",1);let l=rt.exec(e.text.substring(s.index+s.text.length));if(!l)return s.text.match(/^\d+$/)?null:s;let o=new Date(n.getTime());if(s.end=e.createParsingComponents(),l[1]){let t=l[1];"明"==t?e.refDate.getHours()>1&&o.setDate(o.getDate()+1):"昨"==t?o.setDate(o.getDate()-1):"前"==t?o.setDate(o.getDate()-2):"大前"==t?o.setDate(o.getDate()-3):"后"==t?o.setDate(o.getDate()+2):"大后"==t&&o.setDate(o.getDate()+3),s.end.assign("day",o.getDate()),s.end.assign("month",o.getMonth()+1),s.end.assign("year",o.getFullYear())}else if(l[4]){let e=l[4];"明"==e?o.setDate(o.getDate()+1):"昨"==e?o.setDate(o.getDate()-1):"前"==e?o.setDate(o.getDate()-2):"大前"==e?o.setDate(o.getDate()-3):"后"==e?o.setDate(o.getDate()+2):"大后"==e&&o.setDate(o.getDate()+3),s.end.assign("day",o.getDate()),s.end.assign("month",o.getMonth()+1),s.end.assign("year",o.getFullYear())}else s.end.imply("day",o.getDate()),s.end.imply("month",o.getMonth()+1),s.end.imply("year",o.getFullYear());if(r=0,a=0,i=-1,l[8]){let e=parseInt(l[8]);if(isNaN(e)&&(e=n5(l[8])),e>=60)return null;s.end.assign("second",e)}if(isNaN(r=parseInt(l[6]))&&(r=n5(l[6])),l[7]?"半"==l[7]?a=30:"正"==l[7]||"整"==l[7]?a=0:isNaN(a=parseInt(l[7]))&&(a=n5(l[7])):r>100&&(a=r%100,r=Math.floor(r/100)),a>=60||r>24)return null;if(r>=12&&(i=1),l[9]){if(r>12)return null;let e=l[9][0].toLowerCase();"a"==e&&(i=0,12==r&&(r=0)),"p"==e&&(i=1,12!=r&&(r+=12)),s.start.isCertain("meridiem")||(0==i?(s.start.imply("meridiem",0),12==s.start.get("hour")&&s.start.assign("hour",0)):(s.start.imply("meridiem",1),12!=s.start.get("hour")&&s.start.assign("hour",s.start.get("hour")+12)))}else if(l[2]){let e=l[2][0];"早"==e?(i=0,12==r&&(r=0)):"晚"==e&&(i=1,12!=r&&(r+=12))}else if(l[3]){let e=l[3][0];"上"==e||"早"==e||"凌"==e?(i=0,12==r&&(r=0)):("下"==e||"晚"==e)&&(i=1,12!=r&&(r+=12))}else if(l[5]){let e=l[5][0];"上"==e||"早"==e||"凌"==e?(i=0,12==r&&(r=0)):("下"==e||"晚"==e)&&(i=1,12!=r&&(r+=12))}return s.text=s.text+l[0],s.end.assign("hour",r),s.end.assign("minute",a),i>=0?s.end.assign("meridiem",i):s.start.isCertain("meridiem")&&1==s.start.get("meridiem")&&s.start.get("hour")>r?s.end.imply("meridiem",0):r>12&&s.end.imply("meridiem",1),s.end.date().getTime()<s.start.date().getTime()&&s.end.imply("day",s.end.get("day")+1),s}}let rn=RegExp("(?:星期|礼拜|周)(?<weekday>"+Object.keys(n4).join("|")+")");class rr extends el{innerPattern(){return rn}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=n4[t.groups.weekday];if(void 0===n)return null;let r=new Date(e.refDate.getTime()),a=n-r.getDay();return Math.abs(a-7)<Math.abs(a)&&(a-=7),Math.abs(a+7)<Math.abs(a)&&(a+=7),r.setDate(r.getDate()+a),s.start.assign("weekday",n),s.start.imply("day",r.getDate()),s.start.imply("month",r.getMonth()+1),s.start.imply("year",r.getFullYear()),s}}class ra extends el{innerPattern(e){return RegExp("(而家|立(?:刻|即)|即刻)|(今|明|前|大前|後|大後|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|後|大後|聽|昨|尋|琴)(?:日|天)(?:[\\s|,|，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?","i")}innerExtract(e,t){let s=t.index,n=e.createParsingResult(s,t[0]),r=e.refDate,a=new Date(r.getTime());if(t[1])n.start.imply("hour",r.getHours()),n.start.imply("minute",r.getMinutes()),n.start.imply("second",r.getSeconds()),n.start.imply("millisecond",r.getMilliseconds());else if(t[2]){let e=t[2],s=t[3];"明"==e||"聽"==e?r.getHours()>1&&a.setDate(a.getDate()+1):"昨"==e||"尋"==e||"琴"==e?a.setDate(a.getDate()-1):"前"==e?a.setDate(a.getDate()-2):"大前"==e?a.setDate(a.getDate()-3):"後"==e?a.setDate(a.getDate()+2):"大後"==e&&a.setDate(a.getDate()+3),"早"==s||"朝"==s?n.start.imply("hour",6):"晚"==s&&(n.start.imply("hour",22),n.start.imply("meridiem",1))}else if(t[4]){let e=t[4][0];"早"==e||"朝"==e||"上"==e?n.start.imply("hour",6):"下"==e||"晏"==e?(n.start.imply("hour",15),n.start.imply("meridiem",1)):"中"==e?(n.start.imply("hour",12),n.start.imply("meridiem",1)):"夜"==e||"晚"==e?(n.start.imply("hour",22),n.start.imply("meridiem",1)):"凌"==e&&n.start.imply("hour",0)}else if(t[5]){let e=t[5];"明"==e||"聽"==e?r.getHours()>1&&a.setDate(a.getDate()+1):"昨"==e||"尋"==e||"琴"==e?a.setDate(a.getDate()-1):"前"==e?a.setDate(a.getDate()-2):"大前"==e?a.setDate(a.getDate()-3):"後"==e?a.setDate(a.getDate()+2):"大後"==e&&a.setDate(a.getDate()+3);let s=t[6];if(s){let e=s[0];"早"==e||"朝"==e||"上"==e?n.start.imply("hour",6):"下"==e||"晏"==e?(n.start.imply("hour",15),n.start.imply("meridiem",1)):"中"==e?(n.start.imply("hour",12),n.start.imply("meridiem",1)):"夜"==e||"晚"==e?(n.start.imply("hour",22),n.start.imply("meridiem",1)):"凌"==e&&n.start.imply("hour",0)}}return n.start.assign("day",a.getDate()),n.start.assign("month",a.getMonth()+1),n.start.assign("year",a.getFullYear()),n}}let ri={零:0,一:1,二:2,兩:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10,廿:20,卅:30},rl={天:0,日:0,一:1,二:2,三:3,四:4,五:5,六:6};function ro(e){let t=0;for(let s=0;s<e.length;s++){let n=e[s];"十"===n?t=0===t?ri[n]:t*ri[n]:t+=ri[n]}return t}class rd extends el{innerPattern(){return RegExp("(\\d{2,4}|["+Object.keys(ri).join("")+"]{4}|["+Object.keys(ri).join("")+"]{2})?(?:\\s*)(?:年)?(?:[\\s|,|，]*)(\\d{1,2}|["+Object.keys(ri).join("")+"]{1,2})(?:\\s*)(?:月)(?:\\s*)(\\d{1,2}|["+Object.keys(ri).join("")+"]{1,2})?(?:\\s*)(?:日|號)?")}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=parseInt(t[2]);if(isNaN(n)&&(n=ro(t[2])),s.start.assign("month",n),t[3]){let e=parseInt(t[3]);isNaN(e)&&(e=ro(t[3])),s.start.assign("day",e)}else s.start.imply("day",e.refDate.getDate());if(t[1]){let e=parseInt(t[1]);isNaN(e)&&(e=function(e){let t="";for(let s=0;s<e.length;s++)t+=ri[e[s]];return parseInt(t)}(t[1])),s.start.assign("year",e)}else s.start.imply("year",e.refDate.getFullYear());return s}}let rc=RegExp("(\\d+|["+Object.keys(ri).join("")+"]+|半|幾)(?:\\s*)(?:個)?(秒(?:鐘)?|分鐘|小時|鐘|日|天|星期|禮拜|月|年)(?:(?:之|過)?後|(?:之)?內)","i");class rm extends el{innerPattern(){return rc}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=parseInt(t[1]);if(isNaN(n)&&(n=ro(t[1])),isNaN(n)){let e=t[1];if("幾"===e)n=3;else{if("半"!==e)return null;n=.5}}let r={},a=t[2][0];if(a.match(/[日天星禮月年]/)){"日"==a||"天"==a?r.day=n:"星"==a||"禮"==a?r.week=n:"月"==a?r.month=n:"年"==a&&(r.year=n);let t=M(e.refDate,r);return s.start.assign("year",t.getFullYear()),s.start.assign("month",t.getMonth()+1),s.start.assign("day",t.getDate()),s}"秒"==a?r.second=n:"分"==a?r.minute=n:("小"==a||"鐘"==a)&&(r.hour=n);let i=M(e.refDate,r);return s.start.imply("year",i.getFullYear()),s.start.imply("month",i.getMonth()+1),s.start.imply("day",i.getDate()),s.start.assign("hour",i.getHours()),s.start.assign("minute",i.getMinutes()),s.start.assign("second",i.getSeconds()),s}}let rx=RegExp("(?<prefix>上|今|下|這|呢)(?:個)?(?:星期|禮拜|週)(?<weekday>"+Object.keys(rl).join("|")+")");class ru extends el{innerPattern(){return rx}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=rl[t.groups.weekday];if(void 0===n)return null;let r=null,a=t.groups.prefix;"上"==a?r="last":"下"==a?r="next":("今"==a||"這"==a||"呢"==a)&&(r="this");let i=new Date(e.refDate.getTime()),l=!1,o=i.getDay();if("last"==r||"past"==r)i.setDate(i.getDate()+(n-7-o)),l=!0;else if("next"==r)i.setDate(i.getDate()+(n+7-o)),l=!0;else if("this"==r)i.setDate(i.getDate()+(n-o));else{let e=n-o;Math.abs(e-7)<Math.abs(e)&&(e-=7),Math.abs(e+7)<Math.abs(e)&&(e+=7),i.setDate(i.getDate()+e)}return s.start.assign("weekday",n),l?(s.start.assign("day",i.getDate()),s.start.assign("month",i.getMonth()+1),s.start.assign("year",i.getFullYear())):(s.start.imply("day",i.getDate()),s.start.imply("month",i.getMonth()+1),s.start.imply("year",i.getFullYear())),s}}let rh=RegExp("(?:由|從|自)?(?:(今|明|前|大前|後|大後|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|後|大後|聽|昨|尋|琴)(?:日|天)(?:[\\s,，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(ri).join("")+"]+)(?:\\s*)(?:點|時|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(ri).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(ri).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),rp=RegExp("(?:^\\s*(?:到|至|\\-|\\–|\\~|\\〜)\\s*)(?:(今|明|前|大前|後|大後|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|後|大後|聽|昨|尋|琴)(?:日|天)(?:[\\s,，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(ri).join("")+"]+)(?:\\s*)(?:點|時|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(ri).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(ri).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i");class rg extends el{innerPattern(){return rh}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let s=e.createParsingResult(t.index,t[0]),n=new Date(e.refDate.getTime());if(t[1]){let r=t[1];"明"==r||"聽"==r?e.refDate.getHours()>1&&n.setDate(n.getDate()+1):"昨"==r||"尋"==r||"琴"==r?n.setDate(n.getDate()-1):"前"==r?n.setDate(n.getDate()-2):"大前"==r?n.setDate(n.getDate()-3):"後"==r?n.setDate(n.getDate()+2):"大後"==r&&n.setDate(n.getDate()+3),s.start.assign("day",n.getDate()),s.start.assign("month",n.getMonth()+1),s.start.assign("year",n.getFullYear())}else if(t[4]){let e=t[4];"明"==e||"聽"==e?n.setDate(n.getDate()+1):"昨"==e||"尋"==e||"琴"==e?n.setDate(n.getDate()-1):"前"==e?n.setDate(n.getDate()-2):"大前"==e?n.setDate(n.getDate()-3):"後"==e?n.setDate(n.getDate()+2):"大後"==e&&n.setDate(n.getDate()+3),s.start.assign("day",n.getDate()),s.start.assign("month",n.getMonth()+1),s.start.assign("year",n.getFullYear())}else s.start.imply("day",n.getDate()),s.start.imply("month",n.getMonth()+1),s.start.imply("year",n.getFullYear());let r=0,a=0,i=-1;if(t[8]){var l=parseInt(t[8]);if(isNaN(l)&&(l=ro(t[8])),l>=60)return null;s.start.assign("second",l)}if(isNaN(r=parseInt(t[6]))&&(r=ro(t[6])),t[7]?"半"==t[7]?a=30:"正"==t[7]||"整"==t[7]?a=0:isNaN(a=parseInt(t[7]))&&(a=ro(t[7])):r>100&&(a=r%100,r=Math.floor(r/100)),a>=60||r>24)return null;if(r>=12&&(i=1),t[9]){if(r>12)return null;var o=t[9][0].toLowerCase();"a"==o&&(i=0,12==r&&(r=0)),"p"==o&&(i=1,12!=r&&(r+=12))}else if(t[2]){var d=t[2][0];"朝"==d||"早"==d?(i=0,12==r&&(r=0)):"晚"==d&&(i=1,12!=r&&(r+=12))}else if(t[3]){var c=t[3][0];"上"==c||"朝"==c||"早"==c||"凌"==c?(i=0,12==r&&(r=0)):("下"==c||"晏"==c||"晚"==c)&&(i=1,12!=r&&(r+=12))}else if(t[5]){var m=t[5][0];"上"==m||"朝"==m||"早"==m||"凌"==m?(i=0,12==r&&(r=0)):("下"==m||"晏"==m||"晚"==m)&&(i=1,12!=r&&(r+=12))}s.start.assign("hour",r),s.start.assign("minute",a),i>=0?s.start.assign("meridiem",i):r<12?s.start.imply("meridiem",0):s.start.imply("meridiem",1);let x=rp.exec(e.text.substring(s.index+s.text.length));if(!x)return s.text.match(/^\d+$/)?null:s;let u=new Date(n.getTime());if(s.end=e.createParsingComponents(),x[1]){let t=x[1];"明"==t||"聽"==t?e.refDate.getHours()>1&&u.setDate(u.getDate()+1):"昨"==t||"尋"==t||"琴"==t?u.setDate(u.getDate()-1):"前"==t?u.setDate(u.getDate()-2):"大前"==t?u.setDate(u.getDate()-3):"後"==t?u.setDate(u.getDate()+2):"大後"==t&&u.setDate(u.getDate()+3),s.end.assign("day",u.getDate()),s.end.assign("month",u.getMonth()+1),s.end.assign("year",u.getFullYear())}else if(x[4]){let e=x[4];"明"==e||"聽"==e?u.setDate(u.getDate()+1):"昨"==e||"尋"==e||"琴"==e?u.setDate(u.getDate()-1):"前"==e?u.setDate(u.getDate()-2):"大前"==e?u.setDate(u.getDate()-3):"後"==e?u.setDate(u.getDate()+2):"大後"==e&&u.setDate(u.getDate()+3),s.end.assign("day",u.getDate()),s.end.assign("month",u.getMonth()+1),s.end.assign("year",u.getFullYear())}else s.end.imply("day",u.getDate()),s.end.imply("month",u.getMonth()+1),s.end.imply("year",u.getFullYear());if(r=0,a=0,i=-1,x[8]){let e=parseInt(x[8]);if(isNaN(e)&&(e=ro(x[8])),e>=60)return null;s.end.assign("second",e)}if(isNaN(r=parseInt(x[6]))&&(r=ro(x[6])),x[7]?"半"==x[7]?a=30:"正"==x[7]||"整"==x[7]?a=0:isNaN(a=parseInt(x[7]))&&(a=ro(x[7])):r>100&&(a=r%100,r=Math.floor(r/100)),a>=60||r>24)return null;if(r>=12&&(i=1),x[9]){if(r>12)return null;var o=x[9][0].toLowerCase();"a"==o&&(i=0,12==r&&(r=0)),"p"==o&&(i=1,12!=r&&(r+=12)),s.start.isCertain("meridiem")||(0==i?(s.start.imply("meridiem",0),12==s.start.get("hour")&&s.start.assign("hour",0)):(s.start.imply("meridiem",1),12!=s.start.get("hour")&&s.start.assign("hour",s.start.get("hour")+12)))}else if(x[2]){var d=x[2][0];"朝"==d||"早"==d?(i=0,12==r&&(r=0)):"晚"==d&&(i=1,12!=r&&(r+=12))}else if(x[3]){var c=x[3][0];"上"==c||"朝"==c||"早"==c||"凌"==c?(i=0,12==r&&(r=0)):("下"==c||"晏"==c||"晚"==c)&&(i=1,12!=r&&(r+=12))}else if(x[5]){var m=x[5][0];"上"==m||"朝"==m||"早"==m||"凌"==m?(i=0,12==r&&(r=0)):("下"==m||"晏"==m||"晚"==m)&&(i=1,12!=r&&(r+=12))}return s.text=s.text+x[0],s.end.assign("hour",r),s.end.assign("minute",a),i>=0?s.end.assign("meridiem",i):s.start.isCertain("meridiem")&&1==s.start.get("meridiem")&&s.start.get("hour")>r?s.end.imply("meridiem",0):r>12&&s.end.imply("meridiem",1),s.end.date().getTime()<s.start.date().getTime()&&s.end.imply("day",s.end.get("day")+1),s}}let rb=RegExp("(?:星期|禮拜|週)(?<weekday>"+Object.keys(rl).join("|")+")");class rf extends el{innerPattern(){return rb}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=rl[t.groups.weekday];if(void 0===n)return null;let r=new Date(e.refDate.getTime()),a=n-r.getDay();return Math.abs(a-7)<Math.abs(a)&&(a-=7),Math.abs(a+7)<Math.abs(a)&&(a+=7),r.setDate(r.getDate()+a),s.start.assign("weekday",n),s.start.imply("day",r.getDate()),s.start.imply("month",r.getMonth()+1),s.start.imply("year",r.getFullYear()),s}}class rk extends eE{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}}class rj extends eI{patternBetween(){return/^\s*$/i}}let ry=new ty(rN()),rv=new ty(rC());function rz(e,t,s){return ry.parse(e,t,s)}function rw(e,t,s){return ry.parseDate(e,t,s)}function rN(){let e=rC();return e.parsers.unshift(new ra),e}function rC(){let e=eK({parsers:[new rd,new n6,new ru,new n8,new rf,new rr,new rg,new rs,new rm,new n9],refiners:[new rk,new rj]});return e.refiners=e.refiners.filter(e=>!(e instanceof eB)),e}e.s(["casual",0,ry,"createCasualConfiguration",()=>rN,"createConfiguration",()=>rC,"parse",()=>rz,"parseDate",()=>rw,"strict",0,rv],99422),e.i(99422);let rD=new ty(rE()),rS=new ty(rE()),rT=new ty(rM());function rP(e,t,s){return rS.parse(e,t,s)}function rA(e,t,s){return rS.parseDate(e,t,s)}function rE(){let e=rM();return e.parsers.unshift(new ra),e}function rM(){let e=eK({parsers:[new rd,new ru,new rf,new rg,new rm],refiners:[new rk,new rj]});return e.refiners=e.refiners.filter(e=>!(e instanceof eB)),e}e.s(["casual",0,rS,"createCasualConfiguration",()=>rE,"createConfiguration",()=>rM,"hant",0,rD,"parse",()=>rP,"parseDate",()=>rA,"strict",0,rT],81030),e.i(81030),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,rS,"createCasualConfiguration",()=>rE,"createConfiguration",()=>rM,"hant",0,rD,"parse",()=>rP,"parseDate",()=>rA,"strict",0,rT],83686);var r$=e.i(83686);class rR extends el{innerPattern(e){return RegExp("(现在|立(?:刻|即)|即刻)|(今|明|前|大前|后|大后|昨)(早|晚)|(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|后|大后|昨)(?:日|天)(?:[\\s|,|，]*)(?:(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?","i")}innerExtract(e,t){let s=t.index,n=e.createParsingResult(s,t[0]),r=e.refDate,a=new Date(r.getTime());if(t[1])n.start.imply("hour",r.getHours()),n.start.imply("minute",r.getMinutes()),n.start.imply("second",r.getSeconds()),n.start.imply("millisecond",r.getMilliseconds());else if(t[2]){let e=t[2],s=t[3];"明"==e?r.getHours()>1&&a.setDate(a.getDate()+1):"昨"==e?a.setDate(a.getDate()-1):"前"==e?a.setDate(a.getDate()-2):"大前"==e?a.setDate(a.getDate()-3):"后"==e?a.setDate(a.getDate()+2):"大后"==e&&a.setDate(a.getDate()+3),"早"==s?n.start.imply("hour",6):"晚"==s&&(n.start.imply("hour",22),n.start.imply("meridiem",1))}else if(t[4]){let e=t[4][0];"早"==e||"上"==e?n.start.imply("hour",6):"下"==e?(n.start.imply("hour",15),n.start.imply("meridiem",1)):"中"==e?(n.start.imply("hour",12),n.start.imply("meridiem",1)):"夜"==e||"晚"==e?(n.start.imply("hour",22),n.start.imply("meridiem",1)):"凌"==e&&n.start.imply("hour",0)}else if(t[5]){let e=t[5];"明"==e?r.getHours()>1&&a.setDate(a.getDate()+1):"昨"==e?a.setDate(a.getDate()-1):"前"==e?a.setDate(a.getDate()-2):"大前"==e?a.setDate(a.getDate()-3):"后"==e?a.setDate(a.getDate()+2):"大后"==e&&a.setDate(a.getDate()+3);let s=t[6];if(s){let e=s[0];"早"==e||"上"==e?n.start.imply("hour",6):"下"==e?(n.start.imply("hour",15),n.start.imply("meridiem",1)):"中"==e?(n.start.imply("hour",12),n.start.imply("meridiem",1)):"夜"==e||"晚"==e?(n.start.imply("hour",22),n.start.imply("meridiem",1)):"凌"==e&&n.start.imply("hour",0)}}return n.start.assign("day",a.getDate()),n.start.assign("month",a.getMonth()+1),n.start.assign("year",a.getFullYear()),n}}class rI extends eE{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}}class rF extends eI{patternBetween(){return/^\s*$/i}}let rL=new ty(r_()),rW=new ty(r_()),rO=new ty(rH());function rB(e,t,s){return rW.parse(e,t,s)}function rY(e,t,s){return rW.parseDate(e,t,s)}function r_(){let e=rH();return e.parsers.unshift(new rR),e}function rH(){let e=eK({parsers:[new n6,new n8,new rr,new rs,new n9],refiners:[new rI,new rF]});return e.refiners=e.refiners.filter(e=>!(e instanceof eB)),e}e.s(["casual",0,rW,"createCasualConfiguration",()=>r_,"createConfiguration",()=>rH,"hans",0,rL,"parse",()=>rB,"parseDate",()=>rY,"strict",0,rO],64380),e.i(64380),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,rW,"createCasualConfiguration",()=>r_,"createConfiguration",()=>rH,"hans",0,rL,"parse",()=>rB,"parseDate",()=>rY,"strict",0,rO],32095);var rU=e.i(32095);e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,ry,"createCasualConfiguration",()=>rN,"createConfiguration",()=>rC,"hans",0,rU,"hant",0,r$,"parse",()=>rz,"parseDate",()=>rw,"strict",0,rv],58848),e.i(58848);let rV="([^\\p{L}\\p{N}_]|^)",rq="(?=[^\\p{L}\\p{N}_]|$)",rK={воскресенье:0,воскресенья:0,вск:0,"вск.":0,понедельник:1,понедельника:1,пн:1,"пн.":1,вторник:2,вторника:2,вт:2,"вт.":2,среда:3,среды:3,среду:3,ср:3,"ср.":3,четверг:4,четверга:4,чт:4,"чт.":4,пятница:5,пятницу:5,пятницы:5,пт:5,"пт.":5,суббота:6,субботу:6,субботы:6,сб:6,"сб.":6},rG={январь:1,января:1,январе:1,февраль:2,февраля:2,феврале:2,март:3,марта:3,марте:3,апрель:4,апреля:4,апреле:4,май:5,мая:5,мае:5,июнь:6,июня:6,июне:6,июль:7,июля:7,июле:7,август:8,августа:8,августе:8,сентябрь:9,сентября:9,сентябре:9,октябрь:10,октября:10,октябре:10,ноябрь:11,ноября:11,ноябре:11,декабрь:12,декабря:12,декабре:12},rJ={...rG,янв:1,"янв.":1,фев:2,"фев.":2,мар:3,"мар.":3,апр:4,"апр.":4,авг:8,"авг.":8,сен:9,"сен.":9,окт:10,"окт.":10,ноя:11,"ноя.":11,дек:12,"дек.":12},rZ={один:1,одна:1,одной:1,одну:1,две:2,два:2,двух:2,три:3,трех:3,трёх:3,четыре:4,четырех:4,четырёх:4,пять:5,пяти:5,шесть:6,шести:6,семь:7,семи:7,восемь:8,восьми:8,девять:9,девяти:9,десять:10,десяти:10,одиннадцать:11,одиннадцати:11,двенадцать:12,двенадцати:12},rQ={первое:1,первого:1,второе:2,второго:2,третье:3,третьего:3,четвертое:4,четвертого:4,пятое:5,пятого:5,шестое:6,шестого:6,седьмое:7,седьмого:7,восьмое:8,восьмого:8,девятое:9,девятого:9,десятое:10,десятого:10,одиннадцатое:11,одиннадцатого:11,двенадцатое:12,двенадцатого:12,тринадцатое:13,тринадцатого:13,четырнадцатое:14,четырнадцатого:14,пятнадцатое:15,пятнадцатого:15,шестнадцатое:16,шестнадцатого:16,семнадцатое:17,семнадцатого:17,восемнадцатое:18,восемнадцатого:18,девятнадцатое:19,девятнадцатого:19,двадцатое:20,двадцатого:20,"двадцать первое":21,"двадцать первого":21,"двадцать второе":22,"двадцать второго":22,"двадцать третье":23,"двадцать третьего":23,"двадцать четвертое":24,"двадцать четвертого":24,"двадцать пятое":25,"двадцать пятого":25,"двадцать шестое":26,"двадцать шестого":26,"двадцать седьмое":27,"двадцать седьмого":27,"двадцать восьмое":28,"двадцать восьмого":28,"двадцать девятое":29,"двадцать девятого":29,тридцатое:30,тридцатого:30,"тридцать первое":31,"тридцать первого":31},rX={сек:"second",секунда:"second",секунд:"second",секунды:"second",секунду:"second",секундочка:"second",секундочки:"second",секундочек:"second",секундочку:"second",мин:"minute",минута:"minute",минут:"minute",минуты:"minute",минуту:"minute",минуток:"minute",минутки:"minute",минутку:"minute",минуточек:"minute",минуточки:"minute",минуточку:"minute",час:"hour",часов:"hour",часа:"hour",часу:"hour",часиков:"hour",часика:"hour",часике:"hour",часик:"hour",день:"day",дня:"day",дней:"day",суток:"day",сутки:"day",неделя:"week",неделе:"week",недели:"week",неделю:"week",недель:"week",недельке:"week",недельки:"week",неделек:"week",месяц:"month",месяце:"month",месяцев:"month",месяца:"month",квартал:"quarter",квартале:"quarter",кварталов:"quarter",год:"year",года:"year",году:"year",годов:"year",лет:"year",годик:"year",годика:"year",годиков:"year"},r0=`(?:${W(rZ)}|[0-9]+|[0-9]+\\.[0-9]+|пол|несколько|пар(?:ы|у)|\\s{0,3})`,r1=`(?:${W(rQ)}|[0-9]{1,2}(?:го|ого|е|ое)?)`;function r2(e){let t=e.toLowerCase();return void 0!==rQ[t]?rQ[t]:parseInt(t)}let r4="(?:\\s+(?:году|года|год|г|г.))?",r5=`(?:[1-9][0-9]{0,3}${r4}\\s*(?:н.э.|до н.э.|н. э.|до н. э.)|[1-2][0-9]{3}${r4}|[5-9][0-9]${r4})`;function r6(e){return(/(год|года|г|г.)/i.test(e)&&(e=e.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(e))?-parseInt(e=e.replace(/(до н.э.|до н. э.)/i,"")):/(н. э.|н.э.)/i.test(e)?parseInt(e=e.replace(/(н. э.|н.э.)/i,"")):O(parseInt(e))}let r3=`(${r0})\\s{0,3}(${W(rX)})`,r9=RegExp(r3,"i"),r7=L(`(?:(?:около|примерно)\\s{0,3})?`,r3);function r8(e){let t={},s=e,n=r9.exec(s);for(;n;)(function(e,t){let s=function(e){let t=e.toLowerCase();return void 0!==rZ[t]?rZ[t]:t.match(/несколько/)?3:t.match(/пол/)?.5:t.match(/пар/)?2:""===t?1:parseFloat(t)}(t[1]);e[rX[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length).trim(),n=r9.exec(s);return t}let ae=`(?:(?:около|примерно)\\s*(?:~\\s*)?)?(${r7})${rq}`;class at extends el{patternLeftBoundary(){return rV}innerPattern(e){return e.option.forwardDate?RegExp(ae,"iu"):RegExp(`(?:в течение|в течении)\\s*${ae}`,"iu")}innerExtract(e,t){let s=r8(t[1]);return I.createRelativeFromReference(e.reference,s)}}class as extends el{patternLeftBoundary(){return rV}innerPattern(e){return RegExp(this.innerPatternString(e),"iu")}innerPatternHasChange(e,t){return!1}}class an extends as{innerPattern(e){return RegExp(`${this.innerPatternString(e)}${rq}`,"iu")}}class ar extends an{innerPatternString(e){return`(?:с)?\\s*(${r1})(?:\\s{0,3}(?:по|-|–|до)?\\s{0,3}(${r1}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${W(rJ)})(?:(?:-|\\/|,?\\s{0,3})(${r5}(?![^\\s]\\d)))?`}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=rJ[t[3].toLowerCase()],r=r2(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){let e=r6(t[4]);s.start.assign("year",e)}else{let t=B(e.refDate,r,n);s.start.imply("year",t)}if(t[2]){let e=r2(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}class aa extends as{innerPatternString(e){return`((?:в)\\s*)?(${W(rJ)})\\s*(?:[,-]?\\s*(${r5})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`}innerExtract(e,t){let s=t[2].toLowerCase();if(t[0].length<=3&&!rG[s])return null;let n=e.createParsingResult(t.index,t.index+t[0].length);n.start.imply("day",1);let r=rJ[s];if(n.start.assign("month",r),t[3]){let e=r6(t[3]);n.start.assign("year",e)}else{let t=B(e.refDate,1,r);n.start.imply("year",t)}return n}}class ai extends ev{constructor(e){super(e)}patternFlags(){return"iu"}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return`\\s*(?:\\-|\\–|\\~|\\〜|до|и|по|\\?)\\s*`}primaryPrefix(){return`(?:(?:в|с)\\s*)??`}primarySuffix(){return`(?:\\s*(?:утра|вечера|после полудня))?(?!\\/)${rq}`}extractPrimaryTimeComponents(e,t){let s=super.extractPrimaryTimeComponents(e,t);if(s){if(t[0].endsWith("вечера")){let e=s.get("hour");e>=6&&e<12?(s.assign("hour",s.get("hour")+12),s.assign("meridiem",r.PM)):e<6&&s.assign("meridiem",r.AM)}if(t[0].endsWith("после полудня")){s.assign("meridiem",r.PM);let e=s.get("hour");e>=0&&e<=6&&s.assign("hour",s.get("hour")+12)}t[0].endsWith("утра")&&(s.assign("meridiem",r.AM),12>s.get("hour")&&s.assign("hour",s.get("hour")))}return s}}class al extends as{innerPatternString(e){return`(${r7})\\s{0,5}назад(?=(?:\\W|$))`}innerExtract(e,t){let s=$(r8(t[1]));return I.createRelativeFromReference(e.reference,s)}}class ao extends eE{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}}class ad extends eI{patternBetween(){return RegExp(`^\\s*(T|в|,|-)?\\s*$`)}}class ac extends an{innerPatternString(e){return`(?:с|со)?\\s*(сегодня|вчера|завтра|послезавтра|послепослезавтра|позапозавчера|позавчера)`}innerExtract(e,t){let s=t[1].toLowerCase(),n=e.createParsingComponents();switch(s){case"сегодня":return eJ(e.reference);case"вчера":return eZ(e.reference);case"завтра":return eQ(e.reference);case"послезавтра":return eX(e.reference,2);case"послепослезавтра":return eX(e.reference,3);case"позавчера":return eX(e.reference,-2);case"позапозавчера":return eX(e.reference,-3)}return n}}class am extends an{innerPatternString(e){return`(сейчас|прошлым\\s*вечером|прошлой\\s*ночью|следующей\\s*ночью|сегодня\\s*ночью|этой\\s*ночью|ночью|этим утром|утром|утра|в\\s*полдень|вечером|вечера|в\\s*полночь)`}innerExtract(e,t){let s=e.refDate,n=t[0].toLowerCase(),r=e.createParsingComponents();if("сейчас"===n)return eG(e.reference);if("вечером"===n||"вечера"===n)return e2(e.reference);if(n.endsWith("утром")||n.endsWith("утра"))return e6(e.reference);if(n.match(/в\s*полдень/))return e3(e.reference);if(n.match(/прошлой\s*ночью/))return e1(e.reference);if(n.match(/прошлым\s*вечером/))return e4(e.reference);if(n.match(/следующей\s*ночью/)){let e=22>s.getHours()?1:2,t=new Date(s.getTime());t.setDate(t.getDate()+e),w(r,t),r.imply("hour",0)}return n.match(/в\s*полночь/)||n.endsWith("ночью")?e5(e.reference):r}}class ax extends an{innerPatternString(e){return`(?:(?:,|\\(|（)\\s*)?(?:в\\s*?)?(?:(эту|этот|прошлый|прошлую|следующий|следующую|следующего)\\s*)?(${W(rK)})(?:\\s*(?:,|\\)|）))?(?:\\s*на\\s*(этой|прошлой|следующей)\\s*неделе)?`}innerExtract(e,t){let s=rK[t[2].toLowerCase()],n=t[1],r=t[3],a=n||r;a=(a=a||"").toLowerCase();let i=null;return"прошлый"==a||"прошлую"==a||"прошлой"==a?i="last":"следующий"==a||"следующую"==a||"следующей"==a||"следующего"==a?i="next":("этот"==a||"эту"==a||"этой"==a)&&(i="this"),tt(e.reference,s,i)}}class au extends an{innerPatternString(e){return`(в прошлом|на прошлой|на следующей|в следующем|на этой|в этом)\\s*(${W(rX)})`}innerExtract(e,t){let s=t[1].toLowerCase(),n=rX[t[2].toLowerCase()];if("на следующей"==s||"в следующем"==s){let t={};return t[n]=1,I.createRelativeFromReference(e.reference,t)}if("в прошлом"==s||"на прошлой"==s){let t={};return t[n]=-1,I.createRelativeFromReference(e.reference,t)}let r=e.createParsingComponents(),a=new Date(e.reference.instant.getTime());return n.match(/week/i)?(a.setDate(a.getDate()-a.getDay()),r.imply("day",a.getDate()),r.imply("month",a.getMonth()+1),r.imply("year",a.getFullYear())):n.match(/month/i)?(a.setDate(1),r.imply("day",a.getDate()),r.assign("year",a.getFullYear()),r.assign("month",a.getMonth()+1)):n.match(/year/i)&&(a.setDate(1),a.setMonth(0),r.imply("day",a.getDate()),r.imply("month",a.getMonth()+1),r.assign("year",a.getFullYear())),r}}class ah extends an{innerPatternString(e){return`(эти|последние|прошлые|следующие|после|спустя|через|\\+|-)\\s*(${r7})`}innerExtract(e,t){let s=t[1].toLowerCase(),n=r8(t[2]);switch(s){case"последние":case"прошлые":case"-":n=$(n)}return I.createRelativeFromReference(e.reference,n)}}let ap=new ty(ak()),ag=new ty(aj(!0));function ab(e,t,s){return ap.parse(e,t,s)}function af(e,t,s){return ap.parseDate(e,t,s)}function ak(){let e=aj(!1);return e.parsers.unshift(new ac),e.parsers.unshift(new am),e.parsers.unshift(new aa),e.parsers.unshift(new au),e.parsers.unshift(new ah),e}function aj(e=!0){return eK({parsers:[new td(!0),new at,new ar,new ax,new ai(e),new al],refiners:[new ad,new ao]},e)}e.s(["casual",0,ap,"createCasualConfiguration",()=>ak,"createConfiguration",()=>aj,"parse",()=>ab,"parseDate",()=>af,"strict",0,ag],30662),e.i(30662),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,ap,"createCasualConfiguration",()=>ak,"createConfiguration",()=>aj,"parse",()=>ab,"parseDate",()=>af,"strict",0,ag],29578),e.i(29578);let ay={domingo:0,dom:0,lunes:1,lun:1,martes:2,mar:2,miércoles:3,miercoles:3,mié:3,mie:3,jueves:4,jue:4,viernes:5,vie:5,sábado:6,sabado:6,sáb:6,sab:6},av={enero:1,ene:1,"ene.":1,febrero:2,feb:2,"feb.":2,marzo:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,mayo:5,may:5,"may.":5,junio:6,jun:6,"jun.":6,julio:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,septiembre:9,setiembre:9,sep:9,"sep.":9,octubre:10,oct:10,"oct.":10,noviembre:11,nov:11,"nov.":11,diciembre:12,dic:12,"dic.":12},az={uno:1,dos:2,tres:3,cuatro:4,cinco:5,seis:6,siete:7,ocho:8,nueve:9,diez:10,once:11,doce:12,trece:13},aw={sec:"second",segundo:"second",segundos:"second",min:"minute",mins:"minute",minuto:"minute",minutos:"minute",h:"hour",hr:"hour",hrs:"hour",hora:"hour",horas:"hour",día:"day",días:"day",semana:"week",semanas:"week",mes:"month",meses:"month",cuarto:"quarter",cuartos:"quarter",año:"year",años:"year"},aN=`(?:${W(az)}|[0-9]+|[0-9]+\\.[0-9]+|un?|uno?|una?|algunos?|unos?|demi-?)`,aC=`(${aN})\\s{0,5}(${W(aw)})\\s{0,5}`,aD=RegExp(aC,"i"),aS=L("",aC),aT=RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:(este|esta|pasado|pr[o\xf3]ximo)\\s*)?(${W(ay)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(este|esta|pasado|pr[\xf3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i");class aP extends el{innerPattern(){return aT}innerExtract(e,t){let s=ay[t[2].toLowerCase()];if(void 0===s)return null;let n=t[1],r=t[3],a=n||r||"";a=a.toLowerCase();let i=null;return"pasado"==a?i="this":"próximo"==a||"proximo"==a?i="next":"este"==a&&(i="this"),tt(e.reference,s,i)}}class aA extends ev{primaryPrefix(){return"(?:(?:aslas|deslas|las?|al?|de|del)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|a(?:l)?|\\?)\\s*"}}class aE extends eI{patternBetween(){return RegExp("^\\s*(?:,|de|aslas|a)?\\s*$")}}class aM extends eE{patternBetween(){return/^\s*(?:-)\s*$/i}}let a$=RegExp(`([0-9]{1,2})(?:\xba|\xaa|\xb0)?(?:\\s*(?:desde|de|\\-|\\–|ao?|\\s)\\s*([0-9]{1,2})(?:\xba|\xaa|\xb0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${W(av)})(?:\\s*(?:de|,)?\\s*([0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?))?(?=\\W|$)`,"i");class aR extends el{innerPattern(){return a$}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=av[t[3].toLowerCase()],r=parseInt(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){let e=function(e){if(e.match(/^[0-9]{1,4}$/)){let t=parseInt(e);return t<100&&(t>50?t+=1900:t+=2e3),t}return e.match(/a\.?\s*c\.?/i)?-parseInt(e=e.replace(/a\.?\s*c\.?/i,"")):parseInt(e)}(t[4]);s.start.assign("year",e)}else{let t=B(e.refDate,r,n);s.start.imply("year",t)}if(t[2]){let e=parseInt(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}class aI extends el{innerPattern(e){return/(ahora|hoy|mañana|ayer)(?=\W|$)/i}innerExtract(e,t){let s=t[0].toLowerCase(),n=e.createParsingComponents();switch(s){case"ahora":return eG(e.reference);case"hoy":return eJ(e.reference);case"mañana":return eQ(e.reference);case"ayer":return eZ(e.reference)}return n}}class aF extends el{innerPattern(){return/(?:esta\s*)?(mañana|tarde|medianoche|mediodia|mediodía|noche)(?=\W|$)/i}innerExtract(e,t){let s=e.refDate,n=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":n.imply("meridiem",r.PM),n.imply("hour",15);break;case"noche":n.imply("meridiem",r.PM),n.imply("hour",22);break;case"mañana":n.imply("meridiem",r.AM),n.imply("hour",6);break;case"medianoche":let a=new Date(s.getTime());a.setDate(a.getDate()+1),w(n,a),D(n,a),n.imply("hour",0),n.imply("minute",0),n.imply("second",0);break;case"mediodia":case"mediodía":n.imply("meridiem",r.AM),n.imply("hour",12)}return n}}class aL extends el{innerPattern(){return RegExp(`(?:en|por|durante|de|dentro de)\\s*(${aS})(?=\\W|$)`,"i")}innerExtract(e,t){let s=function(e){let t={},s=e,n=aD.exec(s);for(;n;)(function(e,t){let s=function(e){let t=e.toLowerCase();if(void 0!==az[t])return az[t];if("un"===t||"una"===t||"uno"===t)return 1;if(t.match(/algunos?/))return 3;if(t.match(/unos?/))return 3;if(t.match(/media?/))return .5;return parseFloat(t)}(t[1]);e[aw[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length),n=aD.exec(s);return t}(t[1]);return I.createRelativeFromReference(e.reference,s)}}let aW=new ty(a_()),aO=new ty(aH(!0));function aB(e,t,s){return aW.parse(e,t,s)}function aY(e,t,s){return aW.parseDate(e,t,s)}function a_(e=!0){let t=aH(!1,e);return t.parsers.push(new aI),t.parsers.push(new aF),t}function aH(e=!0,t=!0){return eK({parsers:[new td(t),new aP,new aA,new aR,new aL],refiners:[new aE,new aM]},e)}e.s(["casual",0,aW,"createCasualConfiguration",()=>a_,"createConfiguration",()=>aH,"parse",()=>aB,"parseDate",()=>aY,"strict",0,aO],23611),e.i(23611),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,aW,"createCasualConfiguration",()=>a_,"createConfiguration",()=>aH,"parse",()=>aB,"parseDate",()=>aY,"strict",0,aO],25750),e.i(25750);let aU="([^\\p{L}\\p{N}_]|^)",aV="(?=[^\\p{L}\\p{N}_]|$)",aq={неділя:0,неділі:0,неділю:0,нд:0,"нд.":0,понеділок:1,понеділка:1,пн:1,"пн.":1,вівторок:2,вівторка:2,вт:2,"вт.":2,середа:3,середи:3,середу:3,ср:3,"ср.":3,четвер:4,четверга:4,четвергу:4,чт:4,"чт.":4,"п'ятниця":5,"п'ятниці":5,"п'ятницю":5,пт:5,"пт.":5,субота:6,суботи:6,суботу:6,сб:6,"сб.":6},aK={січень:1,січня:1,січні:1,лютий:2,лютого:2,лютому:2,березень:3,березня:3,березні:3,квітень:4,квітня:4,квітні:4,травень:5,травня:5,травні:5,червень:6,червня:6,червні:6,липень:7,липня:7,липні:7,серпень:8,серпня:8,серпні:8,вересень:9,вересня:9,вересні:9,жовтень:10,жовтня:10,жовтні:10,листопад:11,листопада:11,листопаду:11,грудень:12,грудня:12,грудні:12},aG={...aK,січ:1,"січ.":1,лют:2,"лют.":2,бер:3,"бер.":3,квіт:4,"квіт.":4,трав:5,"трав.":5,черв:6,"черв.":6,лип:7,"лип.":7,серп:8,"серп.":8,сер:8,"cер.":8,вер:9,"вер.":9,верес:9,"верес.":9,жовт:10,"жовт.":10,листоп:11,"листоп.":11,груд:12,"груд.":12},aJ={один:1,одна:1,одної:1,одну:1,дві:2,два:2,двох:2,три:3,трьох:3,чотири:4,чотирьох:4,"п'ять":5,"п'яти":5,шість:6,шести:6,сім:7,семи:7,вісім:8,восьми:8,"дев'ять":9,"дев'яти":9,десять:10,десяти:10,одинадцять:11,одинадцяти:11,дванадцять:12,дванадцяти:12},aZ={перше:1,першого:1,друге:2,другого:2,третє:3,третього:3,четверте:4,четвертого:4,"п'яте":5,"п'ятого":5,шосте:6,шостого:6,сьоме:7,сьомого:7,восьме:8,восьмого:8,"дев'яте":9,"дев'ятого":9,десяте:10,десятого:10,одинадцяте:11,одинадцятого:11,дванадцяте:12,дванадцятого:12,тринадцяте:13,тринадцятого:13,чотирнадцяте:14,чотинрнадцятого:14,"п'ятнадцяте":15,"п'ятнадцятого":15,шістнадцяте:16,шістнадцятого:16,сімнадцяте:17,сімнадцятого:17,вісімнадцяте:18,вісімнадцятого:18,"дев'ятнадцяте":19,"дев'ятнадцятого":19,двадцяте:20,двадцятого:20,"двадцять перше":21,"двадцять першого":21,"двадцять друге":22,"двадцять другого":22,"двадцять третє":23,"двадцять третього":23,"двадцять четверте":24,"двадцять четвертого":24,"двадцять п'яте":25,"двадцять п'ятого":25,"двадцять шосте":26,"двадцять шостого":26,"двадцять сьоме":27,"двадцять сьомого":27,"двадцять восьме":28,"двадцять восьмого":28,"двадцять дев'яте":29,"двадцять дев'ятого":29,тридцяте:30,тридцятого:30,"тридцять перше":31,"тридцять першого":31},aQ={сек:"second",секунда:"second",секунд:"second",секунди:"second",секунду:"second",секундочок:"second",секундочки:"second",секундочку:"second",хв:"minute",хвилина:"minute",хвилин:"minute",хвилини:"minute",хвилину:"minute",хвилинок:"minute",хвилинки:"minute",хвилинку:"minute",хвилиночок:"minute",хвилиночки:"minute",хвилиночку:"minute",год:"hour",година:"hour",годин:"hour",години:"hour",годину:"hour",годинка:"hour",годинок:"hour",годинки:"hour",годинку:"hour",день:"day",дня:"day",днів:"day",дні:"day",доба:"day",добу:"day",тиждень:"week",тижню:"week",тижня:"week",тижні:"week",тижнів:"week",місяць:"month",місяців:"month",місяці:"month",місяця:"month",квартал:"quarter",кварталу:"quarter",квартала:"quarter",кварталів:"quarter",кварталі:"quarter",рік:"year",року:"year",році:"year",років:"year",роки:"year"},aX=`(?:${W(aJ)}|[0-9]+|[0-9]+\\.[0-9]+|пів|декілька|пар(?:у)|\\s{0,3})`,a0=`(?:${W(aZ)}|[0-9]{1,2}(?:го|ого|е)?)`;function a1(e){let t=e.toLowerCase();return void 0!==aZ[t]?aZ[t]:parseInt(t)}let a2="(?:\\s+(?:року|рік|р|р.))?",a4=`(?:[1-9][0-9]{0,3}${a2}\\s*(?:н.е.|до н.е.|н. е.|до н. е.)|[1-2][0-9]{3}${a2}|[5-9][0-9]${a2})`;function a5(e){return(/(рік|року|р|р.)/i.test(e)&&(e=e.replace(/(рік|року|р|р.)/i,"")),/(до н.е.|до н. е.)/i.test(e))?-parseInt(e=e.replace(/(до н.е.|до н. е.)/i,"")):/(н. е.|н.е.)/i.test(e)?parseInt(e=e.replace(/(н. е.|н.е.)/i,"")):O(parseInt(e))}let a6=`(${aX})\\s{0,3}(${W(aQ)})`,a3=RegExp(a6,"i"),a9=L(`(?:(?:близько|приблизно)\\s{0,3})?`,a6);function a7(e){let t={},s=e,n=a3.exec(s);for(;n;)(function(e,t){let s=function(e){let t=e.toLowerCase();return void 0!==aJ[t]?aJ[t]:t.match(/декілька/)?2:t.match(/пів/)?.5:t.match(/пар/)?2:""===t?1:parseFloat(t)}(t[1]);e[aQ[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length).trim(),n=a3.exec(s);return t}let a8=`(?:(?:приблизно|орієнтовно)\\s*(?:~\\s*)?)?(${a9})${aV}`;class ie extends el{patternLeftBoundary(){return aU}innerPattern(e){return e.option.forwardDate?RegExp(a8,"i"):RegExp(`(?:протягом|на протязі|протягом|упродовж|впродовж)\\s*${a8}`,"iu")}innerExtract(e,t){let s=a7(t[1]);return I.createRelativeFromReference(e.reference,s)}}class it extends el{patternLeftBoundary(){return aU}innerPattern(e){return RegExp(this.innerPatternString(e),"iu")}innerPatternHasChange(e,t){return!1}}class is extends it{innerPattern(e){return RegExp(`${this.innerPatternString(e)}${aV}`,"iu")}}class ir extends is{innerPatternString(e){return`(?:з|із)?\\s*(${a0})(?:\\s{0,3}(?:по|-|–|до)?\\s{0,3}(${a0}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${W(aG)})(?:(?:-|\\/|,?\\s{0,3})(${a4}(?![^\\s]\\d)))?`}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=aG[t[3].toLowerCase()],r=a1(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){let e=a5(t[4]);s.start.assign("year",e)}else{let t=B(e.reference.instant,r,n);s.start.imply("year",t)}if(t[2]){let e=a1(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}class ia extends it{innerPatternString(e){return`((?:в|у)\\s*)?(${W(aG)})\\s*(?:[,-]?\\s*(${a4})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`}innerExtract(e,t){let s=t[2].toLowerCase();if(t[0].length<=3&&!aK[s])return null;let n=e.createParsingResult(t.index,t.index+t[0].length);n.start.imply("day",1);let r=aG[s];if(n.start.assign("month",r),t[3]){let e=a5(t[3]);n.start.assign("year",e)}else{let t=B(e.reference.instant,1,r);n.start.imply("year",t)}return n}}class ii extends ev{constructor(e){super(e)}patternFlags(){return"iu"}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return`\\s*(?:\\-|\\–|\\~|\\〜|до|і|по|\\?)\\s*`}primaryPrefix(){return`(?:(?:в|у|о|об|з|із|від)\\s*)??`}primarySuffix(){return`(?:\\s*(?:ранку|вечора|по обіді|після обіду))?(?!\\/)${aV}`}extractPrimaryTimeComponents(e,t){let s=super.extractPrimaryTimeComponents(e,t);if(s){if(t[0].endsWith("вечора")){let e=s.get("hour");e>=6&&e<12?(s.assign("hour",s.get("hour")+12),s.assign("meridiem",r.PM)):e<6&&s.assign("meridiem",r.AM)}if(t[0].endsWith("по обіді")||t[0].endsWith("після обіду")){s.assign("meridiem",r.PM);let e=s.get("hour");e>=0&&e<=6&&s.assign("hour",s.get("hour")+12)}t[0].endsWith("ранку")&&(s.assign("meridiem",r.AM),12>s.get("hour")&&s.assign("hour",s.get("hour")))}return s}}class il extends it{innerPatternString(e){return`(${a9})\\s{0,5}тому(?=(?:\\W|$))`}innerExtract(e,t){let s=$(a7(t[1]));return I.createRelativeFromReference(e.reference,s)}}class io extends eE{patternBetween(){return/^\s*(і до|і по|до|по|-)\s*$/i}}class id extends eI{patternBetween(){return RegExp(`^\\s*(T|в|у|о|,|-)?\\s*$`)}}class ic extends is{innerPatternString(e){return`(?:з|із|від)?\\s*(сьогодні|вчора|завтра|післязавтра|післяпіслязавтра|позапозавчора|позавчора)`}innerExtract(e,t){let s=t[1].toLowerCase(),n=e.createParsingComponents();switch(s){case"сьогодні":return eJ(e.reference);case"вчора":return eZ(e.reference);case"завтра":return eQ(e.reference);case"післязавтра":return eX(e.reference,2);case"післяпіслязавтра":return eX(e.reference,3);case"позавчора":return eX(e.reference,-2);case"позапозавчора":return eX(e.reference,-3)}return n}}class im extends is{innerPatternString(e){return`(зараз|минулого\\s*вечора|минулої\\s*ночі|наступної\\s*ночі|сьогодні\\s*вночі|цієї\\s*ночі|цього ранку|вранці|ранку|зранку|опівдні|ввечері|вечора|опівночі|вночі)`}innerExtract(e,t){let s=e.refDate,n=t[0].toLowerCase(),r=e.createParsingComponents();if("зараз"===n)return eG(e.reference);if("ввечері"===n||"вечора"===n)return e2(e.reference);if(n.endsWith("вранці")||n.endsWith("ранку")||n.endsWith("зранку"))return e6(e.reference);if(n.endsWith("опівдні"))return e3(e.reference);if(n.match(/минулої\s*ночі/))return e1(e.reference);if(n.match(/минулого\s*вечора/))return e4(e.reference);if(n.match(/наступної\s*ночі/)){let e=22>s.getHours()?1:2,t=new Date(s.getTime());t.setDate(t.getDate()+e),w(r,t),r.imply("hour",1)}return n.match(/цієї\s*ночі/)||n.endsWith("опівночі")||n.endsWith("вночі")?e5(e.reference):r}}class ix extends is{innerPatternString(e){return`(?:(?:,|\\(|（)\\s*)?(?:в\\s*?)?(?:у\\s*?)?(?:(цей|минулого|минулий|попередній|попереднього|наступного|наступний|наступному)\\s*)?(${W(aq)})(?:\\s*(?:,|\\)|）))?(?:\\s*(на|у|в)\\s*(цьому|минулому|наступному)\\s*тижні)?`}innerExtract(e,t){let s=aq[t[2].toLocaleLowerCase()],n=t[1],r=t[3],a=n||r;a=(a=a||"").toLocaleLowerCase();let i=null;return"минулого"==a||"минулий"==a||"попередній"==a||"попереднього"==a?i="last":"наступного"==a||"наступний"==a?i="next":("цей"==a||"цього"==a||"цьому"==a)&&(i="this"),tt(e.reference,s,i)}}class iu extends is{innerPatternString(e){return`(в минулому|у минулому|на минулому|минулого|на наступному|в наступному|у наступному|наступного|на цьому|в цьому|у цьому|цього)\\s*(${W(aQ)})(?=\\s*)`}innerExtract(e,t){let s=t[1].toLowerCase(),n=aQ[t[2].toLowerCase()];if("на наступному"==s||"в наступному"==s||"у наступному"==s||"наступного"==s){let t={};return t[n]=1,I.createRelativeFromReference(e.reference,t)}if("на минулому"==s||"в минулому"==s||"у минулому"==s||"минулого"==s){let t={};return t[n]=-1,I.createRelativeFromReference(e.reference,t)}let r=e.createParsingComponents(),a=new Date(e.reference.instant.getTime());return n.match(/week/i)?(a.setDate(a.getDate()-a.getDay()),r.imply("day",a.getDate()),r.imply("month",a.getMonth()+1),r.imply("year",a.getFullYear())):n.match(/month/i)?(a.setDate(1),r.imply("day",a.getDate()),r.assign("year",a.getFullYear()),r.assign("month",a.getMonth()+1)):n.match(/year/i)&&(a.setDate(1),a.setMonth(0),r.imply("day",a.getDate()),r.imply("month",a.getMonth()+1),r.assign("year",a.getFullYear())),r}}class ih extends is{innerPatternString(e){return`(ці|останні|минулі|майбутні|наступні|після|через|\\+|-)\\s*(${a9})`}innerExtract(e,t){let s=t[1].toLowerCase(),n=a7(t[3]);switch(s){case"останні":case"минулі":case"-":n=$(n)}return I.createRelativeFromReference(e.reference,n)}}let ip=new ty(ib()),ig=new ty(ik(!0));function ib(){let e=ik(!1);return e.parsers.unshift(new ic),e.parsers.unshift(new im),e.parsers.unshift(new ia),e.parsers.unshift(new iu),e.parsers.unshift(new ih),e}function ik(e){return eK({parsers:[new eV,new td(!0),new ie,new ir,new ix,new ii(e),new il],refiners:[new id,new io]},e)}function ij(e,t,s){return ip.parse(e,t,s)}function iy(e,t,s){return ip.parseDate(e,t,s)}e.s(["casual",0,ip,"createCasualConfiguration",()=>ib,"createConfiguration",()=>ik,"parse",()=>ij,"parseDate",()=>iy,"strict",0,ig],44552),e.i(44552),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,ip,"createCasualConfiguration",()=>ib,"createConfiguration",()=>ik,"parse",()=>ij,"parseDate",()=>iy,"strict",0,ig],30194),e.i(30194);let iv={domenica:0,dom:0,lunedì:1,lun:1,martedì:2,mar:2,mercoledì:3,merc:3,giovedì:4,giov:4,venerdì:5,ven:5,sabato:6,sab:6},iz={},iw={...iz,gennaio:1,gen:1,"gen.":1,febbraio:2,feb:2,"feb.":2,febraio:2,febb:2,"febb.":2,marzo:3,mar:3,"mar.":3,aprile:4,apr:4,"apr.":4,maggio:5,mag:5,giugno:6,giu:6,luglio:7,lug:7,lugl:7,"lug.":7,agosto:8,ago:8,settembre:9,set:9,"set.":9,sett:9,"sett.":9,ottobre:10,ott:10,"ott.":10,novembre:11,nov:11,"nov.":11,dicembre:12,dic:12,dice:12,"dic.":12},iN={uno:1,due:2,tre:3,quattro:4,cinque:5,sei:6,sette:7,otto:8,nove:9,dieci:10,undici:11,dodici:12},iC={primo:1,secondo:2,terzo:3,quarto:4,quinto:5,sesto:6,settimo:7,ottavo:8,nono:9,decimo:10,undicesimo:11,dodicesimo:12,tredicesimo:13,quattordicesimo:14,quindicesimo:15,sedicesimo:16,diciassettesimo:17,diciottesimo:18,diciannovesimo:19,ventesimo:20,ventunesimo:21,ventiduesimo:22,ventitreesimo:23,ventiquattresimo:24,venticinquesimo:25,ventiseiesimo:26,ventisettesimo:27,ventottesimo:28,ventinovesimo:29,trentesimo:30,trentunesimo:31},iD={sec:"second",secondo:"second",secondi:"second",min:"minute",mins:"minute",minuti:"minute",h:"hour",hr:"hour",o:"hour",ora:"hour",ore:"hour",giorno:"day",giorni:"day",settimana:"week",settimane:"week",mese:"month",trimestre:"quarter",trimestri:"quarter",anni:"year",anno:"year"},iS=`(?:${W(iN)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}un?)?|un?\\b(?:\\s{0,2}qualcuno)?|qualcuno|molti|a?\\s{0,2}alcuni\\s{0,2}(?:of)?)`,iT=`(?:${W(iC)}|[0-9]{1,2}(?:mo|ndo|rzo|simo|esimo)?)`;function iP(e){let t=e.toLowerCase();return void 0!==iC[t]?iC[t]:parseInt(t=t.replace(/(?:imo|ndo|rzo|rto|nto|sto|tavo|nono|cimo|timo|esimo)$/i,""))}let iA="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function iE(e){return/BE/i.test(e)?parseInt(e=e.replace(/BE/i,""))-543:/BCE?/i.test(e)?-parseInt(e=e.replace(/BCE?/i,"")):/(AD|CE)/i.test(e)?parseInt(e=e.replace(/(AD|CE)/i,"")):O(parseInt(e))}let iM=`(${iS})\\s{0,3}(${W(iD)})`,i$=RegExp(iM,"i"),iR=L("(?:(?:about|around)\\s{0,3})?",iM);function iI(e){let t={},s=e,n=i$.exec(s);for(;n;)(function(e,t){let s=function(e){let t=e.toLowerCase();if(void 0!==iN[t])return iN[t];if("un"===t||"una"===t)return 1;if(t.match(/alcuni/))return 3;if(t.match(/metá/))return .5;if(t.match(/paio/))return 2;else if(t.match(/molti/))return 7;return parseFloat(t)}(t[1]);e[iD[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length).trim(),n=i$.exec(s);return t}let iF=RegExp(`(?:within|in|for)\\s*(?:(?:pi\xf9 o meno|intorno|approssimativamente|verso|verso le)\\s*(?:~\\s*)?)?(${iR})(?=\\W|$)`,"i"),iL=RegExp(`(?:(?:pi\xf9 o meno|intorno|approssimativamente|verso|verso le)\\s*(?:~\\s*)?)?(${iR})(?=\\W|$)`,"i");class iW extends el{innerPattern(e){return e.option.forwardDate?iL:iF}innerExtract(e,t){let s=iI(t[1]);return I.createRelativeFromReference(e.reference,s)}}let iO=RegExp(`(?:on\\s{0,3})?(${iT})(?:\\s{0,3}(?:al|\\-|\\–|fino|alle|allo)?\\s{0,3}(${iT}))?(?:-|/|\\s{0,3}(?:dal)?\\s{0,3})(${W(iw)})(?:(?:-|/|,?\\s{0,3})(${iA}(?![^\\s]\\d)))?(?=\\W|$)`,"i");class iB extends el{innerPattern(){return iO}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=iw[t[3].toLowerCase()],r=iP(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){let e=iE(t[4]);s.start.assign("year",e)}else{let t=B(e.refDate,r,n);s.start.imply("year",t)}if(t[2]){let e=iP(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}let iY=RegExp(`(${W(iw)})(?:-|/|\\s*,?\\s*)(${iT})(?!\\s*(?:am|pm))\\s*(?:(?:al|\\-|\\alle|\\del|\\s)\\s*(${iT})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${iA}))?(?=\\W|$)(?!\\:\\d)`,"i");class i_ extends el{innerPattern(){return iY}innerExtract(e,t){let s=iw[t[1].toLowerCase()],n=iP(t[2]);if(n>31)return null;let r=e.createParsingComponents({day:n,month:s});if(t[4]){let e=iE(t[4]);r.assign("year",e)}else{let t=B(e.refDate,n,s);r.imply("year",t)}if(!t[3])return r;let a=iP(t[3]),i=e.createParsingResult(t.index,t[0]);return i.start=r,i.end=r.clone(),i.end.assign("day",a),i}}let iH=RegExp(`((?:in)\\s*)?(${W(iw)})\\s*(?:[,-]?\\s*(${iA})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class iU extends el{innerPattern(){return iH}innerExtract(e,t){let s=t[2].toLowerCase();if(t[0].length<=3&&!iz[s])return null;let n=e.createParsingResult(t.index+(t[1]||"").length,t.index+t[0].length);n.start.imply("day",1);let r=iw[s];if(n.start.assign("month",r),t[3]){let e=iE(t[3]);n.start.assign("year",e)}else{let t=B(e.refDate,1,r);n.start.imply("year",t)}return n}}let iV=RegExp(`([0-9]{4})[\\.\\/\\s](?:(${W(iw)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class iq extends el{innerPattern(){return iV}innerExtract(e,t){let s=t[3]?parseInt(t[3]):iw[t[2].toLowerCase()];if(s<1||s>12)return null;let n=parseInt(t[1]);return{day:parseInt(t[4]),month:s,year:n}}}let iK=RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class iG extends el{innerPattern(){return iK}innerExtract(e,t){let s=parseInt(t[2]),n=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",n).assign("year",s)}}class iJ extends ev{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:alle|dalle)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*in punto|alle\\s*sera|in\\s*del\\s*(?:mattina|pomeriggio)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let s=super.extractPrimaryTimeComponents(e,t);if(s){if(t[0].endsWith("sera")){let e=s.get("hour");e>=6&&e<12?(s.assign("hour",s.get("hour")+12),s.assign("meridiem",r.PM)):e<6&&s.assign("meridiem",r.AM)}if(t[0].endsWith("pomeriggio")){s.assign("meridiem",r.PM);let e=s.get("hour");e>=0&&e<=6&&s.assign("hour",s.get("hour")+12)}t[0].endsWith("mattina")&&(s.assign("meridiem",r.AM),12>s.get("hour")&&s.assign("hour",s.get("hour")))}return s}}let iZ=RegExp(`(${iR})\\s{0,5}(?:fa|prima|precedente)(?=(?:\\W|$))`,"i"),iQ=RegExp(`(${iR})\\s{0,5}fa(?=(?:\\W|$))`,"i");class iX extends el{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?iQ:iZ}innerExtract(e,t){let s=$(iI(t[1]));return I.createRelativeFromReference(e.reference,s)}}let i0=RegExp(`(${iR})\\s{0,5}(?:dopo|pi\xf9 tardi|da adesso|avanti|oltre|a seguire)(?=(?:\\W|$))`,"i"),i1=RegExp("("+iR+")(dopo|più tardi)(?=(?:\\W|$))","i");class i2 extends el{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?i1:i0}innerExtract(e,t){let s=iI(t[1]);return I.createRelativeFromReference(e.reference,s)}}class i4 extends eE{patternBetween(){return/^\s*(to|-)\s*$/i}}class i5 extends eI{patternBetween(){return RegExp("^\\s*(T|alle|dopo|prima|il|di|del|delle|,|-)?\\s*$")}}let i6=/(ora|oggi|stasera|questa sera|domani|dmn|ieri\s*sera)(?=\W|$)/i;class i3 extends el{innerPattern(e){return i6}innerExtract(e,t){let s=e.refDate,n=t[0].toLowerCase(),r=e.createParsingComponents();switch(n){case"ora":return eG(e.reference);case"oggi":return eJ(e.reference);case"ieri":return eZ(e.reference);case"domani":case"dmn":return eQ(e.reference);case"stasera":case"questa sera":return e0(e.reference);default:if(n.match(/ieri\s*sera/)){if(s.getHours()>6){let e=new Date(s.getTime());e.setDate(e.getDate()-1),s=e}w(r,s),r.imply("hour",0)}}return r}}let i9=/(?:questo|questa)?\s{0,3}(mattina|pomeriggio|sera|notte|mezzanotte|mezzogiorno)(?=\W|$)/i;class i7 extends el{innerPattern(){return i9}innerExtract(e,t){let s=e.refDate,n=e.createParsingComponents();switch(t[1].toLowerCase()){case"pomeriggio":n.imply("meridiem",r.PM),n.imply("hour",15);break;case"sera":case"notte":n.imply("meridiem",r.PM),n.imply("hour",20);break;case"mezzanotte":let a=new Date(s.getTime());a.setDate(a.getDate()+1),w(n,a),D(n,a),n.imply("hour",0),n.imply("minute",0),n.imply("second",0);break;case"mattina":n.imply("meridiem",r.AM),n.imply("hour",6);break;case"mezzogiorno":n.imply("meridiem",r.AM),n.imply("hour",12)}return n}}let i8=RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:il\\s*?)?(?:(questa|l'ultima|scorsa|prossima)\\s*)?(${W(iv)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(questa|l'ultima|scorsa|prossima)\\s*settimana)?(?=\\W|$)`,"i");class le extends el{innerPattern(){return i8}innerExtract(e,t){let s=iv[t[2].toLowerCase()],n=t[1],r=t[3],a=n||r;a=(a=a||"").toLowerCase();let i=null;return"ultima"==a||"scorsa"==a?i="ultima":"prossima"==a?i="prossima":"questa"==a&&(i="questa"),tt(e.reference,s,i)}}let lt=RegExp(`(questo|ultimo|scorso|prossimo|dopo\\s*questo|questa|ultima|scorsa|prossima\\s*questa)\\s*(${W(iD)})(?=\\s*)(?=\\W|$)`,"i");class ls extends el{innerPattern(){return lt}innerExtract(e,t){let s=t[1].toLowerCase(),n=t[2].toLowerCase(),r=iD[n];if("prossimo"==s||s.startsWith("dopo")){let t={};return t[r]=1,I.createRelativeFromReference(e.reference,t)}if("prima"==s||"precedente"==s){let t={};return t[r]=-1,I.createRelativeFromReference(e.reference,t)}let a=e.createParsingComponents(),i=new Date(e.reference.instant.getTime());return n.match(/settimana/i)?(i.setDate(i.getDate()-i.getDay()),a.imply("day",i.getDate()),a.imply("month",i.getMonth()+1),a.imply("year",i.getFullYear())):n.match(/mese/i)?(i.setDate(1),a.imply("day",i.getDate()),a.assign("year",i.getFullYear()),a.assign("month",i.getMonth()+1)):n.match(/anno/i)&&(i.setDate(1),i.setMonth(0),a.imply("day",i.getDate()),a.imply("month",i.getMonth()+1),a.assign("year",i.getFullYear())),a}}let ln=RegExp(`(questo|ultimo|passato|prossimo|dopo|questa|ultima|passata|prossima|\\+|-)\\s*(${iR})(?=\\W|$)`,"i");class lr extends el{innerPattern(){return ln}innerExtract(e,t){let s=t[1].toLowerCase(),n=iI(t[2]);switch(s){case"last":case"past":case"-":n=$(n)}return I.createRelativeFromReference(e.reference,n)}}function la(e){return null!=e.text.match(/\s+(prima|dal)$/i)}class li extends eA{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,s){return!!e.match(this.patternBetween())&&(!!la(t)||null!=t.text.match(/\s+(dopo|dal|fino)$/i))&&!!s.start.get("day")&&!!s.start.get("month")&&!!s.start.get("year")}mergeResults(e,t,s){let n=iI(t.text);la(t)&&(n=$(n));let r=I.createRelativeFromReference(R.fromDate(s.start.date()),n);return new F(s.reference,t.index,`${t.text}${e}${s.text}`,r)}}let ll=new ty(lx(!1)),lo=new ty(lu(!0,!1)),ld=new ty(lu(!1,!0));function lc(e,t,s){return ll.parse(e,t,s)}function lm(e,t,s){return ll.parseDate(e,t,s)}function lx(e=!1){let t=lu(!1,e);return t.parsers.unshift(new i3),t.parsers.unshift(new i7),t.parsers.unshift(new iU),t.parsers.unshift(new ls),t.parsers.unshift(new lr),t}function lu(e=!0,t=!1){return eK({parsers:[new td(t),new iW,new iB,new i_,new le,new iq,new iG,new iJ(e),new iX(e),new i2(e)],refiners:[new li,new i5,new i4]},e)}e.s(["GB",0,ld,"casual",0,ll,"createCasualConfiguration",()=>lx,"createConfiguration",()=>lu,"parse",()=>lc,"parseDate",()=>lm,"strict",0,lo],74052),e.i(74052);let lh={söndag:0,sön:0,so:0,måndag:1,mån:1,må:1,tisdag:2,tis:2,ti:2,onsdag:3,ons:3,on:3,torsdag:4,tors:4,to:4,fredag:5,fre:5,fr:5,lördag:6,lör:6,lö:6},lp={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,mars:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,maj:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augusti:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12},lg={en:1,ett:1,två:2,tre:3,fyra:4,fem:5,sex:6,sju:7,åtta:8,nio:9,tio:10,elva:11,tolv:12,tretton:13,fjorton:14,femton:15,sexton:16,sjutton:17,arton:18,nitton:19,tjugo:20,trettiо:30,fyrtio:40,femtio:50,sextio:60,sjuttio:70,åttio:80,nittio:90,hundra:100,tusen:1e3},lb={sek:"second",sekund:"second",sekunder:"second",min:"minute",minut:"minute",minuter:"minute",tim:"hour",timme:"hour",timmar:"hour",dag:"day",dagar:"day",vecka:"week",veckor:"week",mån:"month",månad:"month",månader:"month",år:"year",kvartаl:"quarter",kvartal:"quarter"},lf=`(?:${W(lg)}|\\d+)`;W({första:1,andra:2,tredje:3,fjärde:4,femte:5,sjätte:6,sjunde:7,åttonde:8,nionde:9,tionde:10,elfte:11,tolfte:12,trettonde:13,fjortonde:14,femtonde:15,sextonde:16,sjuttonde:17,artonde:18,nittonde:19,tjugonde:20,tjugoförsta:21,tjugoandra:22,tjugotredje:23,tjugofjärde:24,tjugofemte:25,tjugosjätte:26,tjugosjunde:27,tjugoåttonde:28,tjugonionde:29,trettionde:30,trettioförsta:31}),W(lb);let lk=`(${lf})\\s{0,5}(${W(lb)})\\s{0,5}`,lj=RegExp(lk,"i"),ly=`(${lf})\\s{0,5}(${W({sekund:"second",sekunder:"second",minut:"minute",minuter:"minute",timme:"hour",timmar:"hour",dag:"day",dagar:"day",vecka:"week",veckor:"week",månad:"month",månader:"month",år:"year",kvartal:"quarter"})})\\s{0,5}`,lv=L("",lk),lz=L("",ly),lw=RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:p\xe5\\s*?)?(?:(f\xf6rra|senaste|n\xe4sta|kommande)\\s*)?(${W(lh)})(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(f\xf6rra|senaste|n\xe4sta|kommande)\\s*vecka)?(?=\\W|$)`,"i");class lN extends el{innerPattern(){return lw}innerExtract(e,t){let s=lh[t[2].toLowerCase()],n=t[1],r=t[3],a=n||r;a=(a=a||"").toLowerCase();let i=null;return a.match(/förra|senaste/)?i="last":a.match(/nästa|kommande/)&&(i="next"),tt(e.reference,s,i)}}let lC=RegExp(`(?:den\\s*?)?([0-9]{1,2})(?:\\s*(?:till|\\-|\\–|\\s)\\s*([0-9]{1,2}))?\\s*(${W(lp)})(?:(?:-|/|,?\\s*)([0-9]{4}(?![^\\s]\\d)))?(?=\\W|$)`,"i");class lD extends el{innerPattern(){return lC}innerExtract(e,t){let s=e.createParsingResult(t.index,t[0]),n=lp[t[3].toLowerCase()],r=parseInt(t[1]);if(r>31)return t.index=t.index+t[1].length,null;if(s.start.assign("month",n),s.start.assign("day",r),t[4]){let e=function(e){if(/\d+/.test(e)){let t=parseInt(e);return t<100&&(t=O(t)),t}let t=e.toLowerCase();return void 0!==lg[t]?lg[t]:parseInt(e)}(t[4]);s.start.assign("year",e)}else{let t=B(e.refDate,r,n);s.start.imply("year",t)}if(t[2]){let e=parseInt(t[2]);s.end=s.start.clone(),s.end.assign("day",e)}return s}}let lS=RegExp(`(denna|den h\xe4r|f\xf6rra|passerade|n\xe4sta|kommande|efter|\\+|-)\\s*(${lv})(?=\\W|$)`,"i"),lT=RegExp(`(denna|den h\xe4r|f\xf6rra|passerade|n\xe4sta|kommande|efter|\\+|-)\\s*(${lz})(?=\\W|$)`,"i");class lP extends el{allowAbbreviations;constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?lS:lT}innerExtract(e,t){let s=t[1].toLowerCase(),n=function(e){let t={},s=e,n=lj.exec(s);for(;n;)(function(e,t){let s=function(e){let t=e.toLowerCase();return void 0!==lg[t]?lg[t]:parseInt(t)}(t[1]);e[lb[t[2].toLowerCase()]]=s})(t,n),s=s.substring(n[0].length),n=lj.exec(s);return t}(t[2]);if(!n)return null;switch(s){case"förra":case"passerade":case"-":n=$(n)}return I.createRelativeFromReference(e.reference,n)}}let lA=RegExp(`(nu|idag|imorgon|\xf6vermorgon|ig\xe5r|f\xf6rrg\xe5r|i\\s*f\xf6rrg\xe5r)(?:\\s*(?:p\xe5\\s*)?(morgonen?|f\xf6rmiddagen?|middagen?|eftermiddagen?|kv\xe4llen?|natten?|midnatt))?(?=\\W|$)`,"i");class lE extends el{innerPattern(e){return lA}innerExtract(e,t){let s=e.refDate,n=(t[1]||"").toLowerCase(),r=(t[2]||"").toLowerCase(),a=e.createParsingComponents();switch(n){case"nu":a=eG(e.reference);break;case"idag":a=eJ(e.reference);break;case"imorgon":case"imorn":let i=new Date(s.getTime());i.setDate(i.getDate()+1),w(a,i),D(a,i);break;case"igår":let l=new Date(s.getTime());l.setDate(l.getDate()-1),w(a,l),D(a,l);break;case"förrgår":case"i förrgår":let o=new Date(s.getTime());o.setDate(o.getDate()-2),w(a,o),D(a,o)}switch(r){case"morgon":case"morgonen":a.imply("hour",6),a.imply("minute",0),a.imply("second",0),a.imply("millisecond",0);break;case"förmiddag":case"förmiddagen":a.imply("hour",9),a.imply("minute",0),a.imply("second",0),a.imply("millisecond",0);break;case"middag":case"middagen":a.imply("hour",12),a.imply("minute",0),a.imply("second",0),a.imply("millisecond",0);break;case"eftermiddag":case"eftermiddagen":a.imply("hour",15),a.imply("minute",0),a.imply("second",0),a.imply("millisecond",0);break;case"kväll":case"kvällen":a.imply("hour",20),a.imply("minute",0),a.imply("second",0),a.imply("millisecond",0);break;case"natt":case"natten":case"midnatt":"midnatt"===r?a.imply("hour",0):a.imply("hour",2),a.imply("minute",0),a.imply("second",0),a.imply("millisecond",0)}return a}}let lM=new ty(lF()),l$=new ty(lL(!0));function lR(e,t,s){return lM.parse(e,t,s)}function lI(e,t,s){return lM.parseDate(e,t,s)}function lF(e=!0){let t=lL(!1,e);return t.parsers.unshift(new lE),t}function lL(e=!0,t=!0){return eK({parsers:[new eV,new td(t),new lD,new lN,new lP],refiners:[]},e)}e.s(["casual",0,lM,"createCasualConfiguration",()=>lF,"createConfiguration",()=>lL,"parse",()=>lR,"parseDate",()=>lI,"strict",0,l$],76166),e.i(76166),e.s(["Chrono",()=>ty,"Meridiem",()=>r,"ParsingComponents",()=>I,"ParsingResult",()=>F,"ReferenceWithTimezone",()=>R,"Weekday",()=>a,"casual",0,lM,"createCasualConfiguration",()=>lF,"createConfiguration",()=>lL,"parse",()=>lR,"parseDate",()=>lI,"strict",0,l$],44415),e.i(44415);let lW={morning:(e,t)=>l_(e,t?.morning||"09:00"),noon:(e,t)=>l_(e,t?.noon||"12:00"),afternoon:(e,t)=>l_(e,t?.afternoon||"14:00"),evening:(e,t)=>l_(e,t?.evening||"18:00"),midnight:e=>l_(e,"00:00"),midday:(e,t)=>l_(e,t?.noon||"12:00"),bod:(e,t,s)=>l_(e,lB(e,s)),eod:(e,t,s)=>l_(e,lY(e,s)),startofday:(e,t,s)=>l_(e,lB(e,s)),endofday:(e,t,s)=>l_(e,lY(e,s)),beginningofday:(e,t,s)=>l_(e,lB(e,s)),beginningoftheday:(e,t,s)=>l_(e,lB(e,s)),endoftheday:(e,t,s)=>l_(e,lY(e,s)),startoftheday:(e,t,s)=>l_(e,lB(e,s)),bow:(e,t,s)=>lH(e,t?.workWeekStart||1,t,s),eow:(e,t,s)=>lU(e,t?.workWeekEnd??((t?.workWeekStart||1)+4)%7,t,s),startofweek:(e,t,s)=>lH(e,t?.workWeekStart||1,t,s),endofweek:(e,t,s)=>lU(e,t?.workWeekEnd??((t?.workWeekStart||1)+4)%7,t,s),beginningofweek:(e,t,s)=>lH(e,t?.workWeekStart||1,t,s),beginningoftheweek:(e,t,s)=>lH(e,t?.workWeekStart||1,t,s),endoftheweek:(e,t,s)=>lU(e,t?.workWeekEnd??((t?.workWeekStart||1)+4)%7,t,s),startoftheweek:(e,t,s)=>lH(e,t?.workWeekStart||1,t,s),nextweek:(e,t,s)=>{let n=new Date(e),r=n.getDay(),a=t?.workWeekStart||1;return n.setDate(n.getDate()+((a+7-r)%7+7)),l_(n,lB(n,s))},weekend:e=>{let t=new Date(e),s=t.getDay();return t.setDate(t.getDate()+((6-s+7)%7||7)),t},bom:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth(),1);return l_(n,lB(n,s))},eom:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth()+1,0);return l_(n,lY(n,s))},startofmonth:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth(),1);return l_(n,lB(n,s))},endofmonth:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth()+1,0);return l_(n,lY(n,s))},beginningofmonth:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth(),1);return l_(n,lB(n,s))},beginningofthemonth:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth(),1);return l_(n,lB(n,s))},endofthemonth:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth()+1,0);return l_(n,lY(n,s))},startofthemonth:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth(),1);return l_(n,lB(n,s))},nextmonth:(e,t,s)=>{let n=new Date(e.getFullYear(),e.getMonth()+1,1);return l_(n,lB(n,s))},boq:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),3*n,1);return l_(r,lB(r,s))},eoq:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),3*n+3,0);return l_(r,lY(r,s))},startofquarter:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),3*n,1);return l_(r,lB(r,s))},endofquarter:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),3*n+3,0);return l_(r,lY(r,s))},beginningofquarter:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),3*n,1);return l_(r,lB(r,s))},beginningofthequarter:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),3*n,1);return l_(r,lB(r,s))},endofthequarter:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),3*n+3,0);return l_(r,lY(r,s))},startofthequarter:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),3*n,1);return l_(r,lB(r,s))},nextquarter:(e,t,s)=>{let n=Math.floor(e.getMonth()/3),r=new Date(e.getFullYear(),(n+1)*3,1);return r<=e&&r.setFullYear(r.getFullYear()+1),l_(r,lB(r,s))},boh:(e,t,s)=>{let n=6>e.getMonth()?0:6,r=new Date(e.getFullYear(),n,1);return l_(r,lB(r,s))},eoh:(e,t,s)=>{let n=6>e.getMonth()?5:11,r=new Date(e.getFullYear(),n+1,0);return l_(r,lY(r,s))},startofhalf:(e,t,s)=>{let n=6>e.getMonth()?0:6,r=new Date(e.getFullYear(),n,1);return l_(r,lB(r,s))},endofhalf:(e,t,s)=>{let n=6>e.getMonth()?5:11,r=new Date(e.getFullYear(),n+1,0);return l_(r,lY(r,s))},nexthalf:(e,t,s)=>{let n=6*(6>e.getMonth()),r=new Date(e.getFullYear(),n,1);return r<=e&&r.setFullYear(r.getFullYear()+1),l_(r,lB(r,s))},boy:(e,t,s)=>{let n=new Date(e.getFullYear(),0,1);return l_(n,lB(n,s))},eoy:(e,t,s)=>{let n=new Date(e.getFullYear(),11,31);return l_(n,lY(n,s))},startofyear:(e,t,s)=>{let n=new Date(e.getFullYear(),0,1);return l_(n,lB(n,s))},endofyear:(e,t,s)=>{let n=new Date(e.getFullYear(),11,31);return l_(n,lY(n,s))},beginningofyear:(e,t,s)=>{let n=new Date(e.getFullYear(),0,1);return l_(n,lB(n,s))},beginningoftheyear:(e,t,s)=>{let n=new Date(e.getFullYear(),0,1);return l_(n,lB(n,s))},endoftheyear:(e,t,s)=>{let n=new Date(e.getFullYear(),11,31);return l_(n,lY(n,s))},startoftheyear:(e,t,s)=>{let n=new Date(e.getFullYear(),0,1);return l_(n,lB(n,s))},nextyear:(e,t,s)=>{let n=new Date(e.getFullYear()+1,0,1);return l_(n,lB(n,s))},tonight:(e,t)=>l_(e,t?.evening||"18:00"),tonite:(e,t)=>l_(e,t?.evening||"18:00"),asap:(e,t,s)=>l_(e,lY(e,s)),urgent:(e,t,s)=>l_(e,lY(e,s)),immediately:(e,t,s)=>l_(e,lY(e,s)),now:e=>e,someday:e=>{let t=new Date(e);return t.setMonth(t.getMonth()+3),t},later:e=>{let t=new Date(e);return t.setMonth(t.getMonth()+1),t},eventually:e=>{let t=new Date(e);return t.setMonth(t.getMonth()+6),t},whenever:e=>{let t=new Date(e);return t.setMonth(t.getMonth()+3),t},spring:e=>lK(e,3,20),summer:e=>lK(e,6,21),fall:e=>lK(e,9,22),autumn:e=>lK(e,9,22),winter:e=>lK(e,12,21),payday:e=>lG(e),nextpayday:e=>lG(e),christmas:e=>lV(e,12,25),christmaseve:e=>lV(e,12,24),xmas:e=>lV(e,12,25),newyears:e=>lV(e,1,1),newyearseve:e=>lV(e,12,31),newyearsday:e=>lV(e,1,1),valentines:e=>lV(e,2,14),valentinesday:e=>lV(e,2,14),stpatricks:e=>lV(e,3,17),stpatricksday:e=>lV(e,3,17),easter:e=>{var t;let s,n;return(n=lJ(s=(t=e).getFullYear()))<=t?lJ(s+1):n},mothersday:e=>lq(e,5,0,2),fathersday:e=>lq(e,6,0,3),halloween:e=>lV(e,10,31),independenceday:e=>lV(e,7,4),julyfourth:e=>lV(e,7,4),laborday:e=>lq(e,9,1,1),memorialday:e=>(function e(t,s,n){let r=t.getFullYear(),a=new Date(r,s,0),i=(a.getDay()-n+7)%7,l=new Date(a);return(l.setDate(l.getDate()-i),l<t)?e(new Date(r+1,0,1),s,n):l})(e,5,1),thanksgiving:e=>lq(e,11,4,4),blackfriday:e=>{let t;return(t=new Date(lq(e,11,4,4))).setDate(t.getDate()+1),t},cybermonday:e=>{let t;return(t=new Date(lq(e,11,4,4))).setDate(t.getDate()+4),t},mlkday:e=>lq(e,1,1,3),presidentsday:e=>lq(e,2,1,3),columbusday:e=>lq(e,10,1,2),veteransday:e=>lV(e,11,11),taxday:e=>lV(e,4,15),electionday:e=>{var t;let s,n;return(n=lZ(s=(t=e).getFullYear()))<=t?lZ(s+1):n},groundhogday:e=>lV(e,2,2),cincodemayo:e=>lV(e,5,5),juneteenth:e=>lV(e,6,19)},lO={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"};function lB(e,t){if(!t)return"09:00";if(t.useCommonSchedule)return t.commonSchedule.startTime||"09:00";let s=e.getDay(),n=lO[s],r=t.customSchedules[n];return r?r.startTime||"09:00":(0===s||6===s?t.weekendSchedule:t.weekdaySchedule).startTime||"09:00"}function lY(e,t){if(!t)return"17:00";if(t.useCommonSchedule)return t.commonSchedule.endTime||"17:00";let s=e.getDay(),n=lO[s],r=t.customSchedules[n];return r?r.endTime||"17:00":(0===s||6===s?t.weekendSchedule:t.weekdaySchedule).endTime||"17:00"}function l_(e,t){let s=new Date(e),[n,r]=t.split(":").map(Number);return s.setHours(n,r,0,0),s}function lH(e,t,s,n){let r=new Date(e),a=r.getDay();return r.setDate(r.getDate()-(7*(a<t)+a-t)),l_(r,lB(r,n))}function lU(e,t,s,n){let r=new Date(e),a=r.getDay();return r.setDate(r.getDate()+(t+7-a)%7),l_(r,lY(r,n))}function lV(e,t,s){let n=e.getFullYear(),r=new Date(n,t-1,s);return r<e&&r.setFullYear(n+1),r}function lq(e,t,s,n){let r=e.getFullYear(),a=(s-new Date(r,t-1,1).getDay()+7)%7,i=new Date(new Date(r,t-1,1+a));return(i.setDate(i.getDate()+(n-1)*7),i<e)?lq(new Date(r+1,0,1),t,s,n):i}function lK(e,t,s){let n=e.getFullYear(),r=new Date(n,t-1,s);return r<=e&&r.setFullYear(n+1),r}function lG(e){let t=e.getFullYear(),s=e.getMonth();e.getDate();let n=new Date(t,s,15);if(n>e)return n;let r=new Date(t,s+1,0);return r>e?r:new Date(t,s+1,15)}function lJ(e){let t=e%19,s=Math.floor(e/100),n=e%100,r=Math.floor(s/4),a=Math.floor((s+8)/25),i=Math.floor((s-a+1)/3),l=(19*t+s-r-i+15)%30,o=(32+s%4*2+2*Math.floor(n/4)-l-n%4)%7,d=Math.floor((t+11*l+22*o)/451);return new Date(e,Math.floor((l+o-7*d+114)/31)-1,(l+o-7*d+114)%31+1)}function lZ(e){let t=new Date(e,10,1).getDay(),s=new Date(new Date(e,10,1+(1-t+7)%7));return s.setDate(s.getDate()+1),s}function lQ(e){let t,s=[],n=/\b(\d+(?:\.\d+)?)\s*(m|min|mins|minute|minutes|h|hr|hrs|hour|hours|d|day|days|w|wk|wks|week|weeks)\b/gi;for(;null!==(t=n.exec(e));){let e,n=t[0],r=t.index,a=r+n.length,i=parseFloat(t[1]),l=t[2].toLowerCase();if(l.startsWith("m"))e="m";else if(l.startsWith("h"))e="h";else if(l.startsWith("d"))e="d";else{if(!l.startsWith("w"))continue;e="w"}let o=(Number.isInteger(i),`${i}${e}`);s.push({text:n,start:r,end:a,value:o})}return s}function lX(e,t){let s=[],n=new Set(["me","i","a","an","the","and","or","but","in","on","at","to","for","of","with","by","from","up","about","into","through","during","before","after","above","below","between","under","again","further","then","once","here","there","when","where","why","how","all","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","should","now","he","she","it","we","they","us","them","his","her","its","our","their","my","your"]),r=new Map;for(let e of t){let t=e.name.toLowerCase();for(let s of(n.has(t)||r.set(t,e.name),e.alternatives)){let t=s.toLowerCase();n.has(t)||r.set(t,e.name)}}let a=Array.from(r.keys()).sort((e,t)=>t.length-e.length),i=[];for(let t of a){let n,a=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=RegExp(`\\b${a}\\b`,"gi");for(;null!==(n=l.exec(e));){let e=n.index,a=e+n[0].length;if(!i.some(t=>!(a<=t.start||e>=t.end))){let l=r.get(t);s.push({text:n[0],start:e,end:a,personName:l}),i.push({start:e,end:a})}}}return s.sort((e,t)=>e.start-t.start),s.forEach((e,t)=>{}),s}function l0(e,t){let s=[],n=new Set(["me","it","this","that","these","those","work","time","day","week","month","year","project","projects"]),r=new Map;for(let e of t){let t=e.name.toLowerCase();for(let s of(n.has(t)||r.set(t,e.name),e.alternatives)){let t=s.toLowerCase();n.has(t)||r.set(t,e.name)}}let a=Array.from(r.keys()).sort((e,t)=>t.length-e.length),i=[],l=[{pattern:/\b(?:on|in|for|about)\s+project\s+/gi,prefix:!0},{pattern:/\b(?:on|in|for|about)\s+/gi,prefix:!0},{pattern:/\bre:\s+/gi,prefix:!0},{pattern:/\b(?:regarding|related\s+to|concerning)\s+/gi,prefix:!0},{pattern:/\b(?:working\s+on|part\s+of)\s+/gi,prefix:!0},{pattern:/\s+project\b/gi,prefix:!1},{pattern:/\s+initiative\b/gi,prefix:!1}];for(let t of a){let n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");for(let{pattern:a,prefix:o}of l){let l,d;for(l=o?RegExp(`(${a.source})${n}\\b`,"gi"):RegExp(`\\b${n}(${a.source})`,"gi");null!==(d=l.exec(e));){let e=d[0],n=d.index,a=n+e.length;if(!i.some(e=>!(a<=e.start||n>=e.end))){let l=r.get(t);s.push({text:e,start:n,end:a,projectName:l}),i.push({start:n,end:a})}}}}return s.sort((e,t)=>e.start-t.start),s}function l1(e,t){let s=[],n=new Set(["me","i","a","an","the","and","or","but","in","on","at","to","for","of","with","by","from","up","about","into","through","during","before","after","above","below","between","under","again","further","then","once","here","there","when","where","why","how","all","both","each","few","more","most","other","some","such","no","nor","not","only","own","same","so","than","too","very","s","t","can","will","just","don","should","now","he","she","it","we","they","us","them","his","her","its","our","their","my","your"]),r=new Map;for(let e of t){let t=e.name.toLowerCase();for(let s of(n.has(t)||r.set(t,e.name),e.alternatives)){let t=s.toLowerCase();n.has(t)||r.set(t,e.name)}}let a=Array.from(r.keys()).sort((e,t)=>t.length-e.length),i=[],l=[{pattern:/\b(?:from|via|per)\s+/gi,prefix:!0},{pattern:/\bsource\s+/gi,prefix:!0},{pattern:/\b(?:sent|shared|forwarded|cc['']?d|mentioned|submitted|reported)\s+by\s+/gi,prefix:!0},{pattern:/\breceived\s+from\s+/gi,prefix:!0}];for(let t of a){let n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");for(let{pattern:a,prefix:o}of l){let l,d;for(l=o?RegExp(`(${a.source})${n}\\b`,"gi"):RegExp(`\\b${n}(${a.source})`,"gi");null!==(d=l.exec(e));){let e=d[0],n=d.index,a=n+e.length;if(!i.some(e=>!(a<=e.start||n>=e.end))){let l=r.get(t);s.push({text:e,start:n,end:a,personName:l}),i.push({start:n,end:a})}}}}return s.sort((e,t)=>e.start-t.start),s.forEach((e,t)=>{}),s}function l2(e,t){let s=[],n=new Set(["high","low","medium","normal","none"]),r=new Map;for(let e of t)for(let t of(r.set(e.name.toLowerCase(),e.name),e.alternatives))r.set(t.toLowerCase(),e.name);let a=Array.from(r.keys()).sort((e,t)=>t.length-e.length),i=[],l=[{pattern:/\bpriority[:\s]+/gi,prefix:!0},{pattern:/\s+priority\b/gi,prefix:!1},{pattern:/\bprio[:\s]+/gi,prefix:!0},{pattern:/\bimportance[:\s]+/gi,prefix:!0},{pattern:/\s+importance\b/gi,prefix:!1}];for(let t of a){let a,o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(!n.has(t)){let n=RegExp(`\\b${o}\\b`,"gi");for(;null!==(a=n.exec(e));){let e=a[0],n=a.index,l=n+e.length;if(!i.some(e=>!(l<=e.start||n>=e.end))){let a=r.get(t);s.push({text:e,start:n,end:l,priorityName:a}),i.push({start:n,end:l})}}}for(let{pattern:n,prefix:d}of l){let l;for(l=d?RegExp(`(${n.source})${o}\\b`,"gi"):RegExp(`\\b${o}(${n.source})`,"gi");null!==(a=l.exec(e));){let e=a[0],n=a.index,l=n+e.length;if(!i.some(e=>!(l<=e.start||n>=e.end))){let a=r.get(t);s.push({text:e,start:n,end:l,priorityName:a}),i.push({start:n,end:l})}}}}return s.sort((e,t)=>e.start-t.start),s}let l4=(0,o.forwardRef)(({markerColors:e={},onTokensChange:t,placeholder:s,onEnterPress:n,availablePeople:r=[],availableProjects:a=[],availablePriorities:i=[],onAddPerson:d,onAddProject:c,onAddPriority:m,dateTimeSettings:x,workHoursSettings:u},h)=>{let p=(0,o.useRef)(null),[g,b]=(0,o.useState)({}),[f,k]=(0,o.useState)({show:!1,options:[],selected:0,type:"",marker:"",searchText:"",showAddNew:!1,position:{top:0,left:0}});(0,o.useEffect)(()=>{let e=e=>{let t=e.target;!p.current||p.current.contains(t)||t.closest(".autocomplete-dropdown")||k(e=>({...e,show:!1}))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,o.useImperativeHandle)(h,()=>({clear:()=>{p.current&&(p.current.innerHTML="",t&&t([],"",""))},setValue:e=>{if(p.current){let{fragment:s,tokens:n,plainText:r}=w(e);p.current.innerHTML="",p.current.appendChild(s),t&&t(n,e,r)}},focus:()=>{p.current&&p.current.focus()}}),[r,a,i,x,u,g]),(0,o.useEffect)(()=>{if(p.current&&p.current.textContent){let e=p.current.textContent,{fragment:s,tokens:n,plainText:r}=w(e);p.current.innerHTML="",p.current.appendChild(s),t&&t(n,e,r)}},[g]);let j=e=>{let t=e.toLowerCase();return r.find(e=>e.name.toLowerCase()===t||e.alternatives.some(e=>e.toLowerCase()===t))},y=e=>{let t=e.toLowerCase();return a.find(e=>e.name.toLowerCase()===t||e.alternatives.some(e=>e.toLowerCase()===t))},v=e=>{let t=e.toLowerCase();return i.find(e=>e.name.toLowerCase()===t||e.alternatives.some(e=>e.toLowerCase()===t))},w=t=>{let s=document.createDocumentFragment(),n=[];for(let{type:e,symbol:s,regex:l}of(()=>{let e=[];for(let{type:t,symbol:s}of[{type:"assigned",symbol:"@"},{type:"source",symbol:"$"}]){let n=r.flatMap(e=>[e.name,...e.alternatives]);if(n.length>0){let r=n.sort((e,t)=>t.length-e.length),a=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=r.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),l=RegExp(`${a}(${i})(?=\\s|$)`,"gi");e.push({type:t,symbol:s,regex:l})}}let t=a.flatMap(e=>[e.name,...e.alternatives]);if(t.length>0){let s=t.sort((e,t)=>t.length-e.length).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),n=RegExp(`%(${s})(?=\\s|$)`,"gi");e.push({type:"project",symbol:"%",regex:n})}let s=i.flatMap(e=>[e.name,...e.alternatives]);if(s.length>0){let t=s.sort((e,t)=>t.length-e.length).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),n=RegExp(`!!(${t})(?=\\s|$)`,"gi");e.push({type:"priority",symbol:"!!",regex:n})}return e.push({type:"tag",symbol:"#",regex:RegExp("#([^\\s@%$!#>&]+?)(?=\\s|$)","gi")}),e})()){let r;for(;r=l.exec(t);){let t=r[0],a=t.slice(s.length);if(["assigned","source"].includes(e)){let e=j(a);e&&(a=e.name)}else if("project"===e){let e=y(a);e&&(a=e.name)}else if("priority"===e){let e=v(a);e&&(a=e.name)}n.push({type:e,value:a,raw:t,start:r.index,end:r.index+t.length})}}for(let e of lQ(t))n.some(t=>!(e.end<=t.start||e.start>=t.end))||n.push({type:"duration",value:e.value,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0});for(let e of function(e,t=new Date,s,n){let r,a,i,l,o,d=lQ(e).map(e=>({start:e.start,end:e.end})),c=((r=tw.clone()).parsers.unshift((a=Object.keys(lW).join("|"),i=RegExp(`\\b(${a})\\b`,"i"),{pattern:()=>i,extract:(e,t)=>{let r=lW[t[1].toLowerCase()];if(!r)return null;let a=r(e.refDate,s,n);return e.createParsingComponents({year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:a.getHours(),minute:a.getMinutes(),second:0})}})),r.parsers.unshift({pattern:()=>/\bin\s+(\d+)\s+(day|week|month|year)s?\b/i,extract:(e,t)=>{let s=parseInt(t[1],10),n=t[2].toLowerCase(),r=new Date(e.refDate);switch(n){case"day":r.setDate(r.getDate()+s);break;case"week":r.setDate(r.getDate()+7*s);break;case"month":r.setMonth(r.getMonth()+s);break;case"year":r.setFullYear(r.getFullYear()+s)}return e.createParsingComponents({year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate()})}}),r.parsers.unshift({pattern:()=>/\bin\s+(\d+)\s+(business|working|work)\s*days?\b/i,extract:(e,t)=>{let s=parseInt(t[1],10),n=function(e,t){let s=new Date(e),n=t;for(;n>0;)s.setDate(s.getDate()+1),!function(e){let t=e.getDay();return 0===t||6===t}(s)&&n--;return s}(e.refDate,s);return e.createParsingComponents({year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()})}}),r.parsers.unshift({pattern:()=>/\b(Q[1-4]|H[1-2]|FY\d{2,4})(\s+\d{4})?\b/i,extract:(e,t)=>{let s,r=t[1].toUpperCase(),a=t[2]?parseInt(t[2].trim(),10):null,i=e.refDate;if(r.startsWith("Q")){let e,t,l=parseInt(r[1],10);(t=new Date(e=i.getFullYear(),3*l-1+1,0))<i&&t.setFullYear(e+1),s=l_(t,lY(t,n)),a&&s.setFullYear(a)}else if(r.startsWith("H")){let e,t,l=parseInt(r[1],10);(t=new Date(e=i.getFullYear(),(1===l?5:11)+1,0))<i&&t.setFullYear(e+1),s=l_(t,lY(t,n)),a&&s.setFullYear(a)}else{if(!r.startsWith("FY"))return null;let e,t=parseInt(r.slice(2),10);t<100&&(t=t>50?1900+t:2e3+t),s=l_(e=new Date(t,11,31),lY(e,n))}return e.createParsingComponents({year:s.getFullYear(),month:s.getMonth()+1,day:s.getDate(),hour:s.getHours(),minute:s.getMinutes()})}}),r.parsers.unshift((o=(l=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]).join("|"),{pattern:()=>RegExp(`\\b(\\d+)\\s+(${o})s?\\s+from\\s+now\\b`,"i"),extract:(e,t)=>{let s=parseInt(t[1],10),n=l.indexOf(t[2].toLowerCase());if(-1===n)return null;let r=e.refDate,a=(n-r.getDay()+7)%7;0===a&&(a=7);let i=a+(s-1)*7,o=new Date(r);return o.setDate(o.getDate()+i),e.createParsingComponents({year:o.getFullYear(),month:o.getMonth()+1,day:o.getDate()})}})),r.parsers.unshift({pattern:()=>/\b(?:the|on\s+the)?\s*(\d{1,2})(?:st|nd|rd|th)\b/i,extract:(e,t)=>{let s=parseInt(t[1],10);if(s<1||s>31)return null;let n=e.refDate,r=new Date(n.getFullYear(),n.getMonth(),s);return r<=n&&r.setMonth(r.getMonth()+1),r.getDate()!==s&&(r=new Date(n.getFullYear(),n.getMonth()+2,s)),e.createParsingComponents({year:r.getFullYear(),month:r.getMonth()+1,day:r.getDate()})}}),r.parsers.unshift({pattern:()=>/\bsprint\s*(\d{1,2})\b/i,extract:(e,t)=>{let s=parseInt(t[1],10);if(s<1||s>26)return null;let n=e.refDate,r=n.getFullYear(),a=new Date(r,0,1).getDay(),i=new Date(new Date(r,0,1+(0===a?1:1===a?0:8-a)));if(i.setDate(i.getDate()+14*s-1),i<n){let t=r+1,n=new Date(t,0,1).getDay(),a=new Date(new Date(t,0,1+(0===n?1:1===n?0:8-n)));return a.setDate(a.getDate()+14*s-1),e.createParsingComponents({year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate()})}return e.createParsingComponents({year:i.getFullYear(),month:i.getMonth()+1,day:i.getDate()})}}),r.parsers.push({pattern:()=>/\b(1[0-2]|[1-9])(?::([0-5][0-9]))?\s*(am|pm)\b/i,extract:(e,t)=>{let s=parseInt(t[1],10),n=t[2]?parseInt(t[2],10):0,r=t[3].toLowerCase();"pm"===r&&12!==s?s+=12:"am"===r&&12===s&&(s=0);let a=e.refDate,i=new Date(a);return i.setHours(s,n,0,0),i<a&&i.setDate(i.getDate()+1),e.createParsingComponents({year:i.getFullYear(),month:i.getMonth()+1,day:i.getDate(),hour:s,minute:n})}}),r.refiners.unshift({refine:(e,t)=>{let s=e.text;return t.filter(e=>{let t=s.slice(Math.max(0,e.index-5),e.index),n=s.slice(e.index,e.index+e.text.length);return s.slice(e.index+e.text.length,e.index+e.text.length+5),!(/^\d+(?:\.\d+)?\s*(m|min|h|hr|d|w)\b/i.test(n)||/\d$/.test(t)&&/^(m|min|h|hr|d|w)\b/i.test(n))})}}),r.refiners.push({refine:(e,t)=>t.map(e=>{if("today"===e.text.toLowerCase()&&!e.start.isCertain("hour")){let[t,n]=(s?.evening||"17:00").split(":").map(Number);e.start.assign("hour",t),e.start.assign("minute",n)}return e})}),r).parse(e,t,{forwardDate:!0}).filter(e=>{let t=e.index,s=e.index+e.text.length;return!d.some(e=>!(s<=e.start||t>=e.end))}).map(e=>{let t={text:e.text,start:e.index,end:e.index+e.text.length,date:e.start.date(),timestamp:e.start.date().getTime()};return e.end&&(t.endDate=e.end.date(),t.endTimestamp=e.end.date().getTime(),t.durationMinutes=Math.floor((t.endTimestamp-t.timestamp)/6e4)),t}),m=function(e,t=new Date){let s,n=[],r=RegExp("\\b(daily|weekly|biweekly|fortnightly|monthly|bimonthly|quarterly|yearly|annually|semiannually)\\b|\\b(?:every|each)\\s+(workday|weekday)s?\\b|\\bevery\\s+other\\s+(day|week|month|quarter|half|year)\\b|\\b(?:every|each|repeat)\\s+(?:(\\d+)\\s+)?(day|week|month|quarter|half|year)s?\\b|\\b(?:every|each)\\s+(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\\b|\\b(?:every|each)\\s+(1st|2nd|3rd|4th|5th|last|first|second|third|fourth|fifth)\\s+(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\\b|\\b(?:every|each)\\s+month\\s+on\\s+(?:the\\s+)?(\\d+)(?:st|nd|rd|th)?\\b","gi");for(;null!==(s=r.exec(e));){let e=s[0],r=s.index,a=r+e.length,i=(0,z.parseRecurringPattern)(e);if(i){let s=(0,z.calculateNextOccurrence)(i,t);n.push({text:e,start:r,end:a,date:s,timestamp:s.getTime(),recurring:i})}}return n}(e,t),x=[...m,...c];for(let t of m)if(t.recurring){let s=c.find(e=>e.durationMinutes&&e.durationMinutes>0&&!(e.end<=t.start||e.start>=t.end));s&&(t.date=s.date,t.timestamp=s.timestamp,t.endDate=s.endDate,t.endTimestamp=s.endTimestamp,t.durationMinutes=s.durationMinutes,t.recurring&&(t.recurring.hour=s.date.getHours(),t.recurring.minute=s.date.getMinutes(),s.endDate&&(t.recurring.endHour=s.endDate.getHours(),t.recurring.endMinute=s.endDate.getMinutes()),t.recurring.durationMinutes=s.durationMinutes),t.start=Math.min(t.start,s.start),t.end=Math.max(t.end,s.end),t.text=e.slice(t.start,t.end),t.recurring&&(t.recurring.raw=t.text))}let u=[];for(let e of x)u.some(t=>!(e.end<=t.start||e.start>=t.end))||u.push(e);return u.sort((e,t)=>e.start-t.start)}(t,new Date,x,u)){let t=`${e.start}-${e.end}`;if(-1===g[t])continue;let s=g[t]||0,r=function(e){let t=e.date,s=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0"),a=t.getHours().toString().padStart(2,"0"),i=t.getMinutes().toString().padStart(2,"0");return`${s}-${n}-${r}T${a}:${i}`}(e);if(e.recurring&&e.durationMinutes&&e.durationMinutes>0){n.push({type:"dueDate",value:r,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0,detectedDateIndex:s,allDetectedDates:[r],autoDetectedType:"recurring"});let t=Math.floor(e.durationMinutes/1440),a=Math.floor(e.durationMinutes%1440/60),i=e.durationMinutes%60,l="";t>0&&(l+=`${t}d`),a>0&&(l+=`${a}h`),(i>0||""===l)&&(l+=`${i}m`),n.push({type:"duration",value:l,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0,autoDetectedType:"recurring"}),n.push({type:"recurring",value:e.recurring.raw,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0,autoDetectedType:"recurring"})}else if(e.recurring)n.push({type:"dueDate",value:r,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0,detectedDateIndex:s,allDetectedDates:[r],autoDetectedType:"recurring"}),n.push({type:"recurring",value:e.recurring.raw,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0,autoDetectedType:"recurring"});else if(e.durationMinutes&&e.durationMinutes>0){n.push({type:"dueDate",value:r,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0,detectedDateIndex:s,allDetectedDates:[r],autoDetectedType:"range"});let t=Math.floor(e.durationMinutes/1440),a=Math.floor(e.durationMinutes%1440/60),i=e.durationMinutes%60,l="";t>0&&(l+=`${t}d`),a>0&&(l+=`${a}h`),(i>0||""===l)&&(l+=`${i}m`),n.push({type:"duration",value:l,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0,autoDetectedType:"range"})}else n.push({type:"dueDate",value:r,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0,detectedDateIndex:s,allDetectedDates:[r],autoDetectedType:"simple"})}let l=lX(t,r),o=n.filter(e=>"assigned"===e.type||"source"===e.type).map(e=>({start:e.start,end:e.end}));for(let e of l)!o.some(t=>!(e.end<=t.start||e.start>=t.end))&&(n.some(t=>("dueDate"===t.type||"recurring"===t.type)&&!(e.end<=t.start||e.start>=t.end))||n.push({type:"mentioned",value:e.personName,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0}));let d=l0(t,a),c=n.filter(e=>"project"===e.type).map(e=>({start:e.start,end:e.end}));for(let e of d)!(c.some(t=>!(e.end<=t.start||e.start>=t.end))||n.some(t=>("dueDate"===t.type||"recurring"===t.type)&&!(e.end<=t.start||e.start>=t.end)))&&(n.some(t=>("assigned"===t.type||"source"===t.type||"mentioned"===t.type)&&!(e.end<=t.start||e.start>=t.end))||n.push({type:"project",value:e.projectName,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0}));let m=l1(t,r),h=n.filter(e=>"source"===e.type).map(e=>({start:e.start,end:e.end}));for(let e of m)!h.some(t=>!(e.end<=t.start||e.start>=t.end))&&(n.some(t=>!(e.end<=t.start||e.start>=t.end))||n.push({type:"source",value:e.personName,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0}));let p=l2(t,i),f=n.filter(e=>"priority"===e.type).map(e=>({start:e.start,end:e.end}));for(let e of p)!f.some(t=>!(e.end<=t.start||e.start>=t.end))&&(n.some(t=>!(e.end<=t.start||e.start>=t.end))||n.push({type:"priority",value:e.priorityName,raw:e.text,start:e.start,end:e.end,isAutoDetected:!0}));n.sort((e,t)=>e.start-t.start);let k=0,w="",N=new Set,C=new Set(["dueDate","duration","recurring","dependency"]),D=new Set(["dueDate","duration","recurring","dependency","priority","project","tag"]);for(let l=0;l<n.length;l++){let o=n[l];if(N.has(l))continue;if(o.start>k){let e=t.slice(k,o.start);s.append(document.createTextNode(e)),w+=e}let d=[o],c=[l],m=l+1;for(;m<n.length&&n[m].start===o.start&&n[m].end===o.end;)d.push(n[m]),c.push(m),m++;c.forEach(e=>N.add(e));let x=(t=>{if("assigned"===t.type||"source"===t.type||"mentioned"===t.type){let s=r.find(e=>e.name===t.value||e.alternatives.includes(t.value));return s?.color||e.assigned||"#e3f2fd"}if("project"===t.type){let s=a.find(e=>e.name===t.value||e.alternatives.includes(t.value));return s?.color||e.project||"#f3e5f5"}if("priority"===t.type){let s=i.find(e=>e.name===t.value||e.alternatives.includes(t.value));return s?.color||e.priority||"#ffebee"}if(t.isAutoDetected&&t.autoDetectedType){if("recurring"===t.type)return e.recurring||"#e0f2f1";if("duration"===t.type)return e.duration||"#fff4e6";if("dueDate"===t.type)return e.dueDate||"#fce4ec"}let s={dueDate:"#fce4ec",duration:"#fff4e6",recurring:"#e0f2f1",dependency:"#fff8e1",assigned:"#e3f2fd",source:"#f1f8e9",mentioned:"#fff9c4",project:"#f3e5f5",priority:"#ffebee",tag:"#e0f7fa"};return e[t.type]||s[t.type]||"#f5f5f5"})([...d].sort((e,t)=>{let s={recurring:3,duration:2,dueDate:1};return(s[t.type]||0)-(s[e.type]||0)})[0]),u=document.createElement("span");u.textContent=t.slice(o.start,o.end),u.style.backgroundColor=x,u.style.padding="2px 4px",u.style.borderRadius="4px",u.style.opacity="0.8",o.isAutoDetected&&(u.style.textDecoration="underline dotted",u.style.cursor="pointer",u.title="Click to deactivate auto-detection",u.dataset.autoDetected="true",u.dataset.position=`${o.start}-${o.end}`,u.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let t=u.dataset.position;b(e=>({...e,[t]:-1}))})),s.appendChild(u),d.every(e=>!!(e.isAutoDetected&&C.has(e.type)||!e.isAutoDetected&&D.has(e.type)))||(w+=t.slice(o.start,o.end)),k=o.end}if(k<t.length){let e=t.slice(k);s.append(document.createTextNode(e)),w+=e}return{fragment:s,tokens:n,plainText:w=w.replace(/\s+/g," ").trim()}},N=e=>{let s=p.current;if(!s)return;let n=s.innerText.replace(/\n/g," "),r=-1;for(let e of["@","$","%","!!"]){let t=n.lastIndexOf(e);t>r&&(r=t)}if(-1===r)return;let a=n.substring(0,r),i=n.substring(r),l=i.indexOf(" ",1),o=l>=0?i.substring(l):"",d=a+f.marker+e+" "+o,{fragment:c,tokens:m,plainText:x}=w(d);t&&t(m,d.trim(),x),s.innerHTML="",s.appendChild(c);let u=document.createRange(),h=window.getSelection();u.selectNodeContents(s),u.collapse(!1),h?.removeAllRanges(),h?.addRange(u),k(e=>({...e,show:!1})),s.focus()},C=()=>{let e=f.searchText.trim();e&&("person"===f.type&&d?d(e):"project"===f.type&&c?c(e):"priority"===f.type&&m&&m(e),N(e))};return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{ref:p,"data-testid":"smart-input",contentEditable:!0,suppressContentEditableWarning:!0,onInput:()=>{let e=p.current;if(!e)return;let s=window.getSelection();if(!s||0===s.rangeCount)return;let n=s.getRangeAt(0),l=0,o=e=>{if(e===n.startContainer)return l+=n.startOffset,!0;if(e.nodeType===Node.TEXT_NODE)l+=e.textContent?.length||0;else if(e.nodeType===Node.ELEMENT_NODE){for(let t of Array.from(e.childNodes))if(o(t))return!0}return!1};o(e);let x=e.textContent||"",u=["@","$"],h=[...u,"%","!!"],g=x.substring(0,l),b=-1,f="";for(let e of h){let t=g.lastIndexOf(e);t>b&&(b=t,f=e)}let j=!1,y="",v="",z="",N=[];if(b>=0){var C,D,S;let e=g.substring(b+f.length);if(!e.includes(" ")){if(z=e.toLowerCase(),u.includes(f)){let e;j=!0,y="person",v=f,N=(e=(C=z).toLowerCase(),""===C?r:r.filter(t=>t.name.toLowerCase().includes(e)||t.alternatives.some(t=>t.toLowerCase().includes(e)))).map(e=>e.name)}else if("%"===f){let e;j=!0,y="project",v=f,N=(e=(D=z).toLowerCase(),""===D?a:a.filter(t=>t.name.toLowerCase().includes(e)||t.alternatives.some(t=>t.toLowerCase().includes(e)))).map(e=>e.name)}else if("!!"===f){let e;j=!0,y="priority",v=f;let t=(e=(S=z).toLowerCase(),""===S?i:i.filter(t=>t.name.toLowerCase().includes(e)||t.alternatives.some(t=>t.toLowerCase().includes(e))));N=[],t.forEach(e=>{N.includes(e.name)||N.push(e.name),e.alternatives.forEach(e=>{e.toLowerCase().includes(z)&&!N.includes(e)&&N.push(e)})})}}}if(j){let t=document.createRange();t.setStart(n.startContainer,n.startOffset),t.collapse(!0);let s=document.createElement("span");t.insertNode(s);let r=s.getBoundingClientRect(),a=e.getBoundingClientRect();s.remove();let i=0===N.length&&""!==z.trim(),l="person"===y&&d||"project"===y&&c||"priority"===y&&m;k({show:!0,options:N,selected:0,type:y,marker:v,searchText:z,showAddNew:i&&!!l,position:{top:r.bottom-a.top+5,left:r.left-a.left}})}else k(e=>({...e,show:!1}));let{fragment:T,tokens:P,plainText:A}=w(x);t&&t(P,x.trim(),A),e.innerHTML="",e.appendChild(T);let E=0,M=null,$=0,R=e=>{if(e.nodeType===Node.TEXT_NODE){let t=e.textContent?.length||0;if(E+t>=l)return M=e,$=l-E,!0;E+=t}else if(e.nodeType===Node.ELEMENT_NODE){for(let t of Array.from(e.childNodes))if(R(t))return!0}return!1};if(R(e),M){let t=document.createRange(),s=window.getSelection();try{t.setStart(M,$),t.collapse(!0),s?.removeAllRanges(),s?.addRange(t)}catch{t.selectNodeContents(e),t.collapse(!1),s?.removeAllRanges(),s?.addRange(t)}}else{let t=document.createRange(),s=window.getSelection();t.selectNodeContents(e),t.collapse(!1),s?.removeAllRanges(),s?.addRange(t)}e.focus()},onKeyDown:e=>{if(f.show){let t=f.options.length+ +!!f.showAddNew;if("ArrowDown"===e.key){e.preventDefault(),k(e=>({...e,selected:Math.min(e.selected+1,t-1)}));return}if("ArrowUp"===e.key){e.preventDefault(),k(e=>({...e,selected:Math.max(e.selected-1,0)}));return}if("Tab"===e.key||"Enter"===e.key){e.preventDefault(),f.showAddNew&&f.selected===f.options.length?C():f.options.length>0&&N(f.options[f.selected]);return}else if("Escape"===e.key){e.preventDefault(),k(e=>({...e,show:!1}));return}}if("Enter"!==e.key||f.show){if("Backspace"===e.key){let t=window.getSelection(),s=t?.anchorNode?.parentElement;s?.dataset?.token&&(s.remove(),e.preventDefault())}}else e.preventDefault(),n&&n()},className:"px-4 py-3 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-base min-h-[3rem] cursor-text","data-placeholder":s||"What needs to be done?",style:{whiteSpace:"pre-wrap"}}),f.show&&(0,l.jsxs)("div",{className:"autocomplete-dropdown absolute z-50 mt-1 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded-lg shadow-lg max-h-60 overflow-y-auto",style:{top:`${f.position.top}px`,left:`${f.position.left}px`,minWidth:"200px"},children:[f.options.map((e,t)=>(0,l.jsxs)("button",{type:"button",onClick:()=>N(e),onMouseEnter:()=>k(e=>({...e,selected:t})),className:`w-full text-left px-3 py-2 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors ${t===f.selected?"bg-blue-100 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100":"text-zinc-900 dark:text-zinc-100"}`,children:[(0,l.jsx)("span",{className:"font-medium",children:f.marker}),e]},e)),f.showAddNew&&(0,l.jsxs)("button",{type:"button",onClick:C,onMouseEnter:()=>k(e=>({...e,selected:e.options.length})),className:`w-full text-left px-3 py-2 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors border-t border-zinc-200 dark:border-zinc-700 ${f.selected===f.options.length?"bg-blue-100 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100":"text-zinc-900 dark:text-zinc-100"}`,children:[(0,l.jsxs)("span",{className:"font-medium",children:["➕ Add new ",f.type,": "]}),(0,l.jsx)("span",{className:"italic",children:f.searchText})]},"add-new")]})]})});l4.displayName="SmartEditableInput";var l5=e.i(82431),l6=e.i(74080);function l3({text:e,completed:t=!1,markerColors:s,linkPatterns:n=[],availablePeople:r=[],availableProjects:a=[],availablePriorities:i=[]}){let o=[],d=0,c=[];for(let{type:e,symbol:t}of[{type:"assigned",symbol:"@"},{type:"source",symbol:"$"}]){let s=r.flatMap(e=>[e.name,...e.alternatives]);if(s.length>0){let n=s.sort((e,t)=>t.length-e.length),r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),a=n.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),i=RegExp(`${r}(${a})(?=\\s|$)`,"gi");c.push({regex:i,type:e})}}let m=a.flatMap(e=>[e.name,...e.alternatives]);if(m.length>0){let e=m.sort((e,t)=>t.length-e.length).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),t=RegExp(`%(${e})(?=\\s|$)`,"gi");c.push({regex:t,type:"project"})}let x=i.flatMap(e=>[e.name,...e.alternatives]);if(x.length>0){let e=x.sort((e,t)=>t.length-e.length).map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),t=RegExp(`!!(${e})(?=\\s|$)`,"gi");c.push({regex:t,type:"priority"})}let u=RegExp("#([^\\s@%$!#>&]+?)(?=\\s|$)","gi");c.push({regex:u,type:"tag"});let h=[];c.forEach(({regex:t,type:s})=>{for(let n of e.matchAll(t))if(void 0!==n.index){let e={assigned:"@",project:"%",source:"$",priority:"!!",tag:"#"}[s]||"",t=n[0],r=t.slice(e.length);h.push({start:n.index,end:n.index+t.length,text:t,type:s,name:r})}}),n.forEach(t=>{let s=RegExp(`${t.prefix}\\d{4,}`,"gi");for(let n of e.matchAll(s))if(void 0!==n.index){let e=n[0].slice(t.prefix.length),s=t.urlTemplate.replace("{id}",e);h.push({start:n.index,end:n.index+n[0].length,text:n[0],type:"link",url:s,color:t.color})}});let p=lX(e,r),g=h.filter(e=>"assigned"===e.type||"source"===e.type).map(e=>({start:e.start,end:e.end}));for(let e of p)!g.some(t=>!(e.end<=t.start||e.start>=t.end))&&(h.some(t=>!(e.end<=t.start||e.start>=t.end))||h.push({start:e.start,end:e.end,text:e.text,type:"mentioned",name:e.personName}));let b=l0(e,a),f=h.filter(e=>"project"===e.type).map(e=>({start:e.start,end:e.end}));for(let e of b)!f.some(t=>!(e.end<=t.start||e.start>=t.end))&&(h.some(t=>!(e.end<=t.start||e.start>=t.end))||h.push({start:e.start,end:e.end,text:e.text,type:"project",name:e.projectName}));let k=l1(e,r),j=h.filter(e=>"source"===e.type).map(e=>({start:e.start,end:e.end}));for(let e of k)!j.some(t=>!(e.end<=t.start||e.start>=t.end))&&(h.some(t=>!(e.end<=t.start||e.start>=t.end))||h.push({start:e.start,end:e.end,text:e.text,type:"source",name:e.personName}));let y=l2(e,i),v=h.filter(e=>"priority"===e.type).map(e=>({start:e.start,end:e.end}));for(let e of y)!v.some(t=>!(e.end<=t.start||e.start>=t.end))&&(h.some(t=>!(e.end<=t.start||e.start>=t.end))||h.push({start:e.start,end:e.end,text:e.text,type:"priority",name:e.priorityName}));return h.sort((e,t)=>e.start-t.start),h.forEach((t,n)=>{if(t.start>d&&o.push(e.slice(d,t.start)),"link"===t.type&&t.url)o.push((0,l.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),title:"Opens in new tab",className:"inline-block px-1.5 py-0.5 mx-0.5 text-sm rounded font-bold underline hover:bg-zinc-200 dark:hover:bg-zinc-700 cursor-pointer",style:{color:t.color||"#3b82f6"},children:t.text},`link-${n}`));else{var c,m,x,u;let e,d=t.text;if("assigned"===t.type||"source"===t.type||"mentioned"===t.type){let n;(e=t.name?(c=t.name,n=r.find(e=>e.name.toLowerCase()===c.toLowerCase()||e.alternatives.some(e=>e.toLowerCase()===c.toLowerCase())),n?.color):void 0)||(e=s?.[t.type])}else if("project"===t.type){let n;(e=t.name?(m=t.name,n=a.find(e=>e.name.toLowerCase()===m.toLowerCase()||e.alternatives.some(e=>e.toLowerCase()===m.toLowerCase())),n?.color):void 0)||(e=s?.[t.type])}else if("priority"===t.type){let n;(e=t.name?(x=t.name,n=i.find(e=>e.name.toLowerCase()===x.toLowerCase()||e.alternatives.some(e=>e.toLowerCase()===x.toLowerCase())),n?.color):void 0)||(e=s?.[t.type])}else e=s?.[t.type];o.push((0,l.jsx)("span",{className:"inline-block px-1.5 py-0.5 mx-0.5 text-sm rounded font-medium",style:(u=e)?{backgroundColor:u,color:"#333"}:{},children:d},`marker-${n}`))}d=t.end}),d<e.length&&o.push(e.slice(d)),(0,l.jsx)("span",{className:t?"line-through text-zinc-400 dark:text-zinc-600":"text-zinc-900 dark:text-zinc-100",children:o.length>0?o:e})}var l9=e.i(56689),l7=e.i(61998);function l8({activities:e,comments:t}){let s=[...e.map(e=>({type:"activity",data:e})),...t.flatMap(e=>e.history.map((t,s)=>({type:"comment",data:{...e,history:[t],isEdit:s>0}})))].sort((e,t)=>{let s="activity"===e.type?e.data.timestamp:e.data.history[0].timestamp;return("activity"===t.type?t.data.timestamp:t.data.history[0].timestamp)-s}),n={};return s.forEach(e=>{let t=new Date("activity"===e.type?e.data.timestamp:e.data.history[0].timestamp).toLocaleDateString();n[t]||(n[t]=[]),n[t].push(e)}),(0,l.jsx)("div",{className:"space-y-4",children:0===s.length?(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 italic",children:"No activity yet"}):Object.entries(n).map(([e,t])=>(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"text-xs font-semibold text-zinc-500 dark:text-zinc-500 mb-2 sticky top-0 bg-white dark:bg-zinc-900 py-1",children:e===new Date().toLocaleDateString()?"Today":e}),(0,l.jsx)("div",{className:"space-y-1",children:t.map(e=>{if("activity"===e.type){let t=e.data;return(0,l.jsxs)("div",{className:"flex items-start gap-2 text-sm py-1.5 px-2 rounded hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors",children:[(0,l.jsx)("span",{className:"flex-shrink-0 text-base leading-none mt-0.5",title:t.type,children:(e=>{switch(e){case"created":return"✨";case"completed":return"✅";case"uncompleted":return"⤴️";case"archived":return"📦";case"unarchived":return"📤";case"deleted":return"🗑️";case"undeleted":return"↩️";case"edited":return"✏️";case"comment_added":case"comment_edited":case"comment_deleted":return"💭";case"assigned_added":case"assigned_removed":return"👤";case"source_added":case"source_removed":return"💼";case"mentioned_added":case"mentioned_removed":return"💬";case"project_added":case"project_removed":return"📁";case"priority_changed":case"priority_removed":return"🔥";case"duedate_changed":case"duedate_removed":return"📅";case"duration_changed":case"duration_removed":return"⏱️";case"recurring_changed":case"recurring_removed":return"🔄";case"dependency_added":case"dependency_removed":return"⛓️";case"tag_added":case"tag_removed":return"🏷️";case"context_changed":return"📝";case"started":return"🚀";case"cancelled":return"❌";case"workflow_state_changed":return"🔀";default:return"•"}})(t.type)}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("span",{className:"text-zinc-700 dark:text-zinc-300",children:t.description}),void 0!==t.metadata&&null!==t.metadata&&(0,l.jsx)("span",{className:"ml-1 text-zinc-500 dark:text-zinc-500",children:"string"==typeof t.metadata?t.metadata:String(JSON.stringify(t.metadata))})]}),(0,l.jsx)("span",{className:"flex-shrink-0 text-xs text-zinc-500 dark:text-zinc-500 ml-2",title:(0,l7.formatActivityDateTime)(t.timestamp),children:(0,l7.formatActivityTime)(t.timestamp)})]},t.id)}{let t=e.data,s=t.history[0];return(0,l.jsxs)("div",{className:"flex items-start gap-2 text-sm py-1.5 px-2 rounded hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors",children:[(0,l.jsx)("span",{className:"flex-shrink-0 text-base leading-none mt-0.5",title:"comment",children:"💭"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("span",{className:"text-zinc-700 dark:text-zinc-300",children:t.isEdit?"Comment edited":"Comment added"}),(0,l.jsx)("div",{className:"mt-1 text-xs text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 p-2 rounded [&_a]:text-blue-600 dark:[&_a]:text-blue-400 [&_a]:underline [&_a]:cursor-pointer",dangerouslySetInnerHTML:{__html:s.content}})]}),(0,l.jsx)("span",{className:"flex-shrink-0 text-xs text-zinc-500 dark:text-zinc-500 ml-2",title:(0,l7.formatActivityDateTime)(s.timestamp),children:(0,l7.formatActivityTime)(s.timestamp)})]},`comment-${t.commentId}-${s.timestamp}`)}})})]},e))})}var oe=e.i(12600);function ot({subtasks:e,onAdd:t,onToggle:s,onEdit:n,onDelete:r,readOnly:a=!1}){let[i,d]=(0,o.useState)(""),[c,m]=(0,o.useState)(null),[x,u]=(0,o.useState)(""),h=()=>{c&&x.trim()&&n(c,x.trim()),m(null),u("")},p=()=>{m(null),u("")},g=e.filter(e=>e.completed).length,b=e.length,f=b>0?Math.round(g/b*100):0;return(0,l.jsxs)("div",{className:"space-y-3","data-testid":"subtasks-container",children:[b>0&&(0,l.jsxs)("div",{className:"flex items-center gap-3","data-testid":"subtasks-progress",children:[(0,l.jsx)("div",{className:"flex-1 h-2 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all duration-300",style:{width:`${f}%`}})}),(0,l.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 whitespace-nowrap",children:[g,"/",b," (",f,"%)"]})]}),(0,l.jsx)("ul",{className:"space-y-2","data-testid":"subtasks-list",children:e.map(e=>(0,l.jsx)("li",{className:"flex items-center gap-2 group","data-testid":"subtask-item",children:c===e.id?(0,l.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,l.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h(),"Escape"===e.key&&p()},className:"flex-1 px-2 py-1 text-sm border border-zinc-300 dark:border-zinc-600 rounded bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),(0,l.jsx)("button",{onClick:h,className:"p-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300",title:"Save",children:(0,l.jsx)(oe.CheckIcon,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:p,className:"p-1 text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200",title:"Cancel",children:(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>!a&&s(e.id),disabled:a,className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500 cursor-pointer disabled:cursor-not-allowed","data-testid":"subtask-checkbox"}),(0,l.jsx)("span",{className:`flex-1 text-sm ${e.completed?"line-through text-zinc-400 dark:text-zinc-500":"text-zinc-900 dark:text-zinc-100"}`,"data-testid":"subtask-text",children:e.text}),!a&&(0,l.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,l.jsx)("button",{onClick:()=>{m(e.id),u(e.text)},className:"p-1 text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300",title:"Edit subtask","data-testid":"subtask-edit",children:(0,l.jsx)(oe.EditIcon,{className:"w-3.5 h-3.5"})}),(0,l.jsx)("button",{onClick:()=>r(e.id),className:"p-1 text-zinc-400 hover:text-red-600 dark:text-zinc-500 dark:hover:text-red-400",title:"Delete subtask","data-testid":"subtask-delete",children:(0,l.jsx)(oe.TrashIcon,{className:"w-3.5 h-3.5"})})]})]})},e.id))}),!a&&(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.trim()&&(t(i.trim()),d(""))},className:"flex items-center gap-2","data-testid":"subtask-add-form",children:[(0,l.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),placeholder:"Add a subtask...",className:"flex-1 px-3 py-2 text-sm border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500","data-testid":"subtask-input"}),(0,l.jsx)("button",{type:"submit",disabled:!i.trim(),className:"px-3 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-300 disabled:text-zinc-500 dark:disabled:bg-zinc-700 dark:disabled:text-zinc-500 rounded-lg transition-colors","data-testid":"subtask-add-button",children:"Add"})]})]})}function os({entries:e,totalMinutes:t,isTracking:s,activeEntry:n,onStart:r,onStop:a,onAddManual:i,onDelete:d,readOnly:c=!1}){let m,x,u,[h,p]=(0,o.useState)(!1),[g,b]=(0,o.useState)(""),[f,k]=(0,o.useState)(""),[j,y]=(0,o.useState)(""),[v,z]=(0,o.useState)(0);(0,o.useEffect)(()=>{if(s&&n){let e=setInterval(()=>{z(Math.floor((Date.now()-n.startTime)/1e3))},1e3);return()=>clearInterval(e)}z(0)},[s,n]);let w=e=>{if(0===e)return"0m";let t=Math.floor(e/60),s=e%60;return 0===t?`${s}m`:0===s?`${t}h`:`${t}h ${s}m`};return(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:["Total: ",w(t)]}),s&&(0,l.jsxs)("span",{className:"text-sm text-green-600 dark:text-green-400 animate-pulse",children:["⏱️ ",(m=Math.floor(v/3600),x=Math.floor(v%3600/60),u=v%60,m>0?`${m}:${x.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`:`${x}:${u.toString().padStart(2,"0")}`)]})]}),!c&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[s?(0,l.jsxs)("button",{onClick:a,className:"px-3 py-1.5 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors flex items-center gap-1",children:[(0,l.jsx)(oe.StopSolidIcon,{className:"w-4 h-4"}),"Stop"]}):(0,l.jsxs)("button",{onClick:()=>r(),className:"px-3 py-1.5 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors flex items-center gap-1",children:[(0,l.jsx)(oe.PlaySolidIcon,{className:"w-4 h-4"}),"Start"]}),(0,l.jsx)("button",{onClick:()=>p(!h),className:"px-3 py-1.5 text-sm font-medium text-zinc-700 dark:text-zinc-300 bg-zinc-200 dark:bg-zinc-700 hover:bg-zinc-300 dark:hover:bg-zinc-600 rounded-lg transition-colors",children:"+ Manual"})]})]}),h&&!c&&(0,l.jsxs)("div",{className:"p-3 bg-zinc-100 dark:bg-zinc-800 rounded-lg space-y-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"number",min:"0",placeholder:"Hours",value:g,onChange:e=>b(e.target.value),className:"w-20 px-2 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100"}),(0,l.jsx)("span",{className:"text-sm text-zinc-500",children:"h"}),(0,l.jsx)("input",{type:"number",min:"0",max:"59",placeholder:"Min",value:f,onChange:e=>k(e.target.value),className:"w-20 px-2 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100"}),(0,l.jsx)("span",{className:"text-sm text-zinc-500",children:"m"})]}),(0,l.jsx)("input",{type:"text",placeholder:"Note (optional)",value:j,onChange:e=>y(e.target.value),className:"w-full px-2 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100"}),(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)("button",{onClick:()=>p(!1),className:"px-3 py-1 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{let e=60*(parseInt(g)||0)+(parseInt(f)||0);e>0&&(i(e,j||void 0),b(""),k(""),y(""),p(!1))},className:"px-3 py-1 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded transition-colors",children:"Add"})]})]}),e.length>0&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("h5",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase",children:"Entries"}),(0,l.jsx)("ul",{className:"space-y-1",children:e.map(e=>(0,l.jsxs)("li",{className:"flex items-center justify-between py-1.5 px-2 bg-zinc-50 dark:bg-zinc-800/50 rounded group",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:e.endTime?w(e.duration||0):(0,l.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"In progress..."})}),e.note&&(0,l.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:["— ",e.note]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:new Date(e.startTime).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),!c&&e.endTime&&(0,l.jsx)("button",{onClick:()=>d(e.id),className:"p-1 text-zinc-400 hover:text-red-600 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete entry",children:(0,l.jsx)(oe.CloseIcon,{className:"w-3.5 h-3.5"})})]})]},e.id))})]})]})}function on({value:e,onChange:t,onBlur:s,placeholder:n="Start typing...",minHeight:r="100px",maxHeight:a="300px",className:i="",showKeyboardShortcuts:d=!1,alwaysEditable:c=!1,noBorderInViewMode:m=!1}){let[x,u]=(0,o.useState)(!1),[h,p]=(0,o.useState)({top:0,left:0}),[g,b]=(0,o.useState)(!1),[f,k]=(0,o.useState)(""),[j,y]=(0,o.useState)(c),v=(0,o.useRef)(null),z=(0,o.useRef)(null),w=(0,o.useRef)(e),N=(0,o.useRef)(null);(0,o.useEffect)(()=>{!j&&z.current&&e!==w.current&&(w.current=e),j&&v.current&&v.current.innerHTML!==e&&(v.current.innerHTML=e||"",w.current=e)},[e,j]);let C=()=>{if(f&&v.current&&N.current){let e=window.getSelection();if(e){e.removeAllRanges(),e.addRange(N.current);let s=N.current.cloneContents(),n=document.createElement("div");n.appendChild(s);let r=n.innerHTML;if(e.toString()){let e=f.startsWith("http")?f:`https://${f}`,s=`<a href="${e}" target="_blank" rel="noopener noreferrer" style="color: #2563eb; text-decoration: underline; cursor: pointer;">${r}</a>`;document.execCommand("insertHTML",!1,s);let n=v.current.innerHTML;w.current=n,t(n),setTimeout(()=>{v.current&&v.current.querySelectorAll("a").forEach(e=>{e.style.color="#2563eb",e.style.textDecoration="underline",e.style.cursor="pointer"})},0)}}b(!1),k(""),u(!1),N.current=null}};return(0,l.jsxs)("div",{className:"relative",children:[!j&&(0,l.jsx)("div",{ref:z,onClick:e=>{e.target instanceof HTMLAnchorElement?(e.preventDefault(),window.open(e.target.href,"_blank")):c||(y(!0),setTimeout(()=>{v.current&&v.current.focus()},0))},dangerouslySetInnerHTML:{__html:e||""},style:{minHeight:r,maxHeight:a},className:`overflow-y-auto text-sm px-3 py-2 rounded ${m?"border-0":"border border-zinc-300 dark:border-zinc-600"} bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 ${m?"cursor-pointer":"cursor-text"} empty:before:content-[attr(data-placeholder)] empty:before:text-zinc-400 dark:empty:before:text-zinc-500 [&_a]:text-blue-600 dark:[&_a]:text-blue-400 [&_a]:underline [&_a]:cursor-pointer ${i}`,"data-placeholder":n}),j&&(0,l.jsx)("div",{ref:v,contentEditable:!0,suppressContentEditableWarning:!0,"data-testid":"rich-text-editor",onInput:e=>{if(v.current){let e=v.current.innerHTML;w.current=e||"",t(e||"")}},onBlur:e=>{if(c){s&&v.current&&s(v.current.innerHTML||"");return}setTimeout(()=>{let e=document.activeElement;if(!(e&&e.closest(".rich-text-toolbar"))){if(v.current){let e=v.current.innerHTML;w.current=e||"",t(e||""),s&&s(e||"")}y(!1),u(!1),b(!1)}},100)},onMouseUp:e=>{let t=window.getSelection();if(t&&t.toString().length>0){let e=t.getRangeAt(0);N.current=e.cloneRange();let s=e.getBoundingClientRect();p({top:s.top-40,left:s.left+s.width/2-100}),u(!0),b(!1)}else u(!1),b(!1),N.current=null},onKeyDown:e=>{if("b"===e.key&&(e.metaKey||e.ctrlKey))e.preventDefault(),document.execCommand("bold");else if("i"===e.key&&(e.metaKey||e.ctrlKey))e.preventDefault(),document.execCommand("italic");else if("u"===e.key&&(e.metaKey||e.ctrlKey))e.preventDefault(),document.execCommand("underline");else if("k"===e.key&&(e.metaKey||e.ctrlKey)){e.preventDefault();let t=window.getSelection();if(t&&t.rangeCount>0){let e=t.getRangeAt(0),s=null,n=e.cloneContents(),r=e.commonAncestorContainer;if(r.nodeType===Node.TEXT_NODE&&r.parentElement?s=r.parentElement.closest("a"):r.nodeType===Node.ELEMENT_NODE&&(s=r.closest("a")),!s){let e=document.createElement("div");e.appendChild(n),s=e.querySelector("a")}s&&s.href?k(s.href):k("")}b(!0)}else"Escape"!==e.key||c||e.currentTarget.blur()},style:{minHeight:r,maxHeight:a},className:`overflow-y-auto text-sm px-3 py-2 rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 empty:before:content-[attr(data-placeholder)] empty:before:text-zinc-400 dark:empty:before:text-zinc-500 [&_a]:text-blue-600 dark:[&_a]:text-blue-400 [&_a]:underline ${i}`,"data-placeholder":n}),j&&x&&!g&&(0,l.jsxs)("div",{className:"rich-text-toolbar fixed z-[9999] flex gap-1 bg-zinc-800 dark:bg-zinc-700 rounded shadow-lg px-2 py-1",style:{top:`${h.top}px`,left:`${h.left}px`},onMouseDown:e=>e.preventDefault(),children:[(0,l.jsx)("button",{onMouseDown:e=>{e.preventDefault(),document.execCommand("bold"),u(!1)},className:"px-3 py-1 text-xs font-bold text-white hover:bg-zinc-600 dark:hover:bg-zinc-600 rounded transition-colors",title:"Bold (⌘B)",children:"B"}),(0,l.jsx)("button",{onMouseDown:e=>{e.preventDefault(),document.execCommand("italic"),u(!1)},className:"px-3 py-1 text-xs italic text-white hover:bg-zinc-600 dark:hover:bg-zinc-600 rounded transition-colors",title:"Italic (⌘I)",children:"I"}),(0,l.jsx)("button",{onMouseDown:e=>{e.preventDefault(),document.execCommand("underline"),u(!1)},className:"px-3 py-1 text-xs underline text-white hover:bg-zinc-600 dark:hover:bg-zinc-600 rounded transition-colors",title:"Underline (⌘U)",children:"U"}),(0,l.jsx)("button",{onMouseDown:e=>{if(e.preventDefault(),window.getSelection()&&N.current){let e=null,t=N.current,s=t.cloneContents(),n=t.commonAncestorContainer;if(n.nodeType===Node.TEXT_NODE&&n.parentElement?e=n.parentElement.closest("a"):n.nodeType===Node.ELEMENT_NODE&&(e=n.closest("a")),!e){let t=document.createElement("div");t.appendChild(s),e=t.querySelector("a")}e&&e.href?k(e.href):k("")}b(!0)},className:"px-3 py-1 text-xs text-white hover:bg-zinc-600 dark:hover:bg-zinc-600 rounded transition-colors",title:"Link (⌘K)",children:"🔗"})]}),j&&x&&g&&(0,l.jsxs)("div",{className:"rich-text-toolbar fixed z-[9999] flex gap-1 bg-zinc-800 dark:bg-zinc-700 rounded shadow-lg px-2 py-2",style:{top:`${h.top}px`,left:`${h.left}px`},children:[(0,l.jsx)("input",{type:"text",value:f,onChange:e=>k(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),C()):"Escape"===e.key&&(e.preventDefault(),b(!1),k(""),u(!1),v.current&&v.current.focus())},placeholder:"https://example.com",autoFocus:!0,className:"text-xs px-2 py-1 rounded bg-zinc-900 dark:bg-zinc-800 text-white border border-zinc-600 focus:outline-none focus:ring-1 focus:ring-blue-500 w-48"}),(0,l.jsx)("button",{onMouseDown:e=>{e.preventDefault(),C()},className:"px-3 py-1 text-xs text-white bg-blue-600 hover:bg-blue-700 rounded transition-colors",title:"Apply Link",children:"✓"})]}),d&&(0,l.jsxs)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:[(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded",children:"⌘B"})," Bold,"," ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded",children:"⌘I"})," Italic,"," ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded",children:"⌘U"})," Underline,"," ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded",children:"⌘K"})," Link"]})]})}let or={blue:"bg-blue-100 dark:bg-blue-900/30 border-blue-300 dark:border-blue-700 text-blue-800 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-900/50",green:"bg-green-100 dark:bg-green-900/30 border-green-300 dark:border-green-700 text-green-800 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-900/50",pink:"bg-pink-100 dark:bg-pink-900/30 border-pink-300 dark:border-pink-700 text-pink-800 dark:text-pink-300 hover:bg-pink-200 dark:hover:bg-pink-900/50",purple:"bg-purple-100 dark:bg-purple-900/30 border-purple-300 dark:border-purple-700 text-purple-800 dark:text-purple-300 hover:bg-purple-200 dark:hover:bg-purple-900/50",red:"bg-red-100 dark:bg-red-900/30 border-red-300 dark:border-red-700 text-red-800 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-900/50",teal:"bg-teal-100 dark:bg-teal-900/30 border-teal-300 dark:border-teal-700 text-teal-800 dark:text-teal-300 hover:bg-teal-200 dark:hover:bg-teal-900/50",amber:"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700 text-amber-800 dark:text-amber-300 hover:bg-amber-200 dark:hover:bg-amber-900/50",zinc:"bg-zinc-100 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-600 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"};function oa({children:e,onRemove:t,variant:s="zinc",size:n="sm",customColor:r}){let a="sm"===n?"text-xs px-2 py-1":"text-sm px-3 py-1.5";if(r){let s={backgroundColor:r,color:"#333",borderColor:r};return t?(0,l.jsxs)("button",{onClick:t,style:s,className:`${a} rounded border transition-opacity hover:opacity-80`,children:[e," ✕"]}):(0,l.jsx)("span",{style:s,className:`${a} rounded border`,children:e})}return t?(0,l.jsxs)("button",{onClick:t,className:`${a} rounded border transition-colors ${or[s]}`,children:[e," ✕"]}):(0,l.jsx)("span",{className:`${a} rounded border ${or[s]}`,children:e})}let oi={blue:"bg-blue-100 dark:bg-blue-900/50",green:"bg-green-100 dark:bg-green-900/50",pink:"bg-pink-100 dark:bg-pink-900/50",purple:"bg-purple-100 dark:bg-purple-900/50",red:"bg-red-100 dark:bg-red-900/50",teal:"bg-teal-100 dark:bg-teal-900/50",amber:"bg-amber-100 dark:bg-amber-900/50"},ol={blue:"text-blue-600 dark:text-blue-400",green:"text-green-600 dark:text-green-400",pink:"text-pink-600 dark:text-pink-400",purple:"text-purple-600 dark:text-purple-400",red:"text-red-600 dark:text-red-400",teal:"text-teal-600 dark:text-teal-400",amber:"text-amber-600 dark:text-amber-400"};function oo({items:e,onSelect:t,onAdd:s,onClose:n,placeholder:r="Search...",searchValue:a,allowAdd:i=!0,highlightColor:d="blue",excludeIds:c=[],emptyMessage:m="No items found"}){let[x,u]=(0,o.useState)(a||"");(0,o.useEffect)(()=>{void 0!==a&&u(a)},[a]);let h=e.filter(e=>!c.includes(e.id)).filter(e=>{if(""===x)return!0;let t=x.toLowerCase();return!!(e.label.toLowerCase().includes(t)||e.alternatives&&e.alternatives.some(e=>e.toLowerCase().includes(t)))}).slice(0,10),p=i&&s&&0===h.length&&""!==x.trim(),g=h.length+ +!!p,b=()=>{u(""),n()},{selectedIndex:f,setSelectedIndex:k,handleKeyDown:j}=function({itemCount:e,onSelect:t,onClose:s}){let[n,r]=(0,o.useState)(0),a=(0,o.useCallback)(a=>{"ArrowDown"===a.key?(a.preventDefault(),r(t=>(t+1)%e)):"ArrowUp"===a.key?(a.preventDefault(),r(t=>(t-1+e)%e)):"Enter"===a.key?(a.preventDefault(),t(n)):"Escape"===a.key&&(a.preventDefault(),s())},[e,n,t,s]),i=(0,o.useCallback)(()=>{r(0)},[]);return{selectedIndex:n,setSelectedIndex:r,handleKeyDown:a,resetIndex:i}}({itemCount:g,onSelect:e=>{e<h.length?t(h[e]):p&&s&&s(x.trim())},onClose:b});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 z-10",onClick:b}),(0,l.jsxs)("div",{className:"absolute z-20 mt-1 w-64 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded shadow-lg",children:[(0,l.jsx)("input",{type:"text",value:x,onChange:e=>{u(e.target.value),k(0)},onKeyDown:j,placeholder:r,autoFocus:!0,className:"w-full text-xs px-3 py-2 border-b border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none"}),(0,l.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[h.map((e,s)=>(0,l.jsxs)("button",{onClick:()=>{t(e),u("")},className:`w-full text-left text-xs px-3 py-2 transition-colors ${s===f?oi[d]:"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:[e.prefix,e.label]},e.id)),0===h.length&&(""===x?(0,l.jsx)("div",{className:"text-xs px-3 py-2 text-zinc-500 dark:text-zinc-400 italic",children:m}):p&&s?(0,l.jsxs)("button",{onClick:()=>{s(x.trim()),u("")},className:`w-full text-left text-xs px-3 py-2 transition-colors font-medium ${ol[d]} ${0===f?oi[d]:"hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:['+ Add "',x,'"']}):(0,l.jsx)("div",{className:"text-xs px-3 py-2 text-zinc-500 dark:text-zinc-400 italic",children:"No matches"}))]})]})]})}function od({isArchived:e,onArchive:t,onUnarchive:s,onDuplicate:n,onDelete:r,archiveLabel:a="Archive",unarchiveLabel:i="Unarchive",duplicateLabel:o="Duplicate",deleteLabel:d="Delete"}){return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-2","data-testid":"action-buttons",children:[n&&(0,l.jsx)("button",{onClick:n,className:"p-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/30 dark:hover:bg-blue-900/50 text-blue-700 dark:text-blue-400 rounded-md transition-colors","aria-label":o,title:o,"data-testid":"action-duplicate",children:(0,l.jsx)(oe.DuplicateIcon,{className:"w-4 h-4"})}),e&&s?(0,l.jsx)("button",{onClick:s,className:"p-2 bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 text-green-700 dark:text-green-400 rounded-md transition-colors","aria-label":i,title:i,"data-testid":"action-unarchive",children:(0,l.jsx)(oe.UndoIcon,{className:"w-4 h-4"})}):!e&&t&&(0,l.jsx)("button",{onClick:t,className:"p-2 bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/30 dark:hover:bg-amber-900/50 text-amber-700 dark:text-amber-400 rounded-md transition-colors","aria-label":a,title:a,"data-testid":"action-archive",children:(0,l.jsx)(oe.ArchiveIcon,{className:"w-4 h-4"})}),r&&(0,l.jsx)("button",{onClick:r,className:"p-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-400 rounded-md transition-colors","aria-label":d,title:d,"data-testid":"action-delete",children:(0,l.jsx)(oe.TrashIcon,{className:"w-4 h-4"})})]})}function oc(){let[e,t]=(0,o.useState)(null),s=(0,o.useCallback)(e=>{t(e)},[]),n=(0,o.useCallback)(()=>{t(null)},[]),r=(0,o.useCallback)(e=>{t(t=>t===e?null:e)},[]),a=(0,o.useCallback)(t=>e===t,[e]);return{activeDropdown:e,openDropdown:s,closeDropdown:n,toggleDropdown:r,isOpen:a}}function om({title:e,icon:t,values:s,onRemove:n,onAdd:r,availableItems:a,dropdownId:i,placeholder:o="Search...",highlightColor:d="blue",customColor:c,emptyMessage:m,getColor:x,getTextColor:u,showPrefix:h=!0,prefix:p="",renderCustomValue:g,addButtonLabel:b="+",noItemsMessage:f,tooltip:k}){let j=oc();return(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2 flex items-center gap-1.5",children:[(0,l.jsxs)("span",{children:[t," ",e]}),k&&(0,l.jsx)(l9.InfoTooltip,{content:k})]}),f&&(!a||a.length<=1)?(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 italic",children:f}):(0,l.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[s.map(e=>{if(g)return(0,l.jsx)("div",{children:g(e)},e);let t=h&&p?`${p}${e}`:e;if(x&&u){let s=x(e),r=u(s);return(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded font-medium border",style:{backgroundColor:s,color:r,borderColor:s},children:[t,(0,l.jsx)("button",{onClick:()=>n(e),className:"ml-1 hover:opacity-70",children:"×"})]},e)}return(0,l.jsx)(oa,{variant:d,customColor:c,onRemove:()=>n(e),children:t},e)}),r&&a&&(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>j.toggleDropdown(i),className:"text-xs px-2 py-1 rounded border border-zinc-300 dark:border-zinc-600 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors font-bold",children:b}),j.isOpen(i)&&(0,l.jsx)(oo,{items:a,onSelect:e=>{let t="string"==typeof e?e:e.id;r&&r(t),j.closeDropdown()},onAdd:e=>{r&&r(e),j.closeDropdown()},onClose:()=>j.closeDropdown(),placeholder:o,highlightColor:d,excludeIds:s,emptyMessage:m||"All items already added"})]})]})]})}let ox={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl",full:"max-w-full"};function ou({isOpen:e,onClose:t,children:s,maxWidth:n="3xl"}){return e?(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",onClick:t,children:(0,l.jsx)("div",{className:`bg-white dark:bg-zinc-900 rounded-xl shadow-2xl ${ox[n]} w-full max-h-[90vh] overflow-y-auto`,onClick:e=>e.stopPropagation(),children:s})}):null}let oh=["15m","30m","45m","1h","1.5h","2h","3h","4h","5h","6h","7h","8h","10h","1d","2d","3d","5d","1w","2w","3w","1m","2m","3m"],op=["daily","every day","every weekday","weekly","every week","every monday","every tuesday","every wednesday","every thursday","every friday","every saturday","every sunday","every 2 weeks","monthly","every month","yearly","every year"];var og=e.i(74715),ob=e.i(1346);let of=[{label:"Today",value:"today"},{label:"Tomorrow",value:"tomorrow"},{label:"Next Week",value:"next week"},{label:"Next Month",value:"next month"},{label:"Next Monday",value:"next monday"},{label:"Next Tuesday",value:"next tuesday"},{label:"Next Wednesday",value:"next wednesday"},{label:"Next Thursday",value:"next thursday"},{label:"Next Friday",value:"next friday"},{label:"Next Saturday",value:"next saturday"},{label:"Next Sunday",value:"next sunday"},{label:"In 2 Days",value:"in 2 days"},{label:"In 3 Days",value:"in 3 days"},{label:"In 5 Days",value:"in 5 days"},{label:"In 1 Week",value:"in 1 week"},{label:"In 2 Weeks",value:"in 2 weeks"},{label:"In 3 Weeks",value:"in 3 weeks"},{label:"In 1 Month",value:"in 1 month"},{label:"In 2 Months",value:"in 2 months"},{label:"In 3 Months",value:"in 3 months"},{label:"In 6 Months",value:"in 6 months"}];function ok({todo:e,todos:t=[],isOpen:s,onClose:n,onToggle:r,onDelete:a,onDuplicate:i,onEdit:d,onArchive:c,onUnarchive:m,markerColors:x,settings:u,linkPatterns:h,availablePeople:p,availableProjects:g,availablePriorities:b,onAddPerson:f,onAddProject:k,onAddPriority:j,onAddComment:y,onAddSubtask:v,onToggleSubtask:z,onEditSubtask:w,onDeleteSubtask:N,onStartTimeTracking:C,onStopTimeTracking:D,onAddManualTimeEntry:S,onDeleteTimeEntry:T,onCreateTemplate:P,onRecordSelections:A,availableTags:E=[],sprints:M=[],runningSprint:$}){let R,I,F,[L,W]=(0,o.useState)(!1),[O,B]=(0,o.useState)([]),[Y,_]=(0,o.useState)(""),[H,U]=(0,o.useState)(""),V=(0,o.useRef)(null),q=oc(),[K,G]=(0,o.useState)(""),[J,Z]=(0,o.useState)({assignedPeople:[],sourcePeople:[],mentionedPeople:[],projects:[],dependencies:[],priority:void 0,dueDate:void 0,duration:void 0,recurring:void 0,tags:[],sprint:void 0});(0,o.useEffect)(()=>{let t=(0,og.normalizeDateValue)(e.metadata.dueDate,u.dateTime,u.workHours);Z({assignedPeople:[...e.metadata.assignedPeople],sourcePeople:[...e.metadata.sourcePeople],mentionedPeople:[...e.metadata.mentionedPeople],projects:[...e.metadata.projects],dependencies:[...e.metadata.dependencies??[]],priority:e.metadata.priority,dueDate:t||e.metadata.dueDate,duration:e.metadata.duration,recurring:e.metadata.recurring,context:e.metadata.context,tags:e.metadata.tags||[],sprint:e.metadata.sprint})},[e,u.dateTime,u.workHours]),(0,o.useEffect)(()=>{L&&V.current&&setTimeout(()=>{V.current?.setValue(e.text),V.current?.focus()},50)},[L,e.text]);let Q=()=>{if(""===H.trim())return;let t={assignedPeople:O.filter(e=>"assigned"===e.type).map(e=>e.value),sourcePeople:O.filter(e=>"source"===e.type).map(e=>e.value),mentionedPeople:O.filter(e=>"mentioned"===e.type).map(e=>e.value),projects:O.filter(e=>"project"===e.type).map(e=>e.value),dependencies:O.filter(e=>"dependency"===e.type).map(e=>e.value),tags:O.filter(e=>"tag"===e.type).map(e=>e.value),priority:O.find(e=>"priority"===e.type)?.value||J.priority,dueDate:O.find(e=>"dueDate"===e.type)?.value||J.dueDate,duration:O.find(e=>"duration"===e.type)?.value||J.duration,recurring:O.find(e=>"recurring"===e.type)?.value||J.recurring,sprint:J.sprint,context:J.context};d(e.id,Y,H,t),A?.({assignedPeople:t.assignedPeople,sourcePeople:t.sourcePeople,mentionedPeople:t.mentionedPeople,projects:t.projects,priorities:t.priority,tags:t.tags,dueDates:t.dueDate,durations:t.duration,recurring:t.recurring,sprints:t.sprint}),W(!1)},X=t=>{let s=[e.plainText];t.assignedPeople.forEach(e=>s.push(`@${e}`)),t.sourcePeople.forEach(e=>s.push(`$${e}`)),t.projects.forEach(e=>s.push(`%${e}`)),t.priority&&s.push(`!!${t.priority}`),(t.tags??[]).forEach(e=>s.push(`#${e}`));let n=s.join(" ");d(e.id,n,e.plainText,t),A?.({assignedPeople:t.assignedPeople,sourcePeople:t.sourcePeople,mentionedPeople:t.mentionedPeople,projects:t.projects,priorities:t.priority,tags:t.tags,dueDates:t.dueDate,durations:t.duration,recurring:t.recurring,sprints:t.sprint}),Z(t)},ee=e=>(0,ob.findPersonColor)(e,p,x.assigned),et=e=>(0,ob.findPriorityColor)(e,b,x.priority);if(!s)return null;return(0,l.jsx)(ou,{isOpen:s,onClose:n,maxWidth:"3xl",children:(0,l.jsxs)("div",{className:"p-6","data-testid":"todo-details-overlay",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium",style:{backgroundColor:e.statusColor+"20",color:e.statusColor},children:e.statusBadge}),(0,l.jsx)("button",{onClick:n,"data-testid":"overlay-close",className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors text-zinc-500 dark:text-zinc-400","aria-label":"Close",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5"})})]}),(0,l.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,l.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(R=e.metadata.priority?(0,ob.findPriorityColor)(e.metadata.priority,b,x.priority):"#a1a1aa",I=e.isCompleted||e.isArchived,(0,l.jsx)("div",{onClick:()=>r(e.id),className:"w-5 h-5 mt-1 rounded cursor-pointer flex-shrink-0 flex items-center justify-center transition-all",style:{borderWidth:"2px",borderStyle:"solid",borderColor:R,backgroundColor:I?R:void 0,boxShadow:I?void 0:`0 0 6px 1px ${R}40, 0 0 2px 0px ${R}`},role:"checkbox","aria-checked":I,children:I&&(0,l.jsx)(oe.CheckIcon,{className:"w-3 h-3 text-white",strokeWidth:3})})),(0,l.jsx)("div",{className:"flex-1",children:L?(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(l4,{ref:V,markerColors:x,availablePeople:p,availableProjects:g,availablePriorities:b,dateTimeSettings:u.dateTime,workHoursSettings:u.workHours,onAddPerson:f,onAddProject:k,onAddPriority:j,onTokensChange:(e,t,s)=>{B(e),_(t),U(s)},onEnterPress:Q}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:Q,className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors",children:"Save"}),(0,l.jsx)("button",{onClick:()=>{W(!1),B([]),_(""),U("")},className:"px-3 py-1.5 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded text-sm font-medium transition-colors",children:"Cancel"}),(0,l.jsxs)("div",{className:"relative ml-auto",children:[(0,l.jsx)("button",{onClick:()=>q.toggleDropdown("marker-reference"),className:"p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Show marker reference",children:(0,l.jsx)(oe.InfoIcon,{className:"w-4 h-4"})}),q.isOpen("marker-reference")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>q.closeDropdown()}),(0,l.jsxs)("div",{className:"absolute right-0 top-full mt-2 z-40 w-80 p-3 bg-white dark:bg-zinc-800 rounded-lg shadow-xl border border-zinc-200 dark:border-zinc-700",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:"✨ Smart Input Markers"}),(0,l.jsx)("button",{onClick:()=>q.closeDropdown(),className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200",children:(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 px-1.5 py-0.5 rounded font-mono",children:"@name"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Assign"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 px-1.5 py-0.5 rounded font-mono",children:"$name"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Source"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300 px-1.5 py-0.5 rounded font-mono",children:"%proj"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Project"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 px-1.5 py-0.5 rounded font-mono",children:"!!high"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Priority"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-teal-100 dark:bg-teal-900/50 text-teal-700 dark:text-teal-300 px-1.5 py-0.5 rounded font-mono",children:"#tag"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Tag"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-pink-100 dark:bg-pink-900/50 text-pink-700 dark:text-pink-300 px-1.5 py-0.5 rounded font-mono italic",children:"tomorrow"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Due (auto)"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300 px-1.5 py-0.5 rounded font-mono italic",children:"2h, 30m"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Duration (auto)"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-teal-100 dark:bg-teal-900/50 text-teal-700 dark:text-teal-300 px-1.5 py-0.5 rounded font-mono italic",children:"every mon"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Recurring (auto)"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,l.jsx)("code",{className:"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300 px-1.5 py-0.5 rounded font-mono italic",children:"John"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Mention (auto)"})]})]})]})]})]})]})]}):(0,l.jsx)("h2",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100 cursor-text hover:bg-zinc-50 dark:hover:bg-zinc-800 rounded px-2 py-1 -mx-2 -my-1 transition-colors",onClick:()=>W(!0),children:(0,l.jsx)(l3,{text:e.text,markerColors:x,linkPatterns:h,availablePeople:p,availableProjects:g,availablePriorities:b})})})]})}),(0,l.jsx)("div",{className:"pb-4 border-b border-zinc-200 dark:border-zinc-800 mb-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Created:"})," ",e.createdDateDisplay," (",e.ageDisplay,")"]}),e.updatedAt&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Updated:"})," ",e.updatedDateDisplay]}),e.completedAt&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Completed:"})," ",e.completedDateDisplay]}),e.archivedAt&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Archived:"})," ",e.archivedDateDisplay]})]})}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2 flex items-center gap-1.5",children:[(0,l.jsx)("span",{children:"📝 Context"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.context})]}),(0,l.jsx)(on,{value:J.context,onChange:e=>{Z(t=>({...t,context:e||void 0}))},onBlur:e=>{X({...J,context:e||void 0})},placeholder:"Add context...",minHeight:"100px",maxHeight:"300px",noBorderInViewMode:!0})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,l.jsx)(om,{title:"Assigned",icon:"👤",values:J.assignedPeople,onRemove:e=>{X({...J,assignedPeople:J.assignedPeople.filter(t=>t!==e)})},onAdd:e=>{f&&!p.find(t=>t.name===e)&&f(e),X({...J,assignedPeople:[...J.assignedPeople,e]})},availableItems:p.map(e=>({id:e.name,label:e.name,prefix:"@",alternatives:e.alternatives})),dropdownId:"assigned",placeholder:"Search people...",highlightColor:"blue",emptyMessage:"All people already assigned",getColor:ee,getTextColor:ob.getTextColor,prefix:"@",tooltip:l9.tooltipContent.assignedPeople}),(0,l.jsx)(om,{title:"Projects",icon:"📁",values:J.projects,onRemove:e=>{X({...J,projects:J.projects.filter(t=>t!==e)})},onAdd:e=>{k&&!g.find(t=>t.name===e)&&k(e),X({...J,projects:[...J.projects,e]})},availableItems:g.map(e=>({id:e.name,label:`%${e.name}`,alternatives:e.alternatives})),dropdownId:"project",placeholder:"Search projects...",highlightColor:"purple",emptyMessage:"All projects already added",getColor:e=>(0,ob.findProjectColor)(e,g,x.project),getTextColor:ob.getTextColor,prefix:"%",tooltip:l9.tooltipContent.projects}),(0,l.jsx)(om,{title:"Source",icon:"💼",values:J.sourcePeople,onRemove:e=>{X({...J,sourcePeople:J.sourcePeople.filter(t=>t!==e)})},onAdd:e=>{f&&!p.find(t=>t.name===e)&&f(e),X({...J,sourcePeople:[...J.sourcePeople,e]})},availableItems:p.map(e=>({id:e.name,label:`$${e.name}`,alternatives:e.alternatives})),dropdownId:"source",placeholder:"Search people...",highlightColor:"green",emptyMessage:"All people already added",getColor:ee,getTextColor:ob.getTextColor,prefix:"$",tooltip:l9.tooltipContent.sourcePeople}),(0,l.jsx)(om,{title:"Mentioned",icon:"💬",values:J.mentionedPeople,onRemove:e=>{X({...J,mentionedPeople:J.mentionedPeople.filter(t=>t!==e)})},onAdd:e=>{f&&!p.find(t=>t.name===e)&&f(e),X({...J,mentionedPeople:[...J.mentionedPeople,e]})},availableItems:p.map(e=>({id:e.name,label:e.name,alternatives:e.alternatives})),dropdownId:"mentioned",placeholder:"Search people...",highlightColor:"pink",emptyMessage:"All people already mentioned",getColor:ee,getTextColor:ob.getTextColor,showPrefix:!1,tooltip:l9.tooltipContent.mentionedPeople}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2 flex items-center gap-1.5",children:[(0,l.jsx)("span",{children:"🔥 Priority"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.priority})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[q.isOpen("priority")&&(0,l.jsx)(oo,{items:b.map(e=>({id:e.name,label:`!!${e.name}`,alternatives:e.alternatives})),onSelect:e=>{X({...J,priority:"string"==typeof e?e:e.id}),q.closeDropdown()},onAdd:j?e=>{j(e),X({...J,priority:e}),q.closeDropdown()}:void 0,onClose:()=>q.closeDropdown(),placeholder:"Search priorities...",highlightColor:"red",emptyMessage:"No priorities available"}),J.priority?(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded font-medium cursor-pointer",style:{backgroundColor:et(J.priority),color:(0,ob.getTextColor)(et(J.priority))},onClick:()=>q.toggleDropdown("priority"),children:["!!",J.priority,(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),X({...J,priority:""})},className:"ml-1 hover:opacity-70",children:"×"})]}):(0,l.jsxs)("button",{onClick:()=>q.toggleDropdown("priority"),className:"text-xs px-2 py-1 rounded border border-zinc-300 dark:border-zinc-600 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors font-bold",children:["!!",u.autoAssign.priority||"None"]})]})]}),(0,l.jsx)(om,{title:"Tags",icon:"🏷️",values:J.tags??[],onRemove:e=>{X({...J,tags:(J.tags??[]).filter(t=>t!==e)})},onAdd:e=>{let t=e.trim();t&&!(J.tags??[]).includes(t)&&X({...J,tags:[...J.tags??[],t]})},availableItems:E.map(e=>({id:e,label:e,prefix:"#"})),dropdownId:"tag",placeholder:"Search or add tag...",customColor:x.tag,emptyMessage:"No existing tags. Type to create new.",tooltip:l9.tooltipContent.tags}),(0,l.jsx)(om,{title:"Dependencies",icon:"⛓️",values:J.dependencies??[],tooltip:l9.tooltipContent.dependencies,onRemove:e=>{X({...J,dependencies:(J.dependencies??[]).filter(t=>t!==e)})},onAdd:e=>{X({...J,dependencies:[...J.dependencies??[],e]})},availableItems:t.filter(t=>t.id!==e.id).map(e=>({id:e.id,label:e.plainText})),dropdownId:"dependency",placeholder:"Search tasks...",customColor:x.dependency,emptyMessage:"All tasks already added",noItemsMessage:"No other tasks available",renderCustomValue:e=>{let s=t.find(t=>t.id===e);return s?(0,l.jsx)(oa,{customColor:x.dependency,onRemove:()=>{X({...J,dependencies:(J.dependencies??[]).filter(t=>t!==e)})},children:s.plainText.length>30?s.plainText.substring(0,30)+"...":s.plainText}):null}}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2 flex items-center gap-1.5",children:[(0,l.jsx)("span",{children:"📅 Due"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.dueDate})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[J.dueDate&&(0,l.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-500 whitespace-nowrap",children:(()=>{let[e,t,s]=(J.dueDate.includes("T")?J.dueDate.split("T")[0]:J.dueDate).split("-").map(Number),n=new Date(e,t-1,s);return isNaN(n.getTime())?"":n.toLocaleDateString("en-US",{weekday:"short"})})()}),(0,l.jsx)("input",{type:"date",value:(0,og.convertToDateInputFormat)(J.dueDate,u.dateTime,u.workHours),onChange:e=>{let t,s=e.target.value;if(s)if(J.dueDate&&J.dueDate.includes("T")){let e=J.dueDate.split("T")[1];t=`${s}T${e}`}else t=s;else t=void 0;X({...J,dueDate:t})},className:"flex-1 text-xs px-2 py-1.5 rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100"})]}),(0,l.jsx)("input",{type:"time",value:(0,og.convertToTimeInputFormat)(J.dueDate,u.dateTime,u.workHours),onChange:e=>{let t,s=e.target.value;if(s&&J.dueDate){let e=J.dueDate.includes("T")?J.dueDate.split("T")[0]:J.dueDate;t=`${e}T${s}`}else!s&&J.dueDate&&(t=J.dueDate.includes("T")?J.dueDate.split("T")[0]:J.dueDate);X({...J,dueDate:t})},className:"w-32 text-xs px-2 py-1.5 rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100"}),"active"===e.state&&(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>q.toggleDropdown("delayed"),className:"p-1.5 bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/30 dark:hover:bg-purple-900/50 text-purple-700 dark:text-purple-400 rounded-md transition-colors","aria-label":"Delay todo",title:"Quick delay",children:(0,l.jsx)(oe.ClockIcon,{className:"w-4 h-4"})}),q.isOpen("delayed")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>q.closeDropdown()}),(0,l.jsx)("div",{className:"absolute right-0 z-20 mt-1 w-48 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded shadow-lg py-1 max-h-64 overflow-y-auto",children:of.map(e=>(0,l.jsx)("button",{onClick:()=>{let t=(0,og.normalizeDateValue)(e.value,u.dateTime,u.workHours);t&&X({...J,dueDate:t}),q.closeDropdown()},className:"w-full text-left px-4 py-2 text-sm text-zinc-900 dark:text-zinc-100 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",children:e.label},e.value))})]})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2 flex items-center gap-1.5",children:[(0,l.jsx)("span",{children:"⏱️ Duration"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.duration})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[q.isOpen("duration")&&(0,l.jsx)(oo,{items:(""==="".trim()?oh:oh.filter(e=>e.toLowerCase().includes(""))).map(e=>({id:e,label:`*${e}`})),onSelect:e=>{X({...J,duration:"string"==typeof e?e:e.id}),q.closeDropdown()},onAdd:e=>{X({...J,duration:e}),q.closeDropdown()},onClose:()=>q.closeDropdown(),placeholder:"e.g., 2h, 30m, 1d",highlightColor:"amber",emptyMessage:""}),J.duration?(0,l.jsx)(oa,{customColor:x.duration,onRemove:()=>{X({...J,duration:void 0})},children:J.duration}):(0,l.jsx)("button",{onClick:()=>q.toggleDropdown("duration"),className:"text-xs px-2 py-1 rounded border border-zinc-300 dark:border-zinc-600 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors font-bold",children:"+"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2 flex items-center gap-1.5",children:[(0,l.jsx)("span",{children:"🔄 Recurring"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.recurring})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[q.isOpen("recurring")&&(0,l.jsx)(oo,{items:(""==="".trim()?op:op.filter(e=>e.toLowerCase().includes(""))).map(e=>({id:e,label:`%${e}`})),onSelect:e=>{X({...J,recurring:"string"==typeof e?e:e.id}),q.closeDropdown()},onAdd:e=>{X({...J,recurring:e}),q.closeDropdown()},onClose:()=>q.closeDropdown(),placeholder:"e.g., every day, every monday",highlightColor:"teal",emptyMessage:""}),J.recurring?(0,l.jsx)(oa,{customColor:x.recurring,onRemove:()=>{X({...J,recurring:void 0})},children:J.recurring}):(0,l.jsx)("button",{onClick:()=>q.toggleDropdown("recurring"),className:"text-xs px-2 py-1 rounded border border-zinc-300 dark:border-zinc-600 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors font-bold",children:"+"})]})]}),M.length>0&&(0,l.jsx)(om,{title:"Sprint",icon:"🏃",values:J.sprint?[J.sprint]:[],onRemove:()=>{X({...J,sprint:void 0})},onAdd:e=>{X({...J,sprint:e})},availableItems:[...$?[{id:$.id,label:`🏃 ${$.name} (Active)`}]:[],...M.filter(e=>e.id!==$?.id&&"planning"===e.status).map(e=>({id:e.id,label:`📝 ${e.name}`}))],dropdownId:"sprint",placeholder:"Search sprints...",customColor:x.sprint,emptyMessage:"No sprints available",noItemsMessage:"No sprints available",tooltip:l9.tooltipContent.sprints,renderCustomValue:e=>{let t=M.find(t=>t.id===e);if(!t)return null;let s=t.color||x.sprint,n="active"===t.status;return(0,l.jsxs)(oa,{customColor:s,onRemove:()=>{X({...J,sprint:void 0})},children:[n?"🏃":"📝"," ",t.name]})}}),(F=[],h.forEach(t=>{let s=RegExp(`${t.prefix}\\d{4,}`,"gi");for(let n of e.text.matchAll(s)){let e=n[0].slice(t.prefix.length),s=t.urlTemplate.replace("{id}",e);F.push({prefix:t.prefix,id:n[0],url:s,description:t.description,color:t.color})}}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"🌐 Links"}),F.length>0?(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:F.map((e,t)=>(0,l.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs px-2 py-1 rounded border hover:shadow-md transition-all inline-flex items-center gap-1",style:{backgroundColor:e.color||"#e0e0e0",borderColor:e.color||"#d0d0d0",color:"#333"},title:`${e.description}: ${e.url}`,children:[(0,l.jsx)("span",{className:"font-bold",children:e.id}),(0,l.jsx)(oe.ExternalLinkIcon,{className:"w-3 h-3"})]},`${e.id}-${t}`))}):(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 italic",children:"No links found"})]})),P&&(0,l.jsxs)("button",{onClick:()=>P(e.id),className:"flex items-center gap-2 px-3 py-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-lg transition-colors",title:"Save as template",children:[(0,l.jsx)(oe.SaveTemplateIcon,{className:"w-4 h-4"}),"Save as Template"]}),(0,l.jsx)(od,{isArchived:"archived"===e.state,onDuplicate:i?()=>{i(e.id),n()}:void 0,onArchive:"active"===e.state||"completed"===e.state?()=>{c&&(c(e.id),n())}:void 0,onUnarchive:m?()=>{m(e.id),n()}:void 0,onDelete:()=>{a(e.id),n()},duplicateLabel:"Duplicate todo",archiveLabel:"Archive todo",unarchiveLabel:"Unarchive todo",deleteLabel:"Delete todo"})]}),(0,l.jsxs)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-4 mt-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 flex items-center gap-1.5",children:[(0,l.jsx)("span",{children:"✅ Subtasks"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.subtasks}),e.hasSubtasks&&(0,l.jsxs)("span",{className:"text-xs font-normal text-zinc-500 dark:text-zinc-500",children:["(",e.completedSubtaskCount,"/",e.subtaskCount," completed)"]})]})}),(0,l.jsx)(ot,{subtasks:e.subtasks,onAdd:t=>v?.(e.id,t),onToggle:t=>z?.(e.id,t),onEdit:(t,s)=>w?.(e.id,t,s),onDelete:t=>N?.(e.id,t),readOnly:!v})]}),C&&(0,l.jsxs)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-4 mt-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 flex items-center gap-1.5",children:[(0,l.jsx)("span",{children:"⏱️ Time Tracking"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.timeTracking}),e.hasTimeTracking&&(0,l.jsxs)("span",{className:"text-xs font-normal text-zinc-500 dark:text-zinc-500",children:["(",e.totalTrackedTimeDisplay,")"]})]})}),(0,l.jsx)(os,{entries:e.timeTracking?.entries||[],totalMinutes:e.totalTrackedMinutes,isTracking:e.isTrackingTime,activeEntry:e.activeTimeEntry??void 0,onStart:t=>C(e.id,t),onStop:()=>D?.(e.id),onAddManual:(t,s)=>S?.(e.id,t,s),onDelete:t=>T?.(e.id,t)})]}),(0,l.jsxs)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-4 mt-4",children:[(0,l.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,l.jsxs)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 flex items-center gap-1.5",children:[(0,l.jsx)("span",{children:"📋 Activity"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.activity}),e.hasActivity&&(0,l.jsxs)("span",{className:"text-xs font-normal text-zinc-500 dark:text-zinc-500",children:["(",e.activityCount," ",1===e.activityCount?"entry":"entries",e.hasComments&&`, ${e.commentCount} ${1===e.commentCount?"comment":"comments"}`,")"]})]})}),y&&(0,l.jsxs)("div",{className:"mb-4 flex gap-2 items-start","data-testid":"comment-add-section",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(on,{value:K,onChange:G,placeholder:"Add a comment...",minHeight:"60px",maxHeight:"200px",alwaysEditable:!0})}),(0,l.jsx)("button",{onClick:()=>{K.trim()&&(y(e.id,K),G(""))},disabled:!K.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-300 disabled:cursor-not-allowed text-white rounded-md font-medium transition-colors","data-testid":"add-comment-button",children:"Add"})]}),(0,l.jsx)(l8,{activities:e.activity,comments:e.comments})]})]})})}var oj=e.i(91960);let oy=[{id:"gantt-intro",title:"Gantt Chart 📊",description:"The Gantt View shows your tasks on a timeline. Perfect for planning your day and seeing how tasks fit together.",position:"center"},{id:"gantt-timeline",title:"Timeline View ⏰",description:"Tasks are scheduled automatically based on duration and due dates. The timeline shows work hours (configurable in Settings).\n\nGray bars = breaks and blocked time\nColored bars = your tasks",targetSelector:'[data-tutorial="gantt-timeline"]',position:"top",spotlightPadding:12,fallbackHint:"The timeline grid shows hours of the day with scheduled tasks as colored bars"},{id:"gantt-scheduling",title:"Scheduling Modes 🗓️",description:"Choose how tasks are scheduled:\n\n• Sequential - Simple back-to-back\n• Pomodoro - Work sessions with breaks\n• Flow - Extended focus periods\n\nSelect presets or customize timing.",targetSelector:'[data-tutorial="gantt-scheduling-mode"]',position:"bottom",spotlightPadding:8,fallbackHint:"Scheduling mode buttons (Sequential/Pomodoro/Flow) are in the toolbar above the timeline"},{id:"gantt-focus",title:"Focus Mode 🎯",description:'Click "Focus" on any task to start a focused work session with timer and break reminders.\n\nGreat for staying on track with Pomodoro technique!',position:"center",action:"Try clicking Focus on a task!"},{id:"gantt-zoom",title:"Zoom Levels 🔍",description:"Use zoom controls to see:\n• Day view - detailed hourly planning\n• Week view - see the week ahead\n\nDrag tasks to reschedule them.",targetSelector:'[data-tutorial="gantt-zoom"]',position:"bottom",spotlightPadding:8,fallbackHint:"Zoom controls (Day/Week) are in the toolbar area above the timeline"},{id:"gantt-complete",title:"Plan Your Day! 🎉",description:"You're ready to use the Gantt View! Add durations to your tasks for better scheduling, and configure work hours in Settings.",position:"center"}];function ov({todos:e,markerColors:t,workHours:s,onToggle:n,onDelete:r,onEditTodo:a,onArchive:i,onUnarchive:d,settings:c,linkPatterns:m,availablePeople:x,availableProjects:u,availablePriorities:h,onAddPerson:g,onAddProject:b,onAddPriority:f,onAddComment:k,onUpdateGanttSettings:j,onAddSubtask:y,onToggleSubtask:v,onEditSubtask:z,onDeleteSubtask:w,onStartTimeTracking:N,onStopTimeTracking:C,onAddManualTimeEntry:D,onDeleteTimeEntry:S,onCreateTemplate:T,onDuplicate:P,onStartFocusMode:A,onStartOpenFocusMode:E}){let M,$,R,[I,F]=(0,o.useState)(()=>{let e=new Date;return e.setHours(0,0,0,0),e}),[L,W]=(0,o.useState)(0),[O,B]=(0,o.useState)("asap"),[Y,_]=(0,o.useState)(null),[H,U]=(0,o.useState)(null),[V,q]=(0,o.useState)(null),[K,G]=(0,o.useState)(c.gantt.collapseCompleted??!1),[J,Z]=(0,o.useState)(!1),[Q,X]=(0,o.useState)(new Date),[ee,et]=(0,o.useState)(-1),[es,en]=(0,o.useState)(!0),er=(0,o.useRef)(null),ea=(0,o.useRef)(null),ei=(0,o.useCallback)((e,t)=>{let s=e.currentTarget.getBoundingClientRect();U({x:s.left+16,y:s.bottom+8}),_(t)},[]),el=(0,o.useCallback)(()=>{_(null),U(null)},[]);(0,o.useEffect)(()=>{let e=setInterval(()=>{X(new Date)},6e4);return()=>clearInterval(e)},[]),(0,o.useEffect)(()=>{(0,p.waitForStorageInit)().then(()=>(0,p.loadFromStorage)(p.STORAGE_KEYS.GANTT_VIEW_OPTIONS,{})).then(e=>{void 0!==e.schedulingMode&&B(e.schedulingMode),void 0!==e.completedCollapsed&&G(e.completedCollapsed),Z(!0)})},[]),(0,o.useEffect)(()=>{J&&(0,p.saveToStorage)(p.STORAGE_KEYS.GANTT_VIEW_OPTIONS,{schedulingMode:O,completedCollapsed:K})},[J,O,K]);let eo=(0,o.useCallback)(e=>{j&&j({...c.gantt,zoomLevel:e})},[j,c.gantt]),ed=(0,o.useMemo)(()=>(0,oj.sortTodosForScheduling)(e,h,O),[e,h,O]),ec=(0,o.useMemo)(()=>(0,oj.createTaskSchedulingMap)(ed,{ganttSettings:c.gantt,workHours:s,availablePriorities:h,schedulingMode:O}),[ed,s,c.gantt,h,O]),{todosForDate:em,scheduledTodoIds:ex}=(0,o.useMemo)(()=>{let e=I.toISOString().split("T")[0],t=new Date(I);t.setHours(0,0,0,0);let s=new Date(I);s.setHours(23,59,59,999);let n=new Set;return{todosForDate:ed.filter(r=>ec.get(r.id)===e?(n.add(r.id),!0):!!(r.hasTimeTracking&&r.timeTracking&&r.timeTracking.entries.some(e=>{let n=new Date(e.startTime),r=e.endTime?new Date(e.endTime):new Date;return n<=s&&r>=t}))||!1),scheduledTodoIds:n}},[ed,ec,I]),eu=(0,oj.getScheduleForDate)(I,s),{expandedStartTime:eh,expandedEndTime:ep}=(0,o.useMemo)(()=>{let e=(0,oj.parseTime)(eu.startTime,I),t=(0,oj.parseTime)(eu.endTime,I),s=new Date(I);s.setHours(0,0,0,0);let n=new Date(I);return n.setHours(23,59,59,999),em.forEach(r=>{if((r.isCompleted||r.isArchived)&&r.completedAt){let s=new Date(r.completedAt),n=r.durationMinutes??0,a=new Date(s.getTime()-60*n*1e3);if(a<e){let t=new Date(a);t.setMinutes(0,0,0),e=t}if(s>t){let e=new Date(s);e.setMinutes(0,0,0),e.setHours(e.getHours()+1),t=e}}r.hasTimeTracking&&r.timeTracking&&r.timeTracking.entries.forEach(r=>{let a=new Date(r.startTime),i=r.endTime?new Date(r.endTime):new Date;if(a<=n&&i>=s){if(a<e){let t=new Date(a);t.setMinutes(0,0,0),e=t}if(i>t){let e=new Date(i);e.setMinutes(0,0,0),e.setHours(e.getHours()+1),t=e}}})}),{expandedStartTime:e,expandedEndTime:t}},[eu,I,em]),eg=(ep.getTime()-eh.getTime())/6e4,eb=(0,o.useMemo)(()=>eu.breaks.map(e=>{var t;let s;return{name:e.name,startTime:(0,oj.parseTime)(e.startTime,I),endTime:(0,oj.parseTime)(e.endTime,I),color:function(e){if(e.color)return e.color;let t=l5.DEFAULT_BLOCK_TYPES.find(t=>t.id===e.blockType);return t?.color||l5.DEFAULT_BLOCK_TYPES[0].color}(e),blockType:e.blockType,icon:(t=e.blockType,s=l5.DEFAULT_BLOCK_TYPES.find(e=>e.id===t),s?.icon||"📅")}}),[eu,I]),{tasks:ef}=(0,o.useMemo)(()=>(0,oj.scheduleDayTasks)(em,eh,ep,eb,I,c.gantt,ex),[em,eh,ep,eb,I,c.gantt,ex]),{activeTasks:ek,completedTasks:ej}=(0,o.useMemo)(()=>({activeTasks:ef.filter(e=>!e.todo.isCompleted&&!e.todo.isArchived),completedTasks:ef.filter(e=>e.todo.isCompleted||e.todo.isArchived)}),[ef]),ey=(0,o.useMemo)(()=>{let e=new Set;for(let t=0;t<ek.length;t++)for(let s=t+1;s<ek.length;s++){let n=ek[t],r=ek[s];n.startTime<r.endTime&&r.startTime<n.endTime&&(e.add(n.todo.id),e.add(r.todo.id))}return e},[ek]),ev=(0,o.useMemo)(()=>{let e=ek.reduce((e,t)=>e+t.durationMinutes,0),t=ej.reduce((e,t)=>e+t.durationMinutes,0),s=(ep.getTime()-eh.getTime())/6e4,n=eb.reduce((e,t)=>e+(t.endTime.getTime()-t.startTime.getTime())/6e4,0),r=[...ek,...ej].reduce((e,t)=>{let s=t.nextBreak?.durationMinutes??0;return t.segments.forEach(e=>{s+=e.nextBreak?.durationMinutes??0}),e+s},0),a=s-n,i=a>0?Math.round((e+t+r)/a*100):0;return{totalPlannedMinutes:e,completedMinutes:t,availableMinutes:a,utilizationPercent:i,conflictCount:ey.size,techniqueBreakMinutes:r}},[ek,ej,eh,ep,eb,ey]);(0,o.useEffect)(()=>{let e=e=>{if(V||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)return;let t=K?ek:ef;switch(e.key){case"ArrowDown":case"j":e.preventDefault(),et(e=>Math.min(e+1,t.length-1));break;case"ArrowUp":case"k":e.preventDefault(),et(e=>Math.max(e-1,0));break;case"Enter":e.preventDefault(),ee>=0&&ee<t.length&&q(t[ee].todo);break;case"Escape":e.preventDefault(),et(-1);break;case"ArrowLeft":e.metaKey||e.ctrlKey||(e.preventDefault(),ez(-1));break;case"ArrowRight":e.metaKey||e.ctrlKey||(e.preventDefault(),ez(1));break;case"t":case"T":e.preventDefault();let s=new Date;s.setHours(0,0,0,0),F(s);break;case"c":case"C":e.preventDefault(),G(e=>!e);break;case" ":e.preventDefault(),ee>=0&&ee<t.length&&n(t[ee].todo.id)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[V,ee,ef,ek,K,n]),(0,o.useEffect)(()=>{et(-1)},[I]);let ez=e=>{F(t=>{let s=new Date(t);return s.setDate(s.getDate()+e),s})},ew=e=>{let t=Math.round(e),s=Math.floor(t/60),n=t%60;return s>0&&n>0?`${s}h ${n}m`:s>0?`${s}h`:`${n}m`},eN=e=>(e.getTime()-eh.getTime())/6e4/eg*100;(0,o.useCallback)(e=>{if(!e)return"bg-zinc-400";let t=e.toLowerCase();return["0","urgent","asap","critical"].includes(t)?"bg-red-500":["1","high"].includes(t)?"bg-orange-500":["2","medium","med","normal"].includes(t)?"bg-yellow-500":["3","low"].includes(t)?"bg-green-500":"bg-blue-500"},[]);let eC=(0,o.useMemo)(()=>{let e=new Map;return u.forEach(t=>{t.color&&(e.set(t.name,t.color),t.alternatives.forEach(s=>e.set(s,t.color)))}),e},[u]),eD=(0,o.useCallback)(e=>{if(e.isCompleted)return"#9ca3af";if(e.isArchived)return"#fef08a";if(e.projects.length>0){let t=e.projects[0],s=eC.get(t);if(s)return s}return t.project},[eC,t.project]),eS=(0,o.useCallback)(e=>e.isActualTime?"#6b7280":eD(e.todo),[eD]),eT=(0,o.useMemo)(()=>{switch(c.gantt.zoomLevel||"1hour"){case"15min":return 4;case"30min":return 2;case"2hour":return .5;default:return 1}},[c.gantt.zoomLevel]),eP=(0,o.useMemo)(()=>{let e,t=[];switch(c.gantt.zoomLevel||"1hour"){case"15min":e=15;break;case"30min":e=30;break;case"2hour":e=120;break;default:e=60}let s=new Date(eh),n=Math.ceil(s.getMinutes()/e)*e;s.setMinutes(n,0,0);let r=new Date(s);for(;r<=ep;)r>=eh&&t.push({time:new Date(r),position:eN(r),isHour:0===r.getMinutes()}),r.setMinutes(r.getMinutes()+e);return t},[eh,ep,c.gantt.zoomLevel]),eA=(0,o.useMemo)(()=>{let e=new Date(I);e.setHours(0,0,0,0);let t=e.getDay(),s=new Date(e);s.setDate(e.getDate()-(0===t?6:t-1));let n=[];for(let e=0;e<7;e++){let t=new Date(s);t.setDate(s.getDate()+e),n.push(t)}return n},[I]),eE=(0,o.useMemo)(()=>eA.map(e=>{let t=e.toISOString().split("T")[0];return{date:e,tasks:ed.filter(e=>ec.get(e.id)===t)}}),[eA,ed,ec]),eM=(0,o.useMemo)(()=>(0,oj.scheduleWeekTasks)(eA,ed,ec,s,c.gantt,eD),[eA,ed,ec,s,c.gantt]),e$=e=>{let t=new Date(I);t.setDate(I.getDate()+7*e),F(t)};return(0,l.jsxs)("div",{className:"space-y-4",role:"region","aria-label":"Gantt Chart Schedule","data-testid":"gantt-view",children:[(0,l.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 p-2 sm:p-3 print:hidden",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-3",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,l.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-zinc-700 dark:text-zinc-300 flex items-center gap-1",children:["Prioritization:",(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.prioritization})]}),(0,l.jsxs)("div",{className:"flex gap-1 sm:gap-2",role:"group","aria-label":"Prioritization mode",children:[(0,l.jsx)("button",{onClick:()=>B("asap"),"aria-pressed":"asap"===O,className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm rounded-md font-medium transition-colors ${"asap"===O?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Priority"}),(0,l.jsx)("button",{onClick:()=>B("dueDate"),"aria-pressed":"dueDate"===O,className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm rounded-md font-medium transition-colors ${"dueDate"===O?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Due Date"}),(0,l.jsx)("button",{onClick:()=>B("duration"),"aria-pressed":"duration"===O,className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm rounded-md font-medium transition-colors ${"duration"===O?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Duration"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 sm:ml-2 sm:pl-2 sm:border-l border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("span",{className:"hidden lg:inline text-xs sm:text-sm font-medium text-zinc-700 dark:text-zinc-300 mr-1",children:"Technique:"}),(0,l.jsx)("span",{className:"hidden lg:inline",children:(0,l.jsx)(l9.InfoTooltip,{content:"sequential"===c.gantt.schedulingTechnique?l9.tooltipContent.sequential:"pomodoro"===c.gantt.schedulingTechnique?l9.tooltipContent.pomodoro:l9.tooltipContent.flow})}),(0,l.jsxs)("div",{className:"flex",role:"group","aria-label":"Scheduling technique","data-tutorial":"gantt-scheduling",children:[(0,l.jsxs)("button",{onClick:()=>{j&&j({...c.gantt,schedulingTechnique:"sequential"})},"aria-pressed":"sequential"===c.gantt.schedulingTechnique,className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium transition-colors flex items-center gap-1 rounded-l-md border-y border-l ${"sequential"===c.gantt.schedulingTechnique?"bg-blue-600 text-white border-blue-600":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 border-zinc-300 dark:border-zinc-600"}`,title:"Sequential: Simple context switching between tasks",children:[(0,l.jsx)("span",{children:"📋"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Sequential"})]}),(0,l.jsxs)("button",{onClick:()=>{j&&j({...c.gantt,schedulingTechnique:"pomodoro"})},"aria-pressed":"pomodoro"===c.gantt.schedulingTechnique,className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium transition-colors flex items-center gap-1 border ${"pomodoro"===c.gantt.schedulingTechnique?"bg-red-500 text-white border-red-500":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 border-zinc-300 dark:border-zinc-600"}`,title:"Pomodoro: Work sessions with short/long breaks",children:[(0,l.jsx)("span",{children:"🍅"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Pomodoro"})]}),(0,l.jsxs)("button",{onClick:()=>{j&&j({...c.gantt,schedulingTechnique:"flow"})},"aria-pressed":"flow"===c.gantt.schedulingTechnique,className:`px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium transition-colors flex items-center gap-1 rounded-r-md border-y border-r ${"flow"===c.gantt.schedulingTechnique?"bg-cyan-500 text-white border-cyan-500":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 border-zinc-300 dark:border-zinc-600"}`,title:"Flow: Work/break/context cycles (52/17, Ultradian)",children:[(0,l.jsx)("span",{children:"🌊"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Flow"})]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[ev.conflictCount>0&&(0,l.jsxs)("span",{className:"text-red-600 dark:text-red-400 flex items-center gap-1 text-xs",title:`${ev.conflictCount} overlapping tasks`,children:[(0,l.jsx)(oe.WarningSolidIcon,{className:"w-3.5 h-3.5"}),ev.conflictCount]}),A&&ek.length>0&&(0,l.jsxs)("button",{onClick:()=>A(ek),className:"px-2 sm:px-3 py-1.5 sm:py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors text-xs sm:text-sm flex items-center gap-1.5",title:"Start focus mode with scheduled tasks for this date","data-tutorial":"gantt-focus",children:[(0,l.jsx)(oe.EyeIcon,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Focus"})]}),E&&(0,l.jsxs)("button",{onClick:E,className:"px-2 sm:px-3 py-1.5 sm:py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors text-xs sm:text-sm flex items-center gap-1.5",title:"Start open focus mode (task-free timer using selected technique)",children:[(0,l.jsx)(oe.ClockIcon,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Timer"})]}),(0,l.jsx)("button",{onClick:()=>window.print(),className:"p-2 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-600 dark:text-zinc-400 transition-colors",title:"Print schedule (Ctrl+P)","aria-label":"Print schedule",children:(0,l.jsx)(oe.PrintIcon,{className:"w-5 h-5"})})]})]})}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 p-2 sm:p-4 print:hidden",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[(0,l.jsxs)("h3",{className:"text-xs sm:text-sm font-semibold text-zinc-700 dark:text-zinc-300",children:[(0,l.jsx)("span",{className:"hidden sm:inline",children:"Week of "}),eA[0].toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("button",{onClick:()=>e$(-1),className:"p-1 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",title:"Previous week",children:(0,l.jsx)("svg",{className:"w-4 h-4 text-zinc-600 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,l.jsx)("button",{onClick:()=>{let e=new Date;e.setHours(0,0,0,0),F(e)},className:"px-2 py-1 text-xs font-medium rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-600 dark:text-zinc-400 transition-colors",title:"Go to today",children:"Today"}),(0,l.jsx)("button",{onClick:()=>e$(1),className:"p-1 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",title:"Next week",children:(0,l.jsx)("svg",{className:"w-4 h-4 text-zinc-600 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:eE.map(({date:e,tasks:t},s)=>{let n=e.toDateString()===new Date().toDateString(),r=e.toDateString()===I.toDateString(),a=e.toLocaleDateString("en-US",{weekday:"narrow"}),i=e.toLocaleDateString("en-US",{weekday:"short"}),o=e.getDate();return(0,l.jsxs)("button",{onClick:()=>F(e),className:`p-1 sm:p-2 rounded-lg border transition-all ${r?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":n?"border-blue-300 dark:border-blue-700 bg-blue-50/50 dark:bg-blue-900/10":"border-zinc-200 dark:border-zinc-700 hover:bg-zinc-50 dark:hover:bg-zinc-800"}`,children:[(0,l.jsxs)("div",{className:"text-[10px] sm:text-xs font-medium text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("span",{className:"sm:hidden",children:a}),(0,l.jsx)("span",{className:"hidden sm:inline",children:i})]}),(0,l.jsx)("div",{className:`text-sm sm:text-lg font-semibold ${r?"text-blue-600 dark:text-blue-400":"text-zinc-900 dark:text-zinc-100"}`,children:o})]},s)})}),(0,l.jsx)("div",{className:"mt-3 grid grid-cols-7 gap-2",role:"img","aria-label":"Weekly task distribution overview",children:eM.map(({date:e,scheduled:t,segments:s,techniqueBreaks:n,breakBlocks:r,dayStart:a,dayEnd:i,totalMinutes:o,techniqueBreakMinutes:d},c)=>{let m=e.toDateString()===new Date().toDateString(),x=e.toDateString()===I.toDateString(),u=r.reduce((e,t)=>e+t.widthPercent*o/100,0),h=t.reduce((e,t)=>e+t.widthPercent*o/100,0),p=o-u,g=h+d,b=p>0?Math.round(g/p*100):0;return(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:`relative h-3 bg-zinc-100 dark:bg-zinc-800 rounded-sm overflow-hidden ${x?"ring-1 ring-blue-500":""}`,"aria-label":`${e.toLocaleDateString("en-US",{weekday:"short"})}: ${t.length} tasks, ${b}% utilized`,children:[n.map((e,t)=>(0,l.jsx)("div",{className:"absolute top-0 bottom-0 bg-blue-400 dark:bg-blue-600",style:{left:`${e.startPercent}%`,width:`${e.widthPercent}%`,opacity:.6}},`tech-break-${t}`)),r.map((e,t)=>(0,l.jsx)("div",{className:"absolute top-0 bottom-0 opacity-70",style:{left:`${e.startPercent}%`,width:`${e.widthPercent}%`,backgroundColor:e.color},title:`${e.icon} ${e.name}`},`break-${t}`)),s.map((e,t)=>{let s=e.startPercent,n=e.widthPercent;return(e.startPercent<0?(s=0,n=Math.min(e.widthPercent+e.startPercent,100)):e.startPercent>=100?(s=95,n=5):e.startPercent+e.widthPercent>100&&(s=e.startPercent,n=100-e.startPercent),n<=0)?null:(0,l.jsx)("div",{className:"absolute top-0 bottom-0",style:{left:`${s}%`,width:`${n}%`,backgroundColor:e.color}},`seg-${t}`)}),m&&(0,l.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10",style:{left:`${(new Date().getTime()-a.getTime())/(i.getTime()-a.getTime())*100}%`},title:"Current time"})]}),(0,l.jsx)("div",{className:`h-1 rounded-full ${b>100?"bg-red-400 dark:bg-red-500":b>80?"bg-amber-400 dark:bg-amber-500":"bg-green-400 dark:bg-green-500"}`,style:{width:`${Math.min(b,100)}%`},title:`${Math.round(h/60*10)/10}h tasks + ${Math.round(d/60*10)/10}h breaks = ${Math.round(g/60*10)/10}h planned / ${Math.round(p/60*10)/10}h available = ${b}%`})]},c)})})]}),(0,l.jsxs)("div",{ref:ea,className:"bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 p-3 sm:p-6 print:border-0 print:shadow-none",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-4 sm:mb-6",children:[(0,l.jsx)("button",{onClick:()=>ez(-1),className:"p-1.5 sm:p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors print:hidden flex-shrink-0",title:"Previous day (←)",children:(0,l.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-zinc-600 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,l.jsxs)("div",{className:"text-center min-w-0 flex-1",children:[(0,l.jsx)("h3",{className:"text-base sm:text-xl font-semibold text-zinc-900 dark:text-zinc-100 truncate",children:I.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),(0,l.jsxs)("p",{className:"text-xs sm:text-sm text-zinc-600 dark:text-zinc-400 mt-0.5 sm:mt-1",children:[(0,l.jsxs)("span",{className:"hidden sm:inline",children:[eu.startTime," - ",eu.endTime," •"," "]}),ek.length," ",(0,l.jsx)("span",{className:"hidden sm:inline",children:"active"}),(0,l.jsx)("span",{className:"sm:hidden",children:"a"})," • ",ej.length," ",(0,l.jsx)("span",{className:"hidden sm:inline",children:"completed"}),(0,l.jsx)("span",{className:"sm:hidden",children:"c"})]}),(0,l.jsx)("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1 print:hidden hidden sm:block",children:(0,l.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 text-[10px] bg-zinc-100 dark:bg-zinc-800 rounded",children:"↑↓"})," navigate",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 text-[10px] bg-zinc-100 dark:bg-zinc-800 rounded ml-2",children:"Enter"})," open",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 text-[10px] bg-zinc-100 dark:bg-zinc-800 rounded ml-2",children:"Space"})," toggle",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 text-[10px] bg-zinc-100 dark:bg-zinc-800 rounded ml-2",children:"T"})," today"]})})]}),(0,l.jsx)("button",{onClick:()=>ez(1),className:"p-1.5 sm:p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors print:hidden flex-shrink-0",title:"Next day (→)",children:(0,l.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-zinc-600 dark:text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),0===em.length?(0,l.jsxs)("div",{className:"text-center py-16",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"📅"}),(0,l.jsx)("p",{className:"text-xl text-zinc-600 dark:text-zinc-400",children:"No tasks scheduled for this day"})]}):(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("h4",{className:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wide",children:"Timeline"}),es&&ek.length>0&&(0,l.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 rounded-full",children:[(0,l.jsx)(oe.CursorClickIcon,{className:"w-3 h-3"}),"Click tasks to edit"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 mr-2",children:"Zoom:"}),["15min","30min","1hour","2hour"].map(e=>(0,l.jsx)("button",{onClick:()=>eo(e),className:`px-2 py-1 text-xs rounded transition-colors ${(c.gantt.zoomLevel||"1hour")===e?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,title:"15min"===e?"15 minutes":"30min"===e?"30 minutes":"1hour"===e?"1 hour":"2 hours",children:"15min"===e?"15m":"30min"===e?"30m":"1hour"===e?"1h":"2h"},e))]})]}),(0,l.jsx)("div",{className:"overflow-x-auto",style:{maxWidth:"100%"},children:(0,l.jsxs)("div",{style:{minWidth:`${100*eT}%`,width:`${100*eT}%`},children:[(0,l.jsxs)("div",{ref:er,className:"relative h-6 bg-zinc-50 dark:bg-zinc-800 rounded mx-4",style:{overflow:"visible"},children:[eP.map((e,t)=>(0,l.jsxs)("div",{className:"absolute top-0 bottom-0 flex flex-col items-center -translate-x-1/2",style:{left:`${e.position}%`},children:[(0,l.jsx)("div",{className:`w-px ${e.isHour?"h-3 bg-zinc-400 dark:bg-zinc-500":"h-2 bg-zinc-300 dark:bg-zinc-600"}`}),(0,l.jsx)("span",{className:`mt-1 whitespace-nowrap ${e.isHour?"text-xs text-zinc-600 dark:text-zinc-300 font-medium":"text-[10px] text-zinc-400 dark:text-zinc-500"}`,children:e.time.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})})]},t)),!1!==c.gantt.showNowLine&&I.toDateString()===new Date().toDateString()&&((M=eN(Q))>=0&&M<=100?(0,l.jsxs)("div",{className:"absolute top-0 bottom-0 z-20 pointer-events-none",style:{left:`${M}%`},children:[(0,l.jsx)("div",{className:"w-0.5 h-full bg-red-500"}),(0,l.jsx)("div",{className:"absolute -top-1 -translate-x-1/2 w-2 h-2 bg-red-500 rounded-full"})]}):null)]}),(0,l.jsxs)("div",{className:"relative space-y-0 mx-4 mt-4",style:{overflow:"visible"},"data-tutorial":"gantt-timeline",children:[!1!==c.gantt.showNowLine&&I.toDateString()===new Date().toDateString()&&(($=eN(Q))>=0&&$<=100?(0,l.jsx)("div",{className:"absolute top-0 bottom-0 z-30 pointer-events-none",style:{left:`${$}%`},children:(0,l.jsx)("div",{className:"w-0.5 h-full bg-red-500 opacity-50"})}):null),ek.map((e,t)=>{let s=e.todo.isCompleted||e.todo.isArchived,n=eN(e.startTime),r=eN(e.endTime),a=eN(e.targetDate),i=ee===t,d=ey.has(e.todo.id),m=e.nextBreak,x=null!==m&&!s,u=t<ek.length-1?ek[t+1]:null,h=(u?eN(u.startTime):0)-r,p=eS(e),g=(0,ob.getTextColor)(p),b="compact"===c.gantt.taskRowHeight?"h-8":"comfortable"===c.gantt.taskRowHeight?"h-12":"h-10",f=!1!==c.gantt.showBufferZones,k=e.isActualTime?`${e.todo.id}-time-${e.timeEntryId}`:e.todo.id;return(0,l.jsxs)(o.default.Fragment,{children:[(0,l.jsxs)("div",{role:"listitem","aria-label":`Task: ${e.todo.plainText}, ${Math.round(e.durationMinutes)} minutes${d?", has scheduling conflict":""}`,className:`relative ${i?"ring-2 ring-blue-500 ring-offset-1 rounded-lg":""} ${d?"animate-pulse":""}`,style:{marginBottom:"2px"},children:[d&&(0,l.jsx)("div",{className:"absolute -left-6 top-1/2 -translate-y-1/2 z-20",title:"Scheduling conflict - overlaps with another task",children:(0,l.jsx)(oe.WarningSolidIcon,{className:"w-4 h-4 text-red-500"})}),(0,l.jsxs)("div",{className:`relative ${b} bg-zinc-50 dark:bg-zinc-800 rounded-lg ${d?"ring-2 ring-red-400 ring-opacity-50":""}`,children:[eb.map((e,t)=>{let s=eN(e.startTime),n=eN(e.endTime);return(0,l.jsx)("div",{className:"absolute top-0 bottom-0 opacity-70",style:{left:`${s}%`,width:`${n-s}%`,backgroundColor:e.color},title:`${e.icon} ${e.name}`},t)}),e.segments.map((t,s)=>{let n=eN(t.startTime),r=eN(t.endTime),a=0===s,d=s===e.segments.length-1,c=e.segments.length>1,m=!0===t.isTrackedTime,x=m?"#ffffff":g,u=e.segments.filter(e=>!e.isTrackedTime),h=e.segments.filter(e=>e.isTrackedTime),b=!m&&u[0]===t,f=u.indexOf(t),k=s<e.segments.length-1?e.segments[s+1]:null,j=k?eb.find(e=>e.startTime.getTime()<=t.endTime.getTime()&&e.endTime.getTime()>t.endTime.getTime()&&e.endTime.getTime()<=k.startTime.getTime()):null,y=j?j.endTime:t.endTime,v=k?k.startTime:t.endTime,z=eN(y),w=(k?eN(v):0)-z,N=k?Math.round((v.getTime()-y.getTime())/6e4):0;return(0,l.jsxs)(o.default.Fragment,{children:[(0,l.jsx)("div",{className:`absolute top-0.5 bottom-0.5 shadow-md flex items-center ${b||m&&a?"justify-between px-2":"justify-center px-1"} overflow-hidden cursor-pointer hover:shadow-xl hover:scale-[1.02] hover:z-20 transition-all duration-150 z-10 ${i?"ring-2 ring-blue-500":""}`,style:{left:`${Math.max(0,n)}%`,width:`${Math.min(r-n,100-Math.max(0,n))}%`,backgroundColor:m?"#9ca3af":p,color:x,borderRadius:c?a?"0.375rem 0 0 0.375rem":d?"0 0.375rem 0.375rem 0":"0":"0.375rem",borderRight:d?void 0:`2px dashed ${x}40`},onMouseEnter:t=>ei(t,e.todo.id),onMouseLeave:el,onClick:()=>{en(!1),q(e.todo)},title:m?`⏱ Tracked: ${ew(t.durationMinutes)}${h.length>1?` (${h.indexOf(t)+1}/${h.length})`:""}`:e.isActualTime?`⏱ Actual time tracked: ${ew(e.durationMinutes)}`:u.length>1?`Remaining ${f+1}/${u.length}: ${ew(t.durationMinutes)} (Total remaining: ${ew(e.durationMinutes)})`:`Remaining: ${ew(e.durationMinutes)}${e.trackedMinutes?` (${ew(e.trackedMinutes)} tracked)`:""}`,children:m?(0,l.jsxs)("div",{className:"flex items-center gap-1 w-full",children:[(0,l.jsx)("span",{className:"mr-1",children:"⏱"}),(0,l.jsx)("span",{className:"text-xs font-medium truncate flex-1",children:ew(t.durationMinutes)})]}):b?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:"text-xs font-medium truncate",children:[e.isActualTime&&(0,l.jsx)("span",{className:"mr-1",children:"⏱"}),e.todo.plainText]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[e.trackedMinutes&&e.trackedMinutes>0&&(0,l.jsxs)("span",{className:"text-[10px] opacity-70",title:`${ew(e.trackedMinutes)} tracked`,children:["⏱",ew(e.trackedMinutes)]}),(e.todo.hasComments||e.todo.hasActivity)&&(0,l.jsxs)("div",{className:"flex items-center gap-0.5 opacity-70",children:[e.todo.hasComments&&(0,l.jsxs)("span",{className:"flex items-center text-[10px]",title:`${e.todo.commentCount} comment${1!==e.todo.commentCount?"s":""}`,children:[(0,l.jsx)(oe.CommentSolidIcon,{className:"w-3 h-3"}),e.todo.commentCount>1&&(0,l.jsx)("span",{children:e.todo.commentCount})]}),e.todo.hasActivity&&(0,l.jsx)("span",{className:"flex items-center text-[10px]",title:`${e.todo.activityCount} activity entries`,children:(0,l.jsx)(oe.ClockSolidIcon,{className:"w-3 h-3"})})]}),u.length>1&&(0,l.jsxs)("span",{className:"text-[10px] opacity-70",title:`Split across ${u.length} segments`,children:["📋",u.length]}),e.todo.isRecurring&&(0,l.jsx)("span",{className:"text-[10px] opacity-70",title:`Recurring: ${e.todo.recurring}`,children:(0,l.jsx)(oe.RecurringSolidIcon,{className:"w-3 h-3"})}),e.todo.dependencies.length>0&&(0,l.jsx)("span",{className:"text-[10px] opacity-70",title:`Has ${e.todo.dependencies.length} dependency(ies)`,children:(0,l.jsx)(oe.LinkSolidIcon,{className:"w-3 h-3"})}),(0,l.jsx)("span",{className:"text-xs opacity-80 whitespace-nowrap",children:ew(e.durationMinutes)})]})]}):(0,l.jsxs)("span",{className:"text-[10px] opacity-70",children:["+",ew(t.durationMinutes)]})}),k&&t.nextBreak&&w>0&&(0,l.jsx)("div",{className:"absolute top-0 bottom-0 flex items-center z-5",style:{left:`${z}%`,width:`${w}%`},title:`${t.nextBreak.icon} ${N}min ${t.nextBreak.label}`.trim(),children:(0,l.jsxs)("div",{className:"flex items-center w-full",children:[(0,l.jsx)("svg",{className:"w-2 h-2 flex-shrink-0 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 8 8",children:(0,l.jsx)("path",{d:"M4 0 L0 4 L4 8 Z"})}),(0,l.jsx)("div",{className:"flex-1 h-px bg-blue-500 dark:bg-blue-400"}),(0,l.jsx)("svg",{className:"w-2 h-2 flex-shrink-0 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 8 8",children:(0,l.jsx)("path",{d:"M4 0 L8 4 L4 8 Z"})})]})})]},s)}),f&&e.hasBuffer&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"absolute top-1/2 h-0.5 border-t-2 border-dotted border-green-500",style:{left:`${r}%`,width:`${Math.min(a-r,100-r)}%`}}),(0,l.jsxs)("div",{className:"absolute top-1/2 -translate-y-1/2 text-xs font-medium text-green-600 dark:text-green-400 bg-white/80 dark:bg-zinc-900/80 px-1 whitespace-nowrap",style:{left:100-r<15?`${n}%`:`${(r+Math.min(a,100))/2}%`,transform:100-r<15?"translate(-100%, -50%)":"translate(-50%, -50%)"},children:["+",ew(e.bufferMinutes)," buffer"]})]}),f&&e.isOverdue&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"absolute top-1/2 h-0.5 border-t-2 border-dotted border-red-500",style:{left:`${Math.max(a,0)}%`,width:`${Math.min(r-a,r)}%`}}),(0,l.jsxs)("div",{className:"absolute top-1/2 -translate-y-1/2 text-xs font-medium text-red-600 dark:text-red-400 bg-white/80 dark:bg-zinc-900/80 px-1 whitespace-nowrap",style:{left:n<15?`${r}%`:`${(Math.max(a,0)+n)/2}%`,transform:n<15?"translate(0%, -50%)":"translate(-50%, -50%)"},children:["-",ew(e.bufferMinutes)," overdue"]})]}),a>=0&&a<=100&&(0,l.jsx)("div",{className:`absolute top-0 bottom-0 w-0.5 ${e.isOverdue?"bg-red-500":"bg-green-500"} z-10`,style:{left:`${a}%`},title:e.isOverdue?"Overdue point":"Target time"})]})]}),x&&m&&h>0&&(0,l.jsx)("div",{className:"relative h-3",children:(0,l.jsx)("div",{className:"absolute top-0 bottom-0 flex items-center justify-center",style:{left:`${r}%`,width:`${h}%`},title:`${m.icon} ${m.durationMinutes}min ${m.label}`.trim(),children:(0,l.jsxs)("div",{className:"flex items-center w-full",children:[(0,l.jsx)("svg",{className:"w-2 h-2 flex-shrink-0 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 8 8",children:(0,l.jsx)("path",{d:"M4 0 L0 4 L4 8 Z"})}),(0,l.jsx)("div",{className:"flex-1 h-px bg-blue-500 dark:bg-blue-400"}),(0,l.jsx)("svg",{className:"w-2 h-2 flex-shrink-0 text-blue-500 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 8 8",children:(0,l.jsx)("path",{d:"M4 0 L8 4 L4 8 Z"})})]})})})]},k)}),ej.length>0&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("button",{onClick:()=>G(!K),className:"flex items-center gap-2 text-sm font-medium text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors mb-2",children:[(0,l.jsx)("svg",{className:`w-4 h-4 transition-transform ${K?"":"rotate-90"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsxs)("span",{children:["Completed (",ej.length,")"]}),(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"(Press C to toggle)"})]}),!K&&ej.map((e,t)=>{let s=ek.length+t,n=eN(e.startTime),r=eN(e.endTime),a=ee===s,i=eS(e),o=(0,ob.getTextColor)(i),d="compact"===c.gantt.taskRowHeight?"h-8":"comfortable"===c.gantt.taskRowHeight?"h-12":"h-10",m=e.isActualTime?`${e.todo.id}-time-${e.timeEntryId}`:e.todo.id;return(0,l.jsx)("div",{className:`relative opacity-60 ${a?"ring-2 ring-blue-500 ring-offset-1 rounded-lg":""}`,style:{marginBottom:"2px"},children:(0,l.jsxs)("div",{className:`relative ${d} bg-zinc-50 dark:bg-zinc-800 rounded-lg`,children:[eb.map((e,t)=>{let s=eN(e.startTime),n=eN(e.endTime);return(0,l.jsx)("div",{className:"absolute top-0 bottom-0 opacity-70",style:{left:`${s}%`,width:`${n-s}%`,backgroundColor:e.color},title:`${e.icon} ${e.name}`},t)}),(0,l.jsxs)("div",{className:`absolute top-0.5 bottom-0.5 shadow-md flex items-center justify-between px-2 overflow-hidden cursor-pointer hover:shadow-xl hover:scale-[1.02] hover:z-20 transition-all duration-150 z-10 ${a?"ring-2 ring-blue-500":""}`,style:{left:`${Math.max(0,n)}%`,width:`${Math.min(r-n,100-Math.max(0,n))}%`,backgroundColor:i,color:o,borderRadius:"0.375rem"},onMouseEnter:t=>ei(t,e.todo.id),onMouseLeave:el,onClick:()=>q(e.todo),title:e.isActualTime?`⏱ Actual time tracked: ${ew(e.durationMinutes)}`:"Click to view details",children:[(0,l.jsxs)("span",{className:"text-xs font-medium truncate line-through",children:[e.isActualTime&&(0,l.jsx)("span",{className:"mr-1",children:"⏱"}),e.todo.plainText]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[(e.todo.hasComments||e.todo.hasActivity)&&(0,l.jsx)("div",{className:"flex items-center gap-0.5 opacity-70",children:e.todo.hasComments&&(0,l.jsxs)("span",{className:"flex items-center text-[10px]",title:`${e.todo.commentCount} comment${1!==e.todo.commentCount?"s":""}`,children:[(0,l.jsx)(oe.CommentSolidIcon,{className:"w-3 h-3"}),e.todo.commentCount>1&&(0,l.jsx)("span",{children:e.todo.commentCount})]})}),(0,l.jsxs)("span",{className:"text-xs opacity-80 whitespace-nowrap",children:["✓ ",ew(e.durationMinutes)]}),Y===e.todo.id&&(0,l.jsx)("svg",{className:"w-3 h-3 opacity-70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]})]})]})},m)})]})]}),!1!==c.gantt.showDependencies&&(0,l.jsxs)("svg",{className:"absolute inset-0 pointer-events-none z-20 mx-4",style:{overflow:"visible"},children:[(0,l.jsx)("defs",{children:(0,l.jsx)("marker",{id:"arrowhead",markerWidth:"8",markerHeight:"6",refX:"8",refY:"3",orient:"auto",children:(0,l.jsx)("polygon",{points:"0 0, 8 3, 0 6",fill:"currentColor",className:"text-orange-500 dark:text-orange-400"})})}),ek.map((e,t)=>e.todo.dependencies.map(s=>{let n=ek.findIndex(e=>e.todo.id===s);if(-1===n)return null;let r=eN(ek[n].endTime),a=eN(e.startTime),i="compact"===c.gantt.taskRowHeight?32:"comfortable"===c.gantt.taskRowHeight?48:40,o=n*(i+2)+i/2,d=t*(i+2)+i/2;return r<a?(0,l.jsx)("path",{d:`M ${r}% ${o} C ${(r+a)/2}% ${o}, ${(r+a)/2}% ${d}, ${a}% ${d}`,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"4 2",markerEnd:"url(#arrowhead)",className:"text-orange-500 dark:text-orange-400 opacity-60"},`${s}-${e.todo.id}`):null}))]})]})})]})})]}),V&&((R=e.find(e=>e.id===V.id))?(0,l.jsx)(ok,{todo:R,todos:e,isOpen:!0,onClose:()=>q(null),onToggle:n,onDelete:r,onDuplicate:P,onEdit:a,onArchive:i,onUnarchive:d,markerColors:t,settings:c,linkPatterns:m,availablePeople:x,availableProjects:u,availablePriorities:h,onAddPerson:g,onAddProject:b,onAddPriority:f,onAddComment:k,onAddSubtask:y,onToggleSubtask:v,onEditSubtask:z,onDeleteSubtask:w,onStartTimeTracking:N,onStopTimeTracking:C,onAddManualTimeEntry:D,onDeleteTimeEntry:S,onCreateTemplate:T}):null),Y&&H&&"undefined"!=typeof document&&(()=>{let s=e.find(e=>e.id===Y);if(!s)return null;let n=e=>{let s=h.find(t=>t.name.toLowerCase()===e.toLowerCase()||t.alternatives.some(t=>t.toLowerCase()===e.toLowerCase()));return s?.color||t.priority};return(0,l6.createPortal)((0,l.jsxs)("div",{className:"fixed z-[9999] bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-xl p-3 min-w-[320px] max-w-[500px] pointer-events-none",style:{left:Math.min(H.x,window.innerWidth-520),top:Math.min(H.y,window.innerHeight-250)},children:[(0,l.jsx)(l3,{text:s.text,markerColors:t,availablePeople:x,availableProjects:u,availablePriorities:h}),(0,l.jsxs)("div",{className:"mt-2 pt-2 border-t border-zinc-200 dark:border-zinc-700 grid grid-cols-[70px_1fr] gap-x-3 gap-y-1.5 text-[10px]",children:[(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Status"}),(0,l.jsx)("span",{className:`px-1.5 py-0.5 rounded font-medium w-fit ${s.isArchived?"bg-zinc-200 dark:bg-zinc-700 text-zinc-600 dark:text-zinc-400":s.isCompleted?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"}`,children:s.isArchived?"Archived":s.isCompleted?"Completed":"Active"}),(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Assigned"}),s.assignedPeople.length>0?(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:s.assignedPeople.map((e,s)=>{let n,r=(n=x.find(t=>t.matchesAnyName([e])),n?.color||t.assigned);return(0,l.jsxs)("span",{className:"px-1.5 py-0.5 rounded",style:{backgroundColor:r,color:(0,ob.getTextColor)(r)},children:["@",e]},s)})}):(0,l.jsx)("span",{className:"text-zinc-300 dark:text-zinc-600",children:"—"}),(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Project"}),s.projects.length>0?(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:s.projects.map((e,s)=>{let n,r=(n=u.find(t=>t.matchesAnyName([e])),n?.color||t.project);return(0,l.jsxs)("span",{className:"px-1.5 py-0.5 rounded",style:{backgroundColor:r,color:(0,ob.getTextColor)(r)},children:["%",e]},s)})}):(0,l.jsx)("span",{className:"text-zinc-300 dark:text-zinc-600",children:"—"}),(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Due"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[s.hasDueDate?(0,l.jsx)("span",{className:`px-1.5 py-0.5 rounded ${s.isOverdue?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":s.isDueToday?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:s.dueDateDisplay}):(0,l.jsx)("span",{className:"text-zinc-300 dark:text-zinc-600",children:"—"}),s.hasDuration&&(0,l.jsxs)("span",{className:"px-1.5 py-0.5 rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400",children:["(",s.durationDisplay,")"]})]}),(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Priority"}),s.priority?(0,l.jsx)("span",{className:"px-1.5 py-0.5 rounded font-medium w-fit",style:{backgroundColor:s.priorityColor||n(s.priority),color:(0,ob.getTextColor)(s.priorityColor||n(s.priority))},children:s.priority}):(0,l.jsx)("span",{className:"text-zinc-300 dark:text-zinc-600",children:"—"})]})]}),document.body)})()]})}function oz({comments:e,onAddComment:t,onEditComment:s,onDeleteComment:n}){let[r,a]=(0,o.useState)(""),[i,d]=(0,o.useState)(null),[c,m]=(0,o.useState)(""),[x,u]=(0,o.useState)(null),h=e=>{if(!e)return!0;let t=document.createElement("div");return t.innerHTML=e,0===(t.textContent||"").trim().length},p=()=>{d(null),m("")},g=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),n=Math.floor(s/6e4),r=Math.floor(s/36e5),a=Math.floor(s/864e5);return n<1?"just now":n<60?`${n}m ago`:r<24?`${r}h ago`:a<7?`${a}d ago`:t.toLocaleDateString()},b=[...e].sort((e,t)=>{let s=e.history[e.history.length-1]?.timestamp||0;return(t.history[t.history.length-1]?.timestamp||0)-s});return(0,l.jsxs)("div",{className:"space-y-3","data-testid":"comments-container",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-start","data-testid":"comment-add-form",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(on,{value:r,onChange:a,placeholder:"Add a comment...",minHeight:"60px",maxHeight:"200px",alwaysEditable:!0})}),(0,l.jsx)("button",{onClick:()=>{h(r)||(t(r),a(""))},disabled:h(r),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-300 disabled:cursor-not-allowed text-white rounded-md font-medium transition-colors","data-testid":"comment-add-button",children:"Add"})]}),(0,l.jsx)("div",{className:"space-y-2","data-testid":"comments-list",children:0===b.length?(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 italic","data-testid":"comments-empty",children:"No comments yet"}):b.map(e=>{let t=e.history[e.history.length-1],r=i===e.commentId,a=x===e.commentId,o=e.history.length>1;return(0,l.jsx)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-3 rounded-lg border border-zinc-200 dark:border-zinc-700","data-testid":"comment-item",children:r?(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(on,{value:c,onChange:m,placeholder:"Edit comment...",minHeight:"80px",maxHeight:"200px",alwaysEditable:!0}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>{var t;return t=e.commentId,void(!h(c)&&(s(t,c),d(null),m("")))},disabled:h(c),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-300 disabled:cursor-not-allowed text-white text-sm rounded-md transition-colors",children:"Save"}),(0,l.jsx)("button",{onClick:p,className:"px-3 py-1 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 text-sm rounded-md transition-colors",children:"Cancel"})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex justify-between items-start gap-2 mb-2",children:[(0,l.jsx)("div",{className:"text-sm text-zinc-700 dark:text-zinc-300 flex-1 [&_a]:text-blue-600 dark:[&_a]:text-blue-400 [&_a]:underline [&_a]:cursor-pointer",dangerouslySetInnerHTML:{__html:t.content}}),(0,l.jsxs)("div",{className:"flex gap-1 flex-shrink-0",children:[(0,l.jsx)("button",{onClick:()=>{d(e.commentId),m(e.history[e.history.length-1].content)},className:"p-1 text-zinc-500 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:"Edit comment","data-testid":"comment-edit",children:(0,l.jsx)(oe.EditIcon,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>n(e.commentId),className:"p-1 text-zinc-500 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"Delete comment","data-testid":"comment-delete",children:(0,l.jsx)(oe.TrashIcon,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-500",children:[(0,l.jsx)("span",{children:g(t.timestamp)}),o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"•"}),(0,l.jsxs)("button",{onClick:()=>u(a?null:e.commentId),className:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[a?"Hide":"Show"," history (",e.history.length-1," edit",e.history.length-1!=1?"s":"",")"]})]})]}),a&&o&&(0,l.jsx)("div",{className:"mt-3 pt-3 border-t border-zinc-200 dark:border-zinc-700 space-y-2",children:e.history.slice(0,-1).reverse().map((e,t)=>(0,l.jsxs)("div",{className:"text-xs",children:[(0,l.jsx)("div",{className:"text-zinc-600 dark:text-zinc-400 [&_a]:text-blue-600 dark:[&_a]:text-blue-400 [&_a]:underline [&_a]:cursor-pointer",dangerouslySetInnerHTML:{__html:e.content}}),(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-500",children:g(e.timestamp)})]},t))})]})},e.commentId)})})]})}function ow({todo:e,onToggle:t,onDelete:s,onEdit:n,onArchive:r,onUnarchive:a,markerColors:i,settings:d,linkPatterns:c,availablePeople:m,availableProjects:x,availablePriorities:u,onAddPerson:h,onAddProject:p,onAddPriority:g,onMarkerClick:b,isExpanded:f,onToggleExpand:k,onAddComment:j,onEditComment:y,onDeleteComment:v,isSelectionMode:z=!1,isSelected:w=!1,onSelectionChange:N,isDraggable:C=!1,isDraggedOver:D=!1,onDragStart:S,onDragEnd:T,onDragOver:P,onDragLeave:A,onDrop:E,sprints:M=[],nextPlannedSprint:$}){let R,I,F,L,W,O,[B,Y]=(0,o.useState)(!1),[_,H]=(0,o.useState)([]),[U,V]=(0,o.useState)(""),[q,K]=(0,o.useState)(""),[G,J]=(0,o.useState)(!1),Z=(0,o.useRef)(null),[Q,X]=(0,o.useState)(null),[ee,et]=(0,o.useState)(0),[es,en]=(0,o.useState)(null),er=(0,o.useRef)(null),ea=e=>(0,ob.findPersonColor)(e,m,i.assigned),ei=e=>(0,ob.findProjectColor)(e,x,i.project),el=e=>(0,ob.findPriorityColor)(e,u,i.priority);(0,o.useEffect)(()=>{B&&Z.current&&Z.current.setValue(e.text)},[B,e.text]);let eo=t=>{if(t.preventDefault(),""===q.trim())return;let s={assignedPeople:[...e.metadata.assignedPeople??[]],sourcePeople:[...e.metadata.sourcePeople??[]],mentionedPeople:[...e.metadata.mentionedPeople??[]],projects:[...e.metadata.projects??[]],dependencies:[...e.metadata.dependencies??[]],tags:[...e.metadata.tags??[]],priority:e.metadata.priority,dueDate:e.metadata.dueDate,duration:e.metadata.duration,recurring:e.metadata.recurring};if(_.forEach(e=>{switch(e.type){case"assigned":s.assignedPeople.includes(e.value)||s.assignedPeople.push(e.value);break;case"source":s.sourcePeople.includes(e.value)||s.sourcePeople.push(e.value);break;case"mentioned":s.mentionedPeople.includes(e.value)||s.mentionedPeople.push(e.value);break;case"project":s.projects.includes(e.value)||s.projects.push(e.value);break;case"priority":e.value&&(s.priority=e.value);break;case"dueDate":e.value&&(s.dueDate=e.value);break;case"duration":e.value&&(s.duration=e.value);break;case"recurring":e.value&&(s.recurring=e.value);break;case"tag":s.tags?.includes(e.value)||s.tags?.push(e.value)}}),d.autoAssign.enabled){let e=d.autoAssign;0===s.assignedPeople.length&&e.assignedPerson&&s.assignedPeople.push(e.assignedPerson),0===s.sourcePeople.length&&e.sourcePerson&&s.sourcePeople.push(e.sourcePerson),0===s.projects.length&&e.project&&s.projects.push(e.project),!s.priority&&e.priority&&(s.priority=e.priority)}n(e.id,U,q,s),Y(!1)};return B?(0,l.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 p-4",children:(0,l.jsxs)("form",{onSubmit:eo,className:"flex flex-col gap-2",children:[(0,l.jsx)(l4,{ref:Z,markerColors:i,availablePeople:m,availableProjects:x,availablePriorities:u,dateTimeSettings:d.dateTime,workHoursSettings:d.workHours,onAddPerson:h,onAddProject:p,onAddPriority:g,onTokensChange:(e,t,s)=>{H(e),V(t),K(s)},placeholder:"Edit your task...",onEnterPress:()=>{eo(new Event("submit",{bubbles:!0,cancelable:!0}))}}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors",children:"Save"}),(0,l.jsx)("button",{type:"button",onClick:()=>{Y(!1),H([]),V(""),K("")},className:"flex-1 px-4 py-2 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-md font-medium transition-colors",children:"Cancel"})]})]})}):(0,l.jsxs)("div",{ref:er,className:"relative rounded-lg","data-testid":"todo-item",children:[0!==ee&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:`absolute inset-y-0 left-0 flex items-center justify-start pl-4 transition-colors ${"complete"===es?"bg-green-500":"bg-green-400/50"}`,style:{width:Math.max(0,ee)},children:ee>30&&(0,l.jsx)(oe.CheckIcon,{className:"w-6 h-6 text-white"})}),(0,l.jsx)("div",{className:`absolute inset-y-0 right-0 flex items-center justify-end pr-4 transition-colors ${"archive"===es?"bg-amber-500":"bg-amber-400/50"}`,style:{width:Math.max(0,-ee)},children:ee<-30&&(0,l.jsx)(oe.ArchiveIcon,{className:"w-6 h-6 text-white"})})]}),(0,l.jsx)("div",{className:`bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 p-4 group hover:shadow-md transition-shadow duration-200 ${w?"ring-2 ring-blue-500 ring-offset-1 dark:ring-offset-zinc-900":""} ${D?"border-blue-500 border-2 bg-blue-50 dark:bg-blue-900/20":""} ${C?"cursor-grab active:cursor-grabbing":""}`,style:{transform:`translateX(${ee}px)`,transition:Q?"none":"transform 0.2s ease-out"},draggable:C&&!B,onDragStart:t=>C&&S?.(t,e.id),onDragEnd:e=>C&&T?.(e),onDragOver:t=>{C&&(t.preventDefault(),P?.(t,e.id))},onDragLeave:e=>C&&A?.(e),onDrop:t=>{C&&(t.preventDefault(),E?.(t,e.id))},onTouchStart:e=>{B||z||(X({x:e.touches[0].clientX,y:e.touches[0].clientY}),en(null))},onTouchMove:t=>{if(!Q||B||z)return;let s=t.touches[0].clientX,n=t.touches[0].clientY,r=s-Q.x;if(Math.abs(n-Q.y)>Math.abs(r))return void et(0);Math.abs(r)>10&&t.preventDefault();let a=r;if(Math.abs(a)>120){let e=Math.abs(a)-120;a=(a>0?1:-1)*(120+.3*e)}et(a),a>80&&e.isActive?en("complete"):a<-80&&(e.isCompleted||e.isArchived)?en("archive"):(a<-80&&e.isActive,en(null))},onTouchEnd:()=>{Q&&("complete"===es&&e.isActive?t(e.id):"archive"===es&&e.isCompleted&&r&&r(e.id),et(0),X(null),en(null))},children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[C&&!z&&(0,l.jsx)("div",{className:"flex-shrink-0 text-zinc-400 dark:text-zinc-500 cursor-grab active:cursor-grabbing mt-0.5",children:(0,l.jsx)(oe.DragHandleIcon,{className:"w-5 h-5"})}),z&&(0,l.jsx)("div",{onClick:t=>{t.stopPropagation(),N?.(e.id,!w)},className:`w-5 h-5 mt-0.5 rounded-full border-2 border-black dark:border-white cursor-pointer flex-shrink-0 flex items-center justify-center transition-colors ${w?"bg-blue-600 border-blue-600 dark:border-blue-600":"bg-white dark:bg-zinc-800"}`,role:"checkbox","aria-checked":w,"aria-label":`Select task: ${e.plainText}`,children:w&&(0,l.jsx)(oe.CheckIcon,{className:"w-3 h-3 text-white",strokeWidth:3})}),!z&&(R=e.metadata.priority?(0,ob.findPriorityColor)(e.metadata.priority,u,i.priority):"#a1a1aa",I=e.isCompleted||e.isArchived,(0,l.jsx)("div",{"data-testid":"todo-checkbox",onClick:s=>{s.stopPropagation(),t(e.id)},className:"w-5 h-5 mt-0.5 rounded cursor-pointer flex-shrink-0 flex items-center justify-center transition-all",style:{borderWidth:"2px",borderStyle:"solid",borderColor:R,backgroundColor:I?R:void 0,boxShadow:I?void 0:`0 0 6px 1px ${R}40, 0 0 2px 0px ${R}`},role:"checkbox","aria-checked":I,children:I&&(0,l.jsx)(oe.CheckIcon,{className:"w-3 h-3 text-white",strokeWidth:3})})),(0,l.jsxs)("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:k,children:[(0,l.jsx)("div",{className:"text-base","data-testid":"todo-text",children:(0,l.jsx)(l3,{text:e.text,completed:e.isCompleted||e.isArchived,markerColors:i,linkPatterns:c,availablePeople:m,availableProjects:x,availablePriorities:u})}),!f&&(0,l.jsxs)("div",{className:"mt-1.5 grid grid-cols-[1fr_auto_auto] sm:grid-cols-[minmax(80px,1fr)_1fr_100px_80px] gap-x-2 gap-y-1 items-center text-[10px]",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden",children:[e.metadata.assignedPeople.length>0?(0,l.jsxs)("span",{className:"px-1.5 py-0.5 rounded truncate",style:{backgroundColor:ea(e.metadata.assignedPeople[0]),color:(0,ob.getTextColor)(ea(e.metadata.assignedPeople[0]))},title:e.metadata.assignedPeople.join(", "),children:["@",e.metadata.assignedPeople[0],e.metadata.assignedPeople.length>1&&` +${e.metadata.assignedPeople.length-1}`]}):(0,l.jsx)("span",{className:"hidden sm:inline text-zinc-300 dark:text-zinc-600",children:"—"}),(0,l.jsx)("span",{className:"sm:hidden",children:e.metadata.projects.length>0&&(0,l.jsxs)("span",{className:"px-1.5 py-0.5 rounded truncate",style:{backgroundColor:ei(e.metadata.projects[0]),color:(0,ob.getTextColor)(ei(e.metadata.projects[0]))},title:e.metadata.projects.join(", "),children:["%",e.metadata.projects[0]]})})]}),(0,l.jsxs)("div",{className:"hidden sm:flex items-center justify-center gap-1 overflow-hidden",children:[e.metadata.projects.length>0?(0,l.jsxs)("span",{className:"px-1.5 py-0.5 rounded truncate",style:{backgroundColor:ei(e.metadata.projects[0]),color:(0,ob.getTextColor)(ei(e.metadata.projects[0]))},title:e.metadata.projects.join(", "),children:["%",e.metadata.projects[0],e.metadata.projects.length>1&&` +${e.metadata.projects.length-1}`]}):(0,l.jsx)("span",{className:"text-zinc-300 dark:text-zinc-600",children:"—"}),e.metadata.sprint&&((F=M.find(t=>t.id===e.metadata.sprint))?(0,l.jsxs)("span",{className:"px-1.5 py-0.5 rounded truncate bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-400 whitespace-nowrap",title:F.name,children:["🏃 ",F.name]}):null)]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 justify-end sm:justify-center",children:[e.metadata.dueDate?(0,l.jsx)("span",{className:`px-1.5 py-0.5 rounded whitespace-nowrap ${e.isOverdue?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":e.isDueToday?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,title:e.metadata.dueDate,children:e.dueDateDisplay}):(0,l.jsx)("span",{className:"hidden sm:inline text-zinc-300 dark:text-zinc-600",children:"—"}),e.metadata.duration&&(0,l.jsx)("span",{className:"px-1.5 py-0.5 rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 whitespace-nowrap",children:e.durationDisplay})]}),(0,l.jsx)("div",{className:"flex items-center justify-end",children:e.metadata.priority?(0,l.jsx)("span",{className:"px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:el(e.metadata.priority),color:(0,ob.getTextColor)(el(e.metadata.priority))},children:e.metadata.priority}):(0,l.jsx)("span",{className:"hidden sm:inline text-zinc-300 dark:text-zinc-600",children:"—"})})]}),(e.hasSubtasks||e.hasTimeTracking)&&(0,l.jsxs)("div",{className:"mt-1 flex items-center gap-3 flex-wrap",children:[e.hasSubtasks&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-[80px] h-1.5 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:`h-full transition-all duration-300 ${e.allSubtasksCompleted?"bg-green-500 dark:bg-green-600":"bg-blue-500 dark:bg-blue-600"}`,style:{width:`${e.subtaskProgress}%`}})}),(0,l.jsxs)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[e.completedSubtaskCount,"/",e.subtaskCount]})]}),e.hasTimeTracking&&(0,l.jsx)("div",{className:"flex items-center gap-1",children:(0,l.jsxs)("span",{className:`text-xs flex items-center gap-1 px-1.5 py-0.5 rounded ${e.isTrackingTime?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:[e.isTrackingTime?(0,l.jsx)(oe.RecordingDotIcon,{className:"w-3 h-3 animate-pulse"}):(0,l.jsx)(oe.ClockIcon,{className:"w-3 h-3"}),e.totalTrackedTimeDisplay]})})]}),f&&(0,l.jsxs)("div",{className:"mt-2 space-y-2 border-t border-zinc-200 dark:border-zinc-800 pt-2",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("div",{className:"pb-2 border-b border-zinc-200 dark:border-zinc-800",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1 text-xs text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Created:"})," ",e.createdDateDisplay," (",e.ageDisplay,")"]}),e.updatedAt&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Updated:"})," ",e.updatedDateDisplay]}),e.completedAt&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Completed:"})," ",e.completedDateDisplay]}),e.archivedAt&&(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Archived:"})," ",new Date(e.archivedAt).toLocaleString()]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-1",children:"👤 Assigned"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.metadata.assignedPeople.length>0?e.metadata.assignedPeople.map((e,t)=>{let s=ea(e),n=(0,ob.getTextColor)(s);return(0,l.jsxs)("button",{onClick:t=>{t.stopPropagation(),b?.("assignedPeople",e)},style:{backgroundColor:s,color:n},className:"px-2 py-0.5 text-xs rounded hover:opacity-80 transition-opacity",children:["@",e]},t)}):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"None"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-1",children:"📁 Projects"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.metadata.projects.length>0?e.metadata.projects.map((e,t)=>{let s=ei(e),n=(0,ob.getTextColor)(s);return(0,l.jsxs)("button",{onClick:t=>{t.stopPropagation(),b?.("projects",e)},style:{backgroundColor:s,color:n},className:"px-2 py-0.5 text-xs rounded hover:opacity-80 transition-opacity",children:["%",e]},t)}):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"None"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-1",children:"📤 Source"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.metadata.sourcePeople.length>0?e.metadata.sourcePeople.map((e,t)=>{let s=ea(e),n=(0,ob.getTextColor)(s);return(0,l.jsxs)("button",{onClick:t=>{t.stopPropagation(),b?.("sourcePeople",e)},style:{backgroundColor:s,color:n},className:"px-2 py-0.5 text-xs rounded hover:opacity-80 transition-opacity",children:["$",e]},t)}):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"None"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-1",children:"💬 Mentioned"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:e.metadata.mentionedPeople.length>0?e.metadata.mentionedPeople.map((e,t)=>{let s=ea(e),n=(0,ob.getTextColor)(s);return(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),b?.("mentionedPeople",e)},style:{backgroundColor:s,color:n},className:"px-2 py-0.5 text-xs rounded hover:opacity-80 transition-opacity",children:e},t)}):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"None"})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-1",children:"🔥 Priority"}),e.metadata.priority?(L=el(e.metadata.priority),W=(0,ob.getTextColor)(L),(0,l.jsxs)("button",{onClick:t=>{t.stopPropagation(),b?.("priorities",e.metadata.priority)},style:{backgroundColor:L,color:W},className:"px-2 py-0.5 text-xs rounded hover:opacity-80 transition-opacity",children:["!!",e.metadata.priority]})):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"None"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-1",children:"📅 Due"}),e.metadata.dueDate?(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),b?.("dueDates",e.metadata.dueDate)},className:"px-2 py-0.5 text-xs rounded bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors",title:e.metadata.dueDate,children:(0,og.formatDateForDisplay)(e.metadata.dueDate)}):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"None"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-1",children:"⏱️ Duration"}),e.metadata.duration?(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),b?.("durations",e.metadata.duration)},className:"px-2 py-0.5 text-xs rounded transition-opacity hover:opacity-80",style:{backgroundColor:i.duration,color:"#333"},children:e.metadata.duration}):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"None"})]}),M.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-1",children:"🏃 Sprint"}),e.metadata.sprint?(O=M.find(t=>t.id===e.metadata.sprint))?(0,l.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300",children:O.name}):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"Unknown"}):(0,l.jsx)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"None"})]})]}),(0,l.jsxs)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-2",children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"💬 Comments"}),(0,l.jsx)(oz,{comments:e.comments,onAddComment:t=>j?.(e.id,t),onEditComment:(t,s)=>y?.(e.id,t,s),onDeleteComment:t=>v?.(e.id,t)})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[e.isActive&&(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),J(!G)},className:"p-2 bg-purple-100 hover:bg-purple-200 dark:bg-purple-900/30 dark:hover:bg-purple-900/50 text-purple-700 dark:text-purple-400 rounded-md transition-colors","aria-label":"Delay todo",title:"Delay",children:(0,l.jsx)(oe.ClockIcon,{className:"w-4 h-4"})}),G&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>J(!1)}),(0,l.jsx)("div",{className:"absolute right-0 z-20 mt-1 w-48 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded shadow-lg py-1 max-h-64 overflow-y-auto",children:of.map(t=>(0,l.jsx)("button",{onClick:s=>{s.stopPropagation();let r=(0,og.normalizeDateValue)(t.value,d.dateTime,d.workHours);if(r){let t={...e.metadata,dueDate:r};n(e.id,e.text,e.plainText,t)}J(!1)},className:"w-full text-left px-4 py-2 text-sm text-zinc-900 dark:text-zinc-100 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",children:t.label},t.value))})]})]}),e.isActive&&!e.metadata.sprint&&$&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation();let s={...e.metadata,sprint:$.id};n(e.id,e.text,e.plainText,s)},className:"p-2 bg-cyan-100 hover:bg-cyan-200 dark:bg-cyan-900/30 dark:hover:bg-cyan-900/50 text-cyan-700 dark:text-cyan-400 rounded-md transition-colors","aria-label":`Add to ${$.name}`,title:`Add to ${$.name}`,children:(0,l.jsx)(oe.LightningIcon,{className:"w-4 h-4"})}),(e.isActive||e.isCompleted)&&r&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id)},className:"p-2 bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/30 dark:hover:bg-amber-900/50 text-amber-700 dark:text-amber-400 rounded-md transition-colors","aria-label":"Archive todo",title:"Archive",children:(0,l.jsx)(oe.ArchiveIcon,{className:"w-4 h-4"})}),"archived"===e.state&&a&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e.id)},className:"p-2 bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 text-green-700 dark:text-green-400 rounded-md transition-colors","aria-label":"Unarchive todo",title:"Unarchive",children:(0,l.jsx)(oe.UndoIcon,{className:"w-4 h-4"})}),(0,l.jsx)("button",{"data-testid":"todo-delete",onClick:t=>{t.stopPropagation(),s(e.id)},className:"p-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-400 rounded-md transition-colors","aria-label":"Delete todo",title:"Delete",children:(0,l.jsx)(oe.TrashIcon,{className:"w-4 h-4"})})]})]})})]})}let oN=[{id:"calendar-intro",title:"Calendar View 🗓️",description:"The Calendar View shows your tasks on a monthly calendar. See at a glance what's due each day.",position:"center"},{id:"calendar-dots",title:"Task Indicators 🔵",description:"Each dot represents a task due that day. The color indicates:\n\n• Blue - Active task\n• Green - Completed\n• Gray - Archived\n\nMultiple dots = multiple tasks!",targetSelector:'[data-tutorial="calendar-grid"]',position:"top",spotlightPadding:12,fallbackHint:"The calendar grid shows all days of the month with colored dots for tasks"},{id:"calendar-click",title:"Click to Expand 👆",description:"Click any day to see all tasks due on that date. From there you can:\n• View task details\n• Complete tasks\n• Edit due dates",position:"center",action:"Click on a day with tasks!"},{id:"calendar-navigation",title:"Navigate Months 📆",description:'Use the arrow buttons to navigate between months. Click "Today" to jump back to the current date.',targetSelector:'[data-tutorial="calendar-nav"]',position:"bottom",spotlightPadding:8,fallbackHint:"Navigation arrows and Today button are at the top of the calendar"},{id:"calendar-complete",title:"Stay on Schedule! 🎉",description:"You're ready to use the Calendar View! Add due dates to your tasks to see them appear on the calendar.",position:"center"}];function oC({todos:e,markerColors:t,settings:s,linkPatterns:n,availablePeople:r,availableProjects:a,availablePriorities:i,onToggle:d,onDelete:c,onArchive:m,onUnarchive:x,onEdit:u,onAddPerson:h,onAddProject:g,onAddPriority:b,onAddComment:f,onEditComment:k,onDeleteComment:j,onQuickAdd:y,onAddSubtask:v,onToggleSubtask:z,onEditSubtask:w,onDeleteSubtask:N,onStartTimeTracking:C,onStopTimeTracking:D,onAddManualTimeEntry:S,onDeleteTimeEntry:T,onCreateTemplate:P,onDuplicate:A}){let E,M=s.calendar||{weekStartDay:0,defaultView:"month",showWeekNumbers:!1,taskDotLimit:4,dotColorBy:"state",showOverdueBadge:!0,showRecurringIndicator:!0,showTaskCount:!1},[$,R]=(0,o.useState)(new Date),[I,F]=(0,o.useState)(()=>{let e=new Date;return e.setHours(0,0,0,0),e}),[L,W]=(0,o.useState)(null),[O,B]=(0,o.useState)(M.defaultView),[Y,_]=(0,o.useState)("created"),[H,U]=(0,o.useState)("asc"),[V,q]=(0,o.useState)(!0),[K,G]=(0,o.useState)(!1),[J,Z]=(0,o.useState)(null),Q=(0,o.useRef)(null);(0,o.useEffect)(()=>{(0,p.waitForStorageInit)().then(()=>(0,p.loadFromStorage)(p.STORAGE_KEYS.CALENDAR_VIEW_OPTIONS,{})).then(e=>{void 0!==e.viewMode&&B(e.viewMode),void 0!==e.sortField&&_(e.sortField),void 0!==e.sortDirection&&U(e.sortDirection),void 0!==e.showTasksWithoutDates&&q(e.showTasksWithoutDates),G(!0)})},[]),(0,o.useEffect)(()=>{K&&(0,p.saveToStorage)(p.STORAGE_KEYS.CALENDAR_VIEW_OPTIONS,{viewMode:O,sortField:Y,sortDirection:H,showTasksWithoutDates:V})},[K,O,Y,H,V]);let X=(0,o.useMemo)(()=>{let e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return 1===M.weekStartDay?[...e.slice(1),e[0]]:e},[M.weekStartDay]),ee=(0,o.useMemo)(()=>{let e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${n}`},[]),et=(0,o.useMemo)(()=>{let t=new Map;if(V){let s=e.filter(e=>!e.hasDueDate&&!e.isDeleted);s.length>0&&t.set(ee,[...s])}return e.filter(e=>e.hasDueDate&&!e.isDeleted).forEach(e=>{let s=e.dueDateKey;t.has(s)||t.set(s,[]),t.get(s).push(e)}),t},[e,V,ee]),es=(0,o.useMemo)(()=>e.filter(e=>!e.hasDueDate&&!e.isDeleted).length,[e]),en=(0,o.useMemo)(()=>{let e=$.getFullYear(),t=$.getMonth(),s=new Date(e,t,1),n=new Date(s),r=s.getDay();1===M.weekStartDay&&(r=0===r?6:r-1),n.setDate(n.getDate()-r);let a=[],i=new Date(n),l=new Date;l.setHours(0,0,0,0);for(let e=0;e<42;e++){let e=i.getFullYear(),s=(i.getMonth()+1).toString().padStart(2,"0"),n=i.getDate().toString().padStart(2,"0"),r=`${e}-${s}-${n}`,o=et.get(r)||[],d=i.getMonth()===t,c=new Date(i);c.setHours(0,0,0,0);let m=o.filter(e=>"active"===e.state&&c<l),x=o.filter(e=>e.isRecurring);a.push({date:new Date(i),dateKey:r,todos:o,isCurrentMonth:d,isToday:i.toDateString()===l.toDateString(),weekNumber:function(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),s=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-s);let n=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-n.getTime())/864e5+1)/7)}(i),overdueTasks:m,recurringTasks:x}),i.setDate(i.getDate()+1)}return a},[$,et,M.weekStartDay]),er=(0,o.useMemo)(()=>{if(!I)return[];let e=new Date(I),t=e.getDay(),s=1===M.weekStartDay?0===t?-6:1-t:-t;e.setDate(e.getDate()+s);let n=[];for(let t=0;t<7;t++){let s=new Date(e);s.setDate(s.getDate()+t);let r=s.getFullYear(),a=(s.getMonth()+1).toString().padStart(2,"0"),i=s.getDate().toString().padStart(2,"0"),l=`${r}-${a}-${i}`;n.push({date:s,dateKey:l,todos:et.get(l)||[],isToday:s.toDateString()===new Date().toDateString()})}return n},[I,et,M.weekStartDay]),ea=(0,o.useMemo)(()=>{let e=new Date;e.setHours(0,0,0,0);let t=[];for(let s=0;s<14;s++){let n=new Date(e);n.setDate(n.getDate()+s);let r=n.getFullYear(),a=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),l=`${r}-${a}-${i}`,o=et.get(l)||[];(o.length>0||0===s)&&t.push({date:n,dateKey:l,todos:o})}return t},[et]),ei=e=>{R(t=>{let s=new Date(t);return s.setMonth(s.getMonth()+e),s})},el=()=>{let e=new Date;R(e),F(e)},eo=e=>{F(e.toDateString()===I?.toDateString()?null:e)},ed=e=>{if(y){let t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0");y(`${t}-${s}-${n}`)}};(0,o.useEffect)(()=>{let e=e=>{if(!Q.current?.contains(document.activeElement))return;let t="week"===O?7:42;switch(e.key){case"ArrowLeft":e.preventDefault(),Z(e=>null===e?0:Math.max(0,e-1));break;case"ArrowRight":e.preventDefault(),Z(e=>null===e?0:Math.min(t-1,e+1));break;case"ArrowUp":e.preventDefault(),Z(e=>null===e?0:Math.max(0,e-7));break;case"ArrowDown":e.preventDefault(),Z(e=>null===e?0:Math.min(t-1,e+7));break;case"Enter":case" ":if(e.preventDefault(),null!==J){let e="week"===O?er:en;e[J]&&eo(e[J].date)}break;case"t":case"T":e.ctrlKey||e.metaKey||(e.preventDefault(),el())}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[J,O,en,er]);let ec=(0,o.useMemo)(()=>{if(!I)return[];let e=I.getFullYear(),t=(I.getMonth()+1).toString().padStart(2,"0"),s=I.getDate().toString().padStart(2,"0"),n=`${e}-${t}-${s}`;return[...et.get(n)||[]].sort((e,t)=>{let s=0;return s="priority"===Y?(e.priorityOrder??999)-(t.priorityOrder??999):"duration"===Y?(e.durationMinutes??0)-(t.durationMinutes??0):t.createdAt-e.createdAt,"asc"===H?s:-s})},[I,et,Y,H]),em=e=>{if("project"!==M.dotColorBy)return;let t=e.projects[0];if(t){let e=a.find(e=>e.name===t||e.alternatives?.includes(t));return e?.color}};return(0,l.jsxs)("div",{className:"space-y-4 print:space-y-2",ref:Q,role:"application","aria-label":"Calendar","data-testid":"calendar-view",children:[es>0&&(0,l.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 sm:p-4 rounded-lg border border-blue-200 dark:border-blue-800 print:hidden",children:(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,l.jsx)(oe.InfoIcon,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("p",{className:"text-xs sm:text-sm font-medium text-blue-900 dark:text-blue-100",children:[es," ",1===es?"task":"tasks"," without dates"]}),(0,l.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-0.5 hidden sm:block",children:V?"Shown under today's date":"Not shown in calendar"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,l.jsx)("button",{onClick:()=>q(!V),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${V?"bg-blue-600":"bg-zinc-300 dark:bg-zinc-600"}`,role:"switch","aria-checked":V,"aria-label":"Show tasks without dates for today",children:(0,l.jsx)("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${V?"translate-x-6":"translate-x-1"}`})}),(0,l.jsx)("span",{className:"text-xs font-medium text-blue-900 dark:text-blue-100 whitespace-nowrap hidden sm:inline",children:"Show for today"})]})]})}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 p-3 sm:p-6 print:p-2 print:border-0",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-4 mb-4 sm:mb-6 print:mb-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2","data-tutorial":"calendar-nav",children:[(0,l.jsx)("button",{onClick:()=>ei(-1),className:"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors print:hidden","aria-label":"Previous month",children:(0,l.jsx)(oe.ChevronLeftIcon,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),(0,l.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-zinc-900 dark:text-zinc-100 min-w-[140px] sm:min-w-[180px] text-center",children:$.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,l.jsx)("button",{onClick:()=>ei(1),className:"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors print:hidden","aria-label":"Next month",children:(0,l.jsx)(oe.ChevronRightIcon,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 print:hidden",children:[(0,l.jsx)("button",{onClick:el,className:"px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-medium rounded-lg bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-300 transition-colors",title:"Go to today (T)",children:"Today"}),(0,l.jsx)("div",{className:"flex rounded-lg border border-zinc-200 dark:border-zinc-700 overflow-hidden",role:"group","aria-label":"View mode",children:["month","week","agenda"].map(e=>(0,l.jsx)("button",{onClick:()=>B(e),"aria-pressed":O===e,className:`px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-medium transition-colors ${O===e?"bg-blue-600 text-white":"bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-700"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,l.jsx)("button",{onClick:()=>window.print(),className:"p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-600 dark:text-zinc-400 transition-colors",title:"Print calendar","aria-label":"Print calendar",children:(0,l.jsx)(oe.PrintIcon,{className:"w-5 h-5"})})]})]}),(0,l.jsx)("div",{className:"text-xs text-zinc-400 dark:text-zinc-500 mb-2 print:hidden",children:(0,l.jsx)("span",{className:"hidden md:inline",children:"Use arrow keys to navigate, Enter to select, T for today"})}),"month"===O&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:`grid gap-1 mb-2 ${M.showWeekNumbers?"grid-cols-8":"grid-cols-7"}`,children:[M.showWeekNumbers&&(0,l.jsx)("div",{className:"text-center text-xs font-medium text-zinc-400 dark:text-zinc-500 py-2",children:"Wk"}),X.map(e=>(0,l.jsxs)("div",{className:"text-center text-xs sm:text-sm font-medium text-zinc-600 dark:text-zinc-400 py-1 sm:py-2",children:[(0,l.jsx)("span",{className:"sm:hidden",children:e.charAt(0)}),(0,l.jsx)("span",{className:"hidden sm:inline",children:e})]},e))]}),(0,l.jsx)("div",{className:`grid gap-1 ${M.showWeekNumbers?"grid-cols-8":"grid-cols-7"}`,role:"grid","data-tutorial":"calendar-grid",children:en.map((e,t)=>{let s;return(0,l.jsxs)(o.Fragment,{children:[M.showWeekNumbers&&t%7==0&&(0,l.jsx)("div",{className:"flex items-center justify-center text-xs text-zinc-400 dark:text-zinc-500",children:e.weekNumber}),(s=J===t,(0,l.jsxs)("button",{onClick:()=>eo(e.date),onDoubleClick:()=>0===e.todos.length&&ed(e.date),tabIndex:s?0:-1,"aria-label":`${e.date.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}, ${e.todos.length} tasks`,"aria-selected":I?.toDateString()===e.date.toDateString(),className:`h-12 p-0.5 rounded-lg border transition-colors relative ${e.isCurrentMonth?"border-zinc-200 dark:border-zinc-800 hover:border-blue-400 dark:hover:border-blue-600":"border-transparent bg-zinc-50 dark:bg-zinc-800/50"} ${e.isToday?"ring-2 ring-blue-500":""} ${I?.toDateString()===e.date.toDateString()?"bg-blue-100 dark:bg-blue-900/30 border-blue-500":e.todos.length>0?"bg-white dark:bg-zinc-900":"bg-zinc-50 dark:bg-zinc-800/30"} ${s?"ring-2 ring-offset-1 ring-blue-400":""} cursor-pointer group`,children:[(0,l.jsxs)("div",{className:"absolute top-0.5 right-1 flex items-center gap-1",children:[M.showTaskCount&&e.todos.length>0&&(0,l.jsx)("span",{className:"inline-flex items-center justify-center min-w-[1rem] h-4 px-1 text-[10px] font-bold text-white bg-blue-600 rounded-full",children:e.todos.length}),(0,l.jsx)("span",{className:`text-xs font-medium ${e.isCurrentMonth?"text-zinc-900 dark:text-zinc-100":"text-zinc-400 dark:text-zinc-600"}`,children:e.date.getDate()})]}),M.showOverdueBadge&&e.overdueTasks.length>0&&(0,l.jsx)("div",{className:"absolute top-0.5 left-0.5",children:(0,l.jsxs)("span",{className:"inline-flex items-center gap-0.5 text-[10px] font-bold text-red-600 dark:text-red-400",title:`${e.overdueTasks.length} overdue`,children:[(0,l.jsx)(oe.WarningIcon,{className:"w-3 h-3"}),e.overdueTasks.length]})}),M.showRecurringIndicator&&e.recurringTasks.length>0&&!e.overdueTasks.length&&(0,l.jsx)("div",{className:"absolute top-0.5 left-0.5",children:(0,l.jsxs)("span",{className:"inline-flex items-center gap-0.5 text-[10px] font-medium text-green-600 dark:text-green-400",title:`${e.recurringTasks.length} recurring`,children:[(0,l.jsx)(oe.RefreshIcon,{className:"w-3 h-3"}),e.recurringTasks.length]})}),e.todos.length>0&&(0,l.jsxs)("div",{className:"absolute bottom-0.5 left-0 right-0 flex justify-center items-center gap-0.5",children:[e.todos.slice(0,M.taskDotLimit).map(e=>{let t=em(e);return(0,l.jsx)("div",{className:`w-1.5 h-1.5 rounded-full ${(e=>{switch(M.dotColorBy){case"priority":{let t=e.priorityOrder;if(0===t)return"bg-red-500";if(1===t)return"bg-orange-500";if(2===t)return"bg-yellow-500";if(3===t)return"bg-green-500";return"bg-zinc-400"}case"project":{let t=e.projects[0];if(t){let e=a.find(e=>e.name===t||e.alternatives?.includes(t));if(e?.color)return""}return"bg-purple-500"}default:switch(e.state){case"completed":return"bg-green-500";case"archived":return"bg-zinc-400";default:return"bg-blue-500"}}})(e)}`,style:t?{backgroundColor:t}:void 0,title:e.plainText},e.id)}),e.todos.length>M.taskDotLimit&&(0,l.jsxs)("span",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 ml-0.5",title:`+${e.todos.length-M.taskDotLimit} more`,children:["+",e.todos.length-M.taskDotLimit]})]}),0===e.todos.length&&y&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,l.jsx)("span",{className:"text-zinc-400 dark:text-zinc-500 text-lg",children:"+"})})]},e.dateKey))]},e.dateKey)})})]}),"week"===O&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 overflow-x-auto",children:er.map((e,t)=>(0,l.jsxs)("button",{onClick:()=>eo(e.date),className:`p-1.5 sm:p-3 rounded-lg border transition-colors min-w-[40px] ${e.isToday?"ring-2 ring-blue-500":""} ${I?.toDateString()===e.date.toDateString()?"bg-blue-100 dark:bg-blue-900/30 border-blue-500":"border-zinc-200 dark:border-zinc-700 hover:border-blue-400"}`,children:[(0,l.jsxs)("div",{className:"text-[10px] sm:text-xs text-zinc-500 dark:text-zinc-400",children:[(0,l.jsx)("span",{className:"sm:hidden",children:e.date.toLocaleDateString("en-US",{weekday:"narrow"})}),(0,l.jsx)("span",{className:"hidden sm:inline",children:e.date.toLocaleDateString("en-US",{weekday:"short"})})]}),(0,l.jsx)("div",{className:"text-sm sm:text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:e.date.getDate()}),(0,l.jsxs)("div",{className:"text-[10px] sm:text-xs text-zinc-500 dark:text-zinc-400",children:[(0,l.jsx)("span",{className:"sm:hidden",children:e.todos.length}),(0,l.jsxs)("span",{className:"hidden sm:inline",children:[e.todos.length," tasks"]})]})]},e.dateKey))}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:er.map(e=>(0,l.jsxs)("div",{className:"space-y-0.5 sm:space-y-1 min-h-[60px] sm:min-h-[100px]",children:[e.todos.slice(0,3).map(t=>(0,l.jsx)("div",{className:`p-1 sm:p-1.5 rounded text-[10px] sm:text-xs truncate cursor-pointer hover:opacity-80 ${"completed"===t.state?"line-through opacity-60":""}`,style:{backgroundColor:em(t)||("active"===t.state?"#dbeafe":"#f3f4f6"),color:"#1f2937"},onClick:()=>{F(e.date)},title:t.plainText,children:t.plainText},t.id)),e.todos.length>3&&(0,l.jsxs)("div",{className:"text-[10px] sm:text-xs text-zinc-500 dark:text-zinc-400 text-center",children:["+",e.todos.length-3]})]},e.dateKey))})]}),"agenda"===O&&(0,l.jsx)("div",{className:"space-y-4",children:0===ea.length?(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"text-4xl mb-3",children:"📋"}),(0,l.jsx)("p",{className:"text-lg text-zinc-600 dark:text-zinc-400",children:"No upcoming tasks"})]}):ea.map(e=>(0,l.jsxs)("div",{className:"border-b border-zinc-100 dark:border-zinc-800 pb-4 last:border-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsx)("div",{className:`text-sm font-medium ${e.date.toDateString()===new Date().toDateString()?"text-blue-600 dark:text-blue-400":"text-zinc-600 dark:text-zinc-400"}`,children:e.date.toDateString()===new Date().toDateString()?"Today":e.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,l.jsxs)("span",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:[e.todos.length," task",1!==e.todos.length?"s":""]})]}),e.todos.length>0?(0,l.jsx)("div",{className:"space-y-2 ml-4",children:e.todos.map(e=>(0,l.jsx)(ow,{todo:e,onToggle:d,onDelete:c,onArchive:m,onUnarchive:x,onEdit:u,markerColors:t,settings:s,linkPatterns:n,availablePeople:r,availableProjects:a,availablePriorities:i,onAddPerson:h,onAddProject:g,onAddPriority:b,onMarkerClick:()=>{},isExpanded:!1,onToggleExpand:()=>{},onAddComment:f,onEditComment:k,onDeleteComment:j},e.id))}):(0,l.jsx)("p",{className:"text-sm text-zinc-400 dark:text-zinc-500 ml-4",children:"No tasks"})]},e.dateKey))})]}),"month"===O&&I&&(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 p-3 sm:p-6 print:hidden",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4 mb-4",children:[(0,l.jsxs)("h3",{className:"text-base sm:text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:["Tasks for ",I.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap",children:[y&&(0,l.jsx)("button",{onClick:()=>ed(I),className:"px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-medium rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors",children:"+ Add"}),ec.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("label",{className:"text-xs sm:text-sm font-medium text-zinc-700 dark:text-zinc-300 hidden sm:inline",children:"Sort:"}),(0,l.jsxs)("select",{value:Y,onChange:e=>_(e.target.value),className:"px-2 sm:px-3 py-1.5 text-base sm:text-sm rounded-md border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"created",children:"Created"}),(0,l.jsx)("option",{value:"priority",children:"Priority"}),(0,l.jsx)("option",{value:"duration",children:"Duration"})]}),(0,l.jsx)("button",{onClick:()=>U("asc"===H?"desc":"asc"),className:"p-1.5 rounded-md border border-zinc-300 dark:border-zinc-700 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors",title:"asc"===H?"Ascending":"Descending",children:"asc"===H?(0,l.jsx)(oe.ChevronUpIcon,{className:"w-4 h-4 text-zinc-700 dark:text-zinc-300"}):(0,l.jsx)(oe.ChevronDownIcon,{className:"w-4 h-4 text-zinc-700 dark:text-zinc-300"})})]})]})]}),ec.length>0?(0,l.jsx)("div",{className:"space-y-2",children:ec.map(e=>(0,l.jsx)("div",{onClick:()=>W(e),className:"cursor-pointer",children:(0,l.jsx)(ow,{todo:e,onToggle:d,onDelete:c,onArchive:m,onUnarchive:x,onEdit:u,markerColors:t,settings:s,linkPatterns:n,availablePeople:r,availableProjects:a,availablePriorities:i,onAddPerson:h,onAddProject:g,onAddPriority:b,onMarkerClick:()=>{},isExpanded:!1,onToggleExpand:()=>W(e),onAddComment:f,onEditComment:k,onDeleteComment:j})},e.id))}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"text-4xl mb-3",children:"📅"}),(0,l.jsx)("p",{className:"text-lg text-zinc-600 dark:text-zinc-400",children:"No tasks planned for this day"}),y&&(0,l.jsx)("p",{className:"text-sm text-zinc-400 dark:text-zinc-500 mt-2",children:'Double-click on a day or click "Add Task" to create one'})]})]}),L&&((E=e.find(e=>e.id===L.id))?(0,l.jsx)(ok,{todo:E,todos:e,isOpen:!0,onClose:()=>W(null),onToggle:d,onDelete:c,onDuplicate:A,onEdit:u,onArchive:m,onUnarchive:x,markerColors:t,settings:s,linkPatterns:n,availablePeople:r,availableProjects:a,availablePriorities:i,onAddPerson:h,onAddProject:g,onAddPriority:b,onAddComment:f,onAddSubtask:v,onToggleSubtask:z,onEditSubtask:w,onDeleteSubtask:N,onStartTimeTracking:C,onStopTimeTracking:D,onAddManualTimeEntry:S,onDeleteTimeEntry:T,onCreateTemplate:P}):null)]})}let oD={searchText:"",assignedPeople:new Set,projects:new Set,priorities:new Set,dueDates:new Set,tags:new Set},oS=[{id:"kanban-intro",title:"Kanban Board 📊",description:"The Kanban View lets you visualize your workflow as columns. Drag tasks between columns to update their status.",position:"center"},{id:"kanban-columns",title:"Workflow Columns 📋",description:"Each column represents a workflow state:\n• Backlog - Tasks waiting to be started\n• To Do - Ready to work on\n• In Progress - Currently working\n• Review - Needs review\n• Completed - Done!\n\nCustomize columns in Settings → Kanban.",targetSelector:'[data-tutorial="kanban-board"]',position:"top",spotlightPadding:12,fallbackHint:"The Kanban board shows columns for each workflow state (Backlog, To Do, In Progress, etc.)"},{id:"kanban-drag",title:"Drag & Drop 🖱️",description:"Drag tasks between columns to change their status. The task will automatically update its workflow state.\n\nYou can also drag to reorder tasks within a column.",position:"center",action:"Try dragging a task to another column!"},{id:"kanban-views",title:"Kanban Views 👁️",description:"Create custom Kanban views to show only specific columns. Great for:\n• Active Work (To Do + In Progress)\n• Review Queue (Review only)\n• Completed items\n\nSet up views in Settings → Kanban → Views.",targetSelector:'[data-tutorial="kanban-view-selector"]',position:"bottom",spotlightPadding:8,fallbackHint:"View selector dropdown is in the toolbar above the Kanban columns"},{id:"kanban-sprints",title:"Sprint Filtering 🏃",description:"Filter the board by sprint to focus on current work. Select a sprint from the dropdown to see only tasks assigned to that sprint.",targetSelector:'[data-tutorial="kanban-sprint-filter"]',position:"bottom",spotlightPadding:8,fallbackHint:"Sprint filter dropdown is next to the view selector in the toolbar"},{id:"kanban-complete",title:"Ready to Go! 🎉",description:"You're ready to use the Kanban Board! Customize your workflow states in Settings to match your process.",position:"center"}],oT={activeViewId:"all",sortField:"createdAt",sortDirection:"desc",sprintId:null,filters:{searchText:"",assignedPeople:[],projects:[],priorities:[],dueDates:[],tags:[]}};function oP({todos:e,markerColors:t,kanban:s,onToggle:n,onDelete:r,onEditTodo:a,onArchive:i,onUnarchive:d,onSetWorkflowState:c,settings:m,linkPatterns:x,availablePeople:u,availableProjects:h,availablePriorities:g,onAddPerson:f,onAddProject:k,onAddPriority:j,onAddComment:y,onUpdateKanbanSettings:v,onAddSubtask:z,onToggleSubtask:w,onEditSubtask:N,onDeleteSubtask:C,onStartTimeTracking:D,onStopTimeTracking:S,onAddManualTimeEntry:T,onDeleteTimeEntry:P,onCreateTemplate:A,onDuplicate:E,sprints:M=[],runningSprint:$}){let[R,I]=(0,o.useState)(null),[F,L]=(0,o.useState)(oT),[W,O]=(0,o.useState)(null),[B,Y]=(0,o.useState)(null),[_,H]=(0,o.useState)(!1),[U,V]=(0,o.useState)(oD),[q,K]=(0,o.useState)(!1),[G,J]=(0,o.useState)([]),[Z,Q]=(0,o.useState)(!1),[X,ee]=(0,o.useState)(!1),[et,es]=(0,o.useState)(""),[en,er]=(0,o.useState)(null);(0,o.useEffect)(()=>{(0,p.waitForStorageInit)().then(()=>Promise.all([(0,p.loadFromStorage)(p.STORAGE_KEYS.KANBAN_VIEW_OPTIONS,oT),(0,p.loadFromStorage)("doit-kanban-filter-presets",[])])).then(([e,t])=>{let s={...oT,...e};L(s),s.filters&&V({searchText:s.filters.searchText||"",assignedPeople:new Set(s.filters.assignedPeople||[]),projects:new Set(s.filters.projects||[]),priorities:new Set(s.filters.priorities||[]),dueDates:new Set(s.filters.dueDates||[]),tags:new Set(s.filters.tags||[])}),J(t),H(!0),Q(!0)})},[]),(0,o.useEffect)(()=>{if(!_)return;let e={...F,filters:{searchText:U.searchText,assignedPeople:Array.from(U.assignedPeople),projects:Array.from(U.projects),priorities:Array.from(U.priorities),dueDates:Array.from(U.dueDates),tags:Array.from(U.tags)}};(0,p.saveToStorage)(p.STORAGE_KEYS.KANBAN_VIEW_OPTIONS,e)},[F,U,_]),(0,o.useEffect)(()=>{Z&&(0,p.saveToStorage)("doit-kanban-filter-presets",G)},[G,Z]);let ea=(0,o.useMemo)(()=>[...s.states].sort((e,t)=>e.order-t.order),[s.states]),ei=(0,o.useMemo)(()=>s.views.find(e=>e.id===F.activeViewId)||s.views[0],[s.views,F.activeViewId]),el=(0,o.useMemo)(()=>ei?ea.filter(e=>ei.stateIds.includes(e.id)):ea,[ea,ei]),eo=(0,o.useMemo)(()=>U.searchText.length>0||U.assignedPeople.size>0||U.projects.size>0||U.priorities.size>0||U.dueDates.size>0||U.tags.size>0,[U]),ed=(0,o.useMemo)(()=>{let t=new Set,s=new Set,n=new Set,r=new Set;return e.forEach(e=>{"deleted"!==e.state&&(e.assignedPeople.forEach(e=>t.add(e)),e.projects.forEach(e=>s.add(e)),e.priority&&n.add(e.priority),e.tags.forEach(e=>r.add(e)))}),{assignedPeople:Array.from(t).sort(),projects:Array.from(s).sort(),priorities:Array.from(n).sort((e,t)=>(g.find(t=>t.name===e)?.order??1/0)-(g.find(e=>e.name===t)?.order??1/0)),dueDates:["overdue","today","thisWeek","later","noDueDate"],tags:Array.from(r).sort()}},[e,g]),ec=(0,o.useMemo)(()=>{let t={};return ea.forEach(e=>{t[e.id]=[]}),e.forEach(e=>{if("deleted"===e.state)return;if(null!==F.sprintId){if("backlog"===F.sprintId){if(e.sprint)return}else if(e.sprint!==F.sprintId)return}if(U.searchText&&!e.matchesSearch(U.searchText)||U.assignedPeople.size>0&&!e.assignedPeople.some(e=>U.assignedPeople.has(e))||U.projects.size>0&&!e.projects.some(e=>U.projects.has(e))||U.priorities.size>0&&(!e.priority||!U.priorities.has(e.priority)))return;if(U.dueDates.size>0){let t=!1;if(U.dueDates.has("overdue")&&e.isOverdue&&(t=!0),U.dueDates.has("today")&&e.isDueToday&&(t=!0),U.dueDates.has("thisWeek")&&e.isDueThisWeek&&!e.isDueToday&&(t=!0),U.dueDates.has("later")&&e.dueDate&&!e.isDueThisWeek&&(t=!0),U.dueDates.has("noDueDate")&&!e.dueDate&&(t=!0),!t)return}if(U.tags.size>0&&!e.tags.some(e=>U.tags.has(e)))return;let s=e.workflowState;if(s||(s="completed"===e.state?"completed":"archived"===e.state?"archived":"backlog"),t[s])t[s].push(e);else{let s=ea[0];s&&t[s.id].push(e)}}),Object.keys(t).forEach(e=>{t[e].sort((e,t)=>{let s="asc"===F.sortDirection?1:-1;switch(F.sortField){case"createdAt":return(e.createdAt-t.createdAt)*s;case"updatedAt":return((e.updatedAt??e.createdAt)-(t.updatedAt??t.createdAt))*s;case"dueDate":return((e.dueDate?new Date(e.dueDate).getTime():1/0)-(t.dueDate?new Date(t.dueDate).getTime():1/0))*s;case"priority":{let n=e=>{let t=e.priority;if(!t)return 1/0;let s=g.find(e=>e.name===t);return s?.order??1/0};return(n(e)-n(t))*s}case"title":return e.plainText.localeCompare(t.plainText)*s;default:return 0}})}),t},[e,ea,F.sortField,F.sortDirection,F.sprintId,g,U]),em=(0,o.useMemo)(()=>R&&e.find(e=>e.id===R)||null,[e,R]),ex=(0,o.useCallback)((e,t)=>e!==t&&(0===s.allowedTransitions.length||s.allowedTransitions.some(s=>s.fromStateId===e&&s.toStateId===t)),[s.allowedTransitions]),eu=(0,o.useCallback)(e=>{let t=s.states.find(t=>t.id===e);return!!t&&(!!t.isSystem||void 0===t.wipLimit||t.wipLimit<=0||(ec[e]?.length||0)<t.wipLimit)},[s.states,ec]),eh=(0,o.useCallback)(e=>(0,ob.findPersonColor)(e,u,t.assigned),[u,t.assigned]),ep=(0,o.useCallback)(e=>(0,ob.findProjectColor)(e,h,t.project),[h,t.project]),eg=(0,o.useCallback)(e=>e?(0,ob.findPriorityColor)(e,g,t.priority):t.priority,[g,t.priority]),eb=(0,o.useCallback)((e,t)=>{V(s=>{let n=new Set(s[e]);return n.has(t)?n.delete(t):n.add(t),{...s,[e]:n}}),er(null)},[]),ef=(0,o.useCallback)(()=>{V(oD),er(null)},[]),ek=(0,o.useCallback)(()=>{if(""===et.trim())return;let e={id:(0,b.createViewPresetId)(),name:et.trim(),filters:{searchText:U.searchText,assignedPeople:Array.from(U.assignedPeople),projects:Array.from(U.projects),priorities:Array.from(U.priorities),dueDates:Array.from(U.dueDates),tags:Array.from(U.tags)},sortField:F.sortField,sortDirection:F.sortDirection};J(t=>[...t,e]),es(""),ee(!1)},[et,U,F.sortField,F.sortDirection]),ej=(0,o.useCallback)(e=>{V({searchText:e.filters.searchText,assignedPeople:new Set(e.filters.assignedPeople),projects:new Set(e.filters.projects),priorities:new Set(e.filters.priorities),dueDates:new Set(e.filters.dueDates),tags:new Set(e.filters.tags)}),L(t=>({...t,sortField:e.sortField,sortDirection:e.sortDirection})),er(e.id)},[]),ey=(0,o.useCallback)(e=>{J(t=>t.filter(t=>t.id!==e)),er(t=>t===e?null:t)},[]);(0,o.useCallback)(t=>{let s=e.find(e=>e.id===t);if(!s)return[];let n=s.workflowState||"backlog";return ea.filter(e=>ex(n,e.id)).map(e=>e.id)},[e,ea,ex]);let ev=()=>{Y(null)},ez=()=>{O(null),Y(null)},ew=()=>{I(null)};return(0,l.jsxs)("div",{className:"flex flex-col h-full","data-testid":"kanban-view",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 px-2 sm:px-4 py-2 sm:py-3 border-b border-zinc-200 dark:border-zinc-700 bg-white dark:bg-zinc-900 flex-shrink-0",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1 min-w-0",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-600 dark:text-zinc-400 hidden sm:inline",children:"View:"}),(0,l.jsx)("select",{value:F.activeViewId,onChange:e=>L(t=>({...t,activeViewId:e.target.value})),className:"flex-1 sm:flex-none px-3 py-2 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded-md text-base sm:text-sm",title:"Select view","data-tutorial":"kanban-view-selector",children:s.views.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))}),M.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-zinc-300 dark:text-zinc-600 hidden sm:inline",children:"|"}),(0,l.jsx)("label",{className:"text-sm text-zinc-600 dark:text-zinc-400 hidden sm:inline",children:"Sprint:"}),(0,l.jsxs)("select",{value:F.sprintId??"all",onChange:e=>{let t=e.target.value;L(e=>({...e,sprintId:"all"===t?null:t}))},className:"flex-1 sm:flex-none px-3 py-2 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded-md text-base sm:text-sm",title:"Filter by sprint","data-tutorial":"kanban-sprint-filter",children:[(0,l.jsx)("option",{value:"all",children:"All Sprints"}),(0,l.jsx)("option",{value:"backlog",children:"📋 Backlog (No Sprint)"}),$&&(0,l.jsxs)("option",{value:$.id,children:["🏃 ",$.name," (Active)"]}),M.filter(e=>e.id!==$?.id&&"archived"!==e.state).sort((e,t)=>{let s={planning:0,active:1,completed:2,cancelled:3};return s[e.status]-s[t.status]}).map(e=>(0,l.jsxs)("option",{value:e.id,children:["planning"===e.status?"📝":"completed"===e.status?"✅":"🚫"," ",e.name]},e.id))]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[G.length>0&&(0,l.jsxs)("div",{className:"hidden sm:flex items-center gap-1",children:[(0,l.jsx)("button",{type:"button",onClick:ef,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${!eo&&null===en?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,title:"Show all (clear filters)",children:"All"}),G.map(e=>(0,l.jsx)("button",{type:"button",onClick:()=>ej(e),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${en===e.id?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,title:`Load preset: ${e.name}`,children:e.name},e.id))]}),(0,l.jsxs)("button",{onClick:()=>K(!q),className:`p-2 rounded-lg font-medium transition-colors flex items-center gap-1 ${q||eo?"bg-blue-600 text-white hover:bg-blue-700":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,title:q?"Hide filters":"Show filters",children:[(0,l.jsx)(oe.FilterIcon,{className:"w-5 h-5"}),eo&&(0,l.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-white/20 rounded-full",children:[+!!U.searchText,U.assignedPeople.size,U.projects.size,U.priorities.size,U.dueDates.size,U.tags.size].reduce((e,t)=>e+t,0)})]})]})]}),q&&(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-3 space-y-3",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search...",value:U.searchText,onChange:e=>V(t=>({...t,searchText:e.target.value})),className:"flex-1 min-w-[150px] px-3 py-2 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded-md text-sm"}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("label",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Sort:"}),(0,l.jsxs)("select",{value:F.sortField,onChange:e=>L(t=>({...t,sortField:e.target.value})),className:"px-2 py-2 bg-white dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-600 rounded-md text-sm",children:[(0,l.jsx)("option",{value:"createdAt",children:"Created"}),(0,l.jsx)("option",{value:"updatedAt",children:"Updated"}),(0,l.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,l.jsx)("option",{value:"priority",children:"Priority"}),(0,l.jsx)("option",{value:"title",children:"Title"})]}),(0,l.jsx)("button",{onClick:()=>L(e=>({...e,sortDirection:"asc"===e.sortDirection?"desc":"asc"})),className:`px-2 py-2 rounded-md font-mono text-sm transition-all ${"desc"===F.sortDirection?"bg-amber-200 dark:bg-amber-700 text-amber-900 dark:text-amber-100 shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)]":"bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 shadow-sm hover:bg-zinc-50 dark:hover:bg-zinc-700"}`,title:"asc"===F.sortDirection?"Ascending":"Descending",children:"asc"===F.sortDirection?"abc":"cba"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-2",children:[ed.assignedPeople.length>0&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400",children:"Assigned"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[ed.assignedPeople.slice(0,5).map(e=>(0,l.jsxs)("button",{onClick:()=>eb("assignedPeople",e),className:`px-2 py-0.5 text-xs rounded transition-colors ${U.assignedPeople.has(e)?"text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,style:U.assignedPeople.has(e)?{backgroundColor:eh(e)}:void 0,children:["@",e]},e)),ed.assignedPeople.length>5&&(0,l.jsxs)("span",{className:"text-xs text-zinc-400",children:["+",ed.assignedPeople.length-5]})]})]}),ed.projects.length>0&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400",children:"Projects"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[ed.projects.slice(0,5).map(e=>(0,l.jsxs)("button",{onClick:()=>eb("projects",e),className:`px-2 py-0.5 text-xs rounded transition-colors ${U.projects.has(e)?"text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,style:U.projects.has(e)?{backgroundColor:ep(e)}:void 0,children:["%",e]},e)),ed.projects.length>5&&(0,l.jsxs)("span",{className:"text-xs text-zinc-400",children:["+",ed.projects.length-5]})]})]}),ed.priorities.length>0&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400",children:"Priority"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:ed.priorities.map(e=>(0,l.jsx)("button",{onClick:()=>eb("priorities",e),className:`px-2 py-0.5 text-xs rounded transition-colors ${U.priorities.has(e)?"text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,style:U.priorities.has(e)?{backgroundColor:eg(e)}:void 0,children:e},e))})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400",children:"Due Date"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:[{id:"overdue",label:"Overdue",color:"#ef4444"},{id:"today",label:"Today",color:"#f97316"},{id:"thisWeek",label:"This Week",color:"#eab308"},{id:"later",label:"Later",color:"#22c55e"},{id:"noDueDate",label:"No Date",color:"#6b7280"}].map(e=>(0,l.jsx)("button",{onClick:()=>eb("dueDates",e.id),className:`px-2 py-0.5 text-xs rounded transition-colors ${U.dueDates.has(e.id)?"text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,style:U.dueDates.has(e.id)?{backgroundColor:e.color}:void 0,children:e.label},e.id))})]}),ed.tags.length>0&&(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400",children:"Tags"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-1",children:[ed.tags.slice(0,5).map(e=>(0,l.jsxs)("button",{onClick:()=>eb("tags",e),className:`px-2 py-0.5 text-xs rounded transition-colors ${U.tags.has(e)?"bg-blue-600 text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,children:["#",e]},e)),ed.tags.length>5&&(0,l.jsxs)("span",{className:"text-xs text-zinc-400",children:["+",ed.tags.length-5]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-zinc-200 dark:border-zinc-700",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap flex-1",children:[G.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400",children:"Presets:"}),(0,l.jsx)("button",{type:"button",onClick:ef,className:`px-2 py-1 text-xs font-medium rounded transition-colors ${!eo&&null===en?"bg-blue-600 text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,children:"All"}),G.map(e=>(0,l.jsx)("button",{type:"button",onClick:()=>ej(e),className:`px-2 py-1 text-xs font-medium rounded transition-colors ${en===e.id?"bg-blue-600 text-white":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,children:e.name},e.id)),eo&&null===en&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-zinc-300 dark:text-zinc-600",children:"|"}),(0,l.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:"Custom"})]})]}),!G.length&&eo&&(0,l.jsx)("button",{type:"button",onClick:ef,className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Clear all filters"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>ee(!0),className:"px-2 py-1 text-xs font-medium rounded bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:"Save Preset"}),G.length>0&&(0,l.jsxs)("div",{className:"relative group",children:[(0,l.jsx)("button",{type:"button",className:"px-2 py-1 text-xs text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200",children:"Manage"}),(0,l.jsx)("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg py-1 z-50 hidden group-hover:block min-w-[150px]",children:G.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between px-3 py-1 hover:bg-zinc-100 dark:hover:bg-zinc-700",children:[(0,l.jsx)("span",{className:"text-xs",children:e.name}),(0,l.jsx)("button",{onClick:()=>ey(e.id),className:"text-red-500 hover:text-red-700 text-xs",children:"✕"})]},e.id))})]})]})]})]})]}),X&&(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg shadow-xl p-4 w-full max-w-sm mx-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Save Filter Preset"}),(0,l.jsx)("input",{type:"text",placeholder:"Preset name...",value:et,onChange:e=>es(e.target.value),onKeyDown:e=>{"Enter"===e.key&&ek(),"Escape"===e.key&&ee(!1)},className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-600 rounded-md mb-3",autoFocus:!0}),(0,l.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,l.jsx)("button",{onClick:()=>ee(!1),className:"px-3 py-1.5 text-sm text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded",children:"Cancel"}),(0,l.jsx)("button",{onClick:ek,disabled:!et.trim(),className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"Save"})]})]})}),(0,l.jsx)("div",{className:"flex-1 overflow-x-auto overflow-y-hidden",children:(0,l.jsx)("div",{className:"flex h-full p-1.5 sm:p-4 gap-1.5 sm:gap-3 w-fit sm:w-full","data-tutorial":"kanban-board",children:el.map(n=>{let r=ec[n.id]||[],a=B===n.id,i=!n.isSystem&&void 0!==n.wipLimit&&n.wipLimit>0,o=i&&r.length>n.wipLimit,d=i&&r.length===n.wipLimit,m=W&&ex(e.find(e=>e.id===W)?.workflowState||"backlog",n.id)&&eu(n.id);return(0,l.jsxs)("div",{className:`flex flex-col w-[200px] sm:flex-1 sm:min-w-[180px] sm:max-w-[400px] flex-shrink-0 sm:flex-shrink rounded-lg transition-all ${a&&m?"ring-2 ring-blue-500 bg-blue-50 dark:bg-blue-900/20":o?"ring-2 ring-red-500 bg-red-50 dark:bg-red-900/20":"bg-zinc-100 dark:bg-zinc-800"} ${W&&!m?"opacity-50":""}`,onDragOver:t=>((t,s)=>{if(t.preventDefault(),!W)return;let n=e.find(e=>e.id===W);ex(n?.workflowState||"backlog",s)&&eu(s)?(t.dataTransfer.dropEffect="move",Y(s)):t.dataTransfer.dropEffect="none"})(t,n.id),onDragLeave:ev,onDrop:t=>((t,n)=>{if(t.preventDefault(),Y(null),!W)return;let r=e.find(e=>e.id===W);r&&(ex(r.workflowState||"backlog",n)&&eu(n)&&c(W,n,s.states,s.allowedTransitions),O(null))})(t,n.id),children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-2 rounded-t-lg",style:{backgroundColor:n.color+"33"},children:[(0,l.jsx)("span",{className:"text-base sm:text-lg",children:n.icon}),(0,l.jsx)("span",{className:"font-medium text-sm sm:text-base text-zinc-900 dark:text-zinc-100 truncate",children:n.name}),s.showTaskCount&&(0,l.jsxs)("span",{className:`ml-auto px-2 py-0.5 text-xs rounded-full ${o?"bg-red-500 text-white":d?"bg-amber-500 text-white":"bg-white/50 dark:bg-black/20"}`,title:i?`${r.length}/${n.wipLimit} (WIP limit${o?" exceeded!":d?" reached":""})`:void 0,children:[r.length,i&&`/${n.wipLimit}`]})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-2 space-y-2",children:[0===r.length&&s.showEmptyColumns&&(0,l.jsx)("div",{className:"text-center py-8 text-zinc-400 dark:text-zinc-500 text-sm",children:"No tasks"}),r.map(e=>{let s,n=W===e.id,r=eg(e.priority);return(0,l.jsxs)("div",{draggable:!0,onDragStart:t=>{var s;let n;return O(s=e.id),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",s),void((n=t.currentTarget)&&t.dataTransfer.setDragImage(n,20,20))},onDragEnd:ez,onClick:()=>{I(e.id)},className:`bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-700 p-2 sm:p-3 cursor-pointer hover:shadow-md transition-all ${n?"opacity-50 scale-95":""}`,style:r?{borderLeftWidth:3,borderLeftColor:r}:void 0,children:[(0,l.jsx)("div",{className:"text-xs sm:text-sm text-zinc-900 dark:text-zinc-100 line-clamp-2",children:(0,l.jsx)(l3,{text:e.plainText||e.text,linkPatterns:x,markerColors:t})}),(0,l.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1.5",children:[e.dueDate&&(0,l.jsxs)("span",{className:`px-1.5 py-0.5 text-xs rounded ${e.isOverdue?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":e.isDueToday?"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:["📅 ",e.dueDateDisplay]}),e.assignedPeople.length>0&&(0,l.jsxs)("span",{className:"px-1.5 py-0.5 text-xs rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:["👤 ",e.assignedPeople.slice(0,2).join(", "),e.assignedPeople.length>2&&` +${e.assignedPeople.length-2}`]}),e.projects.length>0&&(0,l.jsxs)("span",{className:"px-1.5 py-0.5 text-xs rounded bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:["📁 ",e.projects[0]]}),e.priority&&(0,l.jsx)("span",{className:"px-1.5 py-0.5 text-xs rounded",style:{backgroundColor:r?r+"33":void 0,color:r},children:e.priority}),e.hasComments&&(0,l.jsxs)("span",{className:"px-1.5 py-0.5 text-xs rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400",children:["💬 ",e.commentCount]}),e.subtasks&&e.subtasks.length>0&&(0,l.jsxs)("span",{className:"px-1.5 py-0.5 text-xs rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400",children:["☑️ ",e.subtasks.filter(e=>e.completed).length,"/",e.subtasks.length]}),e.sprint&&((s=M.find(t=>t.id===e.sprint))?(0,l.jsxs)("span",{className:"px-1.5 py-0.5 text-xs rounded bg-cyan-100 dark:bg-cyan-900/30 text-cyan-700 dark:text-cyan-300",children:["🏃 ",s.name]}):null),e.hasTimeTracking&&(0,l.jsxs)("span",{className:`px-1.5 py-0.5 text-xs rounded flex items-center gap-1 ${e.isTrackingTime?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400"}`,children:[e.isTrackingTime?"⏱️":"🕐"," ",e.totalTrackedTimeDisplay]})]})]},e.id)})]})]},n.id)})})}),em&&(0,l.jsx)(ok,{todo:em,todos:e,isOpen:!0,onClose:ew,onEdit:(e,t,s,n)=>{a(e,t,s,n)},onToggle:e=>{n(e),ew()},onDelete:e=>{r(e),ew()},onDuplicate:E,onArchive:i?e=>{i(e),ew()}:void 0,onUnarchive:d?e=>{d(e),ew()}:void 0,availablePeople:u,availableProjects:h,availablePriorities:g,linkPatterns:x,markerColors:t,settings:m,onAddPerson:f,onAddProject:k,onAddPriority:j,onAddComment:y,onAddSubtask:z,onToggleSubtask:w,onEditSubtask:N,onDeleteSubtask:C,onStartTimeTracking:D,onStopTimeTracking:S,onAddManualTimeEntry:T,onDeleteTimeEntry:P,onCreateTemplate:A})]})}let oA={setPriority:!1,priority:"",setProject:!1,project:"",setAssignee:!1,assignee:"",setSprint:!1,sprint:"",setSource:!1,source:"",setDueDate:!1,dueDate:"",setTags:!1,tags:""};function oE({isOpen:e,onClose:t,onApply:s,selectedCount:n,priorities:r,projects:a,people:i,sprints:d}){let[c,m]=(0,o.useState)(oA),x=(0,o.useCallback)(()=>{s(c),m(oA)},[c,s]),u=(0,o.useCallback)(()=>{t(),m(oA)},[t]);if(!e)return null;let h=!c.setPriority&&!c.setProject&&!c.setAssignee&&!c.setSprint&&!c.setSource&&!c.setDueDate&&!c.setTags;return(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:u}),(0,l.jsxs)("div",{className:"relative bg-white dark:bg-zinc-900 rounded-xl shadow-xl w-full max-w-md p-6 space-y-6 max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[(0,l.jsxs)("span",{children:["Edit ",n," Task",1===n?"":"s"]}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.batchProcessing})]}),(0,l.jsx)("button",{onClick:u,className:"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5"})})]}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Check the fields you want to update. Empty values will clear the field."}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:c.setPriority,onChange:e=>m(t=>({...t,setPriority:e.target.checked})),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Set Priority"})]}),c.setPriority&&(0,l.jsxs)("select",{value:c.priority,onChange:e=>m(t=>({...t,priority:e.target.value})),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"No Priority (Clear)"}),r.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.name))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:c.setProject,onChange:e=>m(t=>({...t,setProject:e.target.checked})),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Add Project"})]}),c.setProject&&(0,l.jsxs)("select",{value:c.project,onChange:e=>m(t=>({...t,project:e.target.value})),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Clear All Projects"}),a.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:c.setAssignee,onChange:e=>m(t=>({...t,setAssignee:e.target.checked})),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Add Assignee"})]}),c.setAssignee&&(0,l.jsxs)("select",{value:c.assignee,onChange:e=>m(t=>({...t,assignee:e.target.value})),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Clear All Assignees"}),i.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:c.setSprint,onChange:e=>m(t=>({...t,setSprint:e.target.checked})),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Set Sprint"})]}),c.setSprint&&(0,l.jsxs)("select",{value:c.sprint,onChange:e=>m(t=>({...t,sprint:e.target.value})),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"No Sprint (Backlog)"}),d.filter(e=>"active"===e.state&&("planning"===e.status||"active"===e.status)).map(e=>(0,l.jsxs)("option",{value:e.id,children:[e.name," ","active"===e.status?"🏃":""]},e.id))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:c.setSource,onChange:e=>m(t=>({...t,setSource:e.target.checked})),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Add Source"})]}),c.setSource&&(0,l.jsxs)("select",{value:c.source,onChange:e=>m(t=>({...t,source:e.target.value})),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Clear All Sources"}),i.map(e=>(0,l.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:c.setDueDate,onChange:e=>m(t=>({...t,setDueDate:e.target.checked})),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Set Due Date"})]}),c.setDueDate&&(0,l.jsx)("input",{type:"date",value:c.dueDate,onChange:e=>m(t=>({...t,dueDate:e.target.value})),className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:c.setTags,onChange:e=>m(t=>({...t,setTags:e.target.checked})),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Add Tags"})]}),c.setTags&&(0,l.jsx)("input",{type:"text",value:c.tags,onChange:e=>m(t=>({...t,tags:e.target.value})),placeholder:"tag1, tag2, tag3 (comma-separated)",className:"w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("button",{onClick:u,className:"px-4 py-2 text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:"Cancel"}),(0,l.jsx)("button",{onClick:x,disabled:h,className:"px-4 py-2 text-sm font-medium bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-300 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"Apply Changes"})]})]})]})}function oM({isOpen:e,onClose:t,presetName:s,onPresetNameChange:n,onSave:r,onDelete:a,viewPresets:i}){return e?(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:t,children:(0,l.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"Save View Preset"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.viewPresets})]}),(0,l.jsx)("button",{onClick:t,className:"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200 transition-colors",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Preset Name"}),(0,l.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),placeholder:"Enter preset name...",className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:e=>{"Enter"===e.key&&s.trim()&&r(s.trim())}})]}),(0,l.jsx)("button",{onClick:()=>s.trim()&&r(s.trim()),disabled:!s.trim(),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-400 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors mb-4",children:"Save as New Preset"}),i.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-2",children:"Or overwrite existing:"}),(0,l.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:i.map(e=>(0,l.jsxs)("div",{className:"group flex items-center justify-between p-4 bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 hover:shadow-md transition-all",children:[(0,l.jsx)("button",{onClick:()=>r(e.name),className:"flex-1 text-left font-medium text-zinc-900 dark:text-zinc-100 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:e.name}),(0,l.jsx)("button",{onClick:()=>a(e.name),className:"ml-2 p-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-400 rounded-md transition-colors opacity-0 group-hover:opacity-100",title:"Delete preset",children:(0,l.jsx)(oe.TrashIcon,{className:"w-4 h-4"})})]},e.name))})]})]})})}):null}function o$({history:e,onSelect:t,onRemove:s,onClear:n,isVisible:r}){return r&&0!==e.length?(0,l.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("span",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase",children:"Recent Searches"}),(0,l.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"text-xs text-zinc-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",children:"Clear All"})]}),(0,l.jsx)("ul",{className:"py-1",children:e.map(e=>(0,l.jsxs)("li",{className:"flex items-center justify-between px-3 py-2 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors group cursor-pointer",onClick:()=>t(e.query),children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,l.jsx)(oe.ClockIcon,{className:"w-4 h-4 text-zinc-400 flex-shrink-0"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300 truncate",children:e.query})]}),(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:"p-1 text-zinc-400 hover:text-red-600 dark:hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all",title:"Remove from history",children:(0,l.jsx)(oe.CloseIcon,{className:"w-3.5 h-3.5"})})]},e.id))})]}):null}function oR({filters:e,setFilters:t,showFilters:s,setShowFilters:n,hasActiveFilters:r,sortField:a,setSortField:i,sortDirection:d,setSortDirection:c,groupBy:m,setGroupBy:x,viewPresets:u,activePreset:h,onLoadPreset:p,onOpenSavePreset:g,searchHistory:b,addToSearchHistory:f,removeFromSearchHistory:k,clearSearchHistory:j,features:y,templates:v,todosCount:z,isSelectionMode:w,toggleSelectionMode:N,isDragMode:C,toggleDragMode:D,onShowTemplatesManager:S,onExport:T,searchInputRef:P}){let[A,E]=(0,o.useState)(!1),[M,$]=(0,o.useState)(!1),[R,I]=(0,o.useState)(!1),F=(0,o.useRef)(null),L=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=e=>{F.current&&!F.current.contains(e.target)&&$(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,o.useEffect)(()=>{let e=e=>{L.current&&!L.current.contains(e.target)&&I(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let W=e=>{T(e),$(!1),I(!1)};return(0,l.jsxs)(l.Fragment,{children:[u.length>0&&(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Views:"}),u.map(e=>(0,l.jsx)("button",{onClick:()=>p(e),className:`px-3 py-1.5 rounded-lg font-medium transition-colors text-sm ${h===e.name?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:e.name},e.name)),"custom"===h&&r&&(0,l.jsx)("span",{className:"px-3 py-1.5 rounded-lg font-medium text-sm bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",children:"Custom"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 lg:gap-3",children:[(0,l.jsxs)("div",{className:"relative w-[140px] sm:w-[180px] lg:w-[250px] xl:w-[300px] flex-shrink-0","data-tutorial":"search-bar",children:[(0,l.jsx)("input",{ref:P,"data-testid":"search-input",type:"text",placeholder:"Search... (/)",value:e.searchText,onChange:e=>t(t=>({...t,searchText:e.target.value})),onFocus:()=>{""===e.searchText&&b.length>0&&E(!0)},onBlur:()=>{setTimeout(()=>E(!1),200)},onKeyDown:t=>{"Enter"===t.key&&e.searchText.trim()?(f(e.searchText.trim()),E(!1)):"Escape"===t.key&&E(!1)},className:"w-full px-3 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"}),(0,l.jsx)(o$,{history:b,onSelect:e=>{t(t=>({...t,searchText:e})),f(e),E(!1)},onRemove:k,onClear:j,isVisible:A&&""===e.searchText})]}),(0,l.jsxs)("button",{onClick:()=>n(!s),className:`p-2 rounded-lg font-medium transition-colors flex items-center gap-1 whitespace-nowrap flex-shrink-0 ${s||r?"bg-blue-600 text-white hover:bg-blue-700":"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-300 dark:hover:bg-zinc-600"}`,title:s?"Hide filters":"Show filters","data-tutorial":"filter-button",children:[(0,l.jsx)(oe.FilterIcon,{className:"w-5 h-5"}),r&&(0,l.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-white/20 rounded-full",children:Object.values(e).filter(e=>e&&("string"==typeof e?e:e.size>0)).length})]}),(0,l.jsxs)("div",{className:"hidden sm:flex items-center gap-2 flex-shrink-0","data-tutorial":"group-sort",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 whitespace-nowrap hidden lg:inline",children:"Group:"}),(0,l.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"px-2 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",title:"Group by",children:[(0,l.jsx)("option",{value:"none",children:"No Group"}),(0,l.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,l.jsx)("option",{value:"priority",children:"Priority"}),(0,l.jsx)("option",{value:"project",children:"Project"}),(0,l.jsx)("option",{value:"category",children:"Category"}),(0,l.jsx)("option",{value:"assigned",children:"Assigned"}),(0,l.jsx)("option",{value:"sprint",children:"Sprint"})]})]}),(0,l.jsxs)("div",{className:"hidden sm:flex items-center gap-1 flex-shrink-0",children:[(0,l.jsx)("label",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 whitespace-nowrap hidden lg:inline",children:"Sort:"}),(0,l.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"px-2 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",title:"Sort by",children:[(0,l.jsx)("option",{value:"manual",children:"Manual"}),(0,l.jsx)("option",{value:"created",children:"Created"}),(0,l.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,l.jsx)("option",{value:"duration",children:"Duration"}),(0,l.jsx)("option",{value:"priority",children:"Priority"}),(0,l.jsx)("option",{value:"assigned",children:"Assigned"}),(0,l.jsx)("option",{value:"source",children:"Source"}),(0,l.jsx)("option",{value:"mentioned",children:"Mentioned"}),(0,l.jsx)("option",{value:"project",children:"Project"}),(0,l.jsx)("option",{value:"timeSpent",children:"Time Spent"}),(0,l.jsx)("option",{value:"title",children:"Title"})]}),(0,l.jsx)("button",{onClick:()=>c("asc"===d?"desc":"asc"),className:`px-2 py-2 rounded-lg font-mono text-sm transition-all ${"desc"===d?"bg-amber-200 dark:bg-amber-700 text-amber-900 dark:text-amber-100 shadow-[inset_0_2px_4px_rgba(0,0,0,0.2)]":"bg-white dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 shadow-sm hover:bg-zinc-50 dark:hover:bg-zinc-700"}`,title:"asc"===d?"Ascending":"Descending",children:"asc"===d?"abc":"cba"})]}),(0,l.jsx)("button",{onClick:g,className:"p-2 rounded-lg bg-green-600 hover:bg-green-700 text-white font-medium transition-colors flex-shrink-0",title:"Save current view","data-tutorial":"save-preset",children:(0,l.jsx)(oe.DownloadIcon,{className:"w-5 h-5"})}),(0,l.jsx)("div",{className:"hidden lg:block w-px h-6 bg-zinc-300 dark:bg-zinc-600 flex-shrink-0"}),y?.templates&&v.length>0&&(0,l.jsx)("button",{onClick:S,className:"hidden lg:flex p-2 rounded-lg text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors flex-shrink-0",title:"Templates",children:(0,l.jsx)(oe.TemplateIcon,{className:"w-5 h-5"})}),y?.batchProcessing&&(0,l.jsx)("button",{onClick:N,"data-testid":"selection-mode-button",className:`hidden lg:flex p-2 rounded-lg transition-colors flex-shrink-0 ${w?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,title:w?"Exit Selection Mode":"Selection Mode",children:(0,l.jsx)(oe.ClipboardCheckIcon,{className:"w-5 h-5"})}),y?.reordering&&(0,l.jsx)("button",{onClick:D,className:`hidden lg:flex p-2 rounded-lg transition-colors flex-shrink-0 ${C?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,title:C?"Exit Reorder Mode":"Reorder Mode",children:(0,l.jsx)(oe.DragDotsIcon,{className:"w-5 h-5"})}),y?.exports&&(0,l.jsxs)("div",{ref:F,className:"hidden lg:block relative flex-shrink-0",children:[(0,l.jsx)("button",{onClick:()=>$(!M),className:`p-2 rounded-lg transition-colors ${M?"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,title:"Export",children:(0,l.jsx)(oe.DownloadIcon,{className:"w-5 h-5"})}),M&&(0,l.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-zinc-200 dark:border-zinc-700 py-1 z-50",children:[(0,l.jsxs)("button",{onClick:()=>W("markdown"),className:"w-full px-4 py-2 text-left text-sm text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center gap-2",children:[(0,l.jsx)(oe.DocumentIcon,{className:"w-4 h-4"}),"Markdown (.md)"]}),(0,l.jsxs)("button",{onClick:()=>W("csv"),className:"w-full px-4 py-2 text-left text-sm text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center gap-2",children:[(0,l.jsx)(oe.TableIcon,{className:"w-4 h-4"}),"CSV (.csv)"]}),(0,l.jsxs)("button",{onClick:()=>W("json"),className:"w-full px-4 py-2 text-left text-sm text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center gap-2",children:[(0,l.jsx)(oe.CodeIcon,{className:"w-4 h-4"}),"JSON (.json)"]}),(0,l.jsx)("div",{className:"px-4 py-1 text-xs text-zinc-400 dark:text-zinc-500 border-t border-zinc-200 dark:border-zinc-700 mt-1",children:r?"Exports filtered todos":"Exports all todos"})]})]}),z>0&&(0,l.jsxs)("div",{ref:L,className:"lg:hidden relative flex-shrink-0",children:[(0,l.jsx)("button",{onClick:()=>I(!R),className:`p-2 rounded-lg transition-colors ${R||w||C?"bg-zinc-200 dark:bg-zinc-700 text-zinc-700 dark:text-zinc-300":"text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,title:"More options",children:(0,l.jsx)(oe.MoreVerticalIcon,{className:"w-5 h-5"})}),R&&(0,l.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-zinc-800 rounded-lg shadow-lg border border-zinc-200 dark:border-zinc-700 py-1 z-50",children:[(0,l.jsxs)("div",{className:"sm:hidden px-4 py-2 border-b border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1",children:"Group by"}),(0,l.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-2 py-1.5 rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"none",children:"No Group"}),(0,l.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,l.jsx)("option",{value:"priority",children:"Priority"}),(0,l.jsx)("option",{value:"project",children:"Project"}),(0,l.jsx)("option",{value:"category",children:"Category"}),(0,l.jsx)("option",{value:"assigned",children:"Assigned"}),(0,l.jsx)("option",{value:"sprint",children:"Sprint"})]})]}),(0,l.jsxs)("div",{className:"sm:hidden px-4 py-2 border-b border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-1",children:"Sort by"}),(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"flex-1 px-2 py-1.5 rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"manual",children:"Manual"}),(0,l.jsx)("option",{value:"created",children:"Created"}),(0,l.jsx)("option",{value:"dueDate",children:"Due Date"}),(0,l.jsx)("option",{value:"duration",children:"Duration"}),(0,l.jsx)("option",{value:"priority",children:"Priority"}),(0,l.jsx)("option",{value:"assigned",children:"Assigned"}),(0,l.jsx)("option",{value:"source",children:"Source"}),(0,l.jsx)("option",{value:"mentioned",children:"Mentioned"}),(0,l.jsx)("option",{value:"project",children:"Project"}),(0,l.jsx)("option",{value:"timeSpent",children:"Time Spent"}),(0,l.jsx)("option",{value:"title",children:"Title"})]}),(0,l.jsx)("button",{onClick:()=>c("asc"===d?"desc":"asc"),className:`px-2 py-1.5 rounded font-mono text-sm transition-all ${"desc"===d?"bg-amber-200 dark:bg-amber-600 text-amber-900 dark:text-amber-100":"bg-zinc-100 dark:bg-zinc-600 text-zinc-700 dark:text-zinc-300"}`,title:"asc"===d?"Ascending":"Descending",children:"asc"===d?"abc":"cba"})]})]}),y?.templates&&v.length>0&&(0,l.jsxs)("button",{onClick:()=>{S(),I(!1)},className:"w-full px-4 py-2 text-left text-sm text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center gap-2",children:[(0,l.jsx)(oe.TemplateIcon,{className:"w-4 h-4"}),"Templates"]}),y?.batchProcessing&&(0,l.jsxs)("button",{onClick:()=>{N(),I(!1)},className:`w-full px-4 py-2 text-left text-sm flex items-center gap-2 ${w?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:[(0,l.jsx)(oe.ClipboardCheckIcon,{className:"w-4 h-4"}),w?"Exit Selection Mode":"Selection Mode"]}),y?.reordering&&(0,l.jsxs)("button",{onClick:()=>{D(),I(!1)},className:`w-full px-4 py-2 text-left text-sm flex items-center gap-2 ${C?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700"}`,children:[(0,l.jsx)(oe.DragDotsIcon,{className:"w-4 h-4"}),C?"Exit Reorder Mode":"Reorder Mode"]}),y?.exports&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"border-t border-zinc-200 dark:border-zinc-700 my-1"}),(0,l.jsx)("div",{className:"px-4 py-1 text-xs text-zinc-500 dark:text-zinc-400 font-medium",children:"Export"}),(0,l.jsxs)("button",{onClick:()=>W("markdown"),className:"w-full px-4 py-2 text-left text-sm text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center gap-2",children:[(0,l.jsx)(oe.DocumentIcon,{className:"w-4 h-4"}),"Markdown (.md)"]}),(0,l.jsxs)("button",{onClick:()=>W("csv"),className:"w-full px-4 py-2 text-left text-sm text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center gap-2",children:[(0,l.jsx)(oe.TableIcon,{className:"w-4 h-4"}),"CSV (.csv)"]}),(0,l.jsxs)("button",{onClick:()=>W("json"),className:"w-full px-4 py-2 text-left text-sm text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center gap-2",children:[(0,l.jsx)(oe.CodeIcon,{className:"w-4 h-4"}),"JSON (.json)"]}),(0,l.jsx)("div",{className:"px-4 py-1 text-xs text-zinc-400 dark:text-zinc-500",children:r?"Exports filtered todos":"Exports all todos"})]})]})]})]})]})}function oI({label:e,activeCount:t,options:s,selectedValues:n,onToggle:r,onSelectAll:a,onClear:i,getButtonColor:o,getButtonStyle:d,formatLabel:c=e=>e}){return 0===s.length?null:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,l.jsxs)("label",{className:"text-xs font-medium text-zinc-700 dark:text-zinc-300",children:[e," - ",t]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:a,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Select All"}),(0,l.jsx)("button",{onClick:i,className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Clear"})]})]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-1",children:s.map(e=>{let t=n.has(e);return(0,l.jsx)("button",{onClick:()=>r(e),className:o(e,t),style:d?d(e,t):void 0,children:c(e)},e)})})]})}function oF(e){return Array.from(e).sort()}function oL(e,t){return e.some(e=>t.has(e))}function oW(e,t){return void 0!==t&&e.has(t)}let oO=(e,t)=>{if(e.length!==t.length)return!1;let s=[...e].sort(),n=[...t].sort();return s.every((e,t)=>e===n[t])},oB={searchText:"",assignedPeople:new Set,sourcePeople:new Set,mentionedPeople:new Set,projects:new Set,categories:new Set,priorities:new Set,dueDates:new Set,durations:new Set,tags:new Set,recurring:new Set,dependencies:new Set};var oY=e.i(91900);function o_(e,t){let s=`- ${t?"[x]":"[ ]"} ${e.plainText}`,n=[];return e.priorityName&&n.push(`Priority: ${e.priorityName}`),e.dueDateDisplay&&n.push(`Due: ${e.dueDateDisplay}`),e.tags.length>0&&n.push(`Tags: ${e.tags.join(", ")}`),n.length>0&&(s+=` *(${n.join(" | ")})*`),s}let oH=[{id:"list-intro",title:"List View 📋",description:"The List View is your primary task management view. It shows all your tasks organized by status: Active, Completed, and Archived.",position:"center"},{id:"list-search",title:"Search & Filter 🔍",description:"Use the search bar to find tasks by text. Press / to focus it quickly.\n\nClick the filter button (or press F) to filter by:\n• Person assigned\n• Project\n• Priority\n• Due date\n• Tags\n• And more!",targetSelector:'[data-tutorial="search-bar"]',position:"bottom",spotlightPadding:8,fallbackHint:"The search bar with filter icon is below the view tabs"},{id:"list-grouping",title:"Group & Sort 📊",description:"Organize your view with grouping and sorting options:\n\n• Group by: Due Date, Priority, Project, Assigned, Sprint\n• Sort by: Created, Due Date, Priority, Title, and more\n• Toggle ascending/descending order",targetSelector:'[data-tutorial="group-sort"]',position:"bottom",spotlightPadding:8,fallbackHint:"Group and Sort dropdowns are next to the search bar"},{id:"list-presets",title:"Save View Presets 💾",description:"Create custom view presets to save your filter combinations. Click the save button to create a preset, then access it from the preset bar at the top.",targetSelector:'[data-tutorial="save-preset"]',position:"bottom",spotlightPadding:8,fallbackHint:"The save preset button (💾) is in the toolbar area near filters"},{id:"list-selection",title:"Batch Operations ✅",description:"Press S to enter selection mode. Select multiple tasks, then:\n• Complete them all\n• Archive them\n• Delete them\n• Edit properties in bulk",position:"center"},{id:"list-complete",title:"You're All Set! 🎉",description:"You now know how to use the List View effectively. Try the other views (Kanban, Gantt, Calendar) for different perspectives on your tasks!",position:"center"}],oU=(0,o.forwardRef)(function({todos:e,settings:t,sortedPeople:s,sortedProjects:n,sortedPriorities:r,sprints:a,nextPlannedSprint:i,features:d,templates:c,onShowTemplatesManager:m,searchHistory:x,addToSearchHistory:u,removeFromSearchHistory:h,clearSearchHistory:g,toggleTodo:b,deleteTodo:f,archiveTodo:k,unarchiveTodo:j,editTodo:y,reorderTodos:v,onAddPerson:z,onAddProject:w,onAddPriority:N,addTodoComment:C,editTodoComment:D,deleteTodoComment:S,onOpenTodoDetails:T,undoActions:P,fadingOutIds:A,undo:E,dismissUndo:M,dependencyBlockNotification:$},R){let I=(0,o.useRef)(null),{showConfirmDialog:F,ConfirmDialogComponent:L}=(0,oY.useConfirmDialog)(),{filters:W,setFilters:O,showFilters:B,setShowFilters:Y,filterOptions:_,hasActiveFilters:H,sortField:U,setSortField:V,sortDirection:q,setSortDirection:K,groupBy:G,setGroupBy:J,activeQuickFilter:Z,setActiveQuickFilter:Q,quickFilterCounts:X,activeExpanded:ee,setActiveExpanded:et,completedExpanded:es,setCompletedExpanded:en,archivedExpanded:er,setArchivedExpanded:ea,viewPresets:ei,activePreset:el,isSavePresetOpen:eo,setIsSavePresetOpen:ed,presetName:ec,setPresetName:em,handleFilterClick:ex,handleSelectAll:eu,handleClearAll:eh,handleClearAllFilters:ep,applyFilters:eg,sortTodos:eb,groupTodos:ef,loadPreset:ek,savePreset:ej,deletePreset:ey}=function({todos:e,projects:t,settings:s}){let[n,r]=(0,o.useState)({...oB}),[a,i]=(0,o.useState)(!1),[l,d]=(0,o.useState)("priority"),[c,m]=(0,o.useState)("asc"),[x,u]=(0,o.useState)("dueDate"),[h,g]=(0,o.useState)("all"),[b,f]=(0,o.useState)(!0),[k,j]=(0,o.useState)(!0),[y,v]=(0,o.useState)(!1),[z,w]=(0,o.useState)([]),[N,C]=(0,o.useState)("custom"),[D,S]=(0,o.useState)(!1),[T,P]=(0,o.useState)(""),[A,E]=(0,o.useState)(!1),[M,$]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(0,p.waitForStorageInit)().then(()=>(0,p.loadFromStorage)(p.STORAGE_KEYS.VIEW_PRESETS,[])).then(e=>{w(e),$(!0)})},[]),(0,o.useEffect)(()=>{M&&(0,p.saveToStorage)(p.STORAGE_KEYS.VIEW_PRESETS,z)},[z,M]),(0,o.useEffect)(()=>{(0,p.loadFromStorage)(p.STORAGE_KEYS.VIEW_OPTIONS,{}).then(e=>{e.filters&&r({searchText:e.filters.searchText||"",assignedPeople:new Set(e.filters.assignedPeople||[]),sourcePeople:new Set(e.filters.sourcePeople||[]),mentionedPeople:new Set(e.filters.mentionedPeople||[]),projects:new Set(e.filters.projects||[]),categories:new Set(e.filters.categories||[]),priorities:new Set(e.filters.priorities||[]),dueDates:new Set(e.filters.dueDates||[]),durations:new Set(e.filters.durations||[]),tags:new Set(e.filters.tags||[]),recurring:new Set(e.filters.recurring||[]),dependencies:new Set(e.filters.dependencies||[])}),e.sortField&&d(e.sortField),e.sortDirection&&m(e.sortDirection),e.groupBy&&u(e.groupBy),e.quickFilter&&g(e.quickFilter),e.sections&&(void 0!==e.sections.activeExpanded&&f(e.sections.activeExpanded),void 0!==e.sections.completedExpanded&&j(e.sections.completedExpanded),void 0!==e.sections.archivedExpanded&&v(e.sections.archivedExpanded)),E(!0)})},[]),(0,o.useEffect)(()=>{if(!A)return;let e={filters:{searchText:n.searchText,assignedPeople:Array.from(n.assignedPeople),sourcePeople:Array.from(n.sourcePeople),mentionedPeople:Array.from(n.mentionedPeople),projects:Array.from(n.projects),categories:Array.from(n.categories),priorities:Array.from(n.priorities),dueDates:Array.from(n.dueDates),durations:Array.from(n.durations),tags:Array.from(n.tags),recurring:Array.from(n.recurring),dependencies:Array.from(n.dependencies)},sortField:l,sortDirection:c,groupBy:x,quickFilter:h,sections:{activeExpanded:b,completedExpanded:k,archivedExpanded:y}};(0,p.saveToStorage)(p.STORAGE_KEYS.VIEW_OPTIONS,e);let t=z.find(e=>e.filters.searchText===n.searchText&&oO(e.filters.assignedPeople,Array.from(n.assignedPeople))&&oO(e.filters.sourcePeople,Array.from(n.sourcePeople))&&oO(e.filters.mentionedPeople,Array.from(n.mentionedPeople))&&oO(e.filters.projects,Array.from(n.projects))&&oO(e.filters.categories||[],Array.from(n.categories))&&oO(e.filters.priorities,Array.from(n.priorities))&&oO(e.filters.dueDates,Array.from(n.dueDates))&&oO(e.filters.durations,Array.from(n.durations))&&oO(e.filters.tags||[],Array.from(n.tags))&&oO(e.filters.recurring||[],Array.from(n.recurring))&&oO(e.filters.dependencies||[],Array.from(n.dependencies))&&e.sortField===l&&e.sortDirection===c&&e.groupBy===x&&(e.quickFilter||"all")===h&&(e.sections?.activeExpanded??!0)===b&&(e.sections?.completedExpanded??!1)===k&&(e.sections?.archivedExpanded??!1)===y);C(t?t.name:"custom")},[A,n,l,c,x,h,b,k,y,z]);let R=(0,o.useMemo)(()=>{let t=e.filter(e=>e.isActive);return{all:t.length,today:t.filter(e=>e.isDueToday).length,overdue:t.filter(e=>e.isOverdue).length,thisWeek:t.filter(e=>e.isDueThisWeek).length,noDueDate:t.filter(e=>!e.hasDueDate).length}},[e]),I=(0,o.useMemo)(()=>{let s=new Set,n=new Set,r=new Set,a=new Set,i=new Set,l=new Set,o=new Set,d=new Set,c=new Set,m=new Set,x=new Set;return e.forEach(e=>{e.assignedPeople.forEach(e=>s.add(e)),e.sourcePeople.forEach(e=>n.add(e)),e.mentionedPeople.forEach(e=>r.add(e)),e.projects.forEach(e=>{a.add(e);let s=t.find(t=>t.matchesAnyName([e]));s?.category&&x.add(s.category)}),e.priority&&i.add(e.priority),e.dueDateDisplay&&l.add(e.dueDateDisplay),e.durationDisplay&&o.add(e.durationDisplay),e.tags.forEach(e=>d.add(e)),e.recurring&&c.add(e.recurring),e.dependencies.forEach(e=>m.add(e))}),{assignedPeople:oF(s),sourcePeople:oF(n),mentionedPeople:oF(r),projects:oF(a),categories:Array.from(x),priorities:oF(i),dueDates:oF(l),durations:oF(o),tags:oF(d),recurring:oF(c),dependencies:oF(m)}},[e,t]),F=""!==n.searchText||n.assignedPeople.size>0||n.sourcePeople.size>0||n.mentionedPeople.size>0||n.projects.size>0||n.categories.size>0||n.priorities.size>0||n.dueDates.size>0||n.durations.size>0||n.tags.size>0||n.recurring.size>0||n.dependencies.size>0||"all"!==h,L=(0,o.useCallback)((e,t)=>{r(s=>{let n=new Set(s[e]);return n.has(t)?n.delete(t):n.add(t),{...s,[e]:n}}),a||i(!0)},[a]),W=(0,o.useCallback)(e=>{let t=I[e];r(s=>({...s,[e]:new Set(t)}))},[I]),O=(0,o.useCallback)(e=>{r(t=>({...t,[e]:new Set}))},[]),B=(0,o.useCallback)(()=>{r({...oB}),g("all")},[]),Y=(0,o.useCallback)(e=>e.filter(e=>{if("all"!==h&&e.isActive)switch(h){case"today":if(!e.isDueToday)return!1;break;case"overdue":if(!e.isOverdue)return!1;break;case"thisWeek":if(!e.isDueThisWeek)return!1;break;case"noDueDate":if(e.hasDueDate)return!1}return(!n.searchText||!!e.matchesSearch(n.searchText))&&(!(n.assignedPeople.size>0)||!!oL(e.assignedPeople,n.assignedPeople))&&(!(n.sourcePeople.size>0)||!!oL(e.sourcePeople,n.sourcePeople))&&(!(n.mentionedPeople.size>0)||!!oL(e.mentionedPeople,n.mentionedPeople))&&(!(n.projects.size>0)||!!oL(e.projects,n.projects))&&(!(n.categories.size>0)||!!oL(e.projects.map(e=>{let s=t.find(t=>t.matchesAnyName([e]));return s?.category}).filter(e=>!!e),n.categories))&&(!(n.priorities.size>0)||!!oW(n.priorities,e.priority))&&(!(n.dueDates.size>0)||!!oW(n.dueDates,e.dueDateDisplay))&&(!(n.durations.size>0)||!!oW(n.durations,e.durationDisplay))&&(!(n.tags.size>0)||!!oL(e.tags,n.tags))&&(!(n.recurring.size>0)||!!oW(n.recurring,e.recurring))&&(!(n.dependencies.size>0)||!!oL(e.dependencies,n.dependencies))&&!0}),[n,h,t]),_=(0,o.useCallback)(e=>[...e].sort((e,t)=>{let s=0;switch(l){case"manual":default:s=0;break;case"dueDate":{let n=e.metadata.dueDate,r=t.metadata.dueDate;s=n||r?n?r?n.localeCompare(r):-1:1:0;break}case"duration":s=(e.durationMinutes||0)-(t.durationMinutes||0);break;case"assigned":{let n=e.assignedPeople[0]||"",r=t.assignedPeople[0]||"";s=n.localeCompare(r);break}case"source":{let n=e.sourcePeople[0]||"",r=t.sourcePeople[0]||"";s=n.localeCompare(r);break}case"mentioned":{let n=e.mentionedPeople[0]||"",r=t.mentionedPeople[0]||"";s=n.localeCompare(r);break}case"project":{let n=e.projects[0]||"",r=t.projects[0]||"";s=n.localeCompare(r);break}case"priority":s=(e.priorityOrder??999)-(t.priorityOrder??999);break;case"timeSpent":s=(e.totalTrackedMinutes||0)-(t.totalTrackedMinutes||0);break;case"created":s=(e.createdAt||0)-(t.createdAt||0);break;case"title":s=e.plainText.localeCompare(t.plainText)}return"asc"===c?s:-s}),[l,c]),H=(0,o.useCallback)(e=>{if("none"===x)return{"":e};if("dueDate"===x){let t={},s=new Date;s.setHours(0,0,0,0);let n=s.getTime();e.forEach(e=>{let s,r=e.metadata.dueDate;if(r){let e=new Date(r);if(isNaN(e.getTime()))s="Invalid Date";else{e.setHours(0,0,0,0);let t=Math.floor((e.getTime()-n)/864e5);s=t<0?"Overdue":0===t?"Today":1===t?"Tomorrow":t<=7?"This Week":t<=30?"This Month":"Later"}}else s="No Due Date";t[s]||(t[s]=[]),t[s].push(e)});let r={};return["Overdue","Today","Tomorrow","This Week","This Month","Later","No Due Date","Invalid Date"].forEach(e=>{t[e]&&(r[e]=t[e])}),r}if("priority"===x){let t={};e.forEach(e=>{let s=e.priority||"No Priority";t[s]||(t[s]=[]),t[s].push(e)});let n={};s.priorities.forEach(e=>{n[e.name]=e.order,e.alternatives?.forEach(t=>{n[t]=e.order})}),n["No Priority"]=999;let r=Object.keys(t).sort((e,t)=>(n[e]??998)-(n[t]??998)),a={};return r.forEach(e=>{a[e]=t[e]}),a}if("project"===x){let t={};return e.forEach(e=>{let s=e.projects;if(0===s.length){let s="No Project";t[s]||(t[s]=[]),t[s].push(e)}else s.forEach(s=>{t[s]||(t[s]=[]),t[s].push(e)})}),t}if("category"===x){let n={};return e.forEach(e=>{let r=e.projects,a=new Set;if(r.forEach(e=>{let n=t.find(t=>t.matchesAnyName([e]));if(n?.category){let e=s.categories?.find(e=>e.id===n.category);e&&a.add(e.name)}}),0===a.size){let t="No Category";n[t]||(n[t]=[]),n[t].push(e)}else a.forEach(t=>{n[t]||(n[t]=[]),n[t].push(e)})}),n}if("assigned"===x){let t={};return e.forEach(e=>{let s=e.assignedPeople;if(0===s.length){let s="Unassigned";t[s]||(t[s]=[]),t[s].push(e)}else s.forEach(s=>{t[s]||(t[s]=[]),t[s].push(e)})}),t}if("sprint"===x){let t={};return e.forEach(e=>{let s=e.sprint||"No Sprint";t[s]||(t[s]=[]),t[s].push(e)}),t}return{"":e}},[x,s.priorities,s.categories,t]),U=(0,o.useCallback)(e=>{r({searchText:e.filters.searchText,assignedPeople:new Set(e.filters.assignedPeople),sourcePeople:new Set(e.filters.sourcePeople),mentionedPeople:new Set(e.filters.mentionedPeople),projects:new Set(e.filters.projects),categories:new Set(e.filters.categories||[]),priorities:new Set(e.filters.priorities),dueDates:new Set(e.filters.dueDates),durations:new Set(e.filters.durations),tags:new Set(e.filters.tags||[]),recurring:new Set(e.filters.recurring||[]),dependencies:new Set(e.filters.dependencies||[])}),d(e.sortField),m(e.sortDirection),u(e.groupBy),g(e.quickFilter||"all"),e.sections&&(f(e.sections.activeExpanded),j(e.sections.completedExpanded),v(e.sections.archivedExpanded)),C(e.name)},[]),V=(0,o.useCallback)(e=>{let t={name:e,filters:{searchText:n.searchText,assignedPeople:Array.from(n.assignedPeople),sourcePeople:Array.from(n.sourcePeople),mentionedPeople:Array.from(n.mentionedPeople),projects:Array.from(n.projects),categories:Array.from(n.categories),priorities:Array.from(n.priorities),dueDates:Array.from(n.dueDates),durations:Array.from(n.durations),tags:Array.from(n.tags),recurring:Array.from(n.recurring),dependencies:Array.from(n.dependencies)},sortField:l,sortDirection:c,groupBy:x,quickFilter:h,sections:{activeExpanded:b,completedExpanded:k,archivedExpanded:y}};w(s=>{let n=s.findIndex(t=>t.name===e);if(n>=0){let e=[...s];return e[n]=t,e}return[...s,t]}),C(e),S(!1),P("")},[n,l,c,x,h,b,k,y]),q=(0,o.useCallback)(e=>{w(t=>t.filter(t=>t.name!==e)),N===e&&C("custom")},[N]);return{filters:n,setFilters:r,showFilters:a,setShowFilters:i,filterOptions:I,hasActiveFilters:F,sortField:l,setSortField:d,sortDirection:c,setSortDirection:m,groupBy:x,setGroupBy:u,activeQuickFilter:h,setActiveQuickFilter:g,quickFilterCounts:R,activeExpanded:b,setActiveExpanded:f,completedExpanded:k,setCompletedExpanded:j,archivedExpanded:y,setArchivedExpanded:v,viewPresets:z,activePreset:N,isSavePresetOpen:D,setIsSavePresetOpen:S,presetName:T,setPresetName:P,handleFilterClick:L,handleSelectAll:W,handleClearAll:O,handleClearAllFilters:B,applyFilters:Y,sortTodos:_,groupTodos:H,loadPreset:U,savePreset:V,deletePreset:q}}({todos:e,projects:n,settings:t}),[ev,ez]=(0,o.useState)(!1),[ew,eN]=(0,o.useState)(new Set),[eC,eD]=(0,o.useState)(!1),{isDragMode:eS,draggedTodoId:eT,dragOverTodoId:eP,toggleDragMode:eA,handleDragStart:eE,handleDragEnd:eM,handleDragOver:e$,handleDragLeave:eR,handleDrop:eI}=function({todos:e,reorderTodos:t}){let[s,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)(null),[i,l]=(0,o.useState)(null),d=(0,o.useCallback)(()=>{n(e=>!e),a(null),l(null)},[]),c=(0,o.useCallback)((e,t)=>{a(t),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t)},[]),m=(0,o.useCallback)(()=>{a(null),l(null)},[]),x=(0,o.useCallback)((e,t)=>{e.preventDefault(),r&&r!==t&&l(t)},[r]),u=(0,o.useCallback)(()=>{l(null)},[]),h=(0,o.useCallback)((s,n)=>{if(s.preventDefault(),!r||r===n){a(null),l(null);return}let i=e.filter(e=>e.isActive).map(e=>e.id),o=i.indexOf(r),d=i.indexOf(n);if(-1===o||-1===d){a(null),l(null);return}let c=[...i];c.splice(o,1),c.splice(d,0,r),t(c),a(null),l(null)},[r,e,t]);return{isDragMode:s,draggedTodoId:r,dragOverTodoId:i,toggleDragMode:d,handleDragStart:c,handleDragEnd:m,handleDragOver:x,handleDragLeave:u,handleDrop:h}}({todos:e,reorderTodos:v}),eF=(0,o.useCallback)(()=>{ez(e=>!e),eN(new Set)},[]),eL=(0,o.useCallback)(()=>{Y(e=>!e)},[Y]),eW=(0,o.useCallback)(()=>{I.current?.focus()},[]);(0,o.useImperativeHandle)(R,()=>({isSelectionMode:ev,toggleSelectionMode:eF,isDragMode:eS,toggleDragMode:eA,toggleFilters:eL,focusSearch:eW}),[ev,eF,eS,eA,eL,eW]);let eO=(0,o.useCallback)((e,t)=>{eN(s=>{let n=new Set(s);return t?n.add(e):n.delete(e),n})},[]);(0,o.useCallback)(e=>{eN(t=>{let s=new Set(t);return e.forEach(e=>s.add(e)),s})},[]),(0,o.useCallback)(e=>{eN(t=>{let s=new Set(t);return e.forEach(e=>s.delete(e)),s})},[]);let eB=(0,o.useCallback)(()=>{eN(new Set(e.filter(e=>!e.isDeleted).map(e=>e.id)))},[e]),eY=(0,o.useCallback)(()=>{eN(new Set)},[]),e_=(0,o.useCallback)(()=>{e.filter(e=>e.isActive&&ew.has(e.id)).forEach(e=>b(e.id)),eN(new Set)},[e,ew,b]),eH=(0,o.useCallback)(()=>{e.filter(e=>e.isCompleted&&ew.has(e.id)).forEach(e=>k(e.id)),eN(new Set)},[e,ew,k]),eU=(0,o.useCallback)(()=>{let t=e.filter(e=>ew.has(e.id));F({title:"Delete Selected Tasks",message:`Are you sure you want to delete ${t.length} task${1===t.length?"":"s"}? This cannot be undone.`,confirmText:"Delete",confirmVariant:"danger",onConfirm:()=>{t.forEach(e=>f(e.id)),eN(new Set)}})},[e,ew,f,F]),eV=(0,o.useCallback)(()=>{e.filter(e=>e.isArchived&&ew.has(e.id)).forEach(e=>j(e.id)),eN(new Set)},[e,ew,j]),eq=(0,o.useCallback)(()=>{eD(!0)},[]),eK=(0,o.useCallback)(t=>{e.filter(e=>ew.has(e.id)).forEach(e=>{let s={...e.metadata};t.setPriority&&(s.priority=t.priority||void 0),t.setProject&&(t.project?s.projects.includes(t.project)||(s.projects=[...s.projects,t.project]):s.projects=[]),t.setAssignee&&(t.assignee?s.assignedPeople.includes(t.assignee)||(s.assignedPeople=[...s.assignedPeople,t.assignee]):s.assignedPeople=[]),t.setSprint&&(s.sprint=t.sprint||void 0),t.setSource&&(t.source?s.sourcePeople.includes(t.source)||(s.sourcePeople=[...s.sourcePeople,t.source]):s.sourcePeople=[]),t.setDueDate&&(s.dueDate=t.dueDate||void 0),t.setTags&&(t.tags?t.tags.split(",").map(e=>e.trim()).filter(Boolean).forEach(e=>{(s.tags??[]).includes(e)||(s.tags=[...s.tags??[],e])}):s.tags=[]),y(e.id,e.text,e.plainText,s)}),eD(!1),eN(new Set)},[e,ew,y]),eG=(0,o.useMemo)(()=>a.map(e=>e.raw),[a]),eJ=(0,o.useMemo)(()=>i?.raw,[i]),eZ=24*t.general.archiveDays*36e5,eQ=Date.now(),eX=e.filter(e=>e.isActive),e0=e.filter(e=>!!e.isCompleted&&(!e.completedAt||eQ-e.completedAt<eZ)),e1=e.filter(e=>e.isArchived),e2=eb(eg(eX)),e4=ef(e2),e5=eb(eg(e0)),e6=eb(eg(e1)),e3=(0,o.useCallback)(t=>{let s=H?[...e2,...e5,...e6]:e,n=new Date().toISOString().split("T")[0];!function(e,t,s="todos"){let n,r,a,i,l;switch(t){case"markdown":default:n=function(e,t="Todo List"){let s=[];s.push(`# ${t}`),s.push(""),s.push(`*Exported on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}*`),s.push("");let n=e.filter(e=>e.isActive),r=e.filter(e=>e.isCompleted),a=e.filter(e=>e.isArchived);return n.length>0&&(s.push("## Active Tasks"),s.push(""),n.forEach(e=>{s.push(o_(e,!1))}),s.push("")),r.length>0&&(s.push("## Completed Tasks"),s.push(""),r.forEach(e=>{s.push(o_(e,!0))}),s.push("")),a.length>0&&(s.push("## Archived Tasks"),s.push(""),a.forEach(e=>{s.push(o_(e,!0))}),s.push("")),s.join("\n")}(e);break;case"csv":r=[["Title","Status","Priority","Due Date","Duration","Assigned","Projects","Tags","Created","Completed"]],e.forEach(e=>{var t;r.push([(t=e.plainText).includes(",")||t.includes("\n")||t.includes('"')?`"${t.replace(/"/g,'""')}"`:t,e.state,e.priorityName||"",e.dueDateDisplay||"",e.durationDisplay||"","","",e.tags.join("; "),e.createdAt?new Date(e.createdAt).toISOString():"",e.completedAt?new Date(e.completedAt).toISOString():""])}),n=r.map(e=>e.join(",")).join("\n");break;case"json":n=JSON.stringify({todos:e.map(e=>({id:e.id,title:e.plainText,fullText:e.text,state:e.state,fields:{priority:e.priorityName,dueDate:e.dueDateDisplay,duration:e.durationDisplay,recurring:e.recurring,assignedPeopleIds:e.assignedPeopleIds,sourcePeopleIds:e.sourcePeopleIds,mentionedPeopleIds:e.mentionedPeopleIds,projectIds:e.projectIds,tags:e.tags,dependencyIds:e.dependencyIds},timestamps:{created:e.createdAt,updated:e.updatedAt,completed:e.completedAt,archived:e.archivedAt},commentsCount:e.commentCount})),exportedAt:new Date().toISOString()},null,2)}let o=function(e){switch(e){case"markdown":return"text/markdown";case"csv":return"text/csv";case"json":return"application/json";default:return"text/plain"}}(t),d=function(e){switch(e){case"markdown":return"md";case"csv":return"csv";case"json":return"json";default:return"txt"}}(t),c=`${s}.${d}`;a=new Blob([n],{type:o}),i=URL.createObjectURL(a),(l=document.createElement("a")).href=i,l.download=c,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i)}(s,t,`todos-${n}`)},[H,e2,e5,e6,e]),e9=(e,t,s)=>s?"px-2 py-0.5 text-xs rounded transition-colors":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 px-2 py-0.5 text-xs rounded transition-colors",e7=(e,s,n)=>{if(!n)return;let r=t.markerColors[({assignedPeople:"assigned",projects:"project",categories:"project",sourcePeople:"source",mentionedPeople:"mentioned",priorities:"priority",dueDates:"dueDate",durations:"duration",tags:"tag",recurring:"recurring",dependencies:"dependency"})[e]],a=(0,ob.getTextColor)(r);return{backgroundColor:r,color:a}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-6 space-y-3",children:[(0,l.jsx)(oR,{filters:W,setFilters:O,showFilters:B,setShowFilters:Y,hasActiveFilters:H,sortField:U,setSortField:V,sortDirection:q,setSortDirection:K,groupBy:G,setGroupBy:J,viewPresets:ei,activePreset:el,onLoadPreset:ek,onOpenSavePreset:()=>ed(!0),searchHistory:x,addToSearchHistory:u,removeFromSearchHistory:h,clearSearchHistory:g,features:d,templates:c,todosCount:e.length,isSelectionMode:ev,toggleSelectionMode:eF,isDragMode:eS,toggleDragMode:eA,onShowTemplatesManager:m,onExport:e3,searchInputRef:I}),B&&(0,l.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800 p-3 lg:p-4 space-y-2 lg:space-y-3","data-tutorial":"filters",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-3 lg:gap-x-6 lg:gap-y-4 [&>*]:lg:pl-6 [&>*]:lg:border-l [&>*]:lg:border-zinc-200 [&>*]:dark:lg:border-zinc-700 [&>*:first-child]:lg:pl-0 [&>*:first-child]:lg:border-l-0 [&>*:nth-child(2n+1)]:lg:pl-0 [&>*:nth-child(2n+1)]:lg:border-l-0 [&>*:nth-child(2n+1)]:xl:pl-6 [&>*:nth-child(2n+1)]:xl:border-l [&>*:nth-child(3n+1)]:xl:pl-0 [&>*:nth-child(3n+1)]:xl:border-l-0",children:[(0,l.jsx)(oI,{label:"Assigned (@)",activeCount:W.assignedPeople.size,options:_.assignedPeople,selectedValues:W.assignedPeople,onToggle:e=>ex("assignedPeople",e),onSelectAll:()=>eu("assignedPeople"),onClear:()=>eh("assignedPeople"),getButtonColor:(e,t)=>e9("assignedPeople",e,t),getButtonStyle:(e,t)=>e7("assignedPeople",e,t),formatLabel:e=>`@${e}`}),(0,l.jsx)(oI,{label:"Projects (%)",activeCount:W.projects.size,options:_.projects,selectedValues:W.projects,onToggle:e=>ex("projects",e),onSelectAll:()=>eu("projects"),onClear:()=>eh("projects"),getButtonColor:(e,t)=>e9("projects",e,t),getButtonStyle:(e,t)=>e7("projects",e,t),formatLabel:e=>`%${e}`}),(0,l.jsx)(oI,{label:"Categories",activeCount:W.categories.size,options:_.categories,selectedValues:W.categories,onToggle:e=>ex("categories",e),onSelectAll:()=>eu("categories"),onClear:()=>eh("categories"),getButtonColor:(e,t)=>e9("categories",e,t),getButtonStyle:(e,s)=>{if(!s)return;let n=t.categories.find(t=>t.id===e),r=n?.color||t.markerColors.project;return{backgroundColor:r,color:(0,ob.getTextColor)(r)}},formatLabel:e=>{let s=t.categories.find(t=>t.id===e);return s?.name||e}}),(0,l.jsx)(oI,{label:"Source ($)",activeCount:W.sourcePeople.size,options:_.sourcePeople,selectedValues:W.sourcePeople,onToggle:e=>ex("sourcePeople",e),onSelectAll:()=>eu("sourcePeople"),onClear:()=>eh("sourcePeople"),getButtonColor:(e,t)=>e9("sourcePeople",e,t),getButtonStyle:(e,t)=>e7("sourcePeople",e,t),formatLabel:e=>`$${e}`}),(0,l.jsx)(oI,{label:"Mentioned",activeCount:W.mentionedPeople.size,options:_.mentionedPeople,selectedValues:W.mentionedPeople,onToggle:e=>ex("mentionedPeople",e),onSelectAll:()=>eu("mentionedPeople"),onClear:()=>eh("mentionedPeople"),getButtonColor:(e,t)=>e9("mentionedPeople",e,t),getButtonStyle:(e,t)=>e7("mentionedPeople",e,t),formatLabel:e=>e}),(0,l.jsx)(oI,{label:"Priority (!!)",activeCount:W.priorities.size,options:_.priorities,selectedValues:W.priorities,onToggle:e=>ex("priorities",e),onSelectAll:()=>eu("priorities"),onClear:()=>eh("priorities"),getButtonColor:(e,t)=>e9("priorities",e,t),getButtonStyle:(e,t)=>e7("priorities",e,t),formatLabel:e=>`!!${e}`}),(0,l.jsx)(oI,{label:"Due Date (~)",activeCount:W.dueDates.size,options:_.dueDates,selectedValues:W.dueDates,onToggle:e=>ex("dueDates",e),onSelectAll:()=>eu("dueDates"),onClear:()=>eh("dueDates"),getButtonColor:(e,t)=>e9("dueDates",e,t),getButtonStyle:(e,t)=>e7("dueDates",e,t),formatLabel:e=>`~${e}`}),(0,l.jsx)(oI,{label:"Duration (*)",activeCount:W.durations.size,options:_.durations,selectedValues:W.durations,onToggle:e=>ex("durations",e),onSelectAll:()=>eu("durations"),onClear:()=>eh("durations"),getButtonColor:(e,t)=>e9("durations",e,t),getButtonStyle:(e,t)=>e7("durations",e,t),formatLabel:e=>`*${e}`}),(0,l.jsx)(oI,{label:"Tags (&)",activeCount:W.tags.size,options:_.tags,selectedValues:W.tags,onToggle:e=>ex("tags",e),onSelectAll:()=>eu("tags"),onClear:()=>eh("tags"),getButtonColor:(e,t)=>e9("tags",e,t),getButtonStyle:(e,t)=>e7("tags",e,t),formatLabel:e=>`&${e}`}),(0,l.jsx)(oI,{label:"Recurring (%)",activeCount:W.recurring.size,options:_.recurring,selectedValues:W.recurring,onToggle:e=>ex("recurring",e),onSelectAll:()=>eu("recurring"),onClear:()=>eh("recurring"),getButtonColor:(e,t)=>e9("recurring",e,t),getButtonStyle:(e,t)=>e7("recurring",e,t),formatLabel:e=>`%${e}`}),(0,l.jsx)(oI,{label:"Dependencies (>)",activeCount:W.dependencies.size,options:_.dependencies,selectedValues:W.dependencies,onToggle:e=>ex("dependencies",e),onSelectAll:()=>eu("dependencies"),onClear:()=>eh("dependencies"),getButtonColor:(e,t)=>e9("dependencies",e,t),getButtonStyle:(e,t)=>e7("dependencies",e,t),formatLabel:e=>`>${e}`})]})})]}),ev&&(0,l.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 flex flex-wrap items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:[ew.size," selected"]}),(0,l.jsx)("button",{onClick:eB,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Select all"}),(0,l.jsx)("button",{onClick:eY,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Clear"})]}),(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[ew.size>0&&(0,l.jsxs)("button",{onClick:eq,className:"px-3 py-1.5 text-sm bg-purple-600 hover:bg-purple-700 text-white rounded-md transition-colors flex items-center gap-1.5",children:[(0,l.jsx)(oe.EditIcon,{className:"w-4 h-4"}),"Edit"]}),e.some(e=>e.isActive&&ew.has(e.id))&&(0,l.jsxs)("button",{onClick:e_,className:"px-3 py-1.5 text-sm bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors flex items-center gap-1.5",children:[(0,l.jsx)(oe.CheckIcon,{className:"w-4 h-4"}),"Complete"]}),e.some(e=>e.isCompleted&&ew.has(e.id))&&(0,l.jsxs)("button",{onClick:eH,className:"px-3 py-1.5 text-sm bg-amber-600 hover:bg-amber-700 text-white rounded-md transition-colors flex items-center gap-1.5",children:[(0,l.jsx)(oe.ArchiveIcon,{className:"w-4 h-4"}),"Archive"]}),e.some(e=>e.isArchived&&ew.has(e.id))&&(0,l.jsxs)("button",{onClick:eV,className:"px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-md transition-colors flex items-center gap-1.5",children:[(0,l.jsx)(oe.RefreshIcon,{className:"w-4 h-4"}),"Restore"]}),ew.size>0&&(0,l.jsxs)("button",{onClick:eU,className:"px-3 py-1.5 text-sm bg-red-600 hover:bg-red-700 text-white rounded-md transition-colors flex items-center gap-1.5",children:[(0,l.jsx)(oe.TrashIcon,{className:"w-4 h-4"}),"Delete"]})]}),(0,l.jsx)("button",{onClick:eF,className:"ml-2 text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200",title:"Exit selection mode",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5"})})]}),e.length>0&&!ev&&(0,l.jsxs)("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[(0,l.jsxs)("button",{onClick:()=>Q("all"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${"all"===Z?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:["All (",X.all,")"]}),(0,l.jsxs)("button",{onClick:()=>Q("today"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors flex items-center gap-1.5 ${"today"===Z?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[(0,l.jsx)(oe.CalendarIcon,{className:"w-4 h-4"}),"Today (",X.today,")"]}),X.overdue>0&&(0,l.jsxs)("button",{onClick:()=>Q("overdue"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors flex items-center gap-1.5 ${"overdue"===Z?"bg-red-600 text-white":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/50"}`,children:[(0,l.jsx)(oe.ClockIcon,{className:"w-4 h-4"}),"Overdue (",X.overdue,")"]}),(0,l.jsxs)("button",{onClick:()=>Q("thisWeek"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors flex items-center gap-1.5 ${"thisWeek"===Z?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[(0,l.jsx)(oe.ClipboardIcon,{className:"w-4 h-4"}),"This Week (",X.thisWeek,")"]}),(0,l.jsxs)("button",{onClick:()=>Q("noDueDate"),className:`px-3 py-1.5 text-sm rounded-lg transition-colors flex items-center gap-1.5 ${"noDueDate"===Z?"bg-blue-600 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[(0,l.jsx)(oe.SlashIcon,{className:"w-4 h-4"}),"No Due Date (",X.noDueDate,")"]}),H&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsxs)("button",{onClick:ep,className:"px-3 py-1.5 text-sm rounded-lg transition-colors flex items-center gap-1.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700 hover:text-zinc-800 dark:hover:text-zinc-200",title:"Clear all filters",children:[(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"}),"Clear All"]})]})]}),0===e.length?(0,l.jsxs)("div",{className:"text-center py-16","data-tutorial":"todo-list",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"📝"}),(0,l.jsx)("p",{className:"text-xl text-zinc-600 dark:text-zinc-400",children:"No tasks yet. Add one to get started!"})]}):(0,l.jsxs)("div",{className:"space-y-4","data-tutorial":"todo-list",children:[e2.length>0&&(0,l.jsxs)("section",{children:[(0,l.jsxs)("button",{onClick:()=>et(!ee),className:"w-full flex items-center justify-between text-left mb-3 group",children:[(0,l.jsxs)("h2",{className:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wide",children:["Active (",e2.length,")"]}),(0,l.jsx)(oe.ChevronDownIcon,{className:`w-5 h-5 text-zinc-500 dark:text-zinc-400 transition-transform ${ee?"rotate-180":""}`})]}),ee&&(0,l.jsx)("div",{className:"space-y-4",children:Object.entries(e4).map(([e,a])=>(0,l.jsxs)("div",{children:[e&&(0,l.jsxs)("h3",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-500 uppercase tracking-wide mb-2 pl-2",children:[e," (",a.length,")"]}),(0,l.jsx)("ul",{className:"space-y-2",children:a.map(e=>(0,l.jsx)("li",{onClick:()=>T(e),className:"cursor-pointer",children:(0,l.jsx)(ow,{todo:e,onToggle:b,onDelete:f,onArchive:k,onUnarchive:j,onEdit:y,markerColors:t.markerColors,settings:t,linkPatterns:t.linkPatterns,availablePeople:s,availableProjects:n,availablePriorities:r,onAddPerson:z,onAddProject:w,onAddPriority:N,isExpanded:!1,onToggleExpand:()=>{},onAddComment:C,onEditComment:D,onDeleteComment:S,isSelectionMode:ev,isSelected:ew.has(e.id),onSelectionChange:eO,isDraggable:eS&&e.isActive,isDraggedOver:eP===e.id,onDragStart:eE,onDragEnd:eM,onDragOver:e$,onDragLeave:eR,onDrop:eI,sprints:eG,nextPlannedSprint:eJ})},e.id))})]},e))})]}),e5.length>0&&(0,l.jsxs)("section",{children:[(0,l.jsxs)("button",{onClick:()=>en(!es),className:"w-full flex items-center justify-between text-left mb-3 group",children:[(0,l.jsxs)("h2",{className:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wide",children:["Completed (",e5.length,")"]}),(0,l.jsx)(oe.ChevronDownIcon,{className:`w-5 h-5 text-zinc-500 dark:text-zinc-400 transition-transform ${es?"rotate-180":""}`})]}),es&&(0,l.jsx)("ul",{className:"space-y-2",children:e5.map(e=>(0,l.jsx)("li",{onClick:()=>T(e),className:"cursor-pointer",children:(0,l.jsx)(ow,{todo:e,onToggle:b,onDelete:f,onArchive:k,onUnarchive:j,onEdit:y,markerColors:t.markerColors,settings:t,linkPatterns:t.linkPatterns,availablePeople:s,availableProjects:n,availablePriorities:r,onAddPerson:z,onAddProject:w,onAddPriority:N,isExpanded:!1,onToggleExpand:()=>{},onAddComment:C,onEditComment:D,onDeleteComment:S,isSelectionMode:ev,isSelected:ew.has(e.id),onSelectionChange:eO,isDraggable:!1,sprints:eG,nextPlannedSprint:eJ})},e.id))})]}),e6.length>0&&(0,l.jsxs)("section",{children:[(0,l.jsxs)("button",{onClick:()=>ea(!er),className:"w-full flex items-center justify-between text-left mb-3 group",children:[(0,l.jsxs)("h2",{className:"text-sm font-semibold text-zinc-500 dark:text-zinc-400 uppercase tracking-wide",children:["Archived (",e6.length,")"]}),(0,l.jsx)(oe.ChevronDownIcon,{className:`w-5 h-5 text-zinc-500 dark:text-zinc-400 transition-transform ${er?"rotate-180":""}`})]}),er&&(0,l.jsx)("ul",{className:"space-y-2",children:e6.map(e=>(0,l.jsx)("li",{onClick:()=>T(e),className:"cursor-pointer",children:(0,l.jsx)(ow,{todo:e,onToggle:b,onDelete:f,onArchive:k,onUnarchive:j,onEdit:y,markerColors:t.markerColors,settings:t,linkPatterns:t.linkPatterns,availablePeople:s,availableProjects:n,availablePriorities:r,onAddPerson:z,onAddProject:w,onAddPriority:N,isExpanded:!1,onToggleExpand:()=>{},onAddComment:C,onEditComment:D,onDeleteComment:S,isSelectionMode:ev,isSelected:ew.has(e.id),onSelectionChange:eO,isDraggable:!1,sprints:eG,nextPlannedSprint:eJ})},e.id))})]})]}),(0,l.jsx)(oM,{isOpen:eo,onClose:()=>ed(!1),presetName:ec,onPresetNameChange:em,onSave:ej,onDelete:ey,viewPresets:ei}),$&&(0,l.jsx)("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50",children:(0,l.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 text-orange-900 dark:text-orange-100 rounded-lg shadow-lg px-4 py-3 flex items-start gap-3 max-w-md animate-slide-down",children:[(0,l.jsx)(oe.WarningIcon,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5"}),(0,l.jsx)("p",{className:"text-sm flex-1",children:$})]})}),P.length>0&&(0,l.jsx)("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 flex flex-col-reverse gap-2",children:P.map(e=>(0,l.jsx)("div",{className:`transition-opacity duration-3000 ${A.has(e.id)?"opacity-0":"opacity-100 animate-slide-up"}`,children:(0,l.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-900 dark:text-red-100 rounded-lg shadow-lg px-4 py-2.5 flex items-center gap-3 min-w-[280px]",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("p",{className:"font-medium text-sm",children:["delete"===e.type&&"Todo deleted","complete"===e.type&&"Todo completed","uncomplete"===e.type&&"Todo marked as active","archive"===e.type&&"Todo archived"]}),(0,l.jsx)("p",{className:"text-xs text-red-700 dark:text-red-300 mt-0.5 truncate max-w-[180px]",children:e.todo.plainText})]}),(0,l.jsx)("button",{onClick:()=>E(e.id),className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm rounded-md font-medium transition-colors flex-shrink-0",children:"Undo"}),(0,l.jsx)("button",{onClick:()=>M(e.id),className:"p-1.5 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors flex-shrink-0","aria-label":"Dismiss",children:(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"})})]})},e.id))}),(0,l.jsx)(oE,{isOpen:eC,onClose:()=>eD(!1),onApply:eK,selectedCount:ew.size,priorities:r,projects:n,people:s,sprints:eG}),L]})});function oV({todos:e,projects:t=[],categories:s=[]}){let n=(0,o.useMemo)(()=>{let n=new Date,r=new Date(n.getFullYear(),n.getMonth(),n.getDate()),a=new Date(r);a.setDate(a.getDate()-7);let i=new Date(r);i.setMonth(i.getMonth()-1);let l=e.filter(e=>!e.isDeleted),o=l.filter(e=>e.isActive),d=l.filter(e=>e.isCompleted),c=l.filter(e=>e.isArchived),m=l.filter(e=>e.hasTimeTracking),x=m.reduce((e,t)=>e+t.totalTrackedMinutes,0),u=l.filter(e=>e.isTrackingTime),h=m.reduce((e,t)=>e+(t.timeTracking?.entries.reduce((e,t)=>{let s=new Date(t.startTime);return s>=r?e+Math.round(((t.endTime?new Date(t.endTime).getTime():Date.now())-s.getTime())/6e4):e},0)||0),0),p=m.reduce((e,t)=>e+(t.timeTracking?.entries.reduce((e,t)=>{let s=new Date(t.startTime);return s>=a?e+Math.round(((t.endTime?new Date(t.endTime).getTime():Date.now())-s.getTime())/6e4):e},0)||0),0),g={};m.forEach(e=>{(e.projects.length>0?e.projects:["No Project"]).forEach(t=>{g[t]=(g[t]||0)+e.totalTrackedMinutes})});let b={};m.forEach(e=>{let n=e.projects;if(0===n.length){let t="Uncategorized";b[t]||(b[t]={minutes:0,color:"#9ca3af"}),b[t].minutes+=e.totalTrackedMinutes}else n.forEach(n=>{let r=t.find(e=>e.name===n||e.alternatives.includes(n)),a=r?.category,i=a?s.find(e=>e.id===a):null,l=i?i.name:"Uncategorized",o=i?i.color:"#9ca3af";b[l]||(b[l]={minutes:0,color:o}),b[l].minutes+=e.totalTrackedMinutes})});let f=d.filter(e=>{let t=e.completedAt?new Date(e.completedAt):null;return t&&t>=a}),k=d.filter(e=>{let t=e.completedAt?new Date(e.completedAt):null;return t&&t>=r}),j=l.filter(e=>new Date(e.createdAt)>=a),y=l.filter(e=>new Date(e.createdAt)>=r),v=o.filter(e=>e.isOverdue),z=o.filter(e=>e.isDueToday),w=d.filter(e=>e.createdAt&&e.completedAt),N=w.length>0?w.reduce((e,t)=>{let s=new Date(t.createdAt).getTime();return e+(new Date(t.completedAt).getTime()-s)},0)/w.length:0,C=l.filter(e=>{let t=new Date(e.createdAt);return t>=a&&t<r}),D=C.filter(e=>e.isCompleted||e.isArchived),S=C.length>0?D.length/C.length*100:0,T=o.reduce((e,t)=>{let s=t.priority||"none";return e[s]=(e[s]||0)+1,e},{}),P=[];for(let e=6;e>=0;e--){let t=new Date(r);t.setDate(t.getDate()-e);let s=new Date(t);s.setDate(s.getDate()+1);let n=d.filter(e=>{let n=e.completedAt?new Date(e.completedAt):null;return n&&n>=t&&n<s}).length,a=l.filter(e=>{let n=new Date(e.createdAt);return n>=t&&n<s}).length;P.push({date:t.toLocaleDateString("en-US",{weekday:"short"}),completed:n,created:a})}let A=0,E=new Date(r);for(;;){let e=new Date(E);if(e.setDate(e.getDate()+1),d.some(t=>{let s=t.completedAt?new Date(t.completedAt):null;return s&&s>=E&&s<e}))A++,E.setDate(E.getDate()-1);else break;if(A>365)break}return{total:l.length,active:o.length,completed:d.length,archived:c.length,completedThisWeek:f.length,completedToday:k.length,createdThisWeek:j.length,createdToday:y.length,overdue:v.length,dueToday:z.length,avgCompletionTime:N,weeklyCompletionRate:S,byPriority:T,completionTrend:P,streak:A,totalTrackedMinutes:x,trackedToday:h,trackedThisWeek:p,currentlyTracking:u.length,tasksWithTracking:m.length,timeByProject:g,timeByCategory:b}},[e,t,s]),r=e=>{if(0===e)return"0m";let t=Math.floor(e/60),s=e%60;return 0===t?`${s}m`:0===s?`${t}h`:`${t}h ${s}m`},a=Math.max(1,...n.completionTrend.map(e=>Math.max(e.completed,e.created)));return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Statistics"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Track your productivity and task management"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:n.active}),(0,l.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Active Tasks"})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:n.completedToday}),(0,l.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Completed Today"})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:n.dueToday}),(0,l.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Due Today"})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:`text-3xl font-bold ${n.overdue>0?"text-red-600 dark:text-red-400":"text-zinc-400"}`,children:n.overdue}),(0,l.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Overdue"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"This Week"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Tasks Created"}),(0,l.jsx)("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:n.createdThisWeek})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Tasks Completed"}),(0,l.jsx)("span",{className:"font-semibold text-green-600 dark:text-green-400",children:n.completedThisWeek})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Completion Rate"}),(0,l.jsxs)("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:[n.weeklyCompletionRate.toFixed(0),"%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Avg. Completion Time"}),(0,l.jsx)("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:(e=>{if(0===e)return"N/A";let t=e/36e5;return t<24?`${Math.round(t)}h`:`${Math.round(t/24)}d`})(n.avgCompletionTime)})]})]})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"Streak & Progress"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-5xl font-bold text-blue-600 dark:text-blue-400",children:n.streak}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Day",1!==n.streak?"s":""," Streak"]}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-500 mt-1",children:"Consecutive days with completions"})]}),(0,l.jsx)("div",{className:"h-2 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-500",style:{width:`${Math.min(100,n.weeklyCompletionRate)}%`}})}),(0,l.jsx)("div",{className:"text-center text-xs text-zinc-500 dark:text-zinc-500",children:"Weekly completion progress"})]})]})]}),n.tasksWithTracking>0&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"⏱️ Time Tracking"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Tracked Today"}),(0,l.jsx)("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:r(n.trackedToday)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Tracked This Week"}),(0,l.jsx)("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:r(n.trackedThisWeek)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Total Tracked"}),(0,l.jsx)("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:r(n.totalTrackedMinutes)})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Tasks with Time"}),(0,l.jsx)("span",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:n.tasksWithTracking})]}),n.currentlyTracking>0&&(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Currently Tracking"}),(0,l.jsxs)("span",{className:"font-semibold text-green-600 dark:text-green-400 flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),n.currentlyTracking," task",1!==n.currentlyTracking?"s":""]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"📁 Time by Project"}),0===Object.keys(n.timeByProject).length?(0,l.jsx)("p",{className:"text-zinc-500 dark:text-zinc-500 text-sm",children:"No time tracked yet"}):(0,l.jsx)("div",{className:"space-y-2",children:Object.entries(n.timeByProject).sort((e,t)=>t[1]-e[1]).slice(0,6).map(([e,t])=>(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"flex-1 min-w-0 text-sm text-zinc-600 dark:text-zinc-400 truncate",children:e}),(0,l.jsx)("div",{className:"flex-1 h-4 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-purple-500 rounded-full transition-all",style:{width:`${t/Math.max(...Object.values(n.timeByProject))*100}%`}})}),(0,l.jsx)("div",{className:"w-16 text-right text-sm font-medium text-zinc-900 dark:text-zinc-100",children:r(t)})]},e))})]})]}),Object.keys(n.timeByCategory).length>0&&(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"📂 Time by Category"}),(0,l.jsx)("div",{className:"space-y-2",children:Object.entries(n.timeByCategory).sort((e,t)=>t[1].minutes-e[1].minutes).map(([e,t])=>(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:t.color}}),(0,l.jsx)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 truncate",children:e})]}),(0,l.jsx)("div",{className:"flex-1 h-4 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full rounded-full transition-all",style:{backgroundColor:t.color,width:`${t.minutes/Math.max(...Object.values(n.timeByCategory).map(e=>e.minutes))*100}%`}})}),(0,l.jsx)("div",{className:"w-16 text-right text-sm font-medium text-zinc-900 dark:text-zinc-100",children:r(t.minutes)})]},e))})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"7-Day Activity"}),(0,l.jsx)("div",{className:"flex items-end gap-2 h-32",children:n.completionTrend.map((e,t)=>(0,l.jsxs)("div",{className:"flex-1 flex flex-col items-center gap-1",children:[(0,l.jsxs)("div",{className:"w-full flex gap-0.5 items-end justify-center",style:{height:"100px"},children:[(0,l.jsx)("div",{className:"w-3 bg-blue-500/60 rounded-t transition-all",style:{height:`${e.created/a*100}px`},title:`${e.created} created`}),(0,l.jsx)("div",{className:"w-3 bg-green-500 rounded-t transition-all",style:{height:`${e.completed/a*100}px`},title:`${e.completed} completed`})]}),(0,l.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:e.date})]},t))}),(0,l.jsxs)("div",{className:"flex justify-center gap-6 mt-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-blue-500/60 rounded"}),(0,l.jsx)("span",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:"Created"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,l.jsx)("span",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:"Completed"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"Active Tasks by Priority"}),0===Object.keys(n.byPriority).length?(0,l.jsx)("p",{className:"text-zinc-500 dark:text-zinc-500 text-sm",children:"No active tasks"}):(0,l.jsx)("div",{className:"space-y-2",children:Object.entries(n.byPriority).sort((e,t)=>t[1]-e[1]).map(([e,t])=>(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-20 text-sm text-zinc-600 dark:text-zinc-400 capitalize",children:"none"===e?"No priority":e}),(0,l.jsx)("div",{className:"flex-1 h-6 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:`h-full rounded-full transition-all ${"urgent"===e?"bg-red-500":"high"===e?"bg-orange-500":"medium"===e?"bg-yellow-500":"low"===e?"bg-green-500":"bg-zinc-400"}`,style:{width:`${t/n.active*100}%`}})}),(0,l.jsx)("div",{className:"w-8 text-right text-sm font-medium text-zinc-900 dark:text-zinc-100",children:t})]},e))})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"All Time"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:n.total}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:"Total Tasks"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:n.completed}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:"Completed"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:n.archived}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:"Archived"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[n.total>0?Math.round((n.completed+n.archived)/n.total*100):0,"%"]}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-500",children:"Overall Rate"})]})]})]})]})}function oq(e){let t=Math.abs(e),s=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60,a=s>0?`${s}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${n}:${r.toString().padStart(2,"0")}`;return e<0?`-${a}`:a}function oK({todos:e,scheduledTasks:t,onToggle:s,onEdit:n,markerColors:r,settings:a,linkPatterns:i,onOpenDetails:d,onClose:c,onStartTimeTracking:m,onStopTimeTracking:x}){let u=a.focus??{},h=(a.gantt??{}).schedulingTechnique??"sequential",p=(0,o.useMemo)(()=>t.filter(e=>!e.isActualTime&&!e.todo.isCompleted&&!e.todo.isArchived),[t]),g=(0,o.useMemo)(()=>{let e=[];return p.forEach((t,s)=>{let n=t.segments,r=s===p.length-1;n.forEach((s,a)=>{let i=a===n.length-1;e.push({type:"task",task:t,segmentIndex:a,isLastSegment:i,durationSeconds:60*s.durationMinutes});let l=i?t.nextBreak:s.nextBreak;l&&l.durationMinutes>0&&!(r&&i)&&e.push({type:"break",breakInfo:l,durationSeconds:60*l.durationMinutes})})}),e},[p]),b=(0,o.useRef)(g);b.current=g;let f=(0,o.useCallback)(e=>g[e]??null,[g]),[k,j]=(0,o.useState)(()=>{let e=g[0];return{phase:e?.type==="task"?"work":"break",currentItemIndex:0,timeRemaining:e?.durationSeconds??0,isRunning:!1,totalWorkTime:0,totalBreakTime:0,tasksCompleted:0,breakEndTime:null,pendingPhase:null,confirmationRepeats:0,taskStartTime:null,actualTimeSpent:0}}),[y,z]=(0,o.useState)(u.soundEnabled??!0),[w,N]=(0,o.useState)("granted"===(0,v.getNotificationPermission)()),[C,D]=(0,o.useState)(!1),[S,T]=(0,o.useState)(null),P=(0,o.useRef)(null),A=(0,o.useRef)(null),E=(0,o.useRef)(null),M=(0,o.useRef)(x);M.current=x;let $=f(k.currentItemIndex),R=$?.type==="task"?$.task:null,I=R?.todo,F=$?.type==="break"?$.breakInfo:null;(0,o.useEffect)(()=>()=>{(0,v.clearSoundQueue)(),(0,v.stopAmbientSound)(),P.current&&clearInterval(P.current),A.current&&clearInterval(A.current),E.current&&M.current&&(M.current(E.current),E.current=null)},[]),(0,o.useEffect)(()=>{S&&(console.log("[FocusView] Auto-completing todo:",S),E.current&&x&&(x(E.current),E.current=null),s(S),T(null))},[S,s,x]),(0,o.useEffect)(()=>{if(!y||!u.ambientSoundEnabled)return void(0,v.stopAmbientSound)();if(k.isRunning&&"work"===k.phase&&u.ambientWorkSound){let e=(0,v.getAmbientSoundFile)(u.ambientWorkSound);e&&(0,v.playAmbientSound)(e,u.ambientVolume??.3)}else if(k.isRunning&&"break"===k.phase&&u.ambientBreakSound){let e=(0,v.getAmbientSoundFile)(u.ambientBreakSound);e&&(0,v.playAmbientSound)(e,u.ambientVolume??.3)}else(0,v.stopAmbientSound)()},[k.phase,k.isRunning,y,u.ambientSoundEnabled,u.ambientWorkSound,u.ambientBreakSound,u.ambientVolume]),(0,o.useEffect)(()=>{u.autoTimeTracking&&I&&("work"===k.phase&&k.isRunning&&!E.current&&m&&(m(I.id,"Focus Mode session"),E.current=I.id),E.current&&("work"!==k.phase||!k.isRunning)&&x&&(x(E.current),E.current=null))},[k.phase,k.isRunning,I,u.autoTimeTracking,m,x]);let L=(0,o.useCallback)(()=>{let e=k.currentItemIndex+1,t=f(e);if(!t)return void j(e=>({...e,phase:"completed",isRunning:!1}));let s="task"===t.type;j(n=>{let r;return{...n,currentItemIndex:e,phase:s?"work":"break",timeRemaining:t.durationSeconds,isRunning:!0,breakEndTime:s?null:((r=new Date).setSeconds(r.getSeconds()+t.durationSeconds),r),taskStartTime:s?new Date:null,actualTimeSpent:0,pendingPhase:null,confirmationRepeats:0}})},[k.currentItemIndex,f]),W=(0,o.useCallback)(e=>{let t,s=e.currentItemIndex+1,n=f(s);if(!n)return{...e,phase:"completed",isRunning:!1,pendingPhase:null,confirmationRepeats:0};let r="task"===n.type;return{...e,currentItemIndex:s,phase:r?"work":"break",timeRemaining:n.durationSeconds,isRunning:!0,breakEndTime:r?null:((t=new Date).setSeconds(t.getSeconds()+n.durationSeconds),t),taskStartTime:r?new Date:null,actualTimeSpent:0,pendingPhase:null,confirmationRepeats:0}},[f]),O=(0,o.useCallback)(()=>{A.current&&(clearInterval(A.current),A.current=null),j(e=>W(e))},[W]);(0,o.useEffect)(()=>{if(k.pendingPhase&&u.requireConfirmation){let e=u.confirmationMaxRepeats??5;return A.current=setInterval(()=>{j(t=>{let s=t.confirmationRepeats+1;return(y&&("break"===t.pendingPhase?(0,v.playNotificationSound)("short-break"):(0,v.playNotificationSound)("break-end")),e>0&&s>=e)?W(t):{...t,confirmationRepeats:s}})},(u.confirmationRepeatInterval??30)*1e3),()=>{A.current&&(clearInterval(A.current),A.current=null)}}},[k.pendingPhase,u.requireConfirmation,u.confirmationRepeatInterval,u.confirmationMaxRepeats,y,W]),(0,o.useEffect)(()=>{if(!k.isRunning||k.pendingPhase){P.current&&(clearInterval(P.current),P.current=null);return}return P.current=setInterval(()=>{j(e=>{let t=e.timeRemaining-1,s="work"===e.phase?e.totalWorkTime+1:e.totalWorkTime,n="break"===e.phase?e.totalBreakTime+1:e.totalBreakTime,r="work"===e.phase?e.actualTimeSpent+1:e.actualTimeSpent;if(t<=0){let t,a="work"===e.phase,i=b.current[e.currentItemIndex]??null,l=i?.isLastSegment??!0,o=a&&l,d=o?i?.task?.todo.id:null;console.log("[FocusView] Timer hit zero:",{completingWorkSegment:a,isLastSegmentOfTask:l,completingTask:o,todoToComplete:d,currentScheduleItem:i?{type:i.type,isLastSegment:i.isLastSegment,taskId:i.task?.todo.id}:null}),d&&(console.log("[FocusView] Scheduling auto-complete for:",d),setTimeout(()=>T(d),0));let c=e.currentItemIndex+1,m=b.current[c]??null;if(y&&(o?(0,v.playNotificationSound)("task-complete"):a?(0,v.playNotificationSound)("short-break"):(0,v.queueSounds)(["break-end","task-start"])),w)if(a&&m?.type==="break"){let e=m.breakInfo?.label||"break";(0,v.sendNotification)(`☕ Time for a ${e}!`,{body:o?`Task complete! Take a ${Math.ceil((m.durationSeconds??0)/60)} minute break.`:`Session complete! Take a ${Math.ceil((m.durationSeconds??0)/60)} minute break.`,silent:!0})}else a||(0,v.sendNotification)("🎯 Break over - back to work!",{body:m?.task?.todo.plainText??"Time to focus!",silent:!0});if(u.requireConfirmation)return{...e,phase:a?"pending-break":"pending-work",pendingPhase:a?"break":"work",timeRemaining:0,totalWorkTime:s,totalBreakTime:n,actualTimeSpent:r,tasksCompleted:o?e.tasksCompleted+1:e.tasksCompleted,isRunning:!1,confirmationRepeats:0};if(!m)return{...e,phase:"completed",isRunning:!1,timeRemaining:0,totalWorkTime:s,totalBreakTime:n,tasksCompleted:o?e.tasksCompleted+1:e.tasksCompleted};let x="task"===m.type;return{...e,currentItemIndex:c,phase:x?"work":"break",timeRemaining:m.durationSeconds,totalWorkTime:s,totalBreakTime:n,actualTimeSpent:0,tasksCompleted:o?e.tasksCompleted+1:e.tasksCompleted,breakEndTime:x?null:((t=new Date).setSeconds(t.getSeconds()+m.durationSeconds),t),taskStartTime:x?new Date:null}}return{...e,timeRemaining:t,totalWorkTime:s,totalBreakTime:n,actualTimeSpent:r}})},1e3),()=>{P.current&&clearInterval(P.current)}},[k.isRunning,k.pendingPhase,y,w,u.requireConfirmation]);let B=(0,o.useCallback)(()=>{j(e=>{if(e.isRunning)return y&&"work"===e.phase&&(0,v.playNotificationSound)("pause"),{...e,isRunning:!1,breakEndTime:null};{let t;return y&&"work"===e.phase&&(0,v.playNotificationSound)("task-start"),{...e,isRunning:!0,taskStartTime:"work"!==e.phase||e.taskStartTime?e.taskStartTime:new Date,breakEndTime:"break"===e.phase?((t=new Date).setSeconds(t.getSeconds()+e.timeRemaining),t):null}}})},[y]),Y=(0,o.useCallback)(e=>{k.isRunning&&(j(e=>({...e,isRunning:!1,breakEndTime:null})),y&&"work"===k.phase&&(0,v.playNotificationSound)("pause")),d(e)},[k.isRunning,k.phase,y,d]),_=(0,o.useCallback)(()=>{y&&(0,v.playNotificationSound)("task-start"),L()},[y,L]),H=(0,o.useCallback)(()=>{E.current&&x&&(x(E.current),E.current=null),y&&(0,v.playNotificationSound)("short-break");let e=f(k.currentItemIndex);e?.isLastSegment&&j(e=>({...e,tasksCompleted:e.tasksCompleted+1})),L()},[y,L,x,f,k.currentItemIndex]),U=(0,o.useCallback)(()=>{if(!I)return;E.current&&x&&(x(E.current),E.current=null),y&&(0,v.playNotificationSound)("task-complete"),s(I.id);let e=f(k.currentItemIndex);e?.isLastSegment!==!1&&j(e=>({...e,tasksCompleted:e.tasksCompleted+1})),L()},[I,y,s,L,x,f,k.currentItemIndex]),V=(0,o.useCallback)(()=>{E.current&&x&&(x(E.current),E.current=null),y&&(0,v.playNotificationSound)("task-start"),L()},[y,L,x]),q=(0,o.useCallback)(t=>{let s=I?e.find(e=>e.id===I.id):null;if(!s)return;j(e=>({...e,timeRemaining:e.timeRemaining+60*t}));let r=s.durationMinutes??0;n(s.id,s.text,s.plainText,{...s.metadata,duration:`${r+t}m`}),D(!1)},[I,e,n]),K=(0,o.useCallback)(async()=>{N("granted"===await (0,v.requestNotificationPermission)())},[]);(0,o.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key){case"Escape":e.preventDefault(),C?D(!1):c();break;case" ":e.preventDefault(),"pending-break"===k.phase||"pending-work"===k.phase?O():B();break;case"Enter":e.preventDefault(),"pending-break"===k.phase||"pending-work"===k.phase?O():e.shiftKey&&I?U():I&&Y(I);break;case"s":case"S":e.preventDefault(),"break"===k.phase?_():"work"===k.phase&&H();break;case"n":case"N":e.preventDefault(),"work"===k.phase&&V();break;case"m":case"M":e.preventDefault(),z(e=>!e);break;case"e":case"E":e.preventDefault(),"work"===k.phase&&D(e=>!e);break;case"+":case"=":e.preventDefault(),"work"===k.phase&&q(u.defaultExtendMinutes??5)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c,B,O,U,_,H,V,k.phase,I,Y,C,q,u.defaultExtendMinutes]);let G=(0,o.useMemo)(()=>{let e=f(k.currentItemIndex);if(!e)return 0;let t=e.durationSeconds;return(t-k.timeRemaining)/t*100},[k.currentItemIndex,k.timeRemaining,f]),J="pomodoro"===h?"🍅":"flow"===h?"🌊":"📋",Z="pomodoro"===h?"Pomodoro":"flow"===h?"Flow":"Sequential",Q=p.length,X=(0,o.useMemo)(()=>{let e=g[k.currentItemIndex];if(!e||"task"!==e.type){for(let e=k.currentItemIndex-1;e>=0;e--)if(g[e]?.type==="task"){g[e].task?.todo.id;let t=new Set;for(let s=0;s<=e;s++){let e=g[s];e?.type==="task"&&e.task?.todo.id&&t.add(e.task.todo.id)}return t.size}return 0}let t=new Set;for(let e=0;e<=k.currentItemIndex;e++){let s=g[e];s?.type==="task"&&s.task?.todo.id&&t.add(s.task.todo.id)}return t.size},[k.currentItemIndex,g]),ee=e.filter(e=>e.isActive).length;if(0===g.length)return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-zinc-900 dark:to-zinc-800",children:(0,l.jsxs)("div",{className:"text-center p-8",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:0===ee?"🎉":"⏰"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 mb-2",children:0===ee?"All caught up!":"No tasks scheduled for today"}),(0,l.jsx)("p",{className:"text-zinc-600 dark:text-zinc-400 mb-6",children:0===ee?"No active tasks to focus on.":`You have ${ee} active task${1!==ee?"s":""}, but none are scheduled.`}),(0,l.jsx)("button",{onClick:c,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Exit Focus Mode"})]})});if("completed"===k.phase)return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 dark:from-zinc-900 dark:to-zinc-800",children:(0,l.jsxs)("div",{className:"text-center p-8",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"🎉"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 mb-2",children:"All tasks completed!"}),(0,l.jsxs)("p",{className:"text-zinc-600 dark:text-zinc-400 mb-2",children:["You worked for ",oq(k.totalWorkTime)," and took ",oq(k.totalBreakTime)," in breaks."]}),(0,l.jsxs)("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 mb-6",children:["Completed ",k.tasksCompleted," tasks."]}),(0,l.jsx)("button",{onClick:c,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Exit Focus Mode"})]})});if("pending-break"===k.phase||"pending-work"===k.phase){let e="pending-break"===k.phase,t=f(k.currentItemIndex+1),s=t?.breakInfo,n=u.confirmationMaxRepeats??5,a=u.confirmationRepeatInterval??30;return(0,l.jsxs)("div",{className:`fixed inset-0 z-50 flex flex-col ${e?"bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-cyan-950 dark:to-zinc-900":"bg-gradient-to-br from-amber-50 to-orange-100 dark:from-amber-950 dark:to-zinc-900"}`,children:[(0,l.jsxs)("header",{className:"flex items-center justify-between p-4 border-b border-zinc-200/50 dark:border-zinc-800/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:c,className:"p-2 hover:bg-white/50 dark:hover:bg-zinc-700/50 rounded-lg transition-colors",title:"Exit (Esc)",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),(0,l.jsxs)("h1",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:[J," Focus Mode (",Z,")"]})]}),(0,l.jsxs)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Task ",X," of ",Q]})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-8xl mb-6",children:e?s?.icon||"☕":"🎯"}),(0,l.jsx)("h2",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:e?`Time for a ${s?.label||"break"}!`:"Break complete!"}),(0,l.jsx)("p",{className:"text-xl text-zinc-600 dark:text-zinc-400 mb-8",children:e?"Great work! Click below to start your break.":"Ready to start the next task?"}),(0,l.jsxs)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:["Reminder ",k.confirmationRepeats," of ",n," • Sound plays every ",a,"s"]}),(0,l.jsxs)("button",{onClick:O,className:`px-8 py-4 rounded-full font-semibold text-lg transition-all shadow-lg hover:shadow-xl ${e?"bg-blue-600 hover:bg-blue-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:[e?"Start Break":"Start Working"," (Space/Enter)"]}),!e&&t?.task&&(0,l.jsxs)("div",{className:"mt-12 p-4 bg-white/50 dark:bg-zinc-800/50 rounded-xl max-w-md mx-auto",children:[(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-2",children:"Next task:"}),(0,l.jsx)("p",{className:"text-zinc-900 dark:text-zinc-100 font-medium",children:(0,l.jsx)(l3,{text:t.task.todo.plainText,markerColors:r,linkPatterns:i})})]})]})}),(0,l.jsx)("div",{className:"p-4 text-center text-sm text-zinc-500 dark:text-zinc-400 border-t border-zinc-200/50 dark:border-zinc-800/50",children:(0,l.jsx)("span",{children:"Space/Enter Confirm • Esc Exit"})})]})}if("break"===k.phase&&F){let e;return(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-cyan-950 dark:to-zinc-900",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between p-4 border-b border-zinc-200/50 dark:border-zinc-800/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:c,className:"p-2 hover:bg-white/50 dark:hover:bg-zinc-700/50 rounded-lg transition-colors",title:"Exit (Esc)",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),(0,l.jsxs)("h1",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:[F.icon||"☕"," ",F.label||"Break"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("button",{onClick:()=>z(!y),className:`p-2 rounded-lg transition-colors ${y?"bg-white/50 dark:bg-zinc-700/50 text-zinc-900 dark:text-zinc-100":"text-zinc-400 dark:text-zinc-600"}`,title:y?"Mute (M)":"Unmute (M)",children:y?(0,l.jsx)(oe.VolumeOnIcon,{className:"w-5 h-5"}):(0,l.jsx)(oe.VolumeOffIcon,{className:"w-5 h-5"})}),(0,l.jsxs)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Task ",X," of ",Q]})]})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-8xl mb-6",children:F.icon||"☕"}),(0,l.jsx)("h2",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:F.label||"Take a break!"}),(0,l.jsx)("div",{className:"text-7xl font-mono font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:oq(k.timeRemaining)}),(0,l.jsx)("p",{className:"text-lg text-zinc-600 dark:text-zinc-400 mb-8",children:k.breakEndTime?(0,l.jsxs)(l.Fragment,{children:["Continue at ",k.breakEndTime.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):(0,l.jsx)("span",{className:"text-zinc-400",children:"Paused"})}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,l.jsx)("button",{onClick:B,className:`px-6 py-3 rounded-lg font-medium transition-colors flex items-center gap-2 ${k.isRunning?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:k.isRunning?"Pause":"Resume"}),(0,l.jsx)("button",{onClick:_,className:"px-6 py-3 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors",children:"Skip Break"})]}),(e=f(k.currentItemIndex+1),e?.task?(0,l.jsxs)("div",{className:"mt-12 p-4 bg-white/50 dark:bg-zinc-800/50 rounded-xl max-w-md mx-auto",children:[(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-2",children:"Up next:"}),(0,l.jsx)("p",{className:"text-zinc-900 dark:text-zinc-100 font-medium",children:(0,l.jsx)(l3,{text:e.task.todo.plainText,markerColors:r,linkPatterns:i})})]}):null)]})}),(0,l.jsx)("div",{className:"p-4 border-t border-zinc-200/50 dark:border-zinc-800/50",children:(0,l.jsxs)("div",{className:"flex justify-center gap-6 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("span",{children:["🎯 Work: ",oq(k.totalWorkTime)]}),(0,l.jsxs)("span",{children:["☕ Break: ",oq(k.totalBreakTime)]}),(0,l.jsxs)("span",{children:["✅ Completed: ",k.tasksCompleted]})]})}),(0,l.jsx)("div",{className:"p-4 text-center text-sm text-zinc-500 dark:text-zinc-400 border-t border-zinc-200/50 dark:border-zinc-800/50",children:(0,l.jsxs)("span",{children:["Space ",k.isRunning?"Pause":"Resume"," • S Skip • M Mute • Esc Exit"]})}),(0,l.jsx)("div",{className:"h-2 bg-zinc-200/50 dark:bg-zinc-700/50",children:(0,l.jsx)("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:`${G}%`}})})]})}return(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-zinc-900 dark:to-zinc-800",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-800",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:c,className:"p-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded-lg transition-colors",title:"Exit (Esc)",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),(0,l.jsxs)("h1",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[(0,l.jsxs)("span",{children:[J," Focus Mode"]}),(0,l.jsxs)("span",{className:"text-sm font-normal text-zinc-500",children:["(",Z,")"]}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.focusMode})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.focusKeyboard,size:"md"}),(0,l.jsx)("button",{onClick:()=>z(!y),className:`p-2 rounded-lg transition-colors ${y?"bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100":"text-zinc-400 dark:text-zinc-600"}`,title:y?"Mute (M)":"Unmute (M)",children:y?(0,l.jsx)(oe.VolumeOnIcon,{className:"w-5 h-5"}):(0,l.jsx)(oe.VolumeOffIcon,{className:"w-5 h-5"})}),!w&&(0,l.jsx)("button",{onClick:K,className:"p-2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 rounded-lg transition-colors",title:"Enable notifications",children:(0,l.jsx)(oe.BellIcon,{className:"w-5 h-5"})}),(0,l.jsxs)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Task ",X," of ",Q]})]})]}),(0,l.jsx)("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"w-full max-w-2xl",children:[I&&(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-8 mb-8",children:[I.priority&&(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(oa,{variant:"red",size:"md",children:I.priority})}),(0,l.jsx)("p",{className:"text-2xl font-medium text-zinc-900 dark:text-zinc-100 leading-relaxed mb-6",children:(0,l.jsx)(l3,{text:I.plainText,markerColors:r,linkPatterns:i})}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm mb-6",children:[I.hasDueDate&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("span",{children:"📅"}),(0,l.jsx)("span",{children:I.dueDateDisplay})]}),I.hasDuration&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("span",{children:"⏱️"}),(0,l.jsx)("span",{children:I.durationDisplay})]}),I.assignedPeople.length>0&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("span",{children:"👤"}),(0,l.jsx)("span",{children:I.assignedPeople.join(", ")})]}),I.projects.length>0&&(0,l.jsxs)("div",{className:"flex items-center gap-2 text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("span",{children:"📁"}),(0,l.jsx)("span",{children:I.projects.join(", ")})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("button",{onClick:()=>Y(I),className:"px-4 py-2 text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-lg transition-colors",title:"Details (Enter)",children:"Details"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:V,className:"px-4 py-2 text-sm font-medium text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-lg transition-colors",title:"Skip (N)",children:"Skip"}),(0,l.jsx)("button",{onClick:U,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",title:"Complete (Shift+Enter)",children:"✓ Complete"})]})]})]}),(0,l.jsxs)("div",{className:"text-center mb-6",children:[(0,l.jsx)("div",{className:`text-6xl font-mono font-bold mb-2 ${k.timeRemaining<0?"text-red-600 dark:text-red-400":"text-zinc-900 dark:text-zinc-100"}`,children:oq(k.timeRemaining)}),(0,l.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400 mb-4",children:k.timeRemaining<0?"⏱️ Overtime":k.isRunning?"Time remaining":"Press Space to start"})]}),(0,l.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,l.jsx)("button",{onClick:B,className:`px-8 py-4 rounded-full font-semibold text-lg transition-all shadow-lg hover:shadow-xl flex items-center gap-3 ${k.isRunning?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:k.isRunning?"⏸ Pause":"▶ Start"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{onClick:()=>D(e=>!e),className:"px-6 py-4 rounded-full font-semibold text-lg transition-all shadow-lg hover:shadow-xl bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-700 dark:text-zinc-200",title:"Extend (E)",children:["+",u.defaultExtendMinutes??5,"m"]}),C&&(0,l.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-white dark:bg-zinc-800 rounded-lg shadow-xl border border-zinc-200 dark:border-zinc-700 p-2 min-w-[140px]",children:[(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mb-2 px-2",children:"Extend by:"}),(u.extendOptions??[5,10,15,30]).map(e=>(0,l.jsxs)("button",{onClick:()=>q(e),className:"w-full text-left px-3 py-2 text-sm hover:bg-zinc-100 dark:hover:bg-zinc-700 rounded-md transition-colors",children:["+",e," minutes"]},e))]})]}),(0,l.jsx)("button",{onClick:H,className:"px-6 py-4 rounded-full font-semibold text-lg transition-all bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-700 dark:text-zinc-200",title:"Skip to Next",children:"Skip to Next"})]})]})}),(0,l.jsx)("div",{className:"p-4 border-t border-zinc-200 dark:border-zinc-800",children:(0,l.jsxs)("div",{className:"flex justify-center gap-6 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("span",{children:["🎯 Work: ",oq(k.totalWorkTime)]}),(0,l.jsxs)("span",{children:["☕ Break: ",oq(k.totalBreakTime)]}),(0,l.jsxs)("span",{children:["✅ Completed: ",k.tasksCompleted]})]})}),(u.showKeyboardHints??!0)&&(0,l.jsx)("div",{className:"p-4 text-center text-sm text-zinc-500 dark:text-zinc-400 border-t border-zinc-200 dark:border-zinc-800",children:(0,l.jsxs)("span",{children:["Space ",k.isRunning?"Pause":"Start"," • Shift+Enter Complete • E Extend • S Skip to Next • N Skip Task • M Mute • Esc Exit"]})}),(0,l.jsx)("div",{className:"h-2 bg-zinc-200 dark:bg-zinc-700",children:(0,l.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-1000",style:{width:`${Math.max(0,G)}%`}})})]})}function oG(e){let t=Math.abs(e),s=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60,a=s>0?`${s}:${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${n}:${r.toString().padStart(2,"0")}`;return e<0?`-${a}`:a}function oJ({settings:e,onClose:t}){let s=e.gantt??{},n=e.focus??{},r=s.schedulingTechnique??"pomodoro",a=s.pomodoroWorkDuration??25,i=s.pomodoroShortBreak??5,d=s.pomodoroLongBreak??15,c=s.pomodoroLongBreakInterval??4,m=s.flowWorkDuration??52,x=s.flowBreakDuration??17,u=s.defaultTaskDuration??30,h=s.contextSwitchingTime??5,p=(0,o.useCallback)(()=>{switch(r){case"pomodoro":return 60*a;case"flow":return 60*m;default:return 60*u}},[r,a,m,u]),g=(0,o.useCallback)((e,t)=>{switch(r){case"pomodoro":return t?60*d:60*i;case"flow":return 60*x;default:return 60*h}},[r,i,d,x,h]),[b,f]=(0,o.useState)(()=>({phase:"work",workTimeRemaining:p(),breakTimeRemaining:0,breakEndTime:null,sessionCount:0,breakSessionCount:0,totalWorkTime:0,totalBreakTime:0,totalIdleTime:0,isRunning:!1,lastPauseTime:null,pendingPhase:null,confirmationRepeats:0})),[k,j]=(0,o.useState)(n.soundEnabled??!0),[y,z]=(0,o.useState)("granted"===(0,v.getNotificationPermission)()),w=(0,o.useRef)(null),N=(0,o.useRef)(null);(0,o.useEffect)(()=>()=>{(0,v.clearSoundQueue)(),(0,v.stopAmbientSound)(),w.current&&clearInterval(w.current),N.current&&clearInterval(N.current)},[]),(0,o.useEffect)(()=>{if(!k)return void(0,v.stopAmbientSound)();let e="work"===b.phase,t="short-break"===b.phase||"long-break"===b.phase;if(b.isRunning&&e&&n.ambientWorkSound){let e=(0,v.getAmbientSoundFile)(n.ambientWorkSound);e&&(0,v.playAmbientSound)(e,n.ambientVolume??.3)}else if(b.isRunning&&t&&n.ambientBreakSound){let e=(0,v.getAmbientSoundFile)(n.ambientBreakSound);e&&(0,v.playAmbientSound)(e,n.ambientVolume??.3)}else(0,v.stopAmbientSound)()},[b.phase,b.isRunning,k,n.ambientWorkSound,n.ambientBreakSound,n.ambientVolume]);let C=(0,o.useCallback)(e=>{if("short-break"===e.pendingPhase||"long-break"===e.pendingPhase){let t="long-break"===e.pendingPhase,s=g(e.sessionCount,t),n=new Date;return n.setSeconds(n.getSeconds()+s),{...e,phase:e.pendingPhase,pendingPhase:null,confirmationRepeats:0,breakTimeRemaining:s,breakEndTime:n,isRunning:!0}}return"work"===e.pendingPhase?{...e,phase:"work",pendingPhase:null,confirmationRepeats:0,workTimeRemaining:p(),breakTimeRemaining:0,breakEndTime:null,isRunning:!0,breakSessionCount:e.breakSessionCount+1}:e},[p,g]),D=(0,o.useCallback)(()=>{N.current&&(clearInterval(N.current),N.current=null),f(e=>C(e))},[C]);(0,o.useEffect)(()=>{if(b.pendingPhase&&n.requireConfirmation){let e=n.confirmationMaxRepeats??5;return N.current=setInterval(()=>{f(t=>{let s=t.confirmationRepeats+1;return(k&&("long-break"===t.pendingPhase?(0,v.playNotificationSound)("long-break"):"short-break"===t.pendingPhase?(0,v.playNotificationSound)("short-break"):(0,v.playNotificationSound)("break-end")),e>0&&s>=e)?C(t):{...t,confirmationRepeats:s}})},(n.confirmationRepeatInterval??30)*1e3),()=>{N.current&&(clearInterval(N.current),N.current=null)}}},[b.pendingPhase,n.requireConfirmation,n.confirmationRepeatInterval,n.confirmationMaxRepeats,k,C]),(0,o.useEffect)(()=>{if(!b.isRunning||b.pendingPhase){w.current&&(clearInterval(w.current),w.current=null);return}return w.current=setInterval(()=>{f(e=>{if("work"===e.phase){let t=e.workTimeRemaining-1,s=e.totalWorkTime+1;if(t<=0){let t=e.sessionCount+1,a=!1,i="short-break";i="pomodoro"===r&&(a=t>0&&t%c==0)?"long-break":"short-break";let l=g(t,a);if(k&&(0,v.queueSounds)([a?"long-break":"short-break"]),y&&(0,v.sendNotification)(a?"🍅 Time for a long break!":"☕ Time for a break!",{body:`Session ${t} complete! Take a ${Math.ceil(l/60)} minute break.`,silent:!0}),n.requireConfirmation)return{...e,phase:"pending-break",pendingPhase:i,workTimeRemaining:0,sessionCount:t,totalWorkTime:s,isRunning:!1,confirmationRepeats:0,lastPauseTime:new Date};let o=new Date;return o.setSeconds(o.getSeconds()+l),{...e,phase:i,workTimeRemaining:0,breakTimeRemaining:l,breakEndTime:o,sessionCount:t,totalWorkTime:s}}return{...e,workTimeRemaining:t,totalWorkTime:s}}if("short-break"===e.phase||"long-break"===e.phase){let t=e.breakTimeRemaining-1,s=e.totalBreakTime+1;return t<=0?(k&&(0,v.queueSounds)(["break-end","task-start"]),y&&(0,v.sendNotification)("🍅 Break over - back to work!",{body:"Time to focus!",silent:!0}),n.requireConfirmation)?{...e,phase:"pending-work",pendingPhase:"work",breakTimeRemaining:0,breakEndTime:null,isRunning:!1,confirmationRepeats:0,totalBreakTime:s,lastPauseTime:new Date}:{...e,phase:"work",workTimeRemaining:p(),breakTimeRemaining:0,breakEndTime:null,totalBreakTime:s,breakSessionCount:e.breakSessionCount+1}:{...e,breakTimeRemaining:t,totalBreakTime:s}}return e})},1e3),()=>{w.current&&clearInterval(w.current)}},[b.isRunning,b.pendingPhase,r,c,k,y,n.requireConfirmation,p,g]);let S=(0,o.useCallback)(()=>{f(e=>{let t=0;if(!e.isRunning&&e.lastPauseTime&&(t=Math.floor((Date.now()-e.lastPauseTime.getTime())/1e3)),!e.isRunning&&"work"===e.phase)return k&&(0,v.playNotificationSound)("task-start"),{...e,isRunning:!0,lastPauseTime:null,totalIdleTime:e.totalIdleTime+t};if(!e.isRunning&&("short-break"===e.phase||"long-break"===e.phase)){let s=new Date;return s.setSeconds(s.getSeconds()+e.breakTimeRemaining),{...e,isRunning:!0,breakEndTime:s,lastPauseTime:null,totalIdleTime:e.totalIdleTime+t}}return e.isRunning&&"work"===e.phase?(k&&(0,v.playNotificationSound)("pause"),{...e,isRunning:!1,lastPauseTime:new Date}):e.isRunning&&("short-break"===e.phase||"long-break"===e.phase)?{...e,isRunning:!1,breakEndTime:null,lastPauseTime:new Date}:{...e,isRunning:!e.isRunning}})},[k]),T=(0,o.useCallback)(()=>{k&&(0,v.playNotificationSound)("task-start"),f(e=>({...e,phase:"work",workTimeRemaining:p(),breakTimeRemaining:0,breakEndTime:null,isRunning:!0,breakSessionCount:e.breakSessionCount+1,lastPauseTime:null}))},[k,p]),P=(0,o.useCallback)(()=>{let e=b.sessionCount+1,t=!1,s="short-break";"pomodoro"===r&&(s=(t=e>0&&e%c==0)?"long-break":"short-break");let n=g(e,t);k&&(0,v.playNotificationSound)(t?"long-break":"short-break");let a=new Date;a.setSeconds(a.getSeconds()+n),f(t=>({...t,phase:s,workTimeRemaining:0,breakTimeRemaining:n,breakEndTime:a,sessionCount:e,isRunning:!0,lastPauseTime:null}))},[b.sessionCount,r,c,g,k]);(0,o.useCallback)(()=>{f({phase:"work",workTimeRemaining:p(),breakTimeRemaining:0,breakEndTime:null,sessionCount:0,breakSessionCount:0,totalWorkTime:0,totalBreakTime:0,totalIdleTime:0,isRunning:!1,lastPauseTime:null,pendingPhase:null,confirmationRepeats:0})},[p]);let A=(0,o.useCallback)(async()=>{z("granted"===await (0,v.requestNotificationPermission)())},[]);(0,o.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key){case"Escape":e.preventDefault(),t();break;case" ":e.preventDefault(),"pending-break"===b.phase||"pending-work"===b.phase?D():S();break;case"Enter":e.preventDefault(),("pending-break"===b.phase||"pending-work"===b.phase)&&D();break;case"s":case"S":e.preventDefault(),"short-break"===b.phase||"long-break"===b.phase?T():"work"===b.phase&&P();break;case"m":case"M":e.preventDefault(),j(e=>!e)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[t,S,D,T,P,b.phase]);let E=(()=>{if("work"===b.phase){let e=p();return(e-b.workTimeRemaining)/e*100}if("short-break"===b.phase||"long-break"===b.phase){let e="long-break"===b.phase,t=g(b.sessionCount,e);return(t-b.breakTimeRemaining)/t*100}return 0})(),M="pomodoro"===r?"🍅":"flow"===r?"🌊":"📋",$="pomodoro"===r?"Pomodoro":"flow"===r?"Flow":"Sequential";if("pending-break"===b.phase||"pending-work"===b.phase){let e="pending-break"===b.phase,s="long-break"===b.pendingPhase,r=n.confirmationMaxRepeats??5,a=n.confirmationRepeatInterval??30;return(0,l.jsxs)("div",{className:`fixed inset-0 z-50 flex flex-col ${e?s?"bg-gradient-to-br from-green-50 to-emerald-100 dark:from-emerald-950 dark:to-zinc-900":"bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-cyan-950 dark:to-zinc-900":"bg-gradient-to-br from-amber-50 to-orange-100 dark:from-amber-950 dark:to-zinc-900"}`,children:[(0,l.jsxs)("header",{className:"flex items-center justify-between p-4 border-b border-zinc-200/50 dark:border-zinc-800/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/50 dark:hover:bg-zinc-700/50 rounded-lg transition-colors",title:"Exit (Esc)",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),(0,l.jsxs)("h1",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:[M," Open Focus (",$,")"]})]}),(0,l.jsx)("div",{className:"flex items-center gap-3",children:(0,l.jsx)("button",{onClick:()=>j(!k),className:`p-2 rounded-lg transition-colors ${k?"bg-white/50 dark:bg-zinc-700/50 text-zinc-900 dark:text-zinc-100":"text-zinc-400 dark:text-zinc-600"}`,title:k?"Mute sounds (M)":"Enable sounds (M)",children:k?(0,l.jsx)(oe.VolumeOnIcon,{className:"w-5 h-5"}):(0,l.jsx)(oe.VolumeOffIcon,{className:"w-5 h-5"})})})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-8xl mb-6",children:e?s?"☕":"💆":"🎯"}),(0,l.jsx)("h2",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:e?s?"Time for a long break!":"Time for a short break!":"Break complete!"}),(0,l.jsx)("p",{className:"text-xl text-zinc-600 dark:text-zinc-400 mb-8",children:e?`Session ${b.sessionCount} complete! Great work!`:"Ready to start the next session?"}),(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:r>0?(0,l.jsxs)(l.Fragment,{children:["Reminder ",b.confirmationRepeats," of ",r," • ","Sound plays every ",a,"s"]}):(0,l.jsxs)(l.Fragment,{children:["Sound plays every ",a,"s"]})}),(0,l.jsxs)("button",{onClick:D,className:`px-8 py-4 rounded-full font-semibold text-lg transition-all shadow-lg hover:shadow-xl ${e?s?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:[e?"Start Break":"Start Working"," (Space/Enter)"]})]})}),(0,l.jsx)("div",{className:"p-4 border-t border-zinc-200/50 dark:border-zinc-800/50",children:(0,l.jsxs)("div",{className:"flex justify-center gap-6 text-sm text-zinc-600 dark:text-zinc-400 flex-wrap",children:[(0,l.jsxs)("span",{children:["🎯 Work: ",b.sessionCount," sessions • ",oG(b.totalWorkTime)]}),(0,l.jsxs)("span",{children:["☕ Break: ",b.breakSessionCount," sessions • ",oG(b.totalBreakTime)]}),b.totalIdleTime>0&&(0,l.jsxs)("span",{children:["⏸️ Idle: ",oG(b.totalIdleTime)]})]})}),(0,l.jsx)("div",{className:"p-4 text-center text-sm text-zinc-500 dark:text-zinc-400 border-t border-zinc-200/50 dark:border-zinc-800/50",children:(0,l.jsxs)("span",{className:"inline-flex items-center gap-4 flex-wrap justify-center",children:[(0,l.jsx)("span",{children:"Space/Enter Confirm"}),(0,l.jsx)("span",{children:"M Mute"}),(0,l.jsx)("span",{children:"Esc Exit"})]})})]})}if("short-break"===b.phase||"long-break"===b.phase){let e="long-break"===b.phase;return(0,l.jsxs)("div",{className:`fixed inset-0 z-50 flex flex-col ${e?"bg-gradient-to-br from-green-50 to-emerald-100 dark:from-emerald-950 dark:to-zinc-900":"bg-gradient-to-br from-blue-50 to-cyan-100 dark:from-cyan-950 dark:to-zinc-900"}`,children:[(0,l.jsxs)("header",{className:"flex items-center justify-between p-4 border-b border-zinc-200/50 dark:border-zinc-800/50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:t,className:"p-2 hover:bg-white/50 dark:hover:bg-zinc-700/50 rounded-lg transition-colors",title:"Exit (Esc)",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),(0,l.jsxs)("h1",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:[M," Open Focus (",$,")"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("button",{onClick:()=>j(!k),className:`p-2 rounded-lg transition-colors ${k?"bg-white/50 dark:bg-zinc-700/50 text-zinc-900 dark:text-zinc-100":"text-zinc-400 dark:text-zinc-600"}`,title:k?"Mute sounds (M)":"Enable sounds (M)",children:k?(0,l.jsx)(oe.VolumeOnIcon,{className:"w-5 h-5"}):(0,l.jsx)(oe.VolumeOffIcon,{className:"w-5 h-5"})}),(0,l.jsxs)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Session ",b.sessionCount]})]})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-8xl mb-6",children:e?"☕":"💆"}),(0,l.jsx)("h2",{className:"text-3xl font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:e?"Take a long break!":"Take a short break!"}),(0,l.jsx)("div",{className:"text-7xl font-mono font-bold text-zinc-900 dark:text-zinc-100 mb-4",children:oG(b.breakTimeRemaining)}),(0,l.jsx)("p",{className:"text-lg text-zinc-600 dark:text-zinc-400 mb-8",children:b.breakEndTime?(0,l.jsxs)(l.Fragment,{children:["Continue at ",b.breakEndTime.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})]}):(0,l.jsx)("span",{className:"text-zinc-400 dark:text-zinc-500",children:"Paused"})}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,l.jsx)("button",{onClick:S,className:`px-6 py-3 rounded-lg font-medium transition-colors flex items-center gap-2 ${b.isRunning?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:b.isRunning?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(oe.PauseIcon,{className:"w-5 h-5"}),"Pause"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(oe.PlayIcon,{className:"w-5 h-5"}),"Resume"]})}),(0,l.jsx)("button",{onClick:T,className:"px-6 py-3 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors",children:"Skip Break"})]})]})}),(0,l.jsx)("div",{className:"p-4 border-t border-zinc-200/50 dark:border-zinc-800/50",children:(0,l.jsxs)("div",{className:"flex justify-center gap-6 text-sm text-zinc-600 dark:text-zinc-400 flex-wrap",children:[(0,l.jsxs)("span",{children:["🎯 Work: ",b.sessionCount," sessions • ",oG(b.totalWorkTime)]}),(0,l.jsxs)("span",{children:["☕ Break: ",b.breakSessionCount," sessions • ",oG(b.totalBreakTime)]}),b.totalIdleTime>0&&(0,l.jsxs)("span",{children:["⏸️ Idle: ",oG(b.totalIdleTime)]})]})}),(0,l.jsx)("div",{className:"p-4 text-center text-sm text-zinc-500 dark:text-zinc-400 border-t border-zinc-200/50 dark:border-zinc-800/50",children:(0,l.jsxs)("span",{className:"inline-flex items-center gap-4 flex-wrap justify-center",children:[(0,l.jsxs)("span",{children:["Space ",b.isRunning?"Pause":"Resume"]}),(0,l.jsx)("span",{children:"S Skip"}),(0,l.jsx)("span",{children:"M Mute"}),(0,l.jsx)("span",{children:"Esc Exit"})]})}),(0,l.jsx)("div",{className:"h-2 bg-zinc-200/50 dark:bg-zinc-700/50",children:(0,l.jsx)("div",{className:`h-full transition-all duration-1000 ${e?"bg-green-500":"bg-blue-500"}`,style:{width:`${E}%`}})})]})}return(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-zinc-900 dark:to-zinc-800",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-800",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:t,className:"p-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 rounded-lg transition-colors",title:"Exit (Esc)",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5 text-zinc-600 dark:text-zinc-400"})}),(0,l.jsxs)("h1",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:[M," Open Focus (",$,")"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("button",{onClick:()=>j(!k),className:`p-2 rounded-lg transition-colors ${k?"bg-zinc-200 dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100":"text-zinc-400 dark:text-zinc-600"}`,title:k?"Mute sounds (M)":"Enable sounds (M)",children:k?(0,l.jsx)(oe.VolumeOnIcon,{className:"w-5 h-5"}):(0,l.jsx)(oe.VolumeOffIcon,{className:"w-5 h-5"})}),!y&&(0,l.jsx)("button",{onClick:A,className:"p-2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 rounded-lg transition-colors",title:"Enable notifications",children:(0,l.jsx)(oe.BellIcon,{className:"w-5 h-5"})}),(0,l.jsxs)("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Session ",b.sessionCount+1]})]})]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:[(0,l.jsx)("div",{className:"text-8xl mb-6",children:"🎯"}),(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("div",{className:"text-8xl font-mono font-bold text-zinc-900 dark:text-zinc-100 mb-2",children:oG(b.workTimeRemaining)}),(0,l.jsx)("p",{className:"text-zinc-500 dark:text-zinc-400",children:b.isRunning?"Time remaining":"Press Space to start"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("button",{onClick:S,className:`px-8 py-4 rounded-full font-semibold text-lg transition-all shadow-lg hover:shadow-xl flex items-center gap-3 ${b.isRunning?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:b.isRunning?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(oe.PauseIcon,{className:"w-6 h-6"}),"Pause"]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(oe.PlayIcon,{className:"w-6 h-6"}),"Start"]})}),(0,l.jsx)("button",{onClick:P,className:"px-6 py-3 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors",children:"Skip to Break"})]})]}),(0,l.jsx)("div",{className:"p-4 border-t border-zinc-200 dark:border-zinc-800",children:(0,l.jsxs)("div",{className:"flex justify-center gap-6 text-sm text-zinc-600 dark:text-zinc-400 flex-wrap",children:[(0,l.jsxs)("span",{children:["🎯 Work: ",b.sessionCount," sessions • ",oG(b.totalWorkTime)]}),(0,l.jsxs)("span",{children:["☕ Break: ",b.breakSessionCount," sessions • ",oG(b.totalBreakTime)]}),b.totalIdleTime>0&&(0,l.jsxs)("span",{children:["⏸️ Idle: ",oG(b.totalIdleTime)]})]})}),(0,l.jsx)("div",{className:"p-4 text-center text-sm text-zinc-500 dark:text-zinc-400 border-t border-zinc-200 dark:border-zinc-800",children:(0,l.jsxs)("span",{className:"inline-flex items-center gap-4 flex-wrap justify-center",children:[(0,l.jsxs)("span",{children:["Space ",b.isRunning?"Pause":"Start"]}),(0,l.jsx)("span",{children:"S Skip"}),(0,l.jsx)("span",{children:"M Mute"}),(0,l.jsx)("span",{children:"Esc Exit"})]})}),(0,l.jsx)("div",{className:"h-2 bg-zinc-200 dark:bg-zinc-700",children:(0,l.jsx)("div",{className:"h-full bg-blue-600 transition-all duration-1000",style:{width:`${E}%`}})})]})}var oZ=e.i(37902);function oQ(e,t=0){let s=new Date(e),n=s.getDay();s.setDate(s.getDate()-(n-t+7)%7),s.setHours(0,0,0,0);let r=new Date(s);return r.setDate(r.getDate()+6),r.setHours(23,59,59,999),{start:s,end:r}}function oX(e){let t=new Date(e.getFullYear(),e.getMonth(),1);t.setHours(0,0,0,0);let s=new Date(e.getFullYear(),e.getMonth()+1,0);return s.setHours(23,59,59,999),{start:t,end:s}}function o0(e){if(0===e)return"0m";if(e<60)return`${e}m`;let t=Math.floor(e/60),s=e%60;return 0===s?`${t}h`:`${t}h ${s}m`}function o1(e){return new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}let o2={timePeriod:"thisWeek",groupBy:"assigned"},o4=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#ec4899","#84cc16","#6366f1"];function o5({todos:e,people:t,projects:s,settings:n,sprints:r}){let[a,i]=(0,o.useState)(o2),[d,c]=(0,o.useState)(!1),m=(0,o.useRef)(!0);(0,o.useEffect)(()=>{(0,p.loadFromStorage)(p.STORAGE_KEYS.TIME_REPORT_OPTIONS,o2).then(e=>{i(e),c(!0)})},[]);let{timePeriod:x,groupBy:u,customStartDate:h,customEndDate:g}=a;(0,o.useEffect)(()=>{if(m.current){m.current=!1;return}d&&(0,p.saveToStorage)(p.STORAGE_KEYS.TIME_REPORT_OPTIONS,a)},[a,d]);let b=(0,o.useMemo)(()=>{let e=new Date,t=n.dateTime?.workWeekStart||0;switch(x){case"today":{let t=new Date(e);t.setHours(0,0,0,0);let s=new Date(e);return s.setHours(23,59,59,999),{start:t,end:s}}case"thisWeek":return oQ(e,t);case"lastWeek":{let s=new Date(e);return s.setDate(s.getDate()-7),oQ(s,t)}case"thisMonth":return oX(e);case"lastMonth":{let t=new Date(e);return t.setMonth(t.getMonth()-1),oX(t)}case"custom":{let t=new Date(h||e);t.setHours(0,0,0,0);let s=new Date(g||e);return s.setHours(23,59,59,999),{start:t,end:s}}default:return{start:new Date(0),end:new Date(9999,11,31)}}},[x,n.dateTime?.workWeekStart,h,g]),f=(0,o.useMemo)(()=>{let t=[];return e.forEach(e=>{let n;if(!e.timeTracking||!e.timeTracking.entries||0===e.timeTracking.entries.length)return;let r=e.projects||[];if(r.length>0){let e=s.find(e=>e.name===r[0]||e.alternatives?.includes(r[0]));n=e?.category}e.timeTracking.entries.forEach(s=>{let a=s.duration||0;if(s.endTime||(a=Math.round((Date.now()-s.startTime)/6e4)),0===a)return;let i=new Date(s.startTime);i>=b.start&&i<=b.end&&t.push({todoId:e.id,todoText:e.plainText||e.text,date:new Date(s.startTime).toISOString(),duration:a,assignedPeople:e.assignedPeople||[],sourcePeople:e.sourcePeople||[],projects:r,category:n,sprint:e.sprint})})}),t},[e,b,s]),k=(0,o.useMemo)(()=>{let e=new Map;return f.forEach(t=>{let s=[];switch(u){case"assigned":s=t.assignedPeople.length>0?t.assignedPeople:["Unassigned"];break;case"source":s=t.sourcePeople.length>0?t.sourcePeople:["No Source"];break;case"project":s=t.projects.length>0?t.projects:["No Project"];break;case"category":s=[t.category||"Uncategorized"];break;case"sprint":s=[t.sprint||"No Sprint"];break;case"day":s=[t.date.split("T")[0]]}s.forEach(s=>{let n=e.get(s)||{entries:[],totalMinutes:0};n.entries.push(t),n.totalMinutes+=t.duration,e.set(s,n)})}),Array.from(e.entries()).sort((e,t)=>"day"===u?e[0].localeCompare(t[0]):t[1].totalMinutes-e[1].totalMinutes).map(([e,a])=>({key:e,displayName:"day"===u?o1(e):function(e,t,s,n,r,a){if("assigned"===t||"source"===t){let t=s.find(t=>t.name===e);return t?.displayName||e}if("project"===t){let t=n.find(t=>t.name===e);return t?.displayName||e}if("category"===t){let t=r?.find(t=>t.id===e);return t?.name||e}if("sprint"===t){let t=a?.find(t=>t.id===e);return t?.displayName||e}return e}(e,u,t,s,n.categories,r),entries:a.entries,totalMinutes:a.totalMinutes}))},[f,u,t,s,n.categories,r]),j=(0,o.useMemo)(()=>f.reduce((e,t)=>e+t.duration,0),[f]),y=()=>{switch(x){case"today":return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});case"thisWeek":case"lastWeek":return`${b.start.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${b.end.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`;case"thisMonth":case"lastMonth":return b.start.toLocaleDateString("en-US",{month:"long",year:"numeric"});case"custom":if(h&&g)return`${new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`;return"Custom Period";case"all":return"All Time";default:return""}},v=(0,o.useMemo)(()=>{let e=[],t=Math.min(14,Math.ceil((b.end.getTime()-b.start.getTime())/864e5)+1);for(let s=0;s<t;s++){let t=new Date(b.start);t.setDate(t.getDate()+s);let n=t.toISOString().split("T")[0],r=f.filter(e=>e.date.split("T")[0]===n).reduce((e,t)=>e+t.duration,0);e.push({date:n,label:t.toLocaleDateString("en-US",{weekday:"short"}),minutes:r})}return e},[f,b]),z=(0,o.useMemo)(()=>Math.max(1,...k.map(e=>e.totalMinutes)),[k]),w=(0,o.useMemo)(()=>Math.max(1,...v.map(e=>e.minutes)),[v]),N=e=>o4[e%o4.length];return(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex-1 flex flex-col overflow-hidden",children:[(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 p-4 border-b border-zinc-200 dark:border-zinc-700 print:hidden",children:(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex flex-wrap items-center gap-4",children:[(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex items-center gap-2",children:[(0,l.jsx)("label",{className:"jsx-b2df07aa91e9c6b6 text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Period:"}),(0,l.jsxs)("select",{value:x,onChange:e=>{var t;return t=e.target.value,void i(e=>({...e,timePeriod:t}))},className:"jsx-b2df07aa91e9c6b6 px-3 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded-md bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white",children:[(0,l.jsx)("option",{value:"today",className:"jsx-b2df07aa91e9c6b6",children:"Today"}),(0,l.jsx)("option",{value:"thisWeek",className:"jsx-b2df07aa91e9c6b6",children:"This Week"}),(0,l.jsx)("option",{value:"lastWeek",className:"jsx-b2df07aa91e9c6b6",children:"Last Week"}),(0,l.jsx)("option",{value:"thisMonth",className:"jsx-b2df07aa91e9c6b6",children:"This Month"}),(0,l.jsx)("option",{value:"lastMonth",className:"jsx-b2df07aa91e9c6b6",children:"Last Month"}),(0,l.jsx)("option",{value:"all",className:"jsx-b2df07aa91e9c6b6",children:"All Time"}),(0,l.jsx)("option",{value:"custom",className:"jsx-b2df07aa91e9c6b6",children:"Custom..."})]})]}),"custom"===x&&(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex items-center gap-2",children:[(0,l.jsx)("input",{type:"date",value:h||"",onChange:e=>{var t;return t=e.target.value,void i(e=>({...e,customStartDate:t}))},className:"jsx-b2df07aa91e9c6b6 px-2 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded-md bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white"}),(0,l.jsx)("span",{className:"jsx-b2df07aa91e9c6b6 text-zinc-500",children:"to"}),(0,l.jsx)("input",{type:"date",value:g||"",onChange:e=>{var t;return t=e.target.value,void i(e=>({...e,customEndDate:t}))},className:"jsx-b2df07aa91e9c6b6 px-2 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded-md bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white"})]}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex items-center gap-2",children:[(0,l.jsx)("label",{className:"jsx-b2df07aa91e9c6b6 text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Group by:"}),(0,l.jsxs)("select",{value:u,onChange:e=>{var t;return t=e.target.value,void i(e=>({...e,groupBy:t}))},className:"jsx-b2df07aa91e9c6b6 px-3 py-1.5 text-sm border border-zinc-300 dark:border-zinc-600 rounded-md bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white",children:[(0,l.jsx)("option",{value:"assigned",className:"jsx-b2df07aa91e9c6b6",children:"Assigned"}),(0,l.jsx)("option",{value:"source",className:"jsx-b2df07aa91e9c6b6",children:"Source"}),(0,l.jsx)("option",{value:"project",className:"jsx-b2df07aa91e9c6b6",children:"Project"}),(0,l.jsx)("option",{value:"category",className:"jsx-b2df07aa91e9c6b6",children:"Category"}),(0,l.jsx)("option",{value:"sprint",className:"jsx-b2df07aa91e9c6b6",children:"Sprint"}),(0,l.jsx)("option",{value:"day",className:"jsx-b2df07aa91e9c6b6",children:"Day"})]})]}),(0,l.jsxs)("button",{onClick:()=>{window.print()},className:"jsx-b2df07aa91e9c6b6 ml-auto px-3 py-1.5 text-sm font-medium text-zinc-700 dark:text-zinc-300 border border-zinc-300 dark:border-zinc-600 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-700 flex items-center gap-1.5",children:[(0,l.jsx)(oe.PrintIcon,{className:"w-4 h-4"}),"Print"]})]})}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 hidden print:block p-4 border-b border-zinc-300",children:[(0,l.jsx)("h1",{className:"jsx-b2df07aa91e9c6b6 text-2xl font-bold text-zinc-900",children:"Time Report"}),(0,l.jsx)("p",{className:"jsx-b2df07aa91e9c6b6 text-zinc-600",children:y()}),(0,l.jsxs)("p",{className:"jsx-b2df07aa91e9c6b6 text-zinc-600",children:["Grouped by: ",u.charAt(0).toUpperCase()+u.slice(1)]})]}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex-1 overflow-auto p-4 space-y-6",children:[(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6",children:[(0,l.jsx)("h2",{className:"jsx-b2df07aa91e9c6b6 text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Time Reports"}),(0,l.jsx)("p",{className:"jsx-b2df07aa91e9c6b6 text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:y()})]}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 bg-white dark:bg-zinc-900 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-3xl font-bold text-blue-600 dark:text-blue-400",children:o0(j)}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-sm text-zinc-600 dark:text-zinc-400",children:"Total Time"})]}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 bg-white dark:bg-zinc-900 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-3xl font-bold text-green-600 dark:text-green-400",children:f.length}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-sm text-zinc-600 dark:text-zinc-400",children:"Time Entries"})]}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 bg-white dark:bg-zinc-900 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-3xl font-bold text-amber-600 dark:text-amber-400",children:k.length}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-sm text-zinc-600 dark:text-zinc-400",children:"day"===u?"Days":"assigned"===u?"People":"source"===u?"Sources":"project"===u?"Projects":"sprint"===u?"Sprints":"Categories"})]}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 bg-white dark:bg-zinc-900 p-4 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-3xl font-bold text-purple-600 dark:text-purple-400",children:f.length>0?o0(Math.round(j/f.length)):"0m"}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-sm text-zinc-600 dark:text-zinc-400",children:"Avg per Entry"})]})]}),0===k.length?(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 text-center py-12 text-zinc-500 dark:text-zinc-400",children:[(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 text-4xl mb-4",children:"⏱️"}),(0,l.jsx)("p",{className:"jsx-b2df07aa91e9c6b6 text-lg",children:"No time entries found"}),(0,l.jsx)("p",{className:"jsx-b2df07aa91e9c6b6 text-sm mt-1",children:"Try selecting a different time period or start tracking time on tasks"})]}):(0,l.jsxs)(l.Fragment,{children:[v.length>1&&(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"jsx-b2df07aa91e9c6b6 font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"📊 Daily Activity"}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 flex items-end gap-2 h-32",children:v.map((e,t)=>(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex-1 flex flex-col items-center gap-1",children:[(0,l.jsx)("div",{style:{height:"100px"},className:"jsx-b2df07aa91e9c6b6 w-full flex items-end justify-center",children:(0,l.jsx)("div",{style:{height:`${Math.max(4,e.minutes/w*100)}px`},title:`${o0(e.minutes)}`,className:"jsx-b2df07aa91e9c6b6 w-full max-w-8 bg-blue-500 rounded-t transition-all hover:bg-blue-600"})}),(0,l.jsx)("span",{className:"jsx-b2df07aa91e9c6b6 text-xs text-zinc-500 dark:text-zinc-500",children:e.label})]},e.date))})]}),"day"!==u&&(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"jsx-b2df07aa91e9c6b6 font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"assigned"===u?"👤 Time by Assigned Person":"source"===u?"📥 Time by Source":"project"===u?"📁 Time by Project":"sprint"===u?"🏃 Time by Sprint":"📂 Time by Category"}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 space-y-3",children:k.slice(0,8).map((e,t)=>(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex items-center gap-3",children:[(0,l.jsx)("div",{title:e.displayName,className:"jsx-b2df07aa91e9c6b6 w-24 text-sm text-zinc-600 dark:text-zinc-400 truncate",children:e.displayName}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 flex-1 h-6 bg-zinc-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:(0,l.jsx)("div",{style:{width:`${e.totalMinutes/z*100}%`,backgroundColor:N(t)},className:"jsx-b2df07aa91e9c6b6 h-full rounded-full transition-all"})}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 w-16 text-right text-sm font-medium text-zinc-900 dark:text-zinc-100",children:o0(e.totalMinutes)})]},e.key))}),k.length>8&&(0,l.jsxs)("p",{className:"jsx-b2df07aa91e9c6b6 text-xs text-zinc-500 mt-3",children:["+ ",k.length-8," more"]})]}),"day"!==u&&k.length>0&&k.length<=10&&(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 bg-white dark:bg-zinc-900 p-6 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("h3",{className:"jsx-b2df07aa91e9c6b6 font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"📈 Distribution"}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex flex-col sm:flex-row items-center gap-6",children:[(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 relative w-40 h-40",children:[(0,l.jsx)("svg",{viewBox:"0 0 36 36",className:"jsx-b2df07aa91e9c6b6 w-full h-full -rotate-90",children:k.reduce((e,t,s)=>{let n=t.totalMinutes/j*100,r=e.offset;return e.elements.push((0,l.jsx)("circle",{cx:"18",cy:"18",r:"15.915",fill:"none",stroke:N(s),strokeWidth:"3",strokeDasharray:`${n} ${100-n}`,strokeDashoffset:-r,className:"jsx-b2df07aa91e9c6b6 transition-all"},t.key)),e.offset+=n,e},{elements:[],offset:0}).elements}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 absolute inset-0 flex items-center justify-center",children:(0,l.jsx)("span",{className:"jsx-b2df07aa91e9c6b6 text-lg font-bold text-zinc-900 dark:text-zinc-100",children:o0(j)})})]}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 flex-1 grid grid-cols-2 gap-2",children:k.map((e,t)=>(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex items-center gap-2",children:[(0,l.jsx)("div",{style:{backgroundColor:N(t)},className:"jsx-b2df07aa91e9c6b6 w-3 h-3 rounded-full flex-shrink-0"}),(0,l.jsx)("span",{title:e.displayName,className:"jsx-b2df07aa91e9c6b6 text-sm text-zinc-600 dark:text-zinc-400 truncate",children:e.displayName}),(0,l.jsxs)("span",{className:"jsx-b2df07aa91e9c6b6 text-xs text-zinc-400 dark:text-zinc-500 ml-auto",children:[Math.round(e.totalMinutes/j*100),"%"]})]},e.key))})]})]}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 bg-white dark:bg-zinc-900 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 px-4 py-3 border-b border-zinc-200 dark:border-zinc-700",children:(0,l.jsx)("h3",{className:"jsx-b2df07aa91e9c6b6 font-semibold text-zinc-900 dark:text-zinc-100",children:"📋 Detailed Breakdown"})}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 divide-y divide-zinc-100 dark:divide-zinc-800",children:k.map((e,t)=>(0,l.jsxs)("details",{className:"jsx-b2df07aa91e9c6b6 group",children:[(0,l.jsxs)("summary",{className:"jsx-b2df07aa91e9c6b6 flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-zinc-50 dark:hover:bg-zinc-800/50 list-none",children:[(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex items-center gap-3",children:[(0,l.jsx)("div",{style:{backgroundColor:N(t)},className:"jsx-b2df07aa91e9c6b6 w-3 h-3 rounded-full flex-shrink-0"}),(0,l.jsx)("span",{className:"jsx-b2df07aa91e9c6b6 font-medium text-zinc-900 dark:text-white",children:e.displayName}),(0,l.jsxs)("span",{className:"jsx-b2df07aa91e9c6b6 text-xs text-zinc-500 px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 rounded-full",children:[e.entries.length," ",1===e.entries.length?"entry":"entries"]})]}),(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex items-center gap-2",children:[(0,l.jsx)("span",{className:"jsx-b2df07aa91e9c6b6 text-sm font-semibold text-zinc-600 dark:text-zinc-300",children:o0(e.totalMinutes)}),(0,l.jsx)("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"jsx-b2df07aa91e9c6b6 w-4 h-4 text-zinc-400 group-open:rotate-180 transition-transform",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7",className:"jsx-b2df07aa91e9c6b6"})})]})]}),(0,l.jsx)("div",{className:"jsx-b2df07aa91e9c6b6 px-4 pb-3 divide-y divide-zinc-50 dark:divide-zinc-800/50",children:e.entries.map((e,t)=>(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 py-2 flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"jsx-b2df07aa91e9c6b6 flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"jsx-b2df07aa91e9c6b6 text-sm text-zinc-900 dark:text-zinc-100 truncate",children:e.todoText}),(0,l.jsxs)("p",{className:"jsx-b2df07aa91e9c6b6 text-xs text-zinc-500 dark:text-zinc-400",children:[o1(e.date),"project"!==u&&e.projects.length>0&&(0,l.jsxs)("span",{className:"jsx-b2df07aa91e9c6b6 ml-2",children:["• ",e.projects.join(", ")]}),"assigned"!==u&&e.assignedPeople.length>0&&(0,l.jsxs)("span",{className:"jsx-b2df07aa91e9c6b6 ml-2",children:["• ",e.assignedPeople.join(", ")]})]})]}),(0,l.jsx)("span",{className:"jsx-b2df07aa91e9c6b6 text-sm font-medium text-zinc-600 dark:text-zinc-300 ml-4",children:o0(e.duration)})]},`${e.todoId}-${e.date}-${t}`))})]},e.key))})]})]})]}),(0,l.jsx)(oZ.default,{id:"b2df07aa91e9c6b6",children:"@media print{body *{visibility:hidden}.print\\\\:block{visibility:visible}.print\\\\:block *{visibility:visible}#time-reports-view,#time-reports-view *{visibility:visible}#time-reports-view{width:100%;position:absolute;top:0;left:0}.print\\\\:hidden{display:none!important}.print\\\\:break-inside-avoid{break-inside:avoid}}"})]})}function o6(){return(0,l.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"✨ Smart Input Markers"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs text-blue-800 dark:text-blue-200",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 py-0.5 rounded",children:"@name"})," Assign"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 py-0.5 rounded",children:"%project"})," Project"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 py-0.5 rounded",children:"$name"})," Source"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 py-0.5 rounded",children:"!!high"})," Priority"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 py-0.5 rounded",children:"#tag"})," Tag"]})]}),(0,l.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:'💡 Dates and recurring patterns are automatically detected (e.g., "tomorrow", "next Friday", "every monday"). Click highlighted dates to deactivate. Use the detail view fields to set duration and dependencies.'})]})}var o3=e.i(24078),o9=e.i(8410);function o7({person:e,onClose:t,onUpdate:s,onDelete:n,onArchive:r,onUnarchive:a,onAddComment:i,onEditComment:d,onDeleteComment:c}){let[m,x]=(0,o.useState)(e.name),[u,h]=(0,o.useState)(e.alternatives),[p,b]=(0,o.useState)(e.color),[f,k]=(0,o.useState)(e.context||""),[j,y]=(0,o.useState)("");return(0,o.useEffect)(()=>{x(e.name),h(e.alternatives),b(e.color),k(e.context||"")},[e]),(0,o.useEffect)(()=>{let t=setTimeout(()=>{(m.trim()!==e.name||JSON.stringify(u)!==JSON.stringify(e.alternatives)||p!==e.color)&&s(e.id,{name:m.trim(),alternatives:u,color:p?(0,g.getColor)(p):void 0,context:f.trim()||void 0})},500);return()=>clearTimeout(t)},[m,u,p,e,s,f]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]),(0,l.jsx)(ou,{isOpen:!0,onClose:t,maxWidth:"3xl",children:(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white text-xl font-bold shadow-md",style:{backgroundColor:p||"#cce5ff"},children:m.charAt(0).toUpperCase()}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:m||"Person"}),(0,l.jsxs)("div",{className:"flex gap-1.5 mt-1",children:[(0,l.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 font-medium",children:["@",e.name]}),(0,l.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 font-medium",children:["$",e.name]}),(0,l.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 font-medium",children:e.name})]})]})]}),(0,l.jsx)("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Close",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"Name"}),(0,l.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Person name"})]}),(0,l.jsx)(o9.AlternativesInput,{value:u,onChange:h,placeholder:"e.g., Johnny, JD, John D."}),(0,l.jsx)(o3.ColorPicker,{value:p,onChange:b,defaultColor:"#cce5ff"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"📝 Context"}),(0,l.jsx)(on,{value:f,onChange:e=>k(e||""),onBlur:t=>{(t.trim()||void 0)!==e.context&&s(e.id,{name:m.trim(),alternatives:u,color:p?(0,g.getColor)(p):void 0,context:t.trim()||void 0})},placeholder:"Add context...",minHeight:"100px",maxHeight:"300px",noBorderInViewMode:!0})]}),(0,l.jsx)("div",{className:"pt-4",children:(0,l.jsx)(od,{isArchived:e.archived||!1,onArchive:r?()=>{r(e.id),t()}:void 0,onUnarchive:a?()=>{a(e.id),t()}:void 0,onDelete:()=>{n(e.id),t()},archiveLabel:"Archive person",unarchiveLabel:"Unarchive person",deleteLabel:"Delete person"})})]}),(0,l.jsxs)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-6",children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-3",children:"📋 Activity"}),(0,l.jsxs)("div",{className:"mb-4 flex gap-2 items-start",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(on,{value:j,onChange:y,placeholder:"Add a comment...",minHeight:"60px",maxHeight:"200px",alwaysEditable:!0})}),(0,l.jsx)("button",{onClick:()=>{j.trim()&&(i(e.id,j),y(""))},disabled:!j.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-300 disabled:cursor-not-allowed dark:disabled:bg-zinc-700 text-white rounded-md font-medium transition-colors",children:"Add"})]}),(0,l.jsx)(l8,{activities:e.activity||[],comments:e.comments})]})]})})}var o8=e.i(14082);function de({project:e,onClose:t,onUpdate:s,onDelete:n,onArchive:r,onUnarchive:a,onAddComment:i,onEditComment:d,onDeleteComment:c,categories:m=[]}){let x,[u,h]=(0,o.useState)(e.name),[p,b]=(0,o.useState)(e.alternatives),[f,k]=(0,o.useState)(e.color),[j,y]=(0,o.useState)(e.context||""),[v,z]=(0,o.useState)(e.category||""),[w,N]=(0,o.useState)("");return(0,o.useEffect)(()=>{h(e.name),b(e.alternatives),k(e.color),y(e.context||""),z(e.category||"")},[e]),(0,o.useEffect)(()=>{let t=setTimeout(()=>{(u.trim()!==e.name||JSON.stringify(p)!==JSON.stringify(e.alternatives)||f!==e.color||(v||void 0)!==e.category)&&s(e.id,{name:u.trim(),alternatives:p,color:f?(0,g.getColor)(f):void 0,context:j.trim()||void 0,category:v?(0,o8.getProjectCategoryId)(v):void 0})},500);return()=>clearTimeout(t)},[u,p,f,v,e,s,j]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]),(0,l.jsx)(ou,{isOpen:!0,onClose:t,maxWidth:"3xl",children:(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white text-xl font-bold shadow-md",style:{backgroundColor:f||"#e2ccff"},children:u.charAt(0).toUpperCase()}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:u||"Project"}),(0,l.jsx)("div",{className:"flex gap-1.5 mt-1",children:(0,l.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 font-medium",children:["%",e.name]})})]})]}),(0,l.jsx)("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Close",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"Name"}),(0,l.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Project name"})]}),(0,l.jsx)(o9.AlternativesInput,{value:p,onChange:b,placeholder:"e.g., Web Redesign, Site Refresh"}),(0,l.jsx)(o3.ColorPicker,{value:f,onChange:k,defaultColor:"#e2ccff"}),m.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"📂 Category"}),(0,l.jsxs)("select",{value:v,onChange:e=>z(e.target.value),className:"w-full px-3 py-2 text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,l.jsx)("option",{value:"",children:"No category"}),m.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),v&&(0,l.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(x=m.find(e=>e.id===v))?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:x.color}}),(0,l.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:x.description||x.name})]}):null})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"📝 Context"}),(0,l.jsx)(on,{value:j,onChange:e=>y(e||""),onBlur:t=>{(t.trim()||void 0)!==e.context&&s(e.id,{name:u.trim(),alternatives:p,color:f?(0,g.getColor)(f):void 0,context:t.trim()||void 0,category:v?(0,o8.getProjectCategoryId)(v):void 0})},placeholder:"Add context...",minHeight:"100px",maxHeight:"300px",noBorderInViewMode:!0})]}),(0,l.jsx)("div",{className:"pt-4",children:(0,l.jsx)(od,{isArchived:e.archived||!1,onArchive:r?()=>{r(e.id),t()}:void 0,onUnarchive:a?()=>{a(e.id),t()}:void 0,onDelete:()=>{n(e.id),t()},archiveLabel:"Archive project",unarchiveLabel:"Unarchive project",deleteLabel:"Delete project"})})]}),(0,l.jsxs)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-6",children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-3",children:"📋 Activity"}),(0,l.jsxs)("div",{className:"mb-4 flex gap-2 items-start",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(on,{value:w,onChange:N,placeholder:"Add a comment...",minHeight:"60px",maxHeight:"200px",alwaysEditable:!0})}),(0,l.jsx)("button",{onClick:()=>{w.trim()&&(i(e.id,w),N(""))},disabled:!w.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-300 disabled:cursor-not-allowed dark:disabled:bg-zinc-700 text-white rounded-md font-medium transition-colors",children:"Add"})]}),(0,l.jsx)(l8,{activities:e.activity||[],comments:e.comments})]})]})})}function dt({sprint:e,allSprints:t,todos:s,markerColors:n,onClose:r,onUpdate:a,onDelete:i,onStart:d,onComplete:c,onCancel:m,onArchive:x,onUnarchive:u,onAddComment:h,onEditComment:p,onDeleteComment:b,onTodoClick:f,onRemoveTodoFromSprint:k}){let[j,y]=(0,o.useState)("details"),[v,z]=(0,o.useState)(e.name),[w,N]=(0,o.useState)(e.goal||""),[C,D]=(0,o.useState)(e.durationDays),[S,T]=(0,o.useState)(e.plannedStartDate||""),[P,A]=(0,o.useState)(e.color||""),[E,M]=(0,o.useState)(""),$=(0,o.useMemo)(()=>s.filter(t=>t.metadata.sprint===e.id),[s,e.id]),R=$.filter(e=>"completed"===e.state),I=$.filter(e=>"active"===e.state);(0,o.useEffect)(()=>{z(e.name),N(e.goal||""),D(e.durationDays),T(e.plannedStartDate||""),A(e.color||"")},[e]),(0,o.useEffect)(()=>{if("planning"!==e.status)return;let t=setTimeout(()=>{(v.trim()!==e.name||(w.trim()||void 0)!==e.goal||C!==e.durationDays||(S||void 0)!==e.plannedStartDate||(P||void 0)!==e.color)&&a(e.id,{name:v.trim(),goal:w.trim()||void 0,durationDays:C,plannedStartDate:S||void 0,color:P?(0,g.getColor)(P):void 0})},500);return()=>clearTimeout(t)},[v,w,C,S,P,e,a]),(0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r]);let F=(0,o.useMemo)(()=>t.filter(e=>"completed"===e.status||"cancelled"===e.status).slice(-5).map(e=>{let t=s.filter(t=>t.metadata.sprint===e.id&&"completed"===t.state);return{sprintName:e.name,completed:t.length,total:s.filter(t=>t.metadata.sprint===e.id).length}}),[t,s]),L=(0,o.useMemo)(()=>{if("active"!==e.status||!e.actualStartDate)return[];let t=new Date(e.actualStartDate),s=$.length,n=[];for(let r=0;r<=e.durationDays;r++){let a=new Date(t);a.setDate(a.getDate()+r);let i=a.toISOString().split("T")[0],l=s-s/e.durationDays*r,o=s-$.filter(e=>"completed"===e.state&&!!e.completedAt&&new Date(e.completedAt).toISOString().split("T")[0]<=i).length;n.push({day:r,ideal:Math.max(0,l),actual:Math.max(0,o),date:i})}return n},[e,$]),W=e.canStart(t),O=e.canComplete(),B=e.canCancel(),Y=P||e.color||n.sprint,_=[{id:"details",label:"Details"},{id:"todos",label:"Todos",count:$.length},{id:"reports",label:"Reports"}];return(0,l.jsx)(ou,{isOpen:!0,onClose:r,maxWidth:"4xl",children:(0,l.jsxs)("div",{className:"flex flex-col h-[80vh] max-h-[800px]",children:[(0,l.jsxs)("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white text-xl font-bold shadow-md",style:{backgroundColor:Y},children:"🏃"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:v||"Sprint"}),(0,l.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,l.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded text-white",style:{backgroundColor:e.statusColor},children:e.statusLabel}),(0,l.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400",children:["📅 ",e.durationDays," days"]}),e.isArchived&&(0,l.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400",children:"📦 Archived"})]})]})]}),(0,l.jsx)("button",{onClick:r,className:"p-2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Close",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),(0,l.jsx)("div",{className:"flex gap-1 mt-4 border-b border-zinc-200 dark:border-zinc-700",children:_.map(e=>(0,l.jsxs)("button",{onClick:()=>y(e.id),className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${j===e.id?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 border-b-2 border-blue-500":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[e.label,void 0!==e.count&&(0,l.jsx)("span",{className:"ml-1.5 px-1.5 py-0.5 text-xs rounded bg-zinc-200 dark:bg-zinc-700",children:e.count})]},e.id))})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["details"===j&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"Sprint Name"}),(0,l.jsx)("input",{type:"text",value:v,onChange:e=>z(e.target.value),disabled:"planning"!==e.status,className:"w-full px-3 py-2 text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed",placeholder:"Sprint name"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"Duration (days)"}),(0,l.jsx)("input",{type:"number",value:C,onChange:e=>D(parseInt(e.target.value)||14),disabled:"planning"!==e.status,min:1,className:"w-full px-3 py-2 text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-60 disabled:cursor-not-allowed"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"planning"===e.status?"Planned Start Date":"Start Date"}),"planning"===e.status?(0,l.jsx)("input",{type:"date",value:S,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,l.jsx)("div",{className:"px-3 py-2 text-sm rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100",children:e.actualStartDate||"Not started"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:e.actualEndDate?"End Date":"Planned End Date"}),(0,l.jsx)("div",{className:"px-3 py-2 text-sm rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100",children:e.actualEndDate||e.plannedEndDate||"—"})]}),(0,l.jsxs)("div",{className:"md:col-span-2",children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"Color"}),(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("input",{type:"color",value:P||n.sprint,onChange:e=>A(e.target.value),disabled:"planning"!==e.status,className:"h-10 w-20 rounded cursor-pointer disabled:opacity-60 disabled:cursor-not-allowed"}),(0,l.jsx)("input",{type:"text",value:P||n.sprint,onChange:e=>A(e.target.value),disabled:"planning"!==e.status,className:"flex-1 px-3 py-2 text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono disabled:opacity-60 disabled:cursor-not-allowed",placeholder:"#dbeafe",pattern:"^#[0-9A-Fa-f]{6}$"}),P&&"planning"===e.status&&(0,l.jsx)("button",{onClick:()=>A(""),className:"px-3 py-2 text-sm rounded-lg border border-zinc-300 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Use Default"})]})]})]}),"active"===e.status&&(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:"Sprint Progress"}),(0,l.jsxs)("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:[e.daysElapsed," of ",e.durationDays," days"]})]}),(0,l.jsx)("div",{className:"h-3 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden mb-2",children:(0,l.jsx)("div",{className:`h-full transition-all duration-300 ${null!==e.daysRemaining&&e.daysRemaining<0?"bg-red-500":"bg-blue-500"}`,style:{width:`${e.progress}%`}})}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-zinc-500 dark:text-zinc-400",children:[(0,l.jsxs)("span",{children:[R.length,"/",$.length," tasks completed"]}),null!==e.daysRemaining&&(0,l.jsx)("span",{className:e.daysRemaining<0?"text-red-500 font-medium":"",children:e.daysRemaining<0?`${Math.abs(e.daysRemaining)} days overdue`:0===e.daysRemaining?"Last day!":`${e.daysRemaining} days remaining`})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-2",children:"🎯 Sprint Goal"}),"planning"===e.status?(0,l.jsx)(on,{value:w,onChange:e=>N(e||""),placeholder:"What is the goal of this sprint?",minHeight:"80px",maxHeight:"200px",noBorderInViewMode:!0}):(0,l.jsx)("div",{className:"px-3 py-2 text-sm rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 text-zinc-700 dark:text-zinc-300",dangerouslySetInnerHTML:{__html:e.goal||"<em>No goal set</em>"}})]}),(0,l.jsxs)("div",{className:"pt-4 border-t border-zinc-200 dark:border-zinc-800",children:[(0,l.jsx)("label",{className:"block text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-3",children:"⚡ Sprint Actions"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[W&&(0,l.jsx)("button",{onClick:()=>{d(e.id)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-lg transition-colors",children:"🚀 Start Sprint"}),O&&(0,l.jsx)("button",{onClick:()=>{c(e.id)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors",children:"✅ Complete Sprint"}),B&&(0,l.jsx)("button",{onClick:()=>{m(e.id)},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-lg transition-colors",children:"❌ Cancel Sprint"}),!W&&"planning"===e.status&&(0,l.jsx)("div",{className:"text-sm text-amber-600 dark:text-amber-400 flex items-center gap-2",children:"⚠️ Complete or cancel the active sprint before starting this one"})]})]}),(0,l.jsx)("div",{className:"pt-4",children:(0,l.jsx)(od,{isArchived:e.isArchived,onArchive:e.canArchive()?()=>{x(e.id),r()}:void 0,onUnarchive:e.canUnarchive()?()=>{u(e.id)}:void 0,onDelete:e.canDelete()?()=>{i(e.id),r()}:void 0,archiveLabel:"Archive sprint",unarchiveLabel:"Unarchive sprint",deleteLabel:"Delete sprint"})}),(0,l.jsxs)("div",{className:"border-t border-zinc-200 dark:border-zinc-800 pt-6",children:[(0,l.jsx)("h4",{className:"text-xs font-semibold text-zinc-600 dark:text-zinc-400 mb-3",children:"📋 Activity"}),(0,l.jsxs)("div",{className:"mb-4 flex gap-2 items-start",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)(on,{value:E,onChange:M,placeholder:"Add a comment...",minHeight:"60px",maxHeight:"200px",alwaysEditable:!0})}),(0,l.jsx)("button",{onClick:()=>{E.trim()&&(h(e.id,E),M(""))},disabled:!E.trim(),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-zinc-300 disabled:cursor-not-allowed dark:disabled:bg-zinc-700 text-white rounded-md font-medium transition-colors",children:"Add"})]}),(0,l.jsx)(l8,{activities:e.activity||[],comments:e.comments})]})]}),"todos"===j&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:$.length}),(0,l.jsx)("div",{className:"text-xs text-blue-600/70 dark:text-blue-400/70",children:"Total"})]}),(0,l.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400",children:I.length}),(0,l.jsx)("div",{className:"text-xs text-amber-600/70 dark:text-amber-400/70",children:"Active"})]}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:R.length}),(0,l.jsx)("div",{className:"text-xs text-green-600/70 dark:text-green-400/70",children:"Completed"})]})]}),0===$.length?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-4xl mb-3",children:"📋"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100 mb-1",children:"No tasks in this sprint"}),(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Assign tasks to this sprint from the todo detail view"})]}):(0,l.jsx)("div",{className:"space-y-2",children:$.map(e=>(0,l.jsxs)("div",{onClick:()=>f?.(e),className:`group flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${"completed"===e.state?"bg-zinc-50 dark:bg-zinc-800/50 border-zinc-200 dark:border-zinc-700":"bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[(0,l.jsx)("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${"completed"===e.state?"bg-green-500 border-green-500":"border-zinc-300 dark:border-zinc-600"}`,children:"completed"===e.state&&(0,l.jsx)(oe.CheckIcon,{className:"w-3 h-3 text-white",strokeWidth:3})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:`text-sm ${"completed"===e.state?"text-zinc-500 dark:text-zinc-400 line-through":"text-zinc-900 dark:text-zinc-100"}`,children:e.plainText}),e.metadata.dueDate&&(0,l.jsxs)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5",children:["📅 ",e.metadata.dueDate]})]}),k&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),k(e.id)},className:"p-1 text-zinc-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",title:"Remove from sprint",children:(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"})})]},e.id))})]}),"reports"===j&&(0,l.jsxs)("div",{className:"space-y-8",children:["active"===e.status&&L.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-4",children:"📉 Burndown Chart"}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-4",children:[(0,l.jsx)("div",{className:"h-48 relative",children:(0,l.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 400 160",preserveAspectRatio:"none",children:[[0,1,2,3,4].map(e=>(0,l.jsx)("line",{x1:"40",y1:20+30*e,x2:"380",y2:20+30*e,stroke:"currentColor",className:"text-zinc-200 dark:text-zinc-700",strokeWidth:"1"},e)),(0,l.jsx)("line",{x1:"40",y1:"20",x2:"380",y2:"140",stroke:"#94a3b8",strokeWidth:"2",strokeDasharray:"5,5"}),L.length>1&&(0,l.jsx)("polyline",{fill:"none",stroke:"#3b82f6",strokeWidth:"2",points:L.map((e,t)=>{let s=40+340/(L.length-1)*t,n=20+($.length-e.actual)/$.length*120;return`${s},${n}`}).join(" ")}),(0,l.jsx)("text",{x:"10",y:"80",className:"text-xs fill-zinc-500 dark:fill-zinc-400",transform:"rotate(-90, 10, 80)",children:"Tasks"}),(0,l.jsx)("text",{x:"210",y:"155",className:"text-xs fill-zinc-500 dark:fill-zinc-400",textAnchor:"middle",children:"Days"})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-6 mt-2 text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-4 h-0.5 bg-zinc-400 border-dashed",style:{borderStyle:"dashed"}}),(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Ideal"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-4 h-0.5 bg-blue-500"}),(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-400",children:"Actual"})]})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-4",children:"📊 Velocity (Last 5 Sprints)"}),0===F.length?(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-8 text-center",children:[(0,l.jsx)("div",{className:"text-3xl mb-2",children:"📊"}),(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"Complete sprints to see velocity data"})]}):(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-4",children:[(0,l.jsx)("div",{className:"h-40 flex items-end gap-2",children:F.map((e,t)=>(0,l.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,l.jsxs)("div",{className:"w-full max-w-12 flex flex-col items-center gap-1",children:[(0,l.jsx)("span",{className:"text-xs font-medium text-zinc-700 dark:text-zinc-300",children:e.completed}),(0,l.jsx)("div",{className:"w-full bg-green-500 dark:bg-green-600 rounded-t transition-all",style:{height:`${Math.max(8,e.completed/Math.max(...F.map(e=>e.total),1)*100)}px`}})]}),(0,l.jsx)("span",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2 truncate w-full text-center",children:e.sprintName.substring(0,8)})]},t))}),(0,l.jsxs)("div",{className:"text-center mt-4 text-xs text-zinc-500 dark:text-zinc-400",children:["Average: ",Math.round(F.reduce((e,t)=>e+t.completed,0)/F.length)," ","tasks/sprint"]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-300 mb-4",children:"📋 Sprint Summary"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:$.length}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Total Tasks"})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:R.length}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Completed"})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-4 text-center",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[$.length>0?Math.round(R.length/$.length*100):0,"%"]}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Completion Rate"})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-lg p-4 text-center",children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:e.durationDays}),(0,l.jsx)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:"Sprint Days"})]})]})]})]})]})]})})}let ds=[{id:"getting-started",title:"Getting Started",icon:"🚀"},{id:"quick-start",title:"Quick Start Guide",icon:"⚡"},{id:"views",title:"Views",icon:"👁️"},{id:"input",title:"Smart Input",icon:"✏️"},{id:"filtering",title:"Filtering & Sorting",icon:"🔍"},{id:"people-projects",title:"People & Projects",icon:"👥"},{id:"time-tracking",title:"Time & Focus",icon:"⏱️"},{id:"keyboard",title:"Keyboard Shortcuts",icon:"⌨️"},{id:"settings",title:"Settings",icon:"🔧"},{id:"workflows",title:"Workflows & Tutorials",icon:"📖"},{id:"productivity",title:"Productivity Techniques",icon:"💡"},{id:"advanced",title:"Advanced Features",icon:"⚙️"}];function dn({isOpen:e,onClose:t,onRestartTutorial:s}){let[n,r]=(0,o.useState)("getting-started");return e?(0,l.jsx)(ou,{isOpen:e,onClose:t,maxWidth:"4xl",children:(0,l.jsxs)("div",{className:"flex flex-col h-[80vh] max-h-[800px]",children:[(0,l.jsxs)("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-2xl",children:"❓"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Help & Documentation"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Learn how to use Doit effectively"})]})]}),(0,l.jsx)("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors","aria-label":"Close",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:ds.map(e=>(0,l.jsxs)("button",{onClick:()=>r(e.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${n===e.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:[(0,l.jsx)("span",{className:"mr-1",children:e.icon}),(0,l.jsx)("span",{className:"hidden sm:inline",children:e.title})]},e.id))})]}),(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["getting-started"===n&&(0,l.jsx)(dr,{onRestartTutorial:s}),"quick-start"===n&&(0,l.jsx)(da,{}),"views"===n&&(0,l.jsx)(di,{}),"input"===n&&(0,l.jsx)(dl,{}),"filtering"===n&&(0,l.jsx)(dd,{}),"people-projects"===n&&(0,l.jsx)(dc,{}),"time-tracking"===n&&(0,l.jsx)(dx,{}),"keyboard"===n&&(0,l.jsx)(dm,{}),"settings"===n&&(0,l.jsx)(du,{}),"workflows"===n&&(0,l.jsx)(dh,{}),"productivity"===n&&(0,l.jsx)(dp,{}),"advanced"===n&&(0,l.jsx)(dg,{})]})]})}):null}function dr({onRestartTutorial:e}){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"🚀 Getting Started"}),(0,l.jsxs)("div",{className:"prose prose-zinc dark:prose-invert max-w-none",children:[(0,l.jsx)("p",{className:"text-zinc-600 dark:text-zinc-400",children:"Welcome to Doit! This powerful todo app helps you manage tasks efficiently with smart input, multiple views, and flexible organization. Here's a quick overview to get you started:"}),(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-lg mt-4 border border-blue-200 dark:border-blue-800",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"🎯 First 5 Minutes"}),(0,l.jsxs)("ol",{className:"text-sm text-blue-800 dark:text-blue-200 list-decimal list-inside space-y-2",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Create a task:"})," Type in the input field and press Enter"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Complete it:"})," Click the checkbox next to your task"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Add details:"})," Click on a task to open the detail view"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Try views:"})," Press 1-4 to switch between List, Kanban, Gantt, Calendar"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Get help:"})," Press ? anytime to return here"]})]})]}),(0,l.jsxs)("div",{className:"space-y-4 mt-6",children:[(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📝 Step 1: Create Your First Task"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400 space-y-2",children:[(0,l.jsx)("p",{children:"The input field at the top is where everything starts. Here's how:"}),(0,l.jsxs)("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[(0,l.jsxs)("li",{children:["Click the input field (or press"," ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"N"}),")"]}),(0,l.jsxs)("li",{children:["Type your task:"," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Buy groceries tomorrow"})]}),(0,l.jsxs)("li",{children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"Enter"})," to create it"]}),(0,l.jsx)("li",{children:'Notice "tomorrow" was auto-detected as a due date! ✨'})]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"✅ Step 2: Complete Tasks"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400 space-y-2",children:[(0,l.jsx)("p",{children:"Mark tasks as done when you finish them:"}),(0,l.jsxs)("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[(0,l.jsx)("li",{children:"Click the checkbox (circle) next to any task"}),(0,l.jsx)("li",{children:'The task moves to the "Completed" section'}),(0,l.jsx)("li",{children:"Completed tasks auto-archive after 7 days (configurable in Settings)"}),(0,l.jsx)("li",{children:"The checkbox outline color shows the task's priority"})]}),(0,l.jsx)("p",{className:"mt-2 text-zinc-500 italic",children:"💡 Tip: Use ⌘/Ctrl+Z to undo any action!"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"👁️ Step 3: Explore Views"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400 space-y-2",children:[(0,l.jsx)("p",{children:"Doit offers multiple ways to see your tasks. Try switching views:"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-2 rounded border border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("span",{className:"font-medium",children:"📋 List (press 1)"}),(0,l.jsx)("p",{className:"text-xs text-zinc-500",children:"Traditional list with filters"})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-2 rounded border border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("span",{className:"font-medium",children:"📊 Kanban (press 2)"}),(0,l.jsx)("p",{className:"text-xs text-zinc-500",children:"Drag tasks between columns"})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-2 rounded border border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("span",{className:"font-medium",children:"📅 Gantt (press 3)"}),(0,l.jsx)("p",{className:"text-xs text-zinc-500",children:"Timeline with scheduling"})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-900 p-2 rounded border border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("span",{className:"font-medium",children:"🗓️ Calendar (press 4)"}),(0,l.jsx)("p",{className:"text-xs text-zinc-500",children:"Monthly calendar view"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"👥 Step 4: Add People & Projects"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400 space-y-2",children:[(0,l.jsx)("p",{children:"Organize tasks with people and projects:"}),(0,l.jsxs)("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[(0,l.jsxs)("li",{children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"5"})," to go to People view"]}),(0,l.jsx)("li",{children:'Click "Add Person" and enter a name (e.g., "John")'}),(0,l.jsxs)("li",{children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"6"})," to go to Projects view"]}),(0,l.jsx)("li",{children:'Click "Add Project" and enter a name (e.g., "Website")'}),(0,l.jsxs)("li",{children:["Now create a task:"," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Review design @John %Website"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🔍 Step 5: Click for Details"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400 space-y-2",children:[(0,l.jsx)("p",{children:"Every task has a rich detail view:"}),(0,l.jsxs)("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[(0,l.jsx)("li",{children:"Click on any task to open its detail overlay"}),(0,l.jsx)("li",{children:"Here you can edit the text, add comments, set due dates"}),(0,l.jsx)("li",{children:"Add duration estimates, subtasks, and dependencies"}),(0,l.jsx)("li",{children:"View activity history to see all changes"}),(0,l.jsxs)("li",{children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"Esc"})," to close"]})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg mt-4 border border-green-200 dark:border-green-800",children:[(0,l.jsx)("h4",{className:"font-semibold text-green-900 dark:text-green-100 text-sm mb-2",children:"🎓 Next Steps"}),(0,l.jsxs)("ul",{className:"text-sm text-green-800 dark:text-green-200 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:["Check out the ",(0,l.jsx)("strong",{children:"Quick Start Guide"})," tab for a hands-on tutorial"]}),(0,l.jsxs)("li",{children:["Learn about ",(0,l.jsx)("strong",{children:"Smart Input"})," to add tasks faster"]}),(0,l.jsxs)("li",{children:["Explore ",(0,l.jsx)("strong",{children:"Workflows & Tutorials"})," for common use cases"]}),(0,l.jsxs)("li",{children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-green-200 dark:bg-green-800 rounded text-xs",children:"/"})," to search your tasks"]})]}),e&&(0,l.jsxs)("button",{onClick:e,className:"mt-4 w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,l.jsx)("span",{children:"🎯"}),(0,l.jsx)("span",{children:"Start Interactive Tutorial"})]})]}),(0,l.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg mt-4 border border-amber-200 dark:border-amber-800",children:[(0,l.jsx)("h4",{className:"font-semibold text-amber-900 dark:text-amber-100 text-sm mb-2",children:"💾 About Your Data"}),(0,l.jsxs)("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:["All your data is stored locally in your browser (IndexedDB). Nothing is sent to any server.",(0,l.jsx)("strong",{children:" Create regular backups"})," in Settings → Backup to protect your data. You can export and import your entire task database anytime."]})]})]})]})}function da(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"⚡ Quick Start Guide"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Follow this step-by-step tutorial to learn the basics in 10 minutes. Try each step as you read!"}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-blue-500 text-white px-4 py-2 font-semibold",children:"📝 Tutorial 1: Creating Tasks (2 minutes)"}),(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-sm",children:"1"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Press N or click the input field"}),(0,l.jsx)("p",{className:"mt-1",children:'The cursor should be in the "Add a new todo..." field at the top.'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-sm",children:"2"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Type a simple task"}),(0,l.jsxs)("p",{className:"mt-1",children:["Try: ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-2 py-0.5 rounded",children:"Call dentist"})]}),(0,l.jsx)("p",{className:"mt-1",children:"Press Enter. Your task appears in the list!"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-sm",children:"3"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Now try a task with a date"}),(0,l.jsxs)("p",{className:"mt-1",children:["Type: ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-2 py-0.5 rounded",children:"Buy milk tomorrow"})]}),(0,l.jsx)("p",{className:"mt-1",children:'Notice how "tomorrow" gets highlighted? It\'s auto-detected as a due date!'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-sm",children:"4"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Try more date formats"}),(0,l.jsxs)("p",{className:"mt-1",children:["These all work: ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"next friday"}),","," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"in 3 days"}),","," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Dec 25"}),","," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"eod"})," (end of day)"]})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded text-sm text-green-800 dark:text-green-200",children:["✅ ",(0,l.jsx)("strong",{children:"You learned:"})," Creating tasks with automatic date detection"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-purple-500 text-white px-4 py-2 font-semibold",children:"🏷️ Tutorial 2: Using Markers (3 minutes)"}),(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400 font-bold text-sm",children:"1"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"First, create a person"}),(0,l.jsxs)("p",{className:"mt-1",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"5"}),' to go to People view → Click "Add Person" → Enter "John" → Save']})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400 font-bold text-sm",children:"2"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Create a project"}),(0,l.jsxs)("p",{className:"mt-1",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"6"}),' to go to Projects view → Click "Add Project" → Enter "Website" → Save']})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400 font-bold text-sm",children:"3"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Go back to List view"}),(0,l.jsxs)("p",{className:"mt-1",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"1"})," to return to the task list."]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400 font-bold text-sm",children:"4"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Use markers in your task"}),(0,l.jsxs)("p",{className:"mt-1",children:["Type:"," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-2 py-0.5 rounded",children:"Review homepage @John %Website !!high"})]}),(0,l.jsx)("p",{className:"mt-1",children:"Watch the text highlight as you type each marker!"})]})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-sm mt-3",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("th",{className:"text-left py-2 px-2 font-medium text-zinc-900 dark:text-zinc-100",children:"Marker"}),(0,l.jsx)("th",{className:"text-left py-2 px-2 font-medium text-zinc-900 dark:text-zinc-100",children:"Meaning"}),(0,l.jsx)("th",{className:"text-left py-2 px-2 font-medium text-zinc-900 dark:text-zinc-100",children:"Example"})]})}),(0,l.jsxs)("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800 text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-2 font-mono text-blue-600 dark:text-blue-400",children:"@"}),(0,l.jsx)("td",{className:"py-2 px-2",children:"Assign to person"}),(0,l.jsx)("td",{className:"py-2 px-2",children:(0,l.jsx)("code",{className:"bg-zinc-100 dark:bg-zinc-800 px-1 rounded",children:"@John"})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-2 font-mono text-green-600 dark:text-green-400",children:"$"}),(0,l.jsx)("td",{className:"py-2 px-2",children:"Source/requester"}),(0,l.jsx)("td",{className:"py-2 px-2",children:(0,l.jsx)("code",{className:"bg-zinc-100 dark:bg-zinc-800 px-1 rounded",children:"$Sarah"})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-2 font-mono text-purple-600 dark:text-purple-400",children:"%"}),(0,l.jsx)("td",{className:"py-2 px-2",children:"Project"}),(0,l.jsx)("td",{className:"py-2 px-2",children:(0,l.jsx)("code",{className:"bg-zinc-100 dark:bg-zinc-800 px-1 rounded",children:"%Website"})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-2 font-mono text-red-600 dark:text-red-400",children:"!!"}),(0,l.jsx)("td",{className:"py-2 px-2",children:"Priority"}),(0,l.jsx)("td",{className:"py-2 px-2",children:(0,l.jsx)("code",{className:"bg-zinc-100 dark:bg-zinc-800 px-1 rounded",children:"!!urgent"})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-2 font-mono text-cyan-600 dark:text-cyan-400",children:"#"}),(0,l.jsx)("td",{className:"py-2 px-2",children:"Tag"}),(0,l.jsx)("td",{className:"py-2 px-2",children:(0,l.jsx)("code",{className:"bg-zinc-100 dark:bg-zinc-800 px-1 rounded",children:"#frontend"})})]})]})]})}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded text-sm text-green-800 dark:text-green-200",children:["✅ ",(0,l.jsx)("strong",{children:"You learned:"})," Using @, $, %, !!, and # markers to add metadata"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-green-500 text-white px-4 py-2 font-semibold",children:"✅ Tutorial 3: Managing Tasks (2 minutes)"}),(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-sm",children:"1"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Complete a task"}),(0,l.jsx)("p",{className:"mt-1",children:'Click the checkbox (circle) next to "Call dentist" to mark it complete.'}),(0,l.jsx)("p",{className:"mt-1",children:'The task moves to the "Completed" section with a strikethrough.'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-sm",children:"2"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Undo a mistake"}),(0,l.jsxs)("p",{className:"mt-1",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"⌘/Ctrl + Z"})," to undo."]}),(0,l.jsx)("p",{className:"mt-1",children:"The task returns to Active! You can undo most actions."})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-sm",children:"3"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Open task details"}),(0,l.jsx)("p",{className:"mt-1",children:"Click on any task text to open the detail overlay."}),(0,l.jsx)("p",{className:"mt-1",children:"Here you can edit everything: text, dates, duration, comments, subtasks."})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-sm",children:"4"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Add a comment"}),(0,l.jsx)("p",{className:"mt-1",children:'In the detail overlay, scroll to "Comments" section.'}),(0,l.jsx)("p",{className:"mt-1",children:"Type a note and press Enter. Comments are great for tracking progress!"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-sm",children:"5"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Close the overlay"}),(0,l.jsxs)("p",{className:"mt-1",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"Esc"})," or click outside to close."]})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded text-sm text-green-800 dark:text-green-200",children:["✅ ",(0,l.jsx)("strong",{children:"You learned:"})," Completing tasks, undo/redo, and using the detail view"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsx)("div",{className:"bg-orange-500 text-white px-4 py-2 font-semibold",children:"🔍 Tutorial 4: Finding Tasks (3 minutes)"}),(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-sm",children:"1"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Search for tasks"}),(0,l.jsxs)("p",{className:"mt-1",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"/"})," to focus the search bar."]}),(0,l.jsx)("p",{className:"mt-1",children:"Type part of a task name. Results filter instantly!"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-sm",children:"2"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Open the filters panel"}),(0,l.jsxs)("p",{className:"mt-1",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"F"})," or click the filter button."]}),(0,l.jsx)("p",{className:"mt-1",children:"You'll see filter buttons for people, projects, priorities, and more."})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-sm",children:"3"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Filter by person"}),(0,l.jsx)("p",{className:"mt-1",children:'Click on "John" in the Assigned filter section.'}),(0,l.jsx)("p",{className:"mt-1",children:"Only tasks assigned to John are shown. Click again to remove the filter."})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-sm",children:"4"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Change grouping"}),(0,l.jsx)("p",{className:"mt-1",children:'Find the "Group by" dropdown (usually says "None").'}),(0,l.jsx)("p",{className:"mt-1",children:'Change it to "Project" or "Priority" to organize your view.'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-sm",children:"5"}),(0,l.jsxs)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Save as a preset (optional)"}),(0,l.jsx)("p",{className:"mt-1",children:"Like this view? Click the presets icon (star/bookmark) to save it."}),(0,l.jsx)("p",{className:"mt-1",children:'Give it a name like "John\'s Tasks" for quick access later.'})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-3 rounded text-sm text-green-800 dark:text-green-200",children:["✅ ",(0,l.jsx)("strong",{children:"You learned:"})," Searching, filtering, grouping, and saving view presets"]})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 text-sm mb-2",children:"🎉 You're Ready!"}),(0,l.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"You now know the basics of Doit! Explore the other help sections to learn about:"}),(0,l.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-200 list-disc list-inside mt-2 space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Views:"})," Kanban boards, Gantt charts, and Calendar"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Time & Focus:"})," Time tracking and Pomodoro techniques"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Advanced:"})," Recurring tasks, dependencies, subtasks, sprints"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Workflows:"})," Common use cases and best practices"]})]})]})]})}function di(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"👁️ Views"}),(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Doit offers multiple views to visualize and manage your tasks. Switch views using tabs or number keys"," ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"1-8"}),"."]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"📋 List View (1)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"The default view showing all your tasks in a list format. Features include:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Filter by status (Active, Completed, Archived)"}),(0,l.jsx)("li",{children:"Group by person, project, priority, due date, sprint, or category"}),(0,l.jsx)("li",{children:"Sort by created date, due date, priority, title, or manual order"}),(0,l.jsx)("li",{children:"Quick search across all task fields"}),(0,l.jsx)("li",{children:"Save and load custom view presets"}),(0,l.jsx)("li",{children:"Drag-and-drop manual reordering"})]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-purple-500 pl-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"📊 Kanban Board (2)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"A visual board for managing tasks through workflow states:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Drag and drop tasks between columns"}),(0,l.jsx)("li",{children:"Customizable workflow states (Backlog, To Do, In Progress, Review, Done, Archived)"}),(0,l.jsx)("li",{children:"Filter by sprint (All, Backlog, or specific sprint)"}),(0,l.jsx)("li",{children:"Create custom views showing different state combinations"}),(0,l.jsx)("li",{children:"Configure allowed state transitions in Settings"}),(0,l.jsx)("li",{children:"Cards show priority, assignee, due date, and more"})]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"📅 Gantt Chart (3)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Timeline visualization for planning and scheduling:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"View tasks on a horizontal timeline"}),(0,l.jsx)("li",{children:"Three scheduling techniques: Sequential, Pomodoro, and Flow"}),(0,l.jsx)("li",{children:"Customizable time blocks (meetings, focus time, lunch, breaks)"}),(0,l.jsx)("li",{children:"Group tasks by project"}),(0,l.jsx)("li",{children:"Shows dependencies between tasks"}),(0,l.jsx)("li",{children:'Click "Start Focus" to enter focus mode from any task'})]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-orange-500 pl-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"🗓️ Calendar View (4)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Monthly calendar showing tasks by due date:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Colored dots indicate tasks on each day (by state, priority, or project)"}),(0,l.jsx)("li",{children:"Click a day to see all tasks due"}),(0,l.jsx)("li",{children:"Navigate between months"}),(0,l.jsx)("li",{children:"Week numbers and overdue badges (optional)"}),(0,l.jsx)("li",{children:"Shows recurring task indicators"})]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-cyan-500 pl-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"👥 People View (5)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Manage your contacts with dedicated features:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Create people with names and alternative names (nicknames)"}),(0,l.jsx)("li",{children:"Add context notes and comments"}),(0,l.jsx)("li",{children:"Custom colors for highlighting in tasks"}),(0,l.jsx)("li",{children:"See task counts per person"}),(0,l.jsx)("li",{children:"Archive inactive people"})]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-indigo-500 pl-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"📁 Projects View (6)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Organize work into projects with categories:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Create projects with alternative names"}),(0,l.jsx)("li",{children:"Assign projects to categories (Work, Personal, etc.)"}),(0,l.jsx)("li",{children:"Custom colors for project badges"}),(0,l.jsx)("li",{children:"Add context notes and comments"}),(0,l.jsx)("li",{children:"Archive completed projects"})]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-pink-500 pl-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"🏃 Sprints View (7)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Scrum-style sprint planning:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Create time-boxed sprints with goals and dates"}),(0,l.jsx)("li",{children:"Sprint statuses: Planning, Active, Completed, Cancelled"}),(0,l.jsx)("li",{children:"Assign tasks to sprints via the task detail view"}),(0,l.jsx)("li",{children:"Filter Kanban board by sprint"}),(0,l.jsx)("li",{children:"Track sprint progress"})]})]}),(0,l.jsxs)("div",{className:"border-l-4 border-yellow-500 pl-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:"📈 Statistics View (8)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:"Analytics and insights:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Task completion rates over time"}),(0,l.jsx)("li",{children:"Distribution by person, project, and priority"}),(0,l.jsx)("li",{children:"Productivity trends"}),(0,l.jsx)("li",{children:"Time tracking summaries"})]})]})]})]})}function dl(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"✏️ Smart Input"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"The smart input field automatically detects metadata as you type, saving you time and clicks."}),(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 text-sm mb-3",children:"📝 Step-by-Step: Creating a Task with Metadata"}),(0,l.jsxs)("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-2",children:[(0,l.jsxs)("li",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"font-bold",children:"1."}),(0,l.jsxs)("span",{children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-blue-200 dark:bg-blue-800 rounded text-xs",children:"N"})," or click the input field"]})]}),(0,l.jsxs)("li",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"font-bold",children:"2."}),(0,l.jsxs)("span",{children:["Type your task: ",(0,l.jsx)("code",{className:"bg-blue-200 dark:bg-blue-800 px-1 rounded",children:"Review PR"})]})]}),(0,l.jsxs)("li",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"font-bold",children:"3."}),(0,l.jsxs)("span",{children:["Add who: ",(0,l.jsx)("code",{className:"bg-blue-200 dark:bg-blue-800 px-1 rounded",children:"@John"})," (type @ then the name)"]})]}),(0,l.jsxs)("li",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"font-bold",children:"4."}),(0,l.jsxs)("span",{children:["Add when: ",(0,l.jsx)("code",{className:"bg-blue-200 dark:bg-blue-800 px-1 rounded",children:"tomorrow"})," (auto-detected!)"]})]}),(0,l.jsxs)("li",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"font-bold",children:"5."}),(0,l.jsxs)("span",{children:["Add project: ",(0,l.jsx)("code",{className:"bg-blue-200 dark:bg-blue-800 px-1 rounded",children:"%Website"})]})]}),(0,l.jsxs)("li",{className:"flex gap-2",children:[(0,l.jsx)("span",{className:"font-bold",children:"6."}),(0,l.jsxs)("span",{children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-blue-200 dark:bg-blue-800 rounded text-xs",children:"Enter"})," to create!"]})]})]}),(0,l.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-3 italic",children:["Final input:"," ",(0,l.jsx)("code",{className:"bg-blue-200 dark:bg-blue-800 px-1 rounded",children:"Review PR @John tomorrow %Website"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-3",children:"🏷️ Available Markers"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-zinc-200 dark:border-zinc-700",children:[(0,l.jsx)("th",{className:"text-left py-2 px-3 font-semibold text-zinc-900 dark:text-zinc-100",children:"Marker"}),(0,l.jsx)("th",{className:"text-left py-2 px-3 font-semibold text-zinc-900 dark:text-zinc-100",children:"Purpose"}),(0,l.jsx)("th",{className:"text-left py-2 px-3 font-semibold text-zinc-900 dark:text-zinc-100",children:"Example"})]})}),(0,l.jsxs)("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3 font-mono text-blue-600 dark:text-blue-400",children:"@name"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Assign to person"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-500 dark:text-zinc-500",children:"Review PR @John"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3 font-mono text-green-600 dark:text-green-400",children:"$name"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Source person (who requested)"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-500 dark:text-zinc-500",children:"Fix bug $Sarah"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3 font-mono text-purple-600 dark:text-purple-400",children:"%project"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Link to project"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-500 dark:text-zinc-500",children:"Update docs %Website"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3 font-mono text-red-600 dark:text-red-400",children:"!!priority"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Set priority"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-500 dark:text-zinc-500",children:"Deploy hotfix !!urgent"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3 font-mono text-cyan-600 dark:text-cyan-400",children:"#tag"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Add tag"}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-500 dark:text-zinc-500",children:"Research #frontend #react"})]})]})]})})]}),(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 text-sm mb-3",children:"🪄 Auto-Detection (No Markers Needed!)"}),(0,l.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"These patterns are automatically detected without typing any markers:"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-3 rounded border border-blue-200 dark:border-blue-700",children:[(0,l.jsx)("h5",{className:"font-medium text-zinc-900 dark:text-zinc-100 text-sm mb-1",children:"📅 Dates"}),(0,l.jsxs)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 space-y-1",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Natural:"})," tomorrow, next friday, Dec 25, in 3 days, next week"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Shortcuts:"})," eod (end of day), bow (beginning of week), eom (end of month)"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Try it:"})," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Call client next tuesday"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-3 rounded border border-blue-200 dark:border-blue-700",children:[(0,l.jsx)("h5",{className:"font-medium text-zinc-900 dark:text-zinc-100 text-sm mb-1",children:"🔄 Recurring Patterns"}),(0,l.jsxs)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 space-y-1",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Intervals:"})," every day, every 2 weeks, every 3 months"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Weekdays:"})," every monday, every friday, every workday"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Nth days:"})," every first monday, every last friday"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Try it:"})," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Weekly standup every monday"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-3 rounded border border-blue-200 dark:border-blue-700",children:[(0,l.jsx)("h5",{className:"font-medium text-zinc-900 dark:text-zinc-100 text-sm mb-1",children:"👤 People Mentions"}),(0,l.jsxs)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 space-y-1",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Direct names:"})," Just type a person's name (if they exist)"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Source context:"}),' "from John", "via Sarah", "per Mike"']}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Try it:"})," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Review feedback from Sarah"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-3 rounded border border-blue-200 dark:border-blue-700",children:[(0,l.jsx)("h5",{className:"font-medium text-zinc-900 dark:text-zinc-100 text-sm mb-1",children:"📁 Projects"}),(0,l.jsxs)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 space-y-1",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"With context:"}),' "on Project", "for Project", "in Project"']}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Try it:"})," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Update docs on Website"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-zinc-800 p-3 rounded border border-blue-200 dark:border-blue-700",children:[(0,l.jsx)("h5",{className:"font-medium text-zinc-900 dark:text-zinc-100 text-sm mb-1",children:"⚡ Priorities"}),(0,l.jsxs)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 space-y-1",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Keywords:"})," urgent, high, medium, low (and their alternatives)"]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Try it:"})," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Fix security bug urgent"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-green-900 dark:text-green-100 text-sm mb-2",children:"📅 Date Shorthand Reference"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-sm text-green-800 dark:text-green-200",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"today"})," - Today"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"tomorrow"})," - Tomorrow"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"eod"})," - End of day"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"bod"})," - Beginning of day"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"bow"})," - Beginning of week"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"eow"})," - End of week"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"bom"})," - Beginning of month"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"eom"})," - End of month"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"boq"})," - Beginning of quarter"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"eoq"})," - End of quarter"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"morning"})," - Morning time"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("code",{className:"bg-green-200 dark:bg-green-800 px-1 rounded",children:"afternoon"})," - Afternoon time"]})]})]}),(0,l.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-amber-900 dark:text-amber-100 text-sm mb-2",children:"💡 Input Tips"}),(0,l.jsxs)("ul",{className:"text-sm text-amber-800 dark:text-amber-200 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Deactivate auto-detection:"})," Click on a detected token to turn it off"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"What stays in text:"})," People with @/$ markers stay visible in the task"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"What's removed:"})," Dates, recurring patterns, and duration are removed from text"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"No marker for:"})," Duration and dependencies - set these in the detail view"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Keyboard:"})," Press Enter to create, Escape to cancel"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-100 dark:bg-zinc-800 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 text-sm mb-2",children:"🎯 Complex Example"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Try typing this all-in-one task:"}),(0,l.jsx)("code",{className:"block bg-white dark:bg-zinc-900 p-3 rounded text-sm border border-zinc-300 dark:border-zinc-700",children:"Review homepage design @John %Website !!high tomorrow #design #frontend"}),(0,l.jsx)("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:"This creates a task assigned to John, linked to Website project, high priority, due tomorrow, with design and frontend tags."})]})]})}function dd(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"🔍 Filtering & Sorting"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🔎 Search"}),(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Use the search bar (or press"," ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"/"}),") to find tasks. Search looks across:"]}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Task text and plain text"}),(0,l.jsx)("li",{children:"Comments"}),(0,l.jsx)("li",{children:"Assigned people and source"}),(0,l.jsx)("li",{children:"Projects and tags"}),(0,l.jsx)("li",{children:"Context notes"})]}),(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 mt-2 italic",children:"Search history is saved automatically. Click on the search field to see recent searches."})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🎛️ Filters"}),(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:["Click the filter button (or press"," ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"F"}),") to show filter options. Available filters:"]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500"})," Assigned person"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Source person"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-purple-500"})," Project"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-yellow-500"})," Mentioned people"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-red-500"})," Priority"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-pink-500"})," Due date range"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-cyan-500"})," Duration"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-orange-500"})," Tags"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," Recurring tasks"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber-500"})," Dependencies"]})]}),(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 mt-2 italic",children:"Filter buttons are colored using your configured marker colors from Settings."})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📂 Grouping"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Group tasks to organize your view. Available grouping options:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"None:"})," Flat list of all tasks"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Person:"})," Group by assigned person"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Project:"})," Group by project"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Priority:"})," Group by priority level"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Due Date:"})," Group by due date (Overdue, Today, This Week, Later, etc.)"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Sprint:"})," Group by sprint assignment"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Category:"})," Group by project category"]})]}),(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-500 mt-2 italic",children:"Click on group headers to collapse/expand sections."})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"↕️ Sorting"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Sort tasks by these fields:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Created date (newest/oldest first)"}),(0,l.jsx)("li",{children:"Updated date"}),(0,l.jsx)("li",{children:"Due date (soonest/latest first)"}),(0,l.jsx)("li",{children:"Priority (highest/lowest first)"}),(0,l.jsx)("li",{children:"Title (alphabetical)"}),(0,l.jsx)("li",{children:"Manual order (drag to reorder)"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"💾 View Presets"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:'Save your current filter, sort, and group settings as a preset. Quickly switch between different views for different workflows (e.g., "My Tasks", "Team Overview", "Due This Week").'})]})]})]})}function dc(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"👥 People & Projects"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"👤 Creating People"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:'Go to the People view and click "Add Person". You can configure:'}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Name:"})," The primary name for the person"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Alternatives:"}),' Nicknames or variations (e.g., "Johnny", "JD")']}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Context:"})," Role, department, notes, or any other info (rich text supported)"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Color:"})," Custom highlight color (or use default marker color)"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Comments:"})," Add notes with full edit history"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📁 Creating Projects"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:'Go to the Projects view and click "Add Project". Projects have:'}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Name:"})," The primary project name"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Alternatives:"})," Other names or abbreviations"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Category:"})," Work, Personal, or custom categories"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Context:"})," Description, goals, or notes"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Color:"})," Custom color for project badges"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🏷️ Categories"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Organize projects into categories (e.g., Work, Personal, Client A). Configure categories in Settings → Categories. Categories help you:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Group related projects together"}),(0,l.jsx)("li",{children:"Filter tasks by category"}),(0,l.jsx)("li",{children:"Apply category-specific time blocks in Gantt view"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"✨ Using in Tasks"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Reference people and projects in your tasks:"}),(0,l.jsxs)("div",{className:"mt-2 space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("code",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 px-2 py-0.5 rounded font-mono",children:"@John"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Assign task to John (shows in blue)"})]}),(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("code",{className:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-2 py-0.5 rounded font-mono",children:"$Sarah"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Mark Sarah as source/requester (shows in green)"})]}),(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("code",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-0.5 rounded font-mono",children:"%Website"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Link to Website project (shows in purple)"})]}),(0,l.jsxs)("div",{className:"flex items-start gap-2",children:[(0,l.jsx)("code",{className:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 px-2 py-0.5 rounded font-mono",children:"John"}),(0,l.jsx)("span",{className:"text-zinc-600 dark:text-zinc-400",children:"Auto-detected mention (shows in yellow/orange)"})]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📦 Archiving"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Archive people or projects you no longer need. Archived items:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Won't appear in dropdowns when creating tasks"}),(0,l.jsx)("li",{children:"Remain linked to existing tasks"}),(0,l.jsx)("li",{children:'Can be viewed by toggling "Show Archived"'}),(0,l.jsx)("li",{children:"Can be unarchived anytime"})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 text-sm mb-2",children:"💡 Pro Tip: Alternative Names"}),(0,l.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:'Add alternative names for better auto-detection. For example, if you have a person named "John Doe" with alternatives "Johnny" and "JD", typing any of these in a task will automatically highlight them.'})]})]})]})}function dm(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"⌨️ Keyboard Shortcuts"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Use these shortcuts to navigate and manage tasks quickly. Shortcuts work when not focused on an input field."}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-3",children:"🧭 Navigation"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsx)("table",{className:"w-full text-sm",children:(0,l.jsxs)("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{className:"py-2 px-3 w-40",children:[(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"1"})," -"," ",(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"8"})]}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Switch between views (List, Kanban, Gantt, Calendar, People, Projects, Sprints, Stats)"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"/"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Focus search bar"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"Esc"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Close overlay / Clear search / Exit mode"})]})]})})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-3",children:"📝 Task Management"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsx)("table",{className:"w-full text-sm",children:(0,l.jsxs)("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3 w-40",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"N"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Create new task (focus input)"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"S"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Toggle selection mode for batch operations"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"F"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Toggle filters panel"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"?"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Show this help overlay"})]})]})})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-3",children:"↩️ Undo/Redo"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsx)("table",{className:"w-full text-sm",children:(0,l.jsxs)("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{className:"py-2 px-3 w-40",children:[(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"⌘/Ctrl"}),(0,l.jsx)("span",{className:"mx-1",children:"+"}),(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"Z"})]}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Undo last action"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{className:"py-2 px-3",children:[(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"⌘/Ctrl"}),(0,l.jsx)("span",{className:"mx-1",children:"+"}),(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"Shift"}),(0,l.jsx)("span",{className:"mx-1",children:"+"}),(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"Z"})]}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Redo last undone action"})]})]})})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-3",children:"🎯 Focus Mode"}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsx)("table",{className:"w-full text-sm",children:(0,l.jsxs)("tbody",{className:"divide-y divide-zinc-100 dark:divide-zinc-800",children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3 w-40",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"Space"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Pause/Resume timer"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"Enter"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Complete current task"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"→"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Skip to next task"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-3",children:(0,l.jsx)("kbd",{className:"px-2 py-1 bg-zinc-200 dark:bg-zinc-700 rounded text-xs font-mono",children:"+"})}),(0,l.jsx)("td",{className:"py-2 px-3 text-zinc-600 dark:text-zinc-400",children:"Extend timer"})]})]})})})]})]}),(0,l.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg mt-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-amber-900 dark:text-amber-100 text-sm mb-2",children:"💡 Tip"}),(0,l.jsxs)("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:["Keyboard shortcuts only work when you're not focused on an input field. Press"," ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-amber-200 dark:bg-amber-800 rounded text-xs",children:"Escape"})," first to unfocus any input, then use the shortcut."]})]})]})}function dx(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"⏱️ Time Tracking & Focus Mode"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"⏱️ Time Tracking"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Track time spent on tasks directly from the task detail view:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:'Click "Start Timer" to begin tracking'}),(0,l.jsx)("li",{children:"Pause and resume as needed"}),(0,l.jsx)("li",{children:"Add manual time entries"}),(0,l.jsx)("li",{children:"View total time tracked per task"}),(0,l.jsx)("li",{children:"Compare actual vs. estimated time"}),(0,l.jsx)("li",{children:"Time entries are stored with timestamps and optional notes"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🎯 Focus Mode"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Enter a distraction-free mode to work through your tasks sequentially:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:'Start from the Gantt view by clicking "Start Focus" on any task'}),(0,l.jsx)("li",{children:"Full-screen timer with task details"}),(0,l.jsx)("li",{children:"Automatic time tracking"}),(0,l.jsx)("li",{children:"Notifications when tasks complete or breaks start"}),(0,l.jsx)("li",{children:"Preview of the next task during breaks"}),(0,l.jsx)("li",{children:"Session statistics (tasks completed, time worked)"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🍅 Scheduling Techniques"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"The Gantt view supports three scheduling techniques:"}),(0,l.jsxs)("div",{className:"mt-3 space-y-3",children:[(0,l.jsxs)("div",{className:"pl-3 border-l-2 border-blue-500",children:[(0,l.jsx)("h5",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"📋 Sequential"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Simple task-to-task scheduling with configurable context switching time between tasks."})]}),(0,l.jsxs)("div",{className:"pl-3 border-l-2 border-red-500",children:[(0,l.jsx)("h5",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"🍅 Pomodoro"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Work in focused sessions (default 25 min) with short breaks (5 min) and long breaks (15 min) after every 4 sessions. Includes audio notifications."})]}),(0,l.jsxs)("div",{className:"pl-3 border-l-2 border-green-500",children:[(0,l.jsx)("h5",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"🌊 Flow"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Extended focus sessions (default 52 min) with longer breaks (17 min). Based on the 52/17 method or Ultradian rhythm."})]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🔔 Notifications & Sounds"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Configure alerts in Settings → Focus:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Browser notifications for breaks and task events"}),(0,l.jsx)("li",{children:"Sound alerts (different tones for short/long breaks)"}),(0,l.jsx)("li",{children:"Optional confirmation before starting breaks"}),(0,l.jsx)("li",{children:"Ambient sounds during work and break phases"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"⏰ Time Blocks"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Block out parts of your day in Settings → Work Hours:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Set work hours for each day"}),(0,l.jsx)("li",{children:"Add blocks: Break ☕, Lunch 🍴, Meeting 👥, Focus Time 🎯, Commute 🚗, Personal 🏠"}),(0,l.jsx)("li",{children:"Custom colors per block type"}),(0,l.jsx)("li",{children:"Different schedules for weekdays vs. weekends"}),(0,l.jsx)("li",{children:"Tasks automatically schedule around your blocks"})]})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 text-sm mb-2",children:"💡 Time Tracking Tips"}),(0,l.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-200 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Set duration estimates on tasks to compare actual vs. planned time"}),(0,l.jsx)("li",{children:"Use Focus Mode to automatically track time while working"}),(0,l.jsx)("li",{children:"Review tracked time in the Statistics view"}),(0,l.jsx)("li",{children:"Extend the timer if you need more time (press + in Focus Mode)"})]})]})]})}function du(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"🔧 Settings"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Access settings via the gear icon in the header. Settings are organized into tabs:"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"⚙️ General"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Theme:"})," Light, Dark, or System preference"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Auto-Archive:"})," Days before completed tasks are archived (default: 7)"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Auto-Delete:"})," Days before archived tasks are deleted (default: 90)"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Feature Toggles:"})," Enable/disable views and features to simplify the interface"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🎨 Priorities"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Create custom priority levels (default: Urgent, High, Medium, Low)"}),(0,l.jsx)("li",{children:"Set custom colors for each priority"}),(0,l.jsx)("li",{children:'Add alternative names (e.g., "asap" for "urgent")'}),(0,l.jsx)("li",{children:"Drag to reorder priority levels"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🏷️ Categories"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Organize projects into categories (Work, Personal, etc.)"}),(0,l.jsx)("li",{children:"Custom colors per category"}),(0,l.jsx)("li",{children:"Filter and group tasks by category"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🎨 Markers"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Customize colors for each marker type (@, $, %, !!, #, etc.)"}),(0,l.jsx)("li",{children:"Colors apply to highlighting in the input and task display"}),(0,l.jsx)("li",{children:"Filter buttons also use these colors"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📅 Date/Time"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Time-of-day:"})," Set times for morning, noon, afternoon, evening shortcuts"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Work Week Start:"})," Sunday or Monday"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Fiscal Year Start:"})," Month when fiscal year begins (for bofy/eofy shortcuts)"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🕐 Work Hours"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Set daily work hours (start/end times)"}),(0,l.jsx)("li",{children:"Add time blocks (lunch, meetings, focus time, breaks)"}),(0,l.jsx)("li",{children:"Different schedules for weekdays vs. weekends"}),(0,l.jsx)("li",{children:"Per-day custom schedules if needed"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📊 Gantt & Calendar"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Gantt:"})," Scheduling technique (Sequential, Pomodoro, Flow), presets, zoom level"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Calendar:"})," Week start day, dot colors, task limits per day"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📋 Kanban"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Workflow States:"})," Add/edit/reorder columns with custom colors and icons"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Transitions:"})," Define which states can move to which others"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Views:"})," Create custom views showing different state combinations"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🔄 Auto-Assign"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Set default values for new tasks. When enabled, new tasks automatically get:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Default assigned person"}),(0,l.jsx)("li",{children:"Default project"}),(0,l.jsx)("li",{children:"Default priority (default: Medium)"}),(0,l.jsx)("li",{children:"Default due date (default: Today)"}),(0,l.jsx)("li",{children:"Default duration (default: 30 minutes)"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"💾 Backup & Import"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Backup:"})," Export all data as JSON (tasks, people, projects, settings)"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Restore:"})," Import from a backup file"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Export:"})," Export tasks in Markdown, CSV, or JSON format"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Import:"})," Import tasks from external sources"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🔗 Links"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Define link patterns to auto-detect references in task text:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:'Set a prefix (e.g., "T") and URL template (e.g., "https://jira.com/browse/{id}")'}),(0,l.jsx)("li",{children:'Text like "T-123" becomes a clickable link'}),(0,l.jsx)("li",{children:"Custom colors per link pattern"})]})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-green-900 dark:text-green-100 text-sm mb-2",children:"💡 Simplify Your Interface"}),(0,l.jsx)("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Don't need all features? Go to Settings → General → Feature Toggles to disable views (Gantt, Calendar, Kanban, Sprints, Stats) and features (Templates, Batch Processing, Focus Mode) you don't use."})]})]})}function dh(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"📖 Workflows & Tutorials"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Learn how to use Doit effectively with these common workflows and step-by-step guides."}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"☀️ Daily Planning Workflow"}),(0,l.jsx)("p",{className:"text-sm text-blue-100 mt-1",children:"Start each day organized and focused"})]}),(0,l.jsxs)("div",{className:"p-4 space-y-3 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-xs",children:"1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Review overdue tasks"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Open List view → Filter by "Overdue" in Due Dates section'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-xs",children:"2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Check today's tasks"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Filter by "Today" to see what\'s due'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-xs",children:"3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Plan in Gantt view"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Press 3 for Gantt → See your day laid out on a timeline"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-xs",children:"4"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Start Focus Mode"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Click "Start Focus" on any task to work with a timer'})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-xs",children:[(0,l.jsx)("strong",{children:"Pro tip:"})," Use the Pomodoro scheduling technique for structured work sessions with breaks"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white px-4 py-3",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"👥 Team Task Assignment"}),(0,l.jsx)("p",{className:"text-sm text-purple-100 mt-1",children:"Delegate and track work for your team"})]}),(0,l.jsxs)("div",{className:"p-4 space-y-3 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400 font-bold text-xs",children:"1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Set up your team"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"People view (5) → Add each team member with role in Context field"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400 font-bold text-xs",children:"2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Create project tasks"}),(0,l.jsxs)("p",{className:"text-xs mt-0.5",children:["Use:"," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Task name @John %Project !!high tomorrow"})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400 font-bold text-xs",children:"3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"View by person"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Group by "Person" to see each team member\'s workload'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center text-purple-600 dark:text-purple-400 font-bold text-xs",children:"4"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Track in Kanban"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Press 2 for Kanban → Drag tasks through workflow stages"})]})]}),(0,l.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-xs",children:[(0,l.jsx)("strong",{children:"Pro tip:"})," Use $name to track who requested a task (e.g.,"," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Fix bug $Sarah"}),")"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-3",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"🏃 Sprint Planning (Agile)"}),(0,l.jsx)("p",{className:"text-sm text-green-100 mt-1",children:"Plan and execute time-boxed sprints"})]}),(0,l.jsxs)("div",{className:"p-4 space-y-3 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-xs",children:"1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Create a sprint"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Sprints view (7) → Add Sprint → Set name, goal, dates (usually 2 weeks)"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-xs",children:"2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Assign tasks to sprint"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Open task detail → Set "Sprint" dropdown, or batch-select tasks'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-xs",children:"3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Activate the sprint"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Click "Set Active" on the sprint to start working'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-xs",children:"4"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Track on Kanban"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Kanban view (2) → Filter by sprint → Move tasks through columns"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center text-green-600 dark:text-green-400 font-bold text-xs",children:"5"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Complete sprint"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Mark sprint as "Completed" → Review in Statistics view (8)'})]})]}),(0,l.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-xs",children:[(0,l.jsx)("strong",{children:"Pro tip:"})," Group by Sprint in List view to see all sprint tasks at once"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-4 py-3",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"📁 Project Management"}),(0,l.jsx)("p",{className:"text-sm text-orange-100 mt-1",children:"Organize work into projects with dependencies"})]}),(0,l.jsxs)("div",{className:"p-4 space-y-3 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-xs",children:"1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Create the project"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Projects view (6) → Add Project → Set category (Work, Personal, etc.)"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-xs",children:"2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Break down into tasks"}),(0,l.jsxs)("p",{className:"text-xs mt-0.5",children:["Create tasks with ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"%ProjectName"})," marker"]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-xs",children:"3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Add dependencies"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Open task detail → "Blocked By" field → Select prerequisite tasks'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-xs",children:"4"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Use subtasks for complex items"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Open task detail → Add subtasks → Check off as completed"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-xs",children:"5"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Visualize in Gantt"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Gantt view (3) → Enable "Group by Project" → See dependencies as arrows'})]})]}),(0,l.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-2 rounded text-xs",children:[(0,l.jsx)("strong",{children:"Pro tip:"})," Use"," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"on ProjectName"})," or"," ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"for ProjectName"})," for auto-detection without markers"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-cyan-500 to-cyan-600 text-white px-4 py-3",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"🔄 Setting Up Recurring Tasks"}),(0,l.jsx)("p",{className:"text-sm text-cyan-100 mt-1",children:"Automate repetitive tasks"})]}),(0,l.jsxs)("div",{className:"p-4 space-y-3 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center text-cyan-600 dark:text-cyan-400 font-bold text-xs",children:"1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:'Create with "every" pattern'}),(0,l.jsxs)("p",{className:"text-xs mt-0.5",children:["Type: ",(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"Weekly review every friday"})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center text-cyan-600 dark:text-cyan-400 font-bold text-xs",children:"2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"The pattern auto-detects"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Watch "every friday" highlight → First due date is set automatically'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-cyan-100 dark:bg-cyan-900/30 rounded-full flex items-center justify-center text-cyan-600 dark:text-cyan-400 font-bold text-xs",children:"3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Complete and regenerate"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"When you complete the task, a new one is created for next Friday"})]})]}),(0,l.jsxs)("div",{className:"mt-3 p-3 bg-zinc-100 dark:bg-zinc-800 rounded",children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100 mb-2",children:"Supported patterns:"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"every day"}),(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"every 2 weeks"}),(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"every monday"}),(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"every workday"}),(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"every first monday"}),(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"every last friday"}),(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"every 3 months"}),(0,l.jsx)("code",{className:"bg-zinc-200 dark:bg-zinc-700 px-1 rounded",children:"every year"})]})]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-pink-500 to-pink-600 text-white px-4 py-3",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"⚡ Batch Operations"}),(0,l.jsx)("p",{className:"text-sm text-pink-100 mt-1",children:"Edit multiple tasks at once"})]}),(0,l.jsxs)("div",{className:"p-4 space-y-3 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-pink-100 dark:bg-pink-900/30 rounded-full flex items-center justify-center text-pink-600 dark:text-pink-400 font-bold text-xs",children:"1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Enter selection mode"}),(0,l.jsxs)("p",{className:"text-xs mt-0.5",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"S"})," → Round checkboxes appear"]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-pink-100 dark:bg-pink-900/30 rounded-full flex items-center justify-center text-pink-600 dark:text-pink-400 font-bold text-xs",children:"2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Select tasks"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Click tasks to select, or use "Select All" / "Clear All"'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-pink-100 dark:bg-pink-900/30 rounded-full flex items-center justify-center text-pink-600 dark:text-pink-400 font-bold text-xs",children:"3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Choose action"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Use toolbar: Complete, Archive, Delete, or "Edit" for more options'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-pink-100 dark:bg-pink-900/30 rounded-full flex items-center justify-center text-pink-600 dark:text-pink-400 font-bold text-xs",children:"4"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Batch edit metadata"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Click "Edit" → Change assignee, project, priority, sprint, or due date for all'})]})]}),(0,l.jsxs)("div",{className:"bg-pink-50 dark:bg-pink-900/20 p-2 rounded text-xs",children:[(0,l.jsx)("strong",{children:"Pro tip:"})," Use filters first to show only the tasks you want to batch edit"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-indigo-500 to-indigo-600 text-white px-4 py-3",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"📅 Time Blocking Your Day"}),(0,l.jsx)("p",{className:"text-sm text-indigo-100 mt-1",children:"Schedule tasks around meetings and breaks"})]}),(0,l.jsxs)("div",{className:"p-4 space-y-3 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-xs",children:"1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Set up work hours"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Settings → Work Hours → Set your daily start/end times"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-xs",children:"2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Add time blocks"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Add blocks for: Lunch 🍴, Meetings 👥, Focus Time 🎯, Breaks ☕"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-xs",children:"3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Set task durations"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Open each task → Set estimated duration (e.g., 30m, 1h)"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-xs",children:"4"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"View in Gantt"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Tasks auto-schedule around your blocks → See your planned day"})]})]}),(0,l.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-2 rounded text-xs",children:[(0,l.jsx)("strong",{children:"Pro tip:"})," Choose a scheduling technique (Sequential, Pomodoro, or Flow) in Gantt settings"]})]})]}),(0,l.jsxs)("div",{className:"border border-zinc-200 dark:border-zinc-700 rounded-lg overflow-hidden",children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 text-white px-4 py-3",children:[(0,l.jsx)("h4",{className:"font-semibold",children:"💾 Backup Your Data"}),(0,l.jsx)("p",{className:"text-sm text-amber-100 mt-1",children:"Keep your tasks safe"})]}),(0,l.jsxs)("div",{className:"p-4 space-y-3 text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center text-amber-600 dark:text-amber-400 font-bold text-xs",children:"1"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Open backup settings"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Settings (gear icon) → Backup tab"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center text-amber-600 dark:text-amber-400 font-bold text-xs",children:"2"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Create a full backup"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Click "Export Backup" → Download JSON file'})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center text-amber-600 dark:text-amber-400 font-bold text-xs",children:"3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"Store safely"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:"Save to cloud storage (Drive, Dropbox) or email to yourself"})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,l.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center text-amber-600 dark:text-amber-400 font-bold text-xs",children:"4"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:"To restore"}),(0,l.jsx)("p",{className:"text-xs mt-0.5",children:'Settings → Backup → "Import Backup" → Select your file'})]})]}),(0,l.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-2 rounded text-xs",children:[(0,l.jsx)("strong",{children:"⚠️ Important:"})," All data is stored locally. If you clear browser data, your tasks are gone unless you have a backup!"]})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 text-sm mb-2",children:"💡 More Tips"}),(0,l.jsxs)("ul",{className:"text-sm text-blue-800 dark:text-blue-200 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Use templates for tasks you create often (Settings → Templates)"}),(0,l.jsx)("li",{children:"Create view presets for different contexts (work, personal, urgent)"}),(0,l.jsx)("li",{children:"Use categories to separate work and personal projects"}),(0,l.jsx)("li",{children:"Check Statistics view (8) to see your productivity trends"})]})]})]})}function dp(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"💡 Productivity Techniques"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Popular productivity methods you can implement with this app:"}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🍅 Pomodoro Technique"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Work in focused 25-minute sessions with 5-minute breaks. After 4 sessions, take a longer 15-30 minute break."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Use Pomodoro scheduling mode in Gantt view"}),(0,l.jsx)("li",{children:"Great for maintaining focus and preventing burnout"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📅 Time Blocking"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Schedule parts of the day for specific categories (deep work, admin, meetings, etc.)."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Block working time in the Work Hours tab in Settings"}),(0,l.jsx)("li",{children:"Great for managers and people with varied responsibilities"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📥 Getting Things Done (GTD)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Capture everything → clarify → organize → review → do."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Use the Kanban board and customize states/transitions to mimic this workflow"}),(0,l.jsx)("li",{children:"Excellent for people juggling many projects"}),(0,l.jsx)("li",{children:"More about organization than session timing"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🐸 Eat That Frog"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Do your hardest/most important task first thing in the day."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:'Assign the priority "Urgent" or "Critical" to prioritize these work items'}),(0,l.jsx)("li",{children:"Good when prioritization is your main challenge"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📊 Eisenhower Matrix"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Categorize tasks into four quadrants:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"With Due Date + High Priority"})," → do now"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"High Priority, no due date"})," → plan"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"With Due Date, not high priority"})," → delegate"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Neither"})," → delete"]})]}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2",children:"Works well for quickly triaging a long list."})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:'⏱️ The "Just 5 Minutes" Rule'}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Commit to working for just five minutes."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Use Flow in Kanban settings with 5-minute work time and a short break"}),(0,l.jsx)("li",{children:"Often breaks the resistance of starting"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🔗 Don't Break the Chain"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:'Put an "X" on a calendar for each day you make progress.'}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Track your streaks in the Stats tab—don't break your streak!"}),(0,l.jsx)("li",{children:"Useful for habits, learning, coding, daily writing"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"⚡ The 2-Minute Rule"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"If something takes less than two minutes, do it immediately."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Use sorting by duration to prioritize short todos"}),(0,l.jsx)("li",{children:"Good for clearing micro-tasks that create mental clutter"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🎯 MIT Method (Most Important Tasks)"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Pick 2–3 critical tasks for the day. Everything else is secondary."}),(0,l.jsx)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:(0,l.jsx)("li",{children:"Good for people overwhelmed by long lists"})})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📦 Task Batching"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Group similar tasks together to reduce context switching."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Example: email all at once, admin all at once, coding in one chunk"}),(0,l.jsx)("li",{children:"Block times in Work Hours settings to do batch work"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📋 Kanban / Personal Kanban"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Visual board with To Do → Doing → Done."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:'Limits the number of tasks "in progress" (WIP limits)'}),(0,l.jsx)("li",{children:"Reduces overwhelm and context switching"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"⏰ 52/17 Method"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Work 52 minutes, rest 17 minutes."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Based on a study of high-performing employees"}),(0,l.jsx)("li",{children:"Ideal if Pomodoro's short breaks feel too choppy"}),(0,l.jsx)("li",{children:"Use Flow scheduling mode in Gantt with 52/17 preset"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🌊 Ultradian Rhythm Cycles"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-2",children:"Humans naturally work in 90–120 minute energy cycles."}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Deep work for 90 minutes → 20–30 minute break"}),(0,l.jsx)("li",{children:"Amazing for high-concentration tasks like coding, writing, or studying"}),(0,l.jsx)("li",{children:"Use Flow scheduling mode in Gantt with Ultradian Rhythm preset"})]})]})]})]})}function dg(){return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"⚙️ Advanced Features"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📝 Templates"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Save frequently used task configurations as templates for quick reuse:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Create templates from existing tasks or from scratch"}),(0,l.jsx)("li",{children:"Include text, metadata (assignee, project, priority, tags), and subtasks"}),(0,l.jsx)("li",{children:"Quick-apply when creating new tasks"}),(0,l.jsx)("li",{children:"Track usage count per template"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🔄 Recurring Tasks"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Create recurring tasks that automatically regenerate:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Intervals:"}),' "every day", "every 2 weeks", "every 3 months"']}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Weekdays:"}),' "every monday", "every friday", "every workday"']}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Nth weekdays:"}),' "every first monday", "every last friday"']}),(0,l.jsx)("li",{children:"When you complete a recurring task, a new instance is automatically created"}),(0,l.jsx)("li",{children:"The next due date is calculated from the pattern"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🔗 Dependencies"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Link tasks together with dependencies:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Set blockers in the task detail view"}),(0,l.jsx)("li",{children:"Tasks with unfinished dependencies show a blocked indicator"}),(0,l.jsx)("li",{children:"Complete blockers before completing dependent tasks"}),(0,l.jsx)("li",{children:"Dependencies show as arrows in the Gantt view"}),(0,l.jsx)("li",{children:"Filter by tasks with/without dependencies"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"✅ Subtasks"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Break down complex tasks into subtasks:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Add subtasks in the task detail view"}),(0,l.jsx)("li",{children:"Check off subtasks independently"}),(0,l.jsx)("li",{children:"Progress indicator shows completed/total"}),(0,l.jsx)("li",{children:"Include subtasks in templates"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"✅ Batch Processing"}),(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:["Press ",(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"S"})," to enable selection mode:"]}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Click tasks to select/deselect them"}),(0,l.jsx)("li",{children:'Use "Select All" / "Clear All" buttons'}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Batch operations:"})," Complete, Archive, Delete, Unarchive"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Batch edit:"})," Change assignee, project, priority, sprint, or due date for all selected"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"💾 Backup & Export"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Keep your data safe and portable:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Full Backup (JSON):"})," All tasks, people, projects, sprints, and settings"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Export Markdown:"})," Human-readable task list"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Export CSV:"})," Spreadsheet-compatible format"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Import:"})," Restore from backup or import from other systems"]})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"🏃 Sprints & Scrum"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Agile-style sprint planning:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Create time-boxed sprints with goals and dates"}),(0,l.jsx)("li",{children:"Sprint statuses: Planning → Active → Completed/Cancelled"}),(0,l.jsx)("li",{children:"Assign tasks to sprints"}),(0,l.jsx)("li",{children:"Filter Kanban board by sprint"}),(0,l.jsx)("li",{children:"Group tasks by sprint in List view"}),(0,l.jsx)("li",{children:"Batch-assign sprint to selected tasks"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📚 Activity History"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Track all changes to tasks, people, and projects:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"View activity log in the detail overlay"}),(0,l.jsx)("li",{children:"See when tasks were created, edited, completed, archived"}),(0,l.jsx)("li",{children:"Track metadata changes (assignee, project, priority, etc.)"}),(0,l.jsx)("li",{children:"Comment history with edit timestamps"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"💬 Comments"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Add notes and updates to tasks:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:"Add comments in the task detail view"}),(0,l.jsx)("li",{children:"Edit comments (full history preserved)"}),(0,l.jsx)("li",{children:"Delete comments"}),(0,l.jsx)("li",{children:"Comments are searchable"}),(0,l.jsx)("li",{children:"People and projects also support comments"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"↩️ Undo/Redo"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Mistakes happen - undo any action:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"⌘/Ctrl + Z"})," to undo"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("kbd",{className:"px-1.5 py-0.5 bg-zinc-200 dark:bg-zinc-700 rounded text-xs",children:"⌘/Ctrl + Shift + Z"})," to redo"]}),(0,l.jsx)("li",{children:"Undo creating, editing, completing, archiving, or deleting tasks"}),(0,l.jsx)("li",{children:"Works with batch operations too"})]})]}),(0,l.jsxs)("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 p-4 rounded-lg",children:[(0,l.jsx)("h4",{className:"font-semibold text-zinc-900 dark:text-zinc-100 mb-2",children:"📏 Manual Reordering"}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Drag tasks to set custom order:"}),(0,l.jsxs)("ul",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-2 list-disc list-inside space-y-1",children:[(0,l.jsx)("li",{children:'Set sort to "Manual" in List view'}),(0,l.jsx)("li",{children:"Drag tasks up/down to reorder"}),(0,l.jsx)("li",{children:"Order is preserved when sorting by manual"}),(0,l.jsx)("li",{children:"Works within groups"})]})]})]}),(0,l.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mt-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-purple-900 dark:text-purple-100 text-sm mb-2",children:"🗄️ Storage"}),(0,l.jsx)("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:"All data is stored locally in your browser using IndexedDB (with localStorage fallback for Safari private mode). Data never leaves your device. Create regular backups in Settings → Backup to protect your data."})]})]})}let db=[{id:"welcome",title:"Welcome to Doit! 👋",description:"Let's take a quick tour to help you get started. This interactive tutorial will walk you through the main features of the app.",position:"center"},{id:"input",title:"Create Tasks Here ✏️",description:'Click the Add button (or press N) to open the task input. Then type your task and press Enter. Try natural language like "Call John tomorrow" or "Meeting at 3pm".',targetSelector:'[data-tutorial="add-button"]',position:"bottom",action:"Click to add your first task!",spotlightPadding:8,fallbackHint:"Look for the + Add button at the top of the page"},{id:"markers",title:"Use Smart Markers 🏷️",description:"In the task input, add metadata with markers:\n• @name - assign to person\n• %project - link to project\n• !!priority - set priority\n• #tag - add tags\n\nDates like 'tomorrow' are auto-detected!",targetSelector:'[data-tutorial="add-button"]',position:"bottom",spotlightPadding:8,fallbackHint:"These markers work in the task input field (click + Add to open it)"},{id:"views",title:"Multiple Views 👁️",description:"Switch between different views:\n• List - Traditional task list\n• Kanban - Drag & drop board\n• Gantt - Timeline view\n• Calendar - Monthly calendar\n\nPress keys 1-8 to switch quickly!",targetSelector:'[data-tutorial="view-tabs"]',position:"bottom",action:"Try clicking different tabs",spotlightPadding:8,fallbackHint:"View tabs are located below the header (List, Kanban, Gantt, Calendar, People, Projects)"},{id:"filters",title:"Search & Filter 🔍",description:"Use the search bar (press /) to find tasks quickly. Click the filter button (press F) to filter by person, project, priority, due date, and more.",targetSelector:'[data-tutorial="search-bar"]',position:"bottom",action:"Try searching or click the filter button!",spotlightPadding:8,fallbackHint:"The search bar with filter icon is below the view tabs in List view"},{id:"people-projects",title:"People & Projects 👥",description:"Create people and projects to organize your tasks. Click on People (5) or Projects (6) tabs to add them. Then use @name and %project in your tasks.",targetSelector:'[data-tutorial="view-tabs"]',position:"bottom",spotlightPadding:8,fallbackHint:"People and Projects tabs are in the view tabs row (press 5 or 6 to access them)"},{id:"task-details",title:"Click for Details 📝",description:"Click on any task to open its detail view. There you can:\n• Add comments and notes\n• Set due dates and durations\n• Add subtasks\n• Set dependencies\n• Track time",targetSelector:'[data-tutorial="todo-list"]',position:"top",action:"Click on a task to see more",spotlightPadding:12,fallbackHint:"Create a task first using the + Add button, then click on it to see details"},{id:"keyboard",title:"Keyboard Shortcuts ⌨️",description:"Work faster with shortcuts:\n• N - New task\n• / - Search\n• F - Filters\n• S - Selection mode\n• ? - Help\n• 1-8 - Switch views\n• ⌘/Ctrl+Z - Undo",position:"center"},{id:"settings",title:"Customize in Settings ⚙️",description:"Click the gear icon to access Settings. Customize priorities, work hours, time blocks, Kanban columns, and much more. You can also backup your data there.",targetSelector:'[data-tutorial="settings-button"]',position:"left",spotlightPadding:8,fallbackHint:"The ⚙️ Settings button is in the top-right corner of the page"},{id:"help",title:"Need Help? ❓",description:"Press ? anytime to open the Help panel with detailed guides and tutorials. You can also restart this tour from the Help menu.",targetSelector:'[data-tutorial="help-button"]',position:"left",spotlightPadding:8,fallbackHint:"The ❓ Help button is in the top-right corner, next to Settings"},{id:"complete",title:"You're Ready! 🎉",description:"That's it! You now know the basics of Doit. Start creating tasks and organizing your work.\n\nWould you like to see this tutorial again on your next visit?",position:"center"}];function df({isOpen:e,onClose:t,onComplete:s,steps:n=db,showRememberChoice:r=!0,tutorialId:a="main"}){let[i,d]=(0,o.useState)(0),[c,m]=(0,o.useState)(null),[x,u]=(0,o.useState)(null),[h,p]=(0,o.useState)(!1),[g,b]=(0,o.useState)(!1),f=(0,o.useRef)(null),k=n[i],j=i===n.length-1,y=0===i,v=(0,o.useCallback)(()=>{if(!k.targetSelector){m(null),b(!1);return}let e=document.querySelector(k.targetSelector);if(e){let t=e.getBoundingClientRect(),s=k.spotlightPadding||8;m(new DOMRect(t.x-s,t.y-s,t.width+2*s,t.height+2*s)),b(!1)}else m(null),b(!0)},[k]),z=(0,o.useCallback)(()=>{if(!f.current)return;let e=f.current.getBoundingClientRect(),t=window.innerWidth,s=window.innerHeight,n=0,r=0;if(c&&"center"!==k.position){let a=c.top,i=s-c.bottom,l=c.left,o=t-c.right,d=e.width+40,m=e.height+40;if(c.width>.6*t||c.height>.4*s||a<m&&i<m&&l<d&&o<d)c.width>e.width+32&&c.height>e.height+32?(n=c.right-e.width-16,r=c.top+16):a>m?(n=Math.max(20,Math.min(c.x+c.width/2-e.width/2,t-e.width-20)),r=c.top-e.height-20):i>m?(n=Math.max(20,Math.min(c.x+c.width/2-e.width/2,t-e.width-20)),r=c.bottom+20):(n=t-e.width-20,r=20);else{let t=c.x+c.width/2,s=c.y+c.height/2,x=k.position,u=i>=m,h=a>=m,p=l>=d,g=o>=d;switch("bottom"!==k.position||u?"top"!==k.position||h?"left"!==k.position||p?"right"===k.position&&!g&&(x=p?"left":u?"bottom":h?"top":"right"):x=g?"right":u?"bottom":h?"top":"left":x=u?"bottom":g?"right":p?"left":"top":x=h?"top":g?"right":p?"left":"bottom",x){case"bottom":default:n=t-e.width/2,r=c.bottom+20;break;case"top":n=t-e.width/2,r=c.top-e.height-20;break;case"left":n=c.left-e.width-20,r=s-e.height/2;break;case"right":n=c.right+20,r=s-e.height/2}}}else n=(t-e.width)/2,r=(s-e.height)/2;u({x:n=Math.max(20,Math.min(n,t-e.width-20)),y:r=Math.max(20,Math.min(r,s-e.height-20))})},[c,k.position]);return((0,o.useEffect)(()=>{if(!e)return;p(!0),u(null);let t=setTimeout(()=>{v()},50);return()=>{clearTimeout(t)}},[e,i,v]),(0,o.useEffect)(()=>{if(!e)return;let t=setTimeout(()=>{requestAnimationFrame(()=>{z(),p(!1)})},100);return()=>{clearTimeout(t)}},[e,c,z]),(0,o.useEffect)(()=>{if(!e)return;let t=()=>{v(),z()};return window.addEventListener("resize",t),window.addEventListener("scroll",t,!0),()=>{window.removeEventListener("resize",t),window.removeEventListener("scroll",t,!0)}},[e,v,z]),(0,o.useEffect)(()=>{if(!e)return;let s=e=>{"Escape"===e.key?t():"ArrowRight"===e.key||"Enter"===e.key?j||d(e=>e+1):"ArrowLeft"!==e.key||y||d(e=>e-1)};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,j,y,t]),(0,o.useEffect)(()=>{e&&d(0)},[e]),e)?(0,l6.createPortal)((0,l.jsxs)("div",{className:"fixed inset-0 z-[9999]",children:[(0,l.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{zIndex:1},children:[(0,l.jsx)("defs",{children:(0,l.jsxs)("mask",{id:`spotlight-mask-${a}`,children:[(0,l.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),c&&(0,l.jsx)("rect",{x:c.x,y:c.y,width:c.width,height:c.height,rx:"8",ry:"8",fill:"black",className:"transition-all duration-300 ease-out"})]})}),(0,l.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"rgba(0, 0, 0, 0.75)",mask:`url(#spotlight-mask-${a})`,className:"transition-all duration-300"})]}),c&&(0,l.jsx)("div",{className:"absolute border-2 border-blue-400 rounded-lg pointer-events-none transition-all duration-300 ease-out",style:{left:c.x,top:c.y,width:c.width,height:c.height,boxShadow:"0 0 0 4px rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.4)",zIndex:2}}),(0,l.jsx)("div",{className:"absolute inset-0",style:{zIndex:1},onClick:e=>{e.target,e.currentTarget}}),(0,l.jsxs)("div",{ref:f,className:`absolute bg-white dark:bg-zinc-900 rounded-xl shadow-2xl border border-zinc-200 dark:border-zinc-700 p-6 max-w-md transition-all duration-300 ${h||!x?"opacity-0 scale-95":"opacity-100 scale-100"}`,style:{left:x?.x??"50%",top:x?.y??"50%",transform:x?void 0:"translate(-50%, -50%)",zIndex:100},children:[(0,l.jsx)("div",{className:"flex items-center gap-1 mb-4",children:n.map((e,t)=>(0,l.jsx)("div",{className:`h-1.5 rounded-full transition-all duration-200 ${t===i?"w-6 bg-blue-500":t<i?"w-3 bg-blue-300 dark:bg-blue-700":"w-3 bg-zinc-200 dark:bg-zinc-700"}`},t))}),(0,l.jsxs)("div",{className:"text-xs text-zinc-500 dark:text-zinc-400 mb-2",children:["Step ",i+1," of ",n.length]}),(0,l.jsx)("h3",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-3",children:k.title}),(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 whitespace-pre-line mb-4",children:k.description}),g&&k.fallbackHint&&(0,l.jsxs)("div",{className:"bg-amber-50 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 text-sm px-3 py-2 rounded-lg mb-4 flex items-center gap-2 border border-amber-200 dark:border-amber-800",children:[(0,l.jsx)("span",{className:"text-lg",children:"📍"}),(0,l.jsx)("span",{children:k.fallbackHint})]}),k.action&&!g&&(0,l.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-sm px-3 py-2 rounded-lg mb-4 flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-lg",children:"👆"}),(0,l.jsx)("span",{children:k.action})]}),(0,l.jsx)("div",{className:"flex items-center justify-between gap-3",children:j&&r?(0,l.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,l.jsx)("button",{onClick:()=>{s(!1)},className:"w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Got it! Don't show again"}),(0,l.jsx)("button",{onClick:()=>{s(!0)},className:"w-full px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-lg font-medium transition-colors",children:"Show tutorial on next visit"})]}):j?(0,l.jsx)("div",{className:"flex justify-end w-full",children:(0,l.jsx)("button",{onClick:()=>s(!1),className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Done!"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"flex items-center gap-2",children:!y&&(0,l.jsx)("button",{onClick:()=>{d(e=>Math.max(0,e-1))},className:"px-3 py-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-zinc-100 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:"← Back"})}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>{s(!1)},className:"px-3 py-2 text-sm text-zinc-500 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors",children:"Skip tutorial"}),(0,l.jsxs)("button",{onClick:()=>{j||d(e=>e+1)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-1",children:["Next",(0,l.jsx)("span",{className:"text-blue-200",children:"→"})]})]})]})}),!j&&(0,l.jsx)("div",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-3 text-center",children:"Use ← → arrow keys or Enter to navigate"})]})]}),document.body):null}function dk({view:e,className:t="",onOpenTutorial:s}){return(0,l.jsx)("span",{role:"button",tabIndex:0,onClick:t=>{t.stopPropagation(),s(e)},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),t.stopPropagation(),s(e))},className:`p-0.5 rounded text-blue-400 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 transition-colors cursor-pointer ${t}`,title:"Learn about this view",children:(0,l.jsx)(oe.AcademicCapIcon,{className:"w-3.5 h-3.5"})})}let dj=()=>(0,l.jsx)(oe.ListIcon,{className:"w-5 h-5"}),dy=()=>(0,l.jsx)(oe.KanbanIcon,{className:"w-5 h-5"}),dv=()=>(0,l.jsx)(oe.GanttIcon,{className:"w-5 h-5"}),dz=()=>(0,l.jsx)(oe.CalendarIcon,{className:"w-5 h-5"}),dw=()=>(0,l.jsx)(oe.UsersIcon,{className:"w-5 h-5"}),dN=()=>(0,l.jsx)(oe.FolderIcon,{className:"w-5 h-5"}),dC=()=>(0,l.jsx)(oe.LightningIcon,{className:"w-5 h-5"}),dD=()=>(0,l.jsx)(oe.ChartBarIcon,{className:"w-5 h-5"}),dS=()=>(0,l.jsx)(oe.ClockIcon,{className:"w-5 h-5"});function dT({activeView:e,onViewChange:t,features:s,runningSprint:n,onOpenTutorial:r}){let a=[{id:"list",label:"List",icon:(0,l.jsx)(dj,{}),testId:"view-tab-list"},{id:"kanban",label:"Kanban",icon:(0,l.jsx)(dy,{}),testId:"view-tab-kanban",featureFlag:"kanbanView"},{id:"gantt",label:"Gantt",icon:(0,l.jsx)(dv,{}),testId:"view-tab-gantt",featureFlag:"ganttView"},{id:"calendar",label:"Calendar",icon:(0,l.jsx)(dz,{}),testId:"view-tab-calendar",featureFlag:"calendarView"},{id:"people",label:"People",icon:(0,l.jsx)(dw,{}),testId:"view-tab-people"},{id:"projects",label:"Projects",icon:(0,l.jsx)(dN,{}),testId:"view-tab-projects"},{id:"sprints",label:"Sprints",icon:(0,l.jsx)(dC,{}),featureFlag:"sprintsView",showIndicator:!!n},{id:"stats",label:"Stats",icon:(0,l.jsx)(dD,{}),featureFlag:"statsView"},{id:"timereports",label:"Time",icon:(0,l.jsx)(dS,{}),featureFlag:"timeTracking"}];return(0,l.jsx)("div",{className:"mb-6 overflow-x-auto -mx-2 sm:-mx-0 px-2 sm:px-0","data-tutorial":"view-tabs",children:(0,l.jsx)("div",{className:"flex gap-1 sm:gap-2 border-b border-zinc-200 dark:border-zinc-800 min-w-max",children:a.map(n=>{if(n.featureFlag&&!s?.[n.featureFlag])return null;let a=e===n.id;return(0,l.jsx)("button",{"data-testid":n.testId,onClick:()=>t(n.id),className:`px-2 lg:px-3 py-2 font-medium transition-colors border-b-2 ${a?"text-blue-600 dark:text-blue-400 border-blue-600":"text-zinc-600 dark:text-zinc-400 border-transparent hover:text-zinc-900 dark:hover:text-zinc-100"}`,title:`${n.label} view`,children:(0,l.jsxs)("div",{className:"flex items-center gap-1 lg:gap-2",children:[n.icon,(0,l.jsx)("span",{className:"hidden lg:inline",children:n.label}),a&&(0,l.jsx)(dk,{view:n.id,onOpenTutorial:r}),n.showIndicator&&(0,l.jsx)("span",{className:"hidden lg:inline w-2 h-2 rounded-full bg-green-500 animate-pulse"})]})},n.id)})})})}function dP({person:e,onClick:t,onArchive:s,onUnarchive:n,onRequestDeleteConfirm:r,taskCount:a}){return(0,l.jsx)("div",{onClick:t,className:"group bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 p-4 hover:shadow-md transition-all",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0",style:{backgroundColor:e.color||"#cce5ff"},children:e.initials}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:e.name}),e.isArchived&&(0,l.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border border-amber-300 dark:border-amber-700",children:"Archived"})]}),e.alternatives.length>0&&(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-500",children:"aka:"})," ",e.alternatives.join(", ")]}),(e.hasComments||void 0!==a&&a>0)&&(0,l.jsxs)("div",{className:"flex items-center gap-3 text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:[void 0!==a&&a>0&&(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(oe.ClipboardIcon,{className:"w-3.5 h-3.5"}),a," task",1!==a?"s":""]}),e.hasComments&&(0,l.jsxs)("span",{className:"flex items-center gap-1",children:["💬 ",e.commentCount]})]})]}),(0,l.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[e.isActive&&s&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:"p-2 bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/30 dark:hover:bg-amber-900/50 text-amber-700 dark:text-amber-400 rounded-md transition-colors","aria-label":"Archive person",title:"Archive",children:(0,l.jsx)(oe.ArchiveIcon,{className:"w-4 h-4"})}),e.isArchived&&n&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e.id)},className:"p-2 bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 text-green-700 dark:text-green-400 rounded-md transition-colors","aria-label":"Unarchive person",title:"Unarchive",children:(0,l.jsx)(oe.UndoIcon,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id,e.name)},className:"p-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-400 rounded-md transition-colors","aria-label":"Delete person",title:"Delete",children:(0,l.jsx)(oe.TrashIcon,{className:"w-4 h-4"})})]})]})})}function dA({emoji:e,message:t,actionLabel:s,onAction:n}){return(0,l.jsxs)("div",{className:"text-center py-16",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:e}),(0,l.jsx)("p",{className:"text-xl text-zinc-600 dark:text-zinc-400",children:t}),s&&n&&(0,l.jsx)("button",{onClick:n,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:s})]})}let dE=[{id:"people-intro",title:"People Management 👥",description:"The People View lets you manage team members and contacts. Assign tasks to people using @mentions.",position:"center"},{id:"people-add",title:"Add People ➕",description:'Click "Add Person" to create a new person. You can add:\n\n• Name and alternatives (nicknames)\n• Custom color for badges\n• Notes and context',targetSelector:'[data-tutorial="add-person-button"]',position:"bottom",spotlightPadding:8,fallbackHint:"The + Add Person button is at the top of the People view"},{id:"people-assign",title:"Assign Tasks 📋",description:"Use @name in your tasks to assign them:\n\n• @John - Assign to John\n• Multiple @mentions work too!\n\nAlternative names are recognized automatically.",position:"center"},{id:"people-source",title:"Track Sources $",description:'Use $name to mark who requested a task:\n\n• "Fix bug $Sarah" - Request from Sarah\n• Great for tracking where tasks came from!',position:"center"},{id:"people-complete",title:"Team Ready! 🎉",description:"You're set to manage people! Click on any person to see their assigned tasks and add comments.",position:"center"}];function dM({people:e,taskCountsByPerson:t,onOpenPerson:s,onDeletePerson:n,onArchivePerson:r,onUnarchivePerson:a,onRequestDeleteConfirm:i,onAddPerson:d,searchInputRef:c}){let[m,x]=(0,o.useState)(""),[u,h]=(0,o.useState)(!1),[g,b]=(0,o.useState)(!1),f=(0,o.useRef)(null);(0,o.useEffect)(()=>{(0,p.loadFromStorage)(p.STORAGE_KEYS.PEOPLE_VIEW_OPTIONS,{}).then(e=>{void 0!==e.search&&x(e.search),void 0!==e.showArchived&&h(e.showArchived),b(!0)})},[]),(0,o.useEffect)(()=>{g&&(0,p.saveToStorage)(p.STORAGE_KEYS.PEOPLE_VIEW_OPTIONS,{search:m,showArchived:u})},[g,m,u]);let k=(0,o.useCallback)(e=>{x(e)},[]),j=(0,o.useCallback)(e=>{h(e)},[]),y=(0,o.useMemo)(()=>e.filter(e=>(!!u||!e.isArchived)&&(!m.trim()||e.matchesSearch(m))),[e,m,u]);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"People"}),(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:[y.length," of ",e.length," ",1===e.length?"person":"people"]})]}),(0,l.jsxs)("button",{onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2","data-tutorial":"add-person-button",children:[(0,l.jsx)(oe.PlusIcon,{className:"w-5 h-5"}),"Add Person"]})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(oe.SearchIcon,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400"}),(0,l.jsx)("input",{ref:c||f,type:"text",value:m,onChange:e=>k(e.target.value),placeholder:"Search people... (press / to focus)",className:"w-full pl-10 pr-4 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),m&&(0,l.jsx)("button",{onClick:()=>k(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300",children:(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"})})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 cursor-pointer whitespace-nowrap",children:[(0,l.jsx)("input",{type:"checkbox",checked:u,onChange:e=>j(e.target.checked),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),"Show archived"]})]}),0===e.length?(0,l.jsx)(dA,{emoji:"👥",title:"No People",message:"No people yet. Add one to get started!"}):0===y.length?(0,l.jsx)(dA,{emoji:"🔍",title:"No Results",message:"No people match your search."}):(0,l.jsx)("ul",{className:"space-y-2",children:y.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)(dP,{person:e,onClick:()=>s(e.id),onDelete:n,onArchive:r,onUnarchive:a,onRequestDeleteConfirm:i,taskCount:t.get(e.id)||0})},e.id))})]})}function d$({project:e,onClick:t,onArchive:s,onUnarchive:n,onRequestDeleteConfirm:r,taskCount:a}){return(0,l.jsx)("div",{onClick:t,className:"group bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 p-4 hover:shadow-md transition-all",children:(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0",style:{backgroundColor:e.color||"#e2ccff"},children:e.initials}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,l.jsx)("h3",{className:"font-semibold text-zinc-900 dark:text-zinc-100",children:e.name}),e.isArchived&&(0,l.jsx)("span",{className:"text-xs px-2 py-0.5 rounded bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 border border-amber-300 dark:border-amber-700",children:"Archived"})]}),e.alternatives.length>0&&(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:[(0,l.jsx)("span",{className:"text-zinc-500 dark:text-zinc-500",children:"aka:"})," ",e.alternatives.join(", ")]}),(e.hasComments||void 0!==a&&a>0)&&(0,l.jsxs)("div",{className:"flex items-center gap-3 text-xs text-zinc-500 dark:text-zinc-400 mt-2",children:[void 0!==a&&a>0&&(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(oe.ClipboardIcon,{className:"w-3.5 h-3.5"}),a," task",1!==a?"s":""]}),e.hasComments&&(0,l.jsxs)("span",{className:"flex items-center gap-1",children:["💬 ",e.commentCount]})]})]}),(0,l.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:[e.isActive&&s&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:"p-2 bg-amber-100 hover:bg-amber-200 dark:bg-amber-900/30 dark:hover:bg-amber-900/50 text-amber-700 dark:text-amber-400 rounded-md transition-colors","aria-label":"Archive project",title:"Archive",children:(0,l.jsx)(oe.ArchiveIcon,{className:"w-4 h-4"})}),e.isArchived&&n&&(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e.id)},className:"p-2 bg-green-100 hover:bg-green-200 dark:bg-green-900/30 dark:hover:bg-green-900/50 text-green-700 dark:text-green-400 rounded-md transition-colors","aria-label":"Unarchive project",title:"Unarchive",children:(0,l.jsx)(oe.UndoIcon,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),r(e.id,e.name)},className:"p-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-400 rounded-md transition-colors","aria-label":"Delete project",title:"Delete",children:(0,l.jsx)(oe.TrashIcon,{className:"w-4 h-4"})})]})]})})}let dR=[{id:"projects-intro",title:"Project Management 📁",description:"The Projects View lets you organize tasks into projects. Use %mentions to link tasks to projects.",position:"center"},{id:"projects-add",title:"Create Projects ➕",description:'Click "Add Project" to create a new project. You can add:\n\n• Name and alternatives\n• Custom color\n• Description and notes',targetSelector:'[data-tutorial="add-project-button"]',position:"bottom",spotlightPadding:8,fallbackHint:"The + Add Project button is at the top of the Projects view"},{id:"projects-link",title:"Link Tasks 🔗",description:'Use %project in your tasks to link them:\n\n• "Design homepage %Website"\n• Tasks can belong to multiple projects\n• Project names with spaces: %"My Project"',position:"center"},{id:"projects-filter",title:"Filter by Project 🔍",description:"In the List View, use filters to see only tasks for a specific project. Great for focusing on one project at a time!",position:"center"},{id:"projects-complete",title:"Projects Ready! 🎉",description:"You're set to organize with projects! Click on any project to see its tasks and progress.",position:"center"}];function dI({projects:e,taskCountsByProject:t,onOpenProject:s,onDeleteProject:n,onArchiveProject:r,onUnarchiveProject:a,onRequestDeleteConfirm:i,onAddProject:d,searchInputRef:c}){let[m,x]=(0,o.useState)(""),[u,h]=(0,o.useState)(!1),[g,b]=(0,o.useState)(!1),f=(0,o.useRef)(null);(0,o.useEffect)(()=>{(0,p.loadFromStorage)(p.STORAGE_KEYS.PROJECTS_VIEW_OPTIONS,{}).then(e=>{void 0!==e.search&&x(e.search),void 0!==e.showArchived&&h(e.showArchived),b(!0)})},[]),(0,o.useEffect)(()=>{g&&(0,p.saveToStorage)(p.STORAGE_KEYS.PROJECTS_VIEW_OPTIONS,{search:m,showArchived:u})},[g,m,u]);let k=(0,o.useCallback)(e=>{x(e)},[]),j=(0,o.useCallback)(e=>{h(e)},[]),y=(0,o.useMemo)(()=>e.filter(e=>(!!u||!e.isArchived)&&(!m.trim()||e.matchesSearch(m))),[e,m,u]);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Projects"}),(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:[y.length," of ",e.length," ",1===e.length?"project":"projects"]})]}),(0,l.jsxs)("button",{onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2","data-tutorial":"add-project-button",children:[(0,l.jsx)(oe.PlusIcon,{className:"w-5 h-5"}),"Add Project"]})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(oe.SearchIcon,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400"}),(0,l.jsx)("input",{ref:c||f,type:"text",value:m,onChange:e=>k(e.target.value),placeholder:"Search projects... (press / to focus)",className:"w-full pl-10 pr-4 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),m&&(0,l.jsx)("button",{onClick:()=>k(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300",children:(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"})})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 cursor-pointer whitespace-nowrap",children:[(0,l.jsx)("input",{type:"checkbox",checked:u,onChange:e=>j(e.target.checked),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),"Show archived"]})]}),0===e.length?(0,l.jsx)(dA,{emoji:"📁",title:"No Projects",message:"No projects yet. Add one to get started!"}):0===y.length?(0,l.jsx)(dA,{emoji:"🔍",title:"No Results",message:"No projects match your search."}):(0,l.jsx)("ul",{className:"space-y-2",children:y.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)(d$,{project:e,onClick:()=>s(e.id),onDelete:n,onArchive:r,onUnarchive:a,onRequestDeleteConfirm:i,taskCount:t.get(e.id)||0})},e.id))})]})}function dF({sprint:e,onClick:t,isRunning:s=!1,todoCount:n=0,completedTodoCount:r=0}){let a=n>0?Math.round(r/n*100):0;return(0,l.jsx)("div",{onClick:t,className:`group bg-white dark:bg-zinc-900 p-4 rounded-lg shadow-sm border cursor-pointer hover:shadow-md transition-all ${s?"border-green-500 dark:border-green-600 ring-1 ring-green-500/20":e.isArchived?"border-zinc-200 dark:border-zinc-800 opacity-60":"border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,l.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full mt-1.5 flex-shrink-0",style:{backgroundColor:e.statusColor}}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,l.jsx)("h3",{className:"font-medium text-zinc-900 dark:text-zinc-100 truncate",children:e.name}),(0,l.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded text-white flex-shrink-0",style:{backgroundColor:e.statusColor},children:e.statusLabel}),s&&(0,l.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 flex-shrink-0",children:"🏃 Current"}),e.isArchived&&(0,l.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 flex-shrink-0",children:"📦 Archived"})]}),e.goal&&(0,l.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1 line-clamp-2",children:e.goal}),(0,l.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-zinc-500 dark:text-zinc-500",children:[(0,l.jsxs)("span",{children:["📅 ",e.durationDays," days"]}),e.actualStartDate&&(0,l.jsxs)("span",{children:["Started: ",e.actualStartDate]}),e.actualEndDate&&(0,l.jsxs)("span",{children:["Ended: ",e.actualEndDate]}),!e.actualStartDate&&e.plannedStartDate&&(0,l.jsxs)("span",{children:["Planned: ",e.plannedStartDate]})]}),"active"===e.status&&(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-zinc-500 dark:text-zinc-400 mb-1",children:[(0,l.jsxs)("span",{children:[r,"/",n," tasks completed"]}),null!==e.daysRemaining&&(0,l.jsx)("span",{className:e.daysRemaining<0?"text-red-500":"",children:e.daysRemaining<0?`${Math.abs(e.daysRemaining)} days overdue`:0===e.daysRemaining?"Last day!":`${e.daysRemaining} days left`})]}),(0,l.jsx)("div",{className:"h-2 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-green-500 dark:bg-green-600 transition-all duration-300",style:{width:`${a}%`}})})]}),"active"!==e.status&&n>0&&(0,l.jsxs)("div",{className:"mt-2 text-xs text-zinc-500 dark:text-zinc-400",children:[r,"/",n," tasks",e.isCompleted&&` • ${a}% completed`]})]})]}),(0,l.jsx)(oe.ChevronRightIcon,{className:"w-5 h-5 text-zinc-400 dark:text-zinc-500 flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity"})]})})}let dL=[{id:"sprints-intro",title:"Sprint Planning 🏃",description:"The Sprints View helps you plan work in time-boxed iterations. Perfect for agile workflows!",position:"center"},{id:"sprints-create",title:"Create Sprints ➕",description:'Click "Add Sprint" to create a new sprint with:\n\n• Name and goal\n• Start and end dates\n• Status (Planning, Active, Completed)',targetSelector:'[data-tutorial="add-sprint-button"]',position:"bottom",spotlightPadding:8,fallbackHint:"The + Add Sprint button is at the top of the Sprints view"},{id:"sprints-assign",title:"Assign to Sprints 📋",description:"Open any task's detail view to assign it to a sprint. Tasks without a sprint go to the Backlog.\n\nYou can also batch-assign tasks using Selection Mode (S).",position:"center"},{id:"sprints-kanban",title:"Sprint in Kanban 📊",description:"Filter the Kanban board by sprint to focus on current iteration work. See only what's planned for this sprint!",position:"center"},{id:"sprints-complete",title:"Sprint Ready! 🎉",description:"You're ready for agile planning! Mark a sprint as Active to start working on it.",position:"center"}];function dW({sprints:e,todos:t,onOpenSprint:s,onAddSprint:n,searchInputRef:r}){let[a,i]=(0,o.useState)(""),[d,c]=(0,o.useState)(!1),[m,x]=(0,o.useState)(!1),u=(0,o.useRef)(null);(0,o.useEffect)(()=>{(0,p.loadFromStorage)(p.STORAGE_KEYS.SPRINTS_VIEW_OPTIONS,{}).then(e=>{void 0!==e.search&&i(e.search),void 0!==e.showArchived&&c(e.showArchived),x(!0)})},[]),(0,o.useEffect)(()=>{m&&(0,p.saveToStorage)(p.STORAGE_KEYS.SPRINTS_VIEW_OPTIONS,{search:a,showArchived:d})},[m,a,d]);let h=(0,o.useCallback)(e=>{i(e)},[]),g=(0,o.useCallback)(e=>{c(e)},[]),b=(0,o.useMemo)(()=>e.filter(e=>{if(!d&&e.isArchived)return!1;if(a.trim()){let t=a.toLowerCase();return e.name.toLowerCase().includes(t)||e.goal&&e.goal.toLowerCase().includes(t)}return!0}),[e,a,d]),f=(0,o.useMemo)(()=>{let e={};return t.forEach(t=>{t.sprint&&(e[t.sprint]||(e[t.sprint]={total:0,completed:0}),e[t.sprint].total++,"completed"===t.state&&e[t.sprint].completed++)}),e},[t]);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Sprints"}),(0,l.jsxs)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mt-1",children:[b.length," of ",e.length," ",1===e.length?"sprint":"sprints"]})]}),(0,l.jsxs)("button",{onClick:n,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2","data-tutorial":"add-sprint-button",children:[(0,l.jsx)(oe.PlusIcon,{className:"w-5 h-5"}),"Add Sprint"]})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)(oe.SearchIcon,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400"}),(0,l.jsx)("input",{ref:r||u,type:"text",value:a,onChange:e=>h(e.target.value),placeholder:"Search sprints... (press / to focus)",className:"w-full pl-10 pr-4 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a&&(0,l.jsx)("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300",children:(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"})})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 cursor-pointer whitespace-nowrap",children:[(0,l.jsx)("input",{type:"checkbox",checked:d,onChange:e=>g(e.target.checked),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600 focus:ring-2 focus:ring-blue-500"}),"Show archived"]})]}),0===e.length?(0,l.jsx)(dA,{emoji:"🏃",title:"No Sprints",message:"No sprints yet. Add one to get started!"}):0===b.length?(0,l.jsx)(dA,{emoji:"🔍",title:"No Results",message:"No sprints match your search."}):(0,l.jsx)("ul",{className:"space-y-2",children:b.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)(dF,{sprint:e,onClick:()=>s(e.id),isRunning:"active"===e.status,todoCount:f[e.id]?.total||0,completedTodoCount:f[e.id]?.completed||0})},e.id))})]})}let dO={assignedPeople:[],sourcePeople:[],mentionedPeople:[],projects:[],priorities:[],tags:[],dueDates:[],durations:[],recurring:[],sprints:[]};function dB(e){let t=new Map;return e.forEach(e=>{let s=t.get(e.value)||0;t.set(e.value,s+1)}),t}function dY(e,t){return[...e].sort((e,s)=>{let n=t.get(e.name)||0,r=t.get(s.name)||0;return n!==r?r-n:e.name.localeCompare(s.name)})}function d_({templates:e,onDelete:t,onClose:s}){let[n,r]=(0,o.useState)(""),a=e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.description?.toLowerCase().includes(n.toLowerCase())||e.text.toLowerCase().includes(n.toLowerCase()));return(0,l.jsx)(ou,{isOpen:!0,onClose:s,maxWidth:"lg",children:(0,l.jsxs)("div",{className:"w-full max-w-lg p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"Task Templates"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.templates})]}),(0,l.jsx)("button",{onClick:s,className:"p-1 text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300",children:(0,l.jsx)(oe.CloseIcon,{className:"w-5 h-5"})})]}),(0,l.jsx)("input",{type:"text",placeholder:"Search templates...",value:n,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 mb-4 text-sm border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500"}),0===a.length?(0,l.jsx)("div",{className:"text-center py-8 text-zinc-500 dark:text-zinc-400",children:n?(0,l.jsx)("p",{children:"No templates match your search"}):(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-2xl mb-2",children:"📝"}),(0,l.jsx)("p",{children:"No templates yet"}),(0,l.jsx)("p",{className:"text-sm mt-1",children:"Create a template from any todo using the menu"})]})}):(0,l.jsx)("ul",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map(e=>(0,l.jsx)("li",{className:"group bg-white dark:bg-zinc-900 rounded-lg shadow-sm border border-zinc-200 dark:border-zinc-800 p-4 hover:shadow-md transition-all",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h3",{className:"font-medium text-zinc-900 dark:text-zinc-100 truncate",children:e.name}),e.description&&(0,l.jsx)("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 line-clamp-2",children:e.description}),(0,l.jsxs)("span",{className:"text-xs text-zinc-400 mt-1 inline-block",children:["Used ",e.usageCount," time",1!==e.usageCount?"s":""]})]}),(0,l.jsx)("div",{className:"flex items-center gap-1 ml-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,l.jsx)("button",{onClick:()=>t(e.id),className:"p-2 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-400 rounded-md transition-colors",title:"Delete template",children:(0,l.jsx)(oe.TrashIcon,{className:"w-4 h-4"})})})]})},e.id))})]})})}function dH({initialText:e,initialPlainText:t,initialMetadata:s,subtasks:n,onSave:r,onClose:a}){let[i,d]=(0,o.useState)(""),[c,m]=(0,o.useState)(""),[x,u]=(0,o.useState)({text:!0,assignedPeople:(s.assignedPeople?.length??0)>0,sourcePeople:(s.sourcePeople?.length??0)>0,projects:(s.projects?.length??0)>0,priority:!!s.priority,tags:(s.tags?.length??0)>0,dueDate:!!s.dueDate,duration:!!s.duration,subtasks:(n?.length??0)>0}),h=e=>{u(t=>({...t,[e]:!t[e]}))};return(0,l.jsx)(ou,{isOpen:!0,onClose:a,maxWidth:"md",children:(0,l.jsxs)("div",{className:"w-full max-w-md p-6 max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 mb-4",children:"Create Template"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Template Name *"}),(0,l.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),placeholder:"e.g., Weekly Report, Bug Fix, Meeting Notes",className:"w-full px-3 py-2 text-sm border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100",autoFocus:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1",children:"Description (optional)"}),(0,l.jsx)("input",{type:"text",value:c,onChange:e=>m(e.target.value),placeholder:"What is this template for?",className:"w-full px-3 py-2 text-sm border border-zinc-300 dark:border-zinc-600 rounded-lg bg-white dark:bg-zinc-700 text-zinc-900 dark:text-zinc-100"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Select Fields to Include"}),(0,l.jsxs)("div",{className:"space-y-2 p-3 bg-zinc-50 dark:bg-zinc-800 rounded-lg",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.text,onChange:()=>h("text"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Task Text"}),(0,l.jsx)("span",{className:"text-xs text-zinc-500 truncate flex-1",children:t||"(empty)"})]}),(s.assignedPeople?.length??0)>0&&(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.assignedPeople,onChange:()=>h("assignedPeople"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Assigned People"}),(0,l.jsxs)(oa,{variant:"blue",size:"sm",children:["@",s.assignedPeople.join(", @")]})]}),(s.sourcePeople?.length??0)>0&&(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.sourcePeople,onChange:()=>h("sourcePeople"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Source People"}),(0,l.jsxs)(oa,{variant:"amber",size:"sm",children:["$",s.sourcePeople.join(", $")]})]}),(s.projects?.length??0)>0&&(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.projects,onChange:()=>h("projects"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Projects"}),(0,l.jsxs)(oa,{variant:"purple",size:"sm",children:["%",s.projects.join(", %")]})]}),s.priority&&(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.priority,onChange:()=>h("priority"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Priority"}),(0,l.jsx)(oa,{variant:"red",size:"sm",children:s.priority})]}),(s.tags?.length??0)>0&&(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.tags,onChange:()=>h("tags"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Tags"}),(0,l.jsxs)(oa,{variant:"zinc",size:"sm",children:["#",s.tags.join(", #")]})]}),s.dueDate&&(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.dueDate,onChange:()=>h("dueDate"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Due Date"}),(0,l.jsx)(oa,{variant:"green",size:"sm",children:s.dueDate})]}),s.duration&&(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.duration,onChange:()=>h("duration"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Duration"}),(0,l.jsx)(oa,{variant:"blue",size:"sm",children:s.duration})]}),(n?.length??0)>0&&(0,l.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:x.subtasks,onChange:()=>h("subtasks"),className:"w-4 h-4 rounded border-zinc-300 dark:border-zinc-600 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:"Subtasks"}),(0,l.jsxs)(oa,{variant:"green",size:"sm",children:[n.length," subtask",1!==n.length?"s":""]})]}),!s.assignedPeople?.length&&!s.sourcePeople?.length&&!s.projects?.length&&!s.tags?.length&&!s.priority&&!s.dueDate&&!s.duration&&!n?.length&&(0,l.jsx)("p",{className:"text-sm text-zinc-400 italic",children:"No additional metadata to include"})]})]}),(0,l.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,l.jsx)("button",{onClick:a,className:"px-4 py-2 text-sm text-zinc-600 dark:text-zinc-400 hover:text-zinc-800 dark:hover:text-zinc-200",children:"Cancel"}),(0,l.jsx)("button",{onClick:()=>{i.trim()&&(r(i.trim(),c.trim()||void 0,x),a())},disabled:!i.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Create Template"})]})]})]})})}function dU(){var e;let t,s,n,r,a,i,{todos:k,addTodo:j,duplicateTodo:z,toggleTodo:w,deleteTodo:N,archiveTodo:C,unarchiveTodo:D,editTodo:S,addTodoComment:T,editTodoComment:P,deleteTodoComment:A,reorderTodos:E,addSubtask:M,toggleSubtask:$,editSubtask:R,deleteSubtask:I,startTimeTracking:F,stopTimeTracking:L,addManualTimeEntry:W,deleteTimeEntry:O,setWorkflowState:B,isLoaded:Y,undoActions:_,fadingOutIds:H,dependencyBlockNotification:U,undo:V,dismissUndo:q}=(0,c.useTodos)(),{settings:K,addPriority:G,updateGantt:J,updateKanbanSettings:Z}=(0,m.useSettings)();e=K.notifications,t=(0,o.useRef)(new Set),(0,o.useEffect)(()=>{if(!e.enabled||"granted"!==(0,v.getNotificationPermission)())return;let s=()=>{let s=k.filter(e=>e.isActive),n=(0,v.checkAndNotifyDueTasks)(s,t.current,{notifyOverdue:e.notifyOverdue,notifyDueToday:e.notifyDueToday,notifyDueSoon:e.notifyDueSoon,dueSoonHours:e.dueSoonHours});t.current=n};s();let n=setInterval(s,6e4);return()=>{clearInterval(n)}},[k,e]),(0,o.useEffect)(()=>{let e=new Set(k.filter(e=>e.isActive).map(e=>e.id));t.current=new Set(Array.from(t.current).filter(t=>e.has(t)))},[k]);let Q=K.features,{people:X,addPerson:ee,updatePerson:et,deletePerson:es,archivePerson:en,unarchivePerson:er,addPersonComment:ea,editPersonComment:ei,deletePersonComment:el}=(0,x.usePeople)(),{projects:eo,addProject:ed,updateProject:ec,deleteProject:em,archiveProject:ex,unarchiveProject:eu,addProjectComment:eh,editProjectComment:ep,deleteProjectComment:eg}=(0,u.useProjects)(),{sprints:eb,runningSprint:ef,nextPlannedSprint:ek,addSprint:ej,updateSprint:ey,deleteSprint:ev,startSprint:ez,completeSprint:ew,cancelSprint:eN,archiveSprint:eC,unarchiveSprint:eD,addSprintComment:eS,editSprintComment:eT,deleteSprintComment:eP}=function(){let[e,t]=(0,o.useState)([]),[s,n]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{await (0,p.waitForStorageInit)(),t((await (0,p.loadFromStorage)(p.STORAGE_KEYS.SPRINTS,[])).map(e=>({...e,state:e.state||"active",durationDays:e.durationDays||14,comments:e.comments||[],activity:e.activity||[]}))),n(!0)})()},[]),(0,o.useEffect)(()=>{s&&(0,p.saveToStorage)(p.STORAGE_KEYS.SPRINTS,e).catch(e=>{console.error("Failed to save sprints:",e)})},[e,s]);let r=(0,o.useMemo)(()=>e.map(y),[e]),a=(0,o.useMemo)(()=>r.filter(e=>"active"===e.state),[r]),i=(0,o.useMemo)(()=>r.filter(e=>"archived"===e.state),[r]),l=(0,o.useMemo)(()=>r.find(e=>"active"===e.status&&"active"===e.state),[r]),d=(0,o.useMemo)(()=>a.filter(e=>"planning"===e.status).sort((e,t)=>e.createdAt-t.createdAt)[0],[a]);return{sprints:r,activeSprints:a,archivedSprints:i,runningSprint:l,nextPlannedSprint:d,isLoaded:s,addSprint:e=>{let s=Date.now(),n={...e,id:(0,f.getSprintId)((0,b.createSprintId)()),status:"planning",state:"active",createdAt:s,comments:[],activity:[{id:(0,g.getActivityId)((0,b.createActivityId)()),timestamp:(0,h.getTimestamp)(s),type:"created",description:"Sprint created"}]};return t(e=>[...e,n]),n.id},updateSprint:(e,s)=>{t(t=>t.map(t=>{if(t.id===e){let e=Date.now();return{...t,...s,activity:[...t.activity||[],{id:(0,g.getActivityId)((0,b.createActivityId)()),timestamp:(0,h.getTimestamp)(e),type:"updated",description:"Sprint updated"}]}}return t}))},deleteSprint:e=>{t(t=>t.filter(t=>t.id!==e))},startSprint:e=>{let s=Date.now(),n=new Date().toISOString().split("T")[0];t(t=>t.map(t=>t.id===e?{...t,status:"active",actualStartDate:n,startedAt:s,activity:[...t.activity||[],{id:(0,g.getActivityId)((0,b.createActivityId)()),timestamp:(0,h.getTimestamp)(s),type:"started",description:"Sprint started"}]}:t))},completeSprint:e=>{let s=Date.now(),n=new Date().toISOString().split("T")[0];t(t=>t.map(t=>t.id===e?{...t,status:"completed",actualEndDate:n,completedAt:s,activity:[...t.activity||[],{id:(0,g.getActivityId)((0,b.createActivityId)()),timestamp:(0,h.getTimestamp)(s),type:"completed",description:"Sprint completed"}]}:t))},cancelSprint:e=>{let s=Date.now(),n=new Date().toISOString().split("T")[0];t(t=>t.map(t=>t.id===e?{...t,status:"cancelled",actualEndDate:n,cancelledAt:s,activity:[...t.activity||[],{id:(0,g.getActivityId)((0,b.createActivityId)()),timestamp:(0,h.getTimestamp)(s),type:"cancelled",description:"Sprint cancelled"}]}:t))},archiveSprint:e=>{let s=Date.now();t(t=>t.map(t=>t.id===e?{...t,state:"archived",archivedAt:s,activity:[...t.activity||[],{id:(0,g.getActivityId)((0,b.createActivityId)()),timestamp:(0,h.getTimestamp)(s),type:"archived",description:"Sprint archived"}]}:t))},unarchiveSprint:e=>{let s=Date.now();t(t=>t.map(t=>t.id===e?{...t,state:"active",archivedAt:void 0,activity:[...t.activity||[],{id:(0,g.getActivityId)((0,b.createActivityId)()),timestamp:(0,h.getTimestamp)(s),type:"unarchived",description:"Sprint unarchived"}]}:t))},addSprintComment:(e,s)=>{let n=Date.now();t(t=>t.map(t=>{if(t.id===e){let e={commentId:(0,g.getCommentId)((0,b.createCommentId)()),history:[{timestamp:(0,h.getTimestamp)(n),content:s}]};return{...t,comments:[...t.comments||[],e]}}return t}))},editSprintComment:(e,s,n)=>{t(t=>t.map(t=>t.id===e?{...t,comments:(t.comments||[]).map(e=>e.commentId===s?{...e,history:[...e.history,{timestamp:(0,h.getTimestamp)(Date.now()),content:n}]}:e)}:t))},deleteSprintComment:(e,s)=>{t(t=>t.map(t=>t.id===e?{...t,comments:(t.comments||[]).filter(e=>e.commentId!==s)}:t))}}}(),{templates:eA,addTemplate:eE,deleteTemplate:eM,incrementUsage:e$}=function(){let[e,t]=(0,o.useState)([]),[s,n]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{await (0,p.waitForStorageInit)(),t(await (0,p.loadFromStorage)(p.STORAGE_KEYS.TEMPLATES,[])),n(!0)})()},[]),(0,o.useEffect)(()=>{s&&(0,p.saveToStorage)(p.STORAGE_KEYS.TEMPLATES,e).catch(e=>{console.error("Failed to save templates:",e)})},[e,s]);let r=(0,o.useCallback)(e=>{let s=Date.now(),n={id:`template-${s}`,name:e.name,description:e.description,text:e.text,plainText:e.plainText,metadata:e.metadata,subtasks:e.subtasks,createdAt:(0,h.getTimestamp)(s),usageCount:0};return t(e=>[...e,n]),n.id},[]),a=(0,o.useCallback)((e,s)=>{t(t=>t.map(t=>t.id===e?{...t,...s}:t))},[]),i=(0,o.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),l=(0,o.useCallback)(e=>{t(t=>t.map(t=>t.id===e?{...t,usageCount:t.usageCount+1}:t))},[]);return{templates:[...e].sort((e,t)=>t.usageCount-e.usageCount),isLoaded:s,addTemplate:r,updateTemplate:a,deleteTemplate:i,incrementUsage:l}}(),{history:eR,addToHistory:eI,removeFromHistory:eF,clearHistory:eL}=function(){let[e,t]=(0,o.useState)([]),[s,n]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{await (0,p.waitForStorageInit)(),t(await (0,p.loadFromStorage)(p.STORAGE_KEYS.SEARCH_HISTORY,[])),n(!0)})()},[]),(0,o.useEffect)(()=>{s&&(0,p.saveToStorage)(p.STORAGE_KEYS.SEARCH_HISTORY,e).catch(e=>{console.error("Failed to save search history:",e)})},[e,s]);let r=(0,o.useCallback)(e=>{if(""===e.trim())return;let s=e.trim();t(e=>{let t=e.filter(e=>e.query.toLowerCase()!==s.toLowerCase());return[{id:(0,g.getSearchHistoryId)((0,b.createSearchHistoryId)()),query:s,timestamp:(0,h.getTimestamp)(Date.now())},...t].slice(0,20)})},[]),a=(0,o.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),i=(0,o.useCallback)(()=>{t([])},[]),l=(0,o.useCallback)((t,s=5)=>{if(""===t.trim())return e.slice(0,s);let n=t.toLowerCase();return e.filter(e=>e.query.toLowerCase().includes(n)).slice(0,s)},[e]);return{history:e,isLoaded:s,addToHistory:r,removeFromHistory:a,clearHistory:i,getSuggestions:l}}(),[eW,eO]=(0,o.useState)([]),[eB,eY]=(0,o.useState)(""),[e_,eH]=(0,o.useState)(""),eU=(0,o.useRef)(null),eV=(0,o.useRef)(null),eq=(0,o.useRef)(null),eK=(0,o.useRef)(null),eG=(0,o.useRef)(null),[eJ,eZ]=(0,o.useState)("list"),[eQ,eX]=(0,o.useState)(!1),[e0,e1]=(0,o.useState)(!1),[e2,e4]=(0,o.useState)(null),[e5,e6]=(0,o.useState)(!1),[e3,e9]=(0,o.useState)(null),e7=e3?eA.find(e=>e.id===e3):null;(0,o.useEffect)(()=>{let e={kanban:Q?.kanbanView,gantt:Q?.ganttView,calendar:Q?.calendarView,sprints:Q?.sprintsView,stats:Q?.statsView};eJ in e&&!1===e[eJ]&&eZ("list")},[eJ,Q]);let{usageStats:e8,recordSelections:te}=function(){let[e,t]=(0,o.useState)(dO),[s,n]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(0,p.waitForStorageInit)().then(()=>{(0,p.loadFromStorage)(p.STORAGE_KEYS.SELECTION_HISTORY,dO).then(e=>{t(e),n(!0)})})},[]),(0,o.useEffect)(()=>{s&&(0,p.saveToStorage)(p.STORAGE_KEYS.SELECTION_HISTORY,e)},[e,s]);let r=(0,o.useCallback)((e,s)=>{""!==s&&t(t=>{let n=t[e],r=[{value:s,timestamp:Date.now()},...n].slice(0,100);return{...t,[e]:r}})},[]),a=(0,o.useCallback)(e=>{Object.entries(e).forEach(([e,t])=>{void 0===t||(Array.isArray(t)?t:[t]).forEach(t=>{""!==t&&r(e,t)})})},[r]),i=(0,o.useCallback)(e=>{t(t=>({...t,[e]:[]}))},[]),l=(0,o.useCallback)(()=>{t(dO)},[]),d=(0,o.useMemo)(()=>({assignedPeople:dB(e.assignedPeople),sourcePeople:dB(e.sourcePeople),mentionedPeople:dB(e.mentionedPeople),projects:dB(e.projects),priorities:dB(e.priorities),tags:dB(e.tags),dueDates:dB(e.dueDates),durations:dB(e.durations),recurring:dB(e.recurring),sprints:dB(e.sprints)}),[e]),c=(0,o.useCallback)((t,s=10)=>{let n=new Set,r=[];for(let a of e[t])if(!n.has(a.value)&&(n.add(a.value),r.push(a.value),r.length>=s))break;return r},[e]),m=(0,o.useCallback)((t,s=10)=>Array.from(dB(e[t]).entries()).sort((e,t)=>t[1]-e[1]).slice(0,s).map(e=>e[0]),[e]);return{history:e,isLoaded:s,recordSelection:r,recordSelections:a,clearFieldHistory:i,clearAllHistory:l,usageStats:d,getRecentSelections:c,getTopUsed:m}}(),tt=(0,o.useMemo)(()=>{let e=new Map;return e8.assignedPeople.forEach((t,s)=>{e.set(s,(e.get(s)||0)+t)}),e8.sourcePeople.forEach((t,s)=>{e.set(s,(e.get(s)||0)+t)}),e8.mentionedPeople.forEach((t,s)=>{e.set(s,(e.get(s)||0)+t)}),e},[e8]),ts=(0,o.useMemo)(()=>dY(X.filter(e=>!e.archived),tt),[X,tt]),tn=(0,o.useMemo)(()=>dY(eo.filter(e=>!e.archived),e8.projects),[eo,e8.projects]),tr=(0,o.useMemo)(()=>dY(K.priorities,e8.priorities),[K.priorities,e8.priorities]),ta=(0,o.useMemo)(()=>{var e,t;let s=new Set;return k.forEach(e=>{e.tags.forEach(e=>s.add(e))}),e=Array.from(s),t=e8.tags,[...e].sort((e,s)=>{let n=t.get(e)||0,r=t.get(s)||0;return n!==r?r-n:e.localeCompare(s)})},[k,e8.tags]),ti=(0,o.useMemo)(()=>dY(X,tt),[X,tt]),tl=(0,o.useMemo)(()=>dY(eo,e8.projects),[eo,e8.projects]),to=(0,o.useMemo)(()=>{let e=new Map;return k.filter(e=>e.isActive).forEach(t=>{t.assignedPeople.forEach(t=>{let s=X.find(e=>e.matchesAnyName([t]));s&&e.set(s.id,(e.get(s.id)||0)+1)})}),e},[k,X]),td=(0,o.useMemo)(()=>{let e=new Map;return k.filter(e=>e.isActive).forEach(t=>{t.projects.forEach(t=>{let s=eo.find(e=>e.matchesAnyName([t]));s&&e.set(s.id,(e.get(s.id)||0)+1)})}),e},[k,eo]),tc=e=>{ee({name:e,alternatives:[],color:K.markerColors.assigned})},tm=e=>{ed({name:e,alternatives:[],color:K.markerColors.project})},tx=e=>{G({name:e,alternatives:[],color:K.markerColors.priority,order:K.priorities.length+1})},tu=e=>{e4(e),e1(!0)},[th,tp]=(0,o.useState)(!1),[tg,tb]=(0,o.useState)(!1),[tf,tk]=(0,o.useState)([]),[tj,ty]=(0,o.useState)(0),[tv,tz]=(0,o.useState)(!1),[tw,tN]=(0,o.useState)(!1),[tC,tD]=(0,o.useState)(!1),[tS,tT]=(0,o.useState)(null);(0,o.useEffect)(()=>{(0,p.waitForStorageInit)().then(()=>(0,p.loadFromStorage)(p.STORAGE_KEYS.UI_OPTIONS,{})).then(e=>{void 0!==e.activeTab&&["list","kanban","gantt","calendar","people","projects","sprints","stats","timereports"].includes(e.activeTab)&&eZ(e.activeTab),tz(!0)})},[]),(0,o.useEffect)(()=>{tv&&(0,p.saveToStorage)(p.STORAGE_KEYS.UI_OPTIONS,{activeTab:eJ})},[tv,eJ]),(0,o.useEffect)(()=>{tv&&!tC&&(0,p.loadFromStorage)(p.STORAGE_KEYS.TUTORIAL_PREFERENCES,{}).then(e=>{tD(!0),(!e.completed||e.showOnStartup)&&setTimeout(()=>{tN(!0)},500)})},[tv,tC]);let tP=(0,o.useCallback)(e=>{tN(!1),(0,p.saveToStorage)(p.STORAGE_KEYS.TUTORIAL_PREFERENCES,{completed:!0,showOnStartup:e,lastCompletedAt:new Date().toISOString()})},[]),tA=(0,o.useCallback)(()=>{tZ(!1),setTimeout(()=>{tN(!0)},300)},[]),tE=(0,o.useCallback)(e=>{switch(e){case"list":return oH;case"kanban":return oS;case"gantt":return oy;case"calendar":return oN;case"people":return dE;case"projects":return dR;case"sprints":return dL;default:return[]}},[]),tM=(0,o.useCallback)(()=>{tT(null)},[]),[t$,tR]=(0,o.useState)(null),[tI,tF]=(0,o.useState)(null),[tL,tW]=(0,o.useState)(null),[tO,tB]=(0,o.useState)(null),[tY,t_]=(0,o.useState)(!1),[tH,tU]=(0,o.useState)(!1),[tV,tq]=(0,o.useState)(!1),[tK,tG]=(0,o.useState)(!1),[tJ,tZ]=(0,o.useState)(!1),{showConfirmDialog:tQ,hideConfirmDialog:tX,ConfirmDialogComponent:t0}=(0,oY.useConfirmDialog)();(0,o.useEffect)(()=>{tY&&eU.current&&setTimeout(()=>{eU.current?.focus()},100)},[tY]),(0,o.useEffect)(()=>{let e=e=>{let t=e.target,s="INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||t.closest('[contenteditable="true"]');if("Escape"===e.key)return t$?void tR(null):tI?void tF(null):tL?void tW(null):tO?void tB(null):tY?void t_(!1):tH?void tU(!1):tV?void tq(!1):tK?void tG(!1):eG.current?.isSelectionMode?void eG.current.toggleSelectionMode():document.activeElement===eV.current||document.activeElement===eq.current||document.activeElement===eK.current||"list"===eJ&&document.activeElement instanceof HTMLInputElement?void document.activeElement.blur():void 0;if(!s){if("n"===e.key&&!e.metaKey&&!e.ctrlKey&&!e.altKey){e.preventDefault(),"list"===eJ||"gantt"===eJ||"calendar"===eJ?t_(!0):"people"===eJ?tU(!0):"projects"===eJ&&tq(!0);return}if("/"===e.key&&!e.metaKey&&!e.ctrlKey&&!e.altKey){e.preventDefault(),"list"===eJ?eG.current?.focusSearch():"people"===eJ?eV.current?.focus():"projects"===eJ?eq.current?.focus():"sprints"===eJ&&eK.current?.focus();return}if("f"===e.key&&!e.metaKey&&!e.ctrlKey&&!e.altKey){e.preventDefault(),"list"===eJ&&eG.current?.toggleFilters();return}if("s"===e.key&&!e.metaKey&&!e.ctrlKey&&!e.altKey){e.preventDefault(),"list"===eJ&&eG.current?.toggleSelectionMode();return}if(e.key>="1"&&e.key<="8"&&!e.metaKey&&!e.ctrlKey&&!e.altKey){e.preventDefault();let t=["list",...Q?.kanbanView?["kanban"]:[],...Q?.ganttView?["gantt"]:[],...Q?.calendarView?["calendar"]:[],"people","projects",...Q?.sprintsView?["sprints"]:[],...Q?.statsView?["stats"]:[]],s=parseInt(e.key)-1;s<t.length&&eZ(t[s]);return}if("?"===e.key&&e.shiftKey){e.preventDefault(),tZ(!0);return}}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[eJ,t$,tI,tL,tO,tY,tH,tV,tK,Q]);let t1=e=>{let t;if(e.preventDefault(),""===e_.trim())return;let s=(t={assignedPeople:[],sourcePeople:[],mentionedPeople:[],projects:[],dependencies:[],tags:[]},eW.forEach(e=>{switch(e.type){case"assigned":t.assignedPeople.push(e.value);break;case"source":t.sourcePeople.push(e.value);break;case"mentioned":t.mentionedPeople.push(e.value);break;case"project":t.projects.push(e.value);break;case"priority":t.priority=e.value;break;case"dueDate":t.dueDate=e.value;break;case"duration":t.duration=e.value;break;case"recurring":t.recurring=e.value;break;case"dependency":t.dependencies.push(e.value);break;case"tag":t.tags.push(e.value)}}),t),n=K.autoAssign;if(0===s.assignedPeople.length&&n.assignedPerson&&s.assignedPeople.push(n.assignedPerson),0===s.sourcePeople.length&&n.sourcePerson&&s.sourcePeople.push(n.sourcePerson),0===s.projects.length&&n.project&&s.projects.push(n.project),!s.priority&&n.priority&&(s.priority=n.priority),!s.dueDate&&n.dueDate){let e=(0,og.normalizeDateValue)(n.dueDate,K.dateTime,K.workHours);e&&(s.dueDate=e)}!s.duration&&n.duration&&(s.duration=n.duration),j(eB,e_,s),te({assignedPeople:s.assignedPeople,sourcePeople:s.sourcePeople,mentionedPeople:s.mentionedPeople,projects:s.projects,priorities:s.priority,tags:s.tags,dueDates:s.dueDate,durations:s.duration,recurring:s.recurring,sprints:s.sprint}),eU.current?.clear(),eO([]),eY(""),eH(""),e9(null)};return Y?(0,l.jsxs)("div",{"data-testid":"todo-app",className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-zinc-900 dark:to-zinc-800 py-4 sm:py-8 px-2 sm:px-4",children:[(0,l.jsxs)("div",{className:"w-full px-2 sm:px-4 lg:px-6 xl:px-8",children:[(0,l.jsxs)("header",{className:"mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-zinc-900 dark:text-zinc-100",children:"DoIt"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("button",{onClick:()=>t_(!0),className:"px-2 sm:px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors text-sm flex items-center gap-2",title:"Add new todo","data-tutorial":"add-button",children:[(0,l.jsx)(oe.PlusIcon,{className:"w-5 h-5"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Add"})]}),(0,l.jsxs)("button",{onClick:()=>tZ(!0),className:"px-2 sm:px-4 py-2 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors text-sm flex items-center gap-2",title:"Help (Shift+?)","data-tutorial":"help-button",children:[(0,l.jsx)(oe.HelpIcon,{className:"w-5 h-5"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Help"})]}),(0,l.jsxs)(d.default,{href:"/settings",className:"px-2 sm:px-4 py-2 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors text-sm flex items-center gap-2",title:"Settings","data-tutorial":"settings-button",children:[(0,l.jsx)(oe.SettingsIcon,{className:"w-5 h-5"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Settings"})]})]})]}),(0,l.jsx)("p",{className:"text-zinc-600 dark:text-zinc-400 text-sm sm:text-base",children:"A simple, extensible, local todo app"})]}),(0,l.jsx)(dT,{activeView:eJ,onViewChange:eZ,features:Q,runningSprint:ef,onOpenTutorial:tT}),"gantt"===eJ&&(0,l.jsx)(ov,{todos:k,markerColors:K.markerColors,workHours:K.workHours,onEditTodo:S,availablePeople:ts,availableProjects:tn,availablePriorities:tr,onAddPerson:tc,onAddProject:tm,onAddPriority:tx,onToggle:w,onDelete:N,onDuplicate:z,onArchive:C,onUnarchive:D,settings:K,linkPatterns:K.linkPatterns,onAddComment:T,onUpdateGanttSettings:J,onAddSubtask:M,onToggleSubtask:$,onEditSubtask:R,onDeleteSubtask:I,onStartTimeTracking:K.features.timeTracking?F:void 0,onStopTimeTracking:K.features.timeTracking?L:void 0,onAddManualTimeEntry:K.features.timeTracking?W:void 0,onDeleteTimeEntry:K.features.timeTracking?O:void 0,onCreateTemplate:tu,onStartFocusMode:Q?.focusMode?e=>{tk(e),tp(!0)}:void 0,onStartOpenFocusMode:Q?.focusMode?()=>tb(!0):void 0},tj),"kanban"===eJ&&(0,l.jsx)(oP,{todos:k,markerColors:K.markerColors,kanban:K.kanban,onEditTodo:S,availablePeople:ts,availableProjects:tn,availablePriorities:tr,onAddPerson:tc,onAddProject:tm,onAddPriority:tx,onToggle:w,onDelete:N,onDuplicate:z,onArchive:C,onUnarchive:D,onSetWorkflowState:B,settings:K,linkPatterns:K.linkPatterns,onAddComment:T,onUpdateKanbanSettings:Z,onAddSubtask:M,onToggleSubtask:$,onEditSubtask:R,onDeleteSubtask:I,onStartTimeTracking:K.features.timeTracking?F:void 0,onStopTimeTracking:K.features.timeTracking?L:void 0,onAddManualTimeEntry:K.features.timeTracking?W:void 0,onDeleteTimeEntry:K.features.timeTracking?O:void 0,onCreateTemplate:tu,sprints:eb.map(e=>e.raw),runningSprint:ef?.raw}),"calendar"===eJ&&(0,l.jsx)(oC,{todos:k,markerColors:K.markerColors,settings:K,linkPatterns:K.linkPatterns,availablePeople:ts,availableProjects:tn,availablePriorities:tr,onToggle:w,onDelete:N,onArchive:C,onUnarchive:D,onEdit:S,onAddPerson:tc,onAddProject:tm,onAddPriority:tx,onAddComment:T,onEditComment:P,onDeleteComment:A,onAddSubtask:M,onToggleSubtask:$,onEditSubtask:R,onDeleteSubtask:I,onStartTimeTracking:K.features.timeTracking?F:void 0,onStopTimeTracking:K.features.timeTracking?L:void 0,onAddManualTimeEntry:K.features.timeTracking?W:void 0,onDeleteTimeEntry:K.features.timeTracking?O:void 0,onCreateTemplate:tu,onDuplicate:z}),"people"===eJ&&(0,l.jsx)(dM,{people:ti,taskCountsByPerson:to,onOpenPerson:e=>tF(e),onAddPerson:()=>tU(!0),onArchivePerson:en,onUnarchivePerson:er,onDeletePerson:es,onRequestDeleteConfirm:(e,t)=>{tQ({title:"Delete Person",message:`Are you sure you want to delete "${t}"? This action cannot be undone.`,confirmText:"Delete",confirmVariant:"danger",onConfirm:()=>{es(e)}})},searchInputRef:eV}),"projects"===eJ&&(0,l.jsx)(dI,{projects:tl,taskCountsByProject:td,onOpenProject:e=>tW(e),onAddProject:()=>tq(!0),onArchiveProject:ex,onUnarchiveProject:eu,onDeleteProject:em,onRequestDeleteConfirm:(e,t)=>{tQ({title:"Delete Project",message:`Are you sure you want to delete "${t}"? This action cannot be undone.`,confirmText:"Delete",confirmVariant:"danger",onConfirm:()=>{em(e)}})},searchInputRef:eq}),"stats"===eJ&&(0,l.jsx)(oV,{todos:k,projects:eo,categories:K.categories}),"timereports"===eJ&&(0,l.jsx)(o5,{todos:k,people:X,projects:eo,settings:K,sprints:eb}),"sprints"===eJ&&(0,l.jsx)(dW,{sprints:eb,todos:k,onOpenSprint:e=>tB(e),onAddSprint:()=>tG(!0),searchInputRef:eK}),"list"===eJ&&(0,l.jsx)(oU,{ref:eG,todos:k,settings:K,sortedPeople:ts,sortedProjects:tn,sortedPriorities:tr,sprints:eb,nextPlannedSprint:ek,features:Q,templates:eA,onShowTemplatesManager:()=>eX(!0),searchHistory:eR,addToSearchHistory:eI,removeFromSearchHistory:eF,clearSearchHistory:eL,toggleTodo:w,deleteTodo:N,archiveTodo:C,unarchiveTodo:D,editTodo:S,reorderTodos:E,onAddPerson:tc,onAddProject:tm,onAddPriority:tx,addTodoComment:T,editTodoComment:P,deleteTodoComment:A,onOpenTodoDetails:tR,undoActions:_,fadingOutIds:H,undo:V,dismissUndo:q,dependencyBlockNotification:U}),t$&&((s=k.find(e=>e.id===t$.id))?(0,l.jsx)(ok,{todo:s,todos:k,isOpen:!0,onClose:()=>tR(null),onToggle:w,onDelete:N,onDuplicate:z,onEdit:S,onArchive:C,onUnarchive:D,markerColors:K.markerColors,settings:K,linkPatterns:K.linkPatterns,availablePeople:ts,availableProjects:tn,availablePriorities:tr,availableTags:ta,onRecordSelections:te,onAddPerson:tc,onAddProject:tm,onAddPriority:tx,onAddComment:T,onAddSubtask:M,onToggleSubtask:$,onEditSubtask:R,onDeleteSubtask:I,onStartTimeTracking:K.features.timeTracking?F:void 0,onStopTimeTracking:K.features.timeTracking?L:void 0,onAddManualTimeEntry:K.features.timeTracking?W:void 0,onDeleteTimeEntry:K.features.timeTracking?O:void 0,onCreateTemplate:tu,sprints:eb.map(e=>e.raw),runningSprint:ef?.raw}):null),tI&&((n=X.find(e=>e.id===tI))?(0,l.jsx)(o7,{person:n,onClose:()=>tF(null),onUpdate:et,onDelete:es,onArchive:en,onUnarchive:er,onAddComment:ea,onEditComment:ei,onDeleteComment:el}):null),tL&&((r=eo.find(e=>e.id===tL))?(0,l.jsx)(de,{project:r,onClose:()=>tW(null),onUpdate:ec,onDelete:em,onArchive:ex,onUnarchive:eu,onAddComment:eh,onEditComment:ep,onDeleteComment:eg,categories:K.categories}):null),tO&&((a=eb.find(e=>e.id===tO))?(0,l.jsx)(dt,{sprint:a,allSprints:eb,todos:k,markerColors:K.markerColors,onClose:()=>tB(null),onUpdate:ey,onDelete:e=>{ev(e),tB(null)},onStart:ez,onComplete:ew,onCancel:eN,onArchive:eC,onUnarchive:eD,onAddComment:eS,onEditComment:eT,onDeleteComment:eP,onTodoClick:e=>tR(e),onRemoveTodoFromSprint:e=>{let t=k.find(t=>t.id===e);t&&S(e,t.text,t.plainText,{...t.metadata,sprint:void 0})}}):null),tY&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:()=>t_(!1),children:(0,l.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100 flex items-center gap-2",children:[(0,l.jsx)("span",{children:"Add New Todo"}),(0,l.jsx)(l9.InfoTooltip,{content:l9.tooltipContent.smartInput})]}),(0,l.jsx)("button",{onClick:()=>t_(!1),className:"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200 transition-colors",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),eA.length>0&&(0,l.jsx)("div",{className:"mb-4 p-3 bg-zinc-50 dark:bg-zinc-800 rounded-lg",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Template:"}),e7?(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:e7.name}),(0,l.jsx)("button",{type:"button",onClick:()=>{e9(null),eU.current&&eU.current.setValue("")},className:"text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300",title:"Clear template",children:(0,l.jsx)(oe.CloseIcon,{className:"w-4 h-4"})})]}):(0,l.jsx)("span",{className:"text-sm text-zinc-400",children:"None selected"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>e6(!e5),className:"px-3 py-1.5 text-sm bg-white dark:bg-zinc-700 border border-zinc-300 dark:border-zinc-600 rounded-lg hover:bg-zinc-50 dark:hover:bg-zinc-600 transition-colors flex items-center gap-1",children:[(0,l.jsx)(oe.DocumentIcon,{className:"w-4 h-4"}),"Use Template"]}),e5&&(0,l.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-64 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg z-50",children:[(0,l.jsx)("ul",{className:"py-1 max-h-64 overflow-y-auto",children:eA.map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)("button",{type:"button",onClick:()=>{e$(e.id),eU.current&&eU.current.setValue(e.text),e9(e.id),e6(!1)},className:`w-full px-3 py-2 text-left hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors ${e3===e.id?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[(0,l.jsx)("span",{className:"font-medium text-zinc-900 dark:text-zinc-100 text-sm",children:e.name}),e.description&&(0,l.jsx)("span",{className:"block text-xs text-zinc-500 truncate",children:e.description})]})},e.id))}),(0,l.jsx)("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:(0,l.jsx)("button",{type:"button",onClick:()=>{e6(!1),eX(!0)},className:"w-full px-3 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-zinc-100 dark:hover:bg-zinc-700 text-left",children:"Manage templates..."})})]})]})]})}),(0,l.jsx)(o6,{}),(0,l.jsxs)("form",{onSubmit:e=>{t1(e),t_(!1)},"data-tutorial":"smart-input",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(l4,{ref:eU,markerColors:K.markerColors,availablePeople:ts,availableProjects:tn,availablePriorities:tr,dateTimeSettings:K.dateTime,workHoursSettings:K.workHours,onAddPerson:tc,onAddProject:tm,onAddPriority:tx,onTokensChange:(e,t,s)=>{eO(e),eY(t),eH(s)},onEnterPress:()=>{t1(new Event("submit",{bubbles:!0,cancelable:!0})),t_(!1)}})}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,l.jsx)("button",{type:"button",onClick:()=>t_(!1),className:"px-6 py-3 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg",children:"Add Todo"})]})]})]})})}),tH&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:()=>tU(!1),children:(0,l.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-2xl max-w-md w-full",onClick:e=>e.stopPropagation(),children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Add Person"}),(0,l.jsx)("button",{onClick:()=>tU(!1),className:"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200 transition-colors",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.currentTarget),s=t.get("name"),n=t.get("alternatives").split(",").map(e=>e.trim()).filter(e=>e),r=t.get("color");s.trim()&&(ee({name:s.trim(),alternatives:n,color:(0,g.getColor)(r)}),tU(!1),e.currentTarget.reset())},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Name *"}),(0,l.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"John Doe",className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Alternatives (comma-separated)"}),(0,l.jsx)("input",{type:"text",name:"alternatives",placeholder:"Johnny, JD, John D.",className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Color"}),(0,l.jsx)("input",{type:"color",name:"color",defaultValue:"#3b82f6",className:"w-full h-10 rounded-lg cursor-pointer"})]}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:()=>tU(!1),className:"px-6 py-2 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg",children:"Add Person"})]})]})]})})}),tV&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:()=>tq(!1),children:(0,l.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-2xl max-w-md w-full",onClick:e=>e.stopPropagation(),children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Add Project"}),(0,l.jsx)("button",{onClick:()=>tq(!1),className:"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200 transition-colors",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.currentTarget),s=t.get("name"),n=t.get("alternatives").split(",").map(e=>e.trim()).filter(e=>e),r=t.get("color");s.trim()&&(ed({name:s.trim(),alternatives:n,color:(0,g.getColor)(r)}),tq(!1),e.currentTarget.reset())},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Name *"}),(0,l.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Website Redesign",className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Alternatives (comma-separated)"}),(0,l.jsx)("input",{type:"text",name:"alternatives",placeholder:"Web Redesign, Site Refresh",className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Color"}),(0,l.jsx)("input",{type:"color",name:"color",defaultValue:"#8b5cf6",className:"w-full h-10 rounded-lg cursor-pointer"})]}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:()=>tq(!1),className:"px-6 py-2 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg",children:"Add Project"})]})]})]})})}),tK&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:()=>tG(!1),children:(0,l.jsx)("div",{className:"bg-white dark:bg-zinc-900 rounded-xl shadow-2xl max-w-md w-full",onClick:e=>e.stopPropagation(),children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"Add Sprint"}),(0,l.jsx)("button",{onClick:()=>tG(!1),className:"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200 transition-colors",children:(0,l.jsx)(oe.CloseIcon,{className:"w-6 h-6"})})]}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=new FormData(e.currentTarget),s=t.get("name"),n=t.get("goal"),r=parseInt(t.get("durationDays"))||K.sprints?.defaultSprintDuration||14,a=t.get("plannedStartDate");s.trim()&&(ej({name:s.trim(),goal:n?.trim()||void 0,durationDays:r,plannedStartDate:a||void 0,color:void 0}),tG(!1),e.currentTarget.reset())},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Sprint Name *"}),(0,l.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Sprint 1",className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Duration (days)"}),(0,l.jsx)("input",{type:"number",name:"durationDays",min:1,defaultValue:K.sprints?.defaultSprintDuration||14,className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Planned Start Date (optional)"}),(0,l.jsx)("input",{type:"date",name:"plannedStartDate",className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-2",children:"Sprint Goal (optional)"}),(0,l.jsx)("textarea",{name:"goal",rows:2,placeholder:"What is the main objective of this sprint?",className:"w-full px-4 py-2 rounded-lg border border-zinc-300 dark:border-zinc-700 bg-white dark:bg-zinc-800 text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:()=>tG(!1),className:"px-6 py-2 bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-700 dark:hover:bg-zinc-600 text-zinc-900 dark:text-zinc-100 rounded-lg font-medium transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-md hover:shadow-lg",children:"Add Sprint"})]})]})]})})})]}),t0,th&&(0,l.jsx)(oK,{todos:k,scheduledTasks:tf,onToggle:w,onDelete:N,onEdit:S,onArchive:C,markerColors:K.markerColors,settings:K,linkPatterns:K.linkPatterns,onOpenDetails:e=>{tR(e)},onClose:()=>{tp(!1),ty(e=>e+1)},onStartTimeTracking:K.features.timeTracking?F:void 0,onStopTimeTracking:K.features.timeTracking?L:void 0}),tg&&(0,l.jsx)(oJ,{settings:K,onClose:()=>tb(!1)}),eQ&&(0,l.jsx)(d_,{templates:eA,onDelete:eM,onClose:()=>eX(!1)}),e0&&e2&&((i=k.find(e=>e.id===e2))?(0,l.jsx)(dH,{initialText:i.text,initialPlainText:i.plainText,initialMetadata:{assignedPeople:[...i.metadata.assignedPeople],sourcePeople:[...i.metadata.sourcePeople],mentionedPeople:[...i.metadata.mentionedPeople],projects:[...i.metadata.projects],dependencies:[],priority:i.metadata.priority,tags:[...i.metadata.tags??[]],dueDate:i.metadata.dueDate,duration:i.metadata.duration},subtasks:i.subtasks?.map(e=>e.text),onSave:(e,t,s)=>{let n=k.find(e=>e.id===e2);n&&eE({name:e,description:t,text:s.text?n.text:"",plainText:s.text?n.plainText:"",metadata:{assignedPeople:s.assignedPeople?[...n.metadata.assignedPeople]:[],sourcePeople:s.sourcePeople?[...n.metadata.sourcePeople]:[],mentionedPeople:[],projects:s.projects?[...n.metadata.projects]:[],dependencies:[],priority:s.priority?n.metadata.priority:void 0,tags:s.tags?[...n.metadata.tags??[]]:[],dueDate:s.dueDate?n.metadata.dueDate:void 0,duration:s.duration?n.metadata.duration:void 0},subtasks:s.subtasks?n.subtasks?.map(e=>e.text):void 0}),e4(null),e1(!1)},onClose:()=>{e1(!1),e4(null)}}):null),(0,l.jsx)(dn,{isOpen:tJ,onClose:()=>tZ(!1),onRestartTutorial:tA}),(0,l.jsx)(df,{isOpen:tw,onClose:()=>tN(!1),onComplete:tP,steps:db,showRememberChoice:!0,tutorialId:"main"}),tS&&(0,l.jsx)(df,{isOpen:!0,onClose:()=>tT(null),onComplete:tM,steps:tE(tS),showRememberChoice:!1,tutorialId:`view-${tS}`})]}):(0,l.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-zinc-900 dark:to-zinc-800",children:(0,l.jsx)("div",{className:"text-zinc-600 dark:text-zinc-400",children:"Loading..."})})}e.s(["TodoApp",()=>dU],33278)}]);